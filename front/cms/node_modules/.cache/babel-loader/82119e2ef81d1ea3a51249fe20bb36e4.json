{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/eslint-loader/index.js??ref--13-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/config/myAxios.js","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/config/myAxios.js","mtime":1639841830961},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7IC8vaW1wb3J0IHtiYXNlVXJsfSBmcm9tICcuL2Vudic7Ci8vICDorqnor7fmsYLlnKjmtY/op4jlmajkuK3lhYHorrjot6jln5/mkLrluKZjb29raWUKLy9heGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwovLyBheGlvcy5kZWZhdWx0cy5wb3N0WydDb250ZW50LXR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJyAvLyDor7fmsYLlpLTlr7nlupTmlbDmja7moLzlvI8KCnZhciBpbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgLy8gYmFzZVVybAogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgLy8g6LaF5pe2CiAgdGltZW91dDogMjAwMDAKfSk7IC8vIC8v6K+35rGC5oum5oiqCi8vIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZSggY29uZmlnPT57Ci8vICAgICBjb25zb2xlLmxvZyhjb25maWcpCi8vICAgICAvL+WkhOeQhnRva2VuCi8vICAgICAvLyAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKSB7Ci8vICAgIC8vICAgICBjb25maWcuaGVhZGVycy5BQ0NFU1NfVE9LRU4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKLy8gICAgLy8gIH0KLy8gICAgIHJldHVybiBjb25maWc7Ci8vIH0sZXJyb3I9PnsKLy8gICAgIC8v5a+56K+35rGC6ZSZ6K+v5YGa5Lqb5LuA5LmICi8vICAgIGNvbnNvbGUubG9nKGVycm9yKTsKLy8gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7Ci8vIH0pOwoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25zb2xlLmRlYnVnKCfor7fmsYLlj4LmlbDvvJonLCBjb25maWcpOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvL+i/lOWbnuaLpuaIqgoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAvLyAyMDDmraPnoa7vvIzov5Tlm57nu5PmnpwgCiAgY29uc29sZS5kZWJ1ZyhyZXNwb25zZSk7CgogIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICB9IGVsc2UgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIC8v6LaF5pe25aSE55CGICAKICB2YXIgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CgogIGlmIChlcnJvci5jb2RlID09PSAnRUNPTk5BQk9SVEVEJyAmJiBtZXNzYWdlLmluZGV4T2YoJ3RpbWVvdXQnKSA+IC0xKSB7CiAgICBjb25zb2xlLmVycm9yKCLor7fmsYLotoXml7bvvIHor7fmo4Dmn6XnvZHnu5zpl67popgiKTsgLy8gIGxldCBuZXdIdHRwPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSl7CiAgICAvLyAgICAgIHJlc29sdmUoKQogICAgLy8gIH0pCiAgICAvLyAgbmV3SHR0cOWunuS+i+aJp+ihjOWujOaIkOWQjuS8muWGjeasoeaJp+ihjAogICAgLy8gIOi/lOWbnuS4gOS4qnByb21pc2Xlrp7kvovvvIzlkIzml7bph43mlrDlj5Hotbfor7fmsYLvvIxjb25maWfor7fmsYLphY3nva7vvIzljIXmianor7fmsYLlpLTlkozor7fmsYLlj4LmlbAgCiAgICAvLyAgcmV0dXJuIG5ld0h0dHAudGhlbihmdW5jdGlvbiAoKXsKICAgIC8vICAgICAgcmV0dXJuICBheGlvcy5jcmVhdGUoe2Jhc2VVUkw6IGJhc2VVcmwsdGltZW91dDogMTAwMDB9KTsKICAgIC8vICB9KQoKICAgIHJldHVybjsKICB9CgogIGlmICg0MDAgPD0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzIDwgNTAwKSB7CiAgICB2YXIgdGltZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGltZXIiKTsKICAgIHZhciBjdXJyID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgaWYgKHRpbWVyID09PSBudWxsIHx8IHR5cGVvZiB0aW1lciA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgdGltZXIgPSAtMTsKICAgIH0KCiAgICB2YXIgY29kZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEuY29kZTsKICAgIGNvbnNvbGUuZXJyb3IoIuacjeWKoeWZqOmUmeivr++8jGNvZGUg77yaIiArIGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICBjb25zb2xlLmVycm9yKCLkuJrliqHplJnor6/vvIxjb2RlIO+8miIgKyBjb2RlKTsKICAgIGNvbnNvbGUuZXJyb3IoIiB0aW1lciBjb2RlID09PT0gPiAiICsgdGltZXIpOwogICAgY29uc29sZS5lcnJvcigiIGN1cnIgY29kZSA9PT09ID4gIiArIGN1cnIpOwoKICAgIGlmIChjb2RlID09PSAzMDA3IHx8IGNvZGUgPT09IDQwMDIgfHwgY29kZSA9PT0gMzAwNSkgewogICAgICBjb25zb2xlLmVycm9yKCJudGVydmFsIHRpbWU7ID09PT0gPiAiICsgKGN1cnIgLSB0aW1lcikpOwoKICAgICAgaWYgKGN1cnIgLSB0aW1lciA+IDEwMDApIHsKICAgICAgICB0aW1lciA9IGN1cnI7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRpbWVyIiwgY3Vycik7CiAgICAgICAgYWxlcnQoIueZu+W9leS/oeaBr+W3sui/h+acnyzor7fliY3lvoBNeVNhbGVz5Li76aG16L+b6KGM6YeN5paw55m75b2V77yM5oKo5pyq5Y+R5biD55qE5paH56ug5Lya5L+d5a2Y5Yiw6I2J56i/566xIik7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiLi4vbG9naW4iOyAvL3RpbWVyID0gY3VycjsgICAgICAgICAgIAogICAgICB9IC8vIHRpbWVyID0gc2V0VGltZW91dCgoKT0+ewogICAgICAvLyAgICAgYWxlcnQoIueZu+W9leS/oeaBr+W3sui/h+acnyzor7fliY3lvoBNeVNhbGVz5Li76aG16L+b6KGM6YeN5paw55m75b2V77yM5oKo5pyq5Y+R5biD55qE5paH56ug5Lya5L+d5a2Y5Yiw6I2J56i/566xIikKICAgICAgLy8gICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0aW1lciIsdGltZXIpCiAgICAgIC8vIH0sMTAwMCkKICAgICAgLy9pbnN0YW5jZS5sYXN0VGltZSA9IGN1cnJlbnRUaW1lCiAgICAgIC8vYWxlcnQoIueZu+W9leS/oeaBr+W3sui/h+acnyzor7fliY3lvoBNeVNhbGVz5Li76aG16L+b6KGM6YeN5paw55m75b2V77yM5oKo5pyq5Y+R5biD55qE5paH56ug5Lya5L+d5a2Y5Yiw6I2J56i/566xIikKICAgICAgLy93aW5kb3cubG9jYXRpb24uaHJlZiA9ICIuLi9sb2dpbiIgCiAgICAgIC8vd2luZG93Lm9wZW4oImh0dHA6Ly93d3cuYmFpZHUuY29tIikKCiAgICB9IC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgLy8gICAgIGFsZXJ0KCLnmbvlvZXkv6Hmga/lt7Lov4fmnJ8s6K+35YmN5b6ATXlTYWxlc+S4u+mhtei/m+ihjOmHjeaWsOeZu+W9le+8jOaCqOacquWPkeW4g+eahOaWh+eroOS8muS/neWtmOWIsOiNieeov+eusSIpIAogICAgLy8gfSwgMTAwMCk7CiAgICAvLyDmuIXpmaR0b2tlbgogICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIik7CiAgICAvLyDot7PovaznmbvlvZUKCgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAvLyAgICAgLy8gICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIvbG9naW4iOwogICAgLy8gfSwgMTAwMCk7CiAgfSBlbHNlIHsKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPj0gNTAwKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoIuacjeWKoeWZqOmUmeivr++8jGNvZGUg77yaICIgKyBlcnJvci5yZXNwb25zZS5zdGF0dXMpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5kZWJ1Zygi5pyN5Yqh5Zmo6ZSZ6K+v77yMY29kZSDvvJogIiArIGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICB9CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgaW5zdGFuY2U7"},{"version":3,"sources":["/Users/liuguanghui/Documents/cms_code/my-message/cms/src/config/myAxios.js"],"names":["axios","instance","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","console","debug","error","Promise","reject","response","status","resolve","data","message","code","indexOf","timer","localStorage","getItem","curr","Date","getTime","setItem","alert","window","location","href"],"mappings":"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","sourcesContent":["import axios from 'axios';\n//import {baseUrl} from './env';\n\n//  让请求在浏览器中允许跨域携带cookie\n//axios.defaults.withCredentials = true;\n// axios.defaults.post['Content-type'] = 'application/json' // 请求头对应数据格式\n\n\nconst instance = axios.create({\n    // baseUrl\n    baseURL: process.env.VUE_APP_BASE_API,\n    // 超时\n    timeout: 20000,\n\n})\n// //请求拦截\n// instance.interceptors.request.use( config=>{\n//     console.log(config)\n//     //处理token\n//     //  if (localStorage.getItem('token')) {\n//    //     config.headers.ACCESS_TOKEN = localStorage.getItem('token');\n//    //  }\n//     return config;\n// },error=>{\n//     //对请求错误做些什么\n//    console.log(error);\n//    return Promise.reject();\n// });\n\ninstance.interceptors.request.use(function (config) {\n    console.debug('请求参数：', config);\n    return config;\n}, error => {\n    return Promise.reject(error);\n});\n\n//返回拦截\ninstance.interceptors.response.use(response => {\n    // 200正确，返回结果 \n    console.debug(response)\n    if (response.status === 200) {\n        return Promise.resolve(response.data);\n    } else {\n        return Promise.reject(response);\n    }\n}, error => {\n    //超时处理  \n    const { message } = error;\n    if (error.code === 'ECONNABORTED' && message.indexOf('timeout') > -1) {\n        console.error(\"请求超时！请检查网络问题\");\n        //  let newHttp= new Promise(function (resolve){\n        //      resolve()\n        //  })\n        //  newHttp实例执行完成后会再次执行\n        //  返回一个promise实例，同时重新发起请求，config请求配置，包扩请求头和请求参数 \n        //  return newHttp.then(function (){\n        //      return  axios.create({baseURL: baseUrl,timeout: 10000});\n        //  })\n        return;\n    }\n\n    if (\n        400 <= error.response.status < 500\n    ) {\n        let timer = localStorage.getItem(\"timer\")\n        let curr = new Date().getTime()\n        if(timer === null || typeof timer === \"undefined\") {\n            timer = -1;\n        }\n        let code = error.response.data.code;\n        console.error(\"服务器错误，code ：\" + error.response.status);\n        console.error(\"业务错误，code ：\" + code);\n        console.error(\" timer code ==== > \" + timer)\n        console.error(\" curr code ==== > \" + curr)  \n       \n        if(code === 3007 || code === 4002 || code === 3005) {\n            console.error(\"nterval time; ==== > \" + (curr-timer)) \n            if(curr - timer > 1000) {\n                timer = curr;\n                localStorage.setItem(\"timer\",curr)\n                alert(\"登录信息已过期,请前往MySales主页进行重新登录，您未发布的文章会保存到草稿箱\")\n                window.location.href = \"../login\" \n                //timer = curr;           \n            }\n            // timer = setTimeout(()=>{\n            //     alert(\"登录信息已过期,请前往MySales主页进行重新登录，您未发布的文章会保存到草稿箱\")\n            //     localStorage.setItem(\"timer\",timer)\n            // },1000)\n            \n            //instance.lastTime = currentTime\n            //alert(\"登录信息已过期,请前往MySales主页进行重新登录，您未发布的文章会保存到草稿箱\")\n            //window.location.href = \"../login\" \n            \n            //window.open(\"http://www.baidu.com\")\n        }\n        // setTimeout(() => {\n        //     alert(\"登录信息已过期,请前往MySales主页进行重新登录，您未发布的文章会保存到草稿箱\") \n        // }, 1000);\n        // 清除token\n        // localStorage.removeItem(\"token\");\n        // 跳转登录\n        return Promise.reject(error)\n        // setTimeout(() => {\n        //     //   window.location.href = \"/login\";\n        // }, 1000);\n    } else {\n        if (error.response.status >= 500) {\n            console.debug(\"服务器错误，code ： \" + error.response.status);\n        } else {\n            console.debug(\"服务器错误，code ： \" + error.response.status);\n            return Promise.reject(error)\n        }\n    }\n});\n\nexport default instance;\n\n"]}]}