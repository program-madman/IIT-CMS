{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue","mtime":1640433935952},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2xpdWd1YW5naHVpL0RvY3VtZW50cy9jbXNfY29kZS9teS1tZXNzYWdlL2Ntcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRVc2VySW5mbyB9IGZyb20gIkAvYXBpL2dldERhdGEuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJTZWxlY3RQb3NpdGlvbjoge30sCiAgICAgIGNhcnJ5b3ZlclBvc2l0aW9uOiBbXSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgbG9hZGluZ0Vycm9yOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmc6IGZ1bmN0aW9uIExvYWRpbmcoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIi4vbG9naW5Mb2FkaW5nLnZ1ZSIpOwogICAgfSwKICAgIExvZ2luRXJyb3I6IGZ1bmN0aW9uIExvZ2luRXJyb3IoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2Vycm9yLXZpZXcudnVlIik7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgYXV0aG9yaXphdGlvbiA9IHRoaXMuJHJvdXRlLnF1ZXJ5OwogICAgY29uc29sZS5sb2coImF1dGhvcml6YXRpb24gPT09PT4gIiArIEpTT04uc3RyaW5naWZ5KGF1dGhvcml6YXRpb24pKTsKICAgIGNvbnNvbGUubG9nKGF1dGhvcml6YXRpb24pOwoKICAgIGlmIChhdXRob3JpemF0aW9uID09IG51bGwgfHwgdHlwZW9mIGF1dGhvcml6YXRpb24gPT0gInVuZGVmaW5lZCIpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIubG9naW5TdGF0dXMpIHsKICAgICAgICB0aGlzLnRvSW5kZXhQYWdlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5sb2FkaW5nRXJyb3IgPSB0cnVlOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyL3NldEF1dGhvcml6YXRpb24iLCBKU09OLnN0cmluZ2lmeShhdXRob3JpemF0aW9uKSk7CiAgICBnZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb25zb2xlLmxvZygidXNlcmluZm89PT09PT4iICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7CgogICAgICBpZiAocmVzID09IG51bGwgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgY29uc29sZS5sb2coIiBjb2RlIG15YmF5IG51bGwgIiArIHJlcy5jb2RlKTsKICAgICAgICBfdGhpcy5sb2FkaW5nRXJyb3IgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnBvc2l0aW9uTGlzdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzLmRhdGEucG9zaXRpb25MaXN0ID09PSAidW5kZWZpbmVkIiB8fCByZXMuZGF0YS5wb3NpdGlvbkxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgY29uc29sZS5sb2coInVzZXIgcG9zaXRpb24gaXMgbnVsbCA9PT0gPiIgKyBKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VySW5mby5wb3NpdGlvbkxpc3QpKTsKICAgICAgICBfdGhpcy5sb2FkaW5nRXJyb3IgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCI9PT0gZW50ZXIgbWFpbiBwYWdlID09PSIpOwoKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyL3NldFVzZXIiLCByZXMuZGF0YSk7CgogICAgICAgIHZhciBwb3NpdGlvbiA9IHJlcy5kYXRhLnBvc2l0aW9uTGlzdDsKICAgICAgICBjb25zb2xlLmxvZygidXNlciBwb3NpdGlvbnMgPT09PiAiICsgSlNPTi5zdHJpbmdpZnkocG9zaXRpb24pKTsKCiAgICAgICAgaWYgKHBvc2l0aW9uLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgY29uc29sZS5sb2coIj09PSB1c2VyIGhhcyBvbmxlIG9uZSBwb3NpdGlvbiA9PT0iKTsKICAgICAgICAgIF90aGlzLmRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgX3RoaXMudXNlclNlbGVjdFBvc2l0aW9uID0gcG9zaXRpb25bMF0uY29kZTsKCiAgICAgICAgICBfdGhpcy5vblNlbGVjdFBvc2l0aW9uKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCI9PT0gdXNlciBoYXMgbWFueSBwb3NpdGlvbiA9PT0gIik7CiAgICAgICAgICBfdGhpcy5jYXJyeW92ZXJQb3NpdGlvbiA9IHBvc2l0aW9uOwogICAgICAgICAgX3RoaXMuZGlhbG9nID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIGNvbnNvbGUubG9nKCIgb24gZXJyb3IgIiArIEpTT04uc3RyaW5naWZ5KGUpKTsKICAgICAgX3RoaXMubG9hZGluZ0Vycm9yID0gdHJ1ZTsKICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uU2VsZWN0UG9zaXRpb246IGZ1bmN0aW9uIG9uU2VsZWN0UG9zaXRpb24oKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXNlci9zZXRQb3NpdGlvbiIsIHRoaXMudXNlclNlbGVjdFBvc2l0aW9uKTsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy50b0luZGV4UGFnZSgpOwogICAgfSwKICAgIHRvSW5kZXhQYWdlOiBmdW5jdGlvbiB0b0luZGV4UGFnZSgpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sidXNlci9nZXRJbmRleFBhZ2UiXTsKCiAgICAgIGlmIChpbmRleCAhPSBudWxsICYmIF90eXBlb2YoaW5kZXgpICE9IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGluZGV4LnBhdGgpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-app>\n    <loading v-if=\"loading\" />\n    <login-error v-if=\"loadingError\" />\n    <template>\n      <v-row justify=\"space-around\">\n        <v-col cols=\"auto\">\n          <v-dialog\n            persistent\n            scrollable\n            v-model=\"dialog\"\n            transition=\"dialog-bottom-transition\"\n            max-width=\"600\"\n          >\n            <template >\n              <v-card>\n                <v-toolbar\n                  color=\"primary\"\n                  dark\n                >请选择您登录MyMessage的角色</v-toolbar>\n                <v-card-text>\n                  <v-radio-group v-model=\"userSelectPosition\">\n                      <v-radio\n                        class=\"mt-0\"\n                        v-for=\"(item,index) in carryoverPosition\"\n                        :key=\"index\"\n                        :value=\"item.code\"\n                      >\n                      <template v-slot:label>\n                        <v-col>\n                        <strong class=\"primary--text\">{{`${item.jobName}`}}</strong>\n                        <v-divider class=\"mt-1\"/>  \n                        </v-col>\n                    </template>   \n                                  \n                      </v-radio>  \n                    </v-radio-group>\n                </v-card-text>\n                \n              <div style=\"margin-top: 24px; height: 60px;margin-bottom:15px\">\n                <v-btn\n                style=\"margin-left: 190px;\"\n                :disabled=\"JSON.stringify(userSelectPosition) === '{}'\"\n                  depressed color=\"#1867C0\"  \n                  class=\"white--text\"\n                  min-width=\"205px\"\n                  height=\"36px\"\n                  @click=\"onSelectPosition\"\n                >\n                  确认\n                </v-btn>\n            </div>     \n              </v-card>\n            </template>\n          </v-dialog>\n        </v-col>\n      </v-row>\n    </template>\n</v-app>\n</template>\n\n<script>\nimport { getUserInfo } from \"@/api/getData.js\";\nexport default {\n  data() {\n    return {\n      userSelectPosition:{},\n      carryoverPosition:[],\n      dialog:false,\n      loading: true,\n      loadingError: false,\n    };\n  },\n  components: {\n    Loading: () => import(\"./loginLoading.vue\"),\n    LoginError: () => import(\"@/components/base/error-view.vue\"),\n  },\n  mounted() {\n    let authorization = this.$route.query;\n    console.log(\"authorization ====> \"+JSON.stringify(authorization))\n    console.log(authorization)\n\n    if (authorization == null || typeof authorization == \"undefined\") {\n      if (this.$store.state.user.loginStatus) {\n        this.toIndexPage();\n      } else {\n        this.loading = false;\n        this.loadingError = true;\n      }\n      return;\n    }\n\n    this.$store.commit(\"user/setAuthorization\",JSON.stringify(authorization));\n    getUserInfo()\n      .then((res) => {\n        console.log(\"userinfo=====>\" + JSON.stringify(res));\n        if (res == null || typeof res == \"undefined\" || res.code != 0) {\n          console.log(\" code mybay null \"+res.code)\n          this.loadingError = true;\n        } else if(res.data.positionList === null || typeof res.data.positionList === \"undefined\" || res.data.positionList.length === 0) { \n          console.log(\"user position is null === >\"+JSON.stringify(res.data.userInfo.positionList))\n          this.loadingError = true;\n        } else {\n          console.log(\"=== enter main page ===\")\n          this.$store.commit(\"user/setUser\", res.data);  \n          let position = res.data.positionList;\n          console.log(\"user positions ===> \"+JSON.stringify(position))\n          if(position.length === 1) {\n            console.log(\"=== user has onle one position ===\")\n            this.dialog = false;\n            this.userSelectPosition = position[0].code;\n            this.onSelectPosition();     \n          }else {\n            console.log(\"=== user has many position === \")\n            this.carryoverPosition = position;\n            this.dialog = true;\n          } \n        }\n      })\n      .catch((e) => {\n        console.log(\" on error \"+JSON.stringify(e))\n        this.loadingError = true;\n      })\n      .finally(() => {\n        this.loading = false;\n      });\n  },\n\n  methods: {\n    onSelectPosition() {\n        this.$store.commit(\"user/setPosition\", this.userSelectPosition);\n        this.dialog = false;\n        this.toIndexPage();\n    },\n    toIndexPage(){\n      var index = this.$store.getters[\"user/getIndexPage\"]\n      if(index != null && typeof index != undefined){\n          this.$router.push(index.path);\n      } \n    }\n  },\n\n};\n</script>\n"],"sourceRoot":"src/views"}]}