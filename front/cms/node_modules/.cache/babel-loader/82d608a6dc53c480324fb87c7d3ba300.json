{"remainingRequest":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/eslint-loader/index.js??ref--13-0!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/config/myAxios.js","dependencies":[{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/config/myAxios.js","mtime":1690270467806},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgc2hvd0xvZ2luQWxlcnQgfSBmcm9tICJAL3V0aWxzL3NuYWNrYmFyLmpzIjsgLy9pbXBvcnQgeyBEZWJvdW5jZSB9IGZyb20gIkAvdXRpbHMvdG9vbHMuanMiOwovL2ltcG9ydCB7IGlzTnVsbH0gZnJvbSAiQC91dGlscy9jb21tb24uanMiCi8vaW1wb3J0IHtiYXNlVXJsfSBmcm9tICcuL2Vudic7Ci8vICDorqnor7fmsYLlnKjmtY/op4jlmajkuK3lhYHorrjot6jln5/mkLrluKZjb29raWUKLy9heGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwovLyBheGlvcy5kZWZhdWx0cy5wb3N0WydDb250ZW50LXR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJyAvLyDor7fmsYLlpLTlr7nlupTmlbDmja7moLzlvI8KCnZhciBpbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgLy8gYmFzZVVybAogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgLy8g6LaF5pe2CiAgdGltZW91dDogMjAwMDAKfSk7Cmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uc29sZS5kZWJ1Zygn6K+35rGC5Y+C5pWw77yaJywgY29uZmlnKTsKICBjb25zb2xlLmxvZygiIyMjIyByZXF1ZXN0IHVybCBpcyAjIyMjIyAiICsgY29uZmlnLnVybCk7CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8v6L+U5Zue5oum5oiqCgppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vIDIwMOato+ehru+8jOi/lOWbnue7k+aenCAKICBjb25zb2xlLmRlYnVnKHJlc3BvbnNlLmRhdGEpOwogIGNvbnNvbGUuZGVidWcoIuivt+axgue7k+aenDpcbiIgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7CiAgY29uc29sZS5kZWJ1Zygib24gcmVzcG9uc2UgdXJsID09PT4gW1siICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuY29uZmlnLnVybCkgKyAiXSBzZXJ2ZXIgaGVhZGVycyA9PT4gIiArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmhlYWRlcnMpKTsKICBjb25zb2xlLmRlYnVnKCJvbiByZXNwb25zZSB1cmwgPT09PiBbWyIgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5jb25maWcudXJsKSArICJdIHNlcnZlciB0aWNrZXQgPT0+ICIgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5oZWFkZXJzWyd0aWNrZXQnXSkpOwogIGNvbnNvbGUuZGVidWcoIm9uIHJlc3BvbnNlIHVybCA9PT0+IFtbIiArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmNvbmZpZy51cmwpICsgIl0gc2VydmVyIGV4cF90aW1lID09PiAiICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuaGVhZGVyc1sndGlja2V0X2V4cCddKSk7CiAgY29uc29sZS5kZWJ1ZygiIyMgb24gc2VydmVyIHJlc3BvbnNlICMjICIsIHJlc3BvbnNlLmNvbmZpZyk7CgogIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICB9IGVsc2UgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIC8v6LaF5pe25aSE55CGICAKICB2YXIgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CiAgY29uc29sZS5kZWJ1ZygiPT09PT1yZXF1ZXN0IGVycm9yPT0+IiArIEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlKSk7CgogIGlmIChheGlvcy5pc0NhbmNlbChlcnJvcikpIHsKICAgIGNvbnNvbGUubG9nKCLnlKjmiLflj5bmtojnvZHnu5zor7fmsYIiKTsKICAgIHJldHVybjsKICB9CgogIGlmIChlcnJvci5jb2RlID09PSAnRUNPTk5BQk9SVEVEJyAmJiBtZXNzYWdlLmluZGV4T2YoJ3RpbWVvdXQnKSA+IC0xKSB7CiAgICBjb25zb2xlLmVycm9yKCLor7fmsYLotoXml7bvvIHor7fmo4Dmn6XnvZHnu5zpl67popgiKTsKICAgIHJldHVybjsKICB9CgogIGlmICg0MDAgPD0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzIDwgNTAwKSB7CiAgICB2YXIgY29kZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEuY29kZTsKICAgIGNvbnNvbGUuZXJyb3IoIuacjeWKoeWZqOmUmeivr++8jGNvZGUg77yaIiArIGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICBjb25zb2xlLmVycm9yKCLkuJrliqHplJnor6/vvIxjb2RlIO+8miIgKyBjb2RlKTsKICAgIGNvbnNvbGUuZXJyb3IoIm9uIGVycm9yID09PT09PT0+ICIgKyBKU09OLnN0cmluZ2lmeShlcnJvci5yZXNwb25zZS5oZWFkZXJzKSk7CgogICAgaWYgKGNvZGUgPT09IDMwMDcgfHwgY29kZSA9PT0gNDAwMiB8fCBjb2RlID09PSAzMDA1IHx8IGNvZGUgPT09IDQxIHx8IGNvZGUgPT09IDQwKSB7CiAgICAgIGNvbnNvbGUubG9nKCI9PT0+IG9uIHRva2VuIGV4cGlyZSA8PT09ICIpOwogICAgICBzaG93TG9naW5BbGVydCgpOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfSBlbHNlIHsKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPj0gNTAwKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoIuacjeWKoeWZqOmUmeivr++8jGNvZGUg77yaICIgKyBlcnJvci5yZXNwb25zZS5zdGF0dXMpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5kZWJ1Zygi5pyN5Yqh5Zmo6ZSZ6K+v77yMY29kZSDvvJogIiArIGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICB9CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgaW5zdGFuY2U7IC8vIGNvbnN0IHJlZnJlc2hUaWNrZXQgPSBEZWJvdW5jZShmdW5jdGlvbiAoKSB7Ci8vICAgICBsZXQgZXhwaXJlVGltZSA9IHN0b3JlLnN0YXRlLnVzZXIuZXhwaXJlVGltZQovLyAgICAgaWYodHlwZW9mIGV4cGlyZVRpbWUgPT09ICd1bmRlZmluZWQnIHx8IGV4cGlyZVRpbWUgPT09IG51bGwgfHwgZXhwaXJlVGltZSA9PT0gMCB8fCBleHBpcmVUaW1lID09PSAiIikgewovLyAgICAgICAgIGNvbnNvbGUubG9nKCJbW1tbdGhlIGV4cGlyZSB0aW1lIGlzIG51bGxdXV1dIikgICAKLy8gICAgICAgICByZXR1cm47Ci8vICAgICB9Ci8vICAgICAvL+WJqeS9mTEw5YiG6ZKf6L+H5pyf55qE5pe25YCZ77yM5Yi35pawdGlja2V0Ci8vICAgICBpZihleHBpcmVUaW1lIDw9IDEwMDAgKiA2MCAqIDEwKSB7Ci8vICAgICAgICAgY29uc29sZS5sb2coIndlIG5lZWQgcmVmcmVzaCB0aGUgdGlja2V0IGV4cGlyZSB0aW1lID09PT0+IFsiK2V4cGlyZVRpbWUrIl0iKSAgIAovLyAgICAgICAgIHJlZnJlc2hUaWNrZXRJZk5lZWQoKS50aGVuKChyZXNwKSA9PiB7Ci8vICAgICAgICAgICAgIGlmKGlzTnVsbChyZXNwKSB8fCByZXNwLmNvZGUgIT0gMCB8fCBpc051bGwocmVzcC5kYXRhKSkgewovLyAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiW1tbcmVmcmVzaF1dXSBlcnJvcl1dXSIpCi8vICAgICAgICAgICAgICAgICByZXR1cm47Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgbGV0IHRpY2tldCA9IHJlc3AuZGF0YS52YWx1ZQovLyAgICAgICAgICAgICBpZih0eXBlb2YgdGlja2V0ICE9PSAidW5kZWZpbmVkIiAmJiB0aWNrZXQgIT09IG51bGwgJiYgdGlja2V0ICE9PSAiIikgewovLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIltbW1sgcmVmcmVzaCB0aWNrZXQgaXMgPT09PT4gW1tbWyIrdGlja2V0KyJdXV1dXSIpIAovLyAgICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJ1c2VyL3NldFRpY2tldCIsdGlja2V0KTsgCi8vICAgICAgICAgICAgIH0KLy8gICAgICAgICB9KQovLyAgICAgfWVsc2UgewovLyAgICAgIGNvbnNvbGUubG9nKCJbW1tbVGhlIHJlZnJlc2ggdGltZSBlbm91Z2guIGlnbm9yZSBpdCA9PT4gWyIrZXhwaXJlVGltZSsiXV1dXV0iKSAgIAovLyAgICAgfSAKLy8gICB9LCA1MDAwKQ=="},{"version":3,"sources":["/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/config/myAxios.js"],"names":["axios","store","showLoginAlert","instance","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","console","debug","log","url","error","Promise","reject","response","data","JSON","stringify","headers","status","resolve","message","isCancel","code","indexOf"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport store from '@/store';\nimport { showLoginAlert } from \"@/utils/snackbar.js\";\n//import { Debounce } from \"@/utils/tools.js\";\n//import { isNull} from \"@/utils/common.js\"\n\n//import {baseUrl} from './env';\n\n//  让请求在浏览器中允许跨域携带cookie\n//axios.defaults.withCredentials = true;\n// axios.defaults.post['Content-type'] = 'application/json' // 请求头对应数据格式\n\n\nconst instance = axios.create({\n    // baseUrl\n    baseURL: process.env.VUE_APP_BASE_API,\n    // 超时\n    timeout: 20000,\n\n})\n\n\ninstance.interceptors.request.use(function (config) {\n    console.debug('请求参数：', config);\n    console.log(\"#### request url is ##### \"+config.url)\n   \n    return config;\n}, error => {\n    return Promise.reject(error);\n});\n\n//返回拦截\ninstance.interceptors.response.use(response => {\n    // 200正确，返回结果 \n    console.debug(response.data)\n    console.debug(\"请求结果:\\n\"+JSON.stringify(response.data));\n    console.debug(\"on response url ===> [[\"+JSON.stringify(response.config.url)+\"] server headers ==> \"+JSON.stringify(response.headers))\n    console.debug(\"on response url ===> [[\"+JSON.stringify(response.config.url)+\"] server ticket ==> \"+JSON.stringify(response.headers['ticket']))\n    console.debug(\"on response url ===> [[\"+JSON.stringify(response.config.url)+\"] server exp_time ==> \"+JSON.stringify(response.headers['ticket_exp']))\n    console.debug(\"## on server response ## \",response.config)\n    if (response.status === 200) {\n        return Promise.resolve(response.data);\n    } else {\n        return Promise.reject(response);\n    }\n}, error => {\n    //超时处理  \n    const { message } = error;\n    console.debug(\"=====request error==>\"+JSON.stringify(error.response))\n    if(axios.isCancel(error)){\n        console.log(\"用户取消网络请求\");\n        return;\n    }\n    if (error.code === 'ECONNABORTED' && message.indexOf('timeout') > -1) {\n        console.error(\"请求超时！请检查网络问题\");\n        return;\n    }\n\n    if (\n        400 <= error.response.status < 500\n    ) {\n        let code = error.response.data.code;\n        console.error(\"服务器错误，code ：\" + error.response.status);\n        console.error(\"业务错误，code ：\" + code);\n        console.error(\"on error =======> \"+JSON.stringify(error.response.headers))\n\n        if(code === 3007 || code === 4002 || code === 3005 || code === 41 || code === 40) {\n            console.log(\"===> on token expire <=== \")\n            showLoginAlert()\n        } \n        return Promise.reject(error)\n      \n    } else {\n        if (error.response.status >= 500) {\n            console.debug(\"服务器错误，code ： \" + error.response.status);\n        } else {\n            console.debug(\"服务器错误，code ： \" + error.response.status);\n            return Promise.reject(error)\n        }\n    }\n});\n\nexport default instance;\n\n\n// const refreshTicket = Debounce(function () {\n//     let expireTime = store.state.user.expireTime\n//     if(typeof expireTime === 'undefined' || expireTime === null || expireTime === 0 || expireTime === \"\") {\n//         console.log(\"[[[[the expire time is null]]]]\")   \n//         return;\n//     }\n//     //剩余10分钟过期的时候，刷新ticket\n//     if(expireTime <= 1000 * 60 * 10) {\n//         console.log(\"we need refresh the ticket expire time ====> [\"+expireTime+\"]\")   \n//         refreshTicketIfNeed().then((resp) => {\n//             if(isNull(resp) || resp.code != 0 || isNull(resp.data)) {\n//                 console.error(\"[[[refresh]]] error]]]\")\n//                 return;\n//             }\n//             let ticket = resp.data.value\n//             if(typeof ticket !== \"undefined\" && ticket !== null && ticket !== \"\") {\n//                 console.log(\"[[[[ refresh ticket is ====> [[[[\"+ticket+\"]]]]]\") \n//                 store.commit(\"user/setTicket\",ticket); \n//             }\n//         })\n//     }else {\n//      console.log(\"[[[[The refresh time enough. ignore it ==> [\"+expireTime+\"]]]]]\")   \n//     } \n//   }, 5000)\n\n"]}]}