{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/messageCenter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/messageCenter.vue","mtime":1640151305850},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2xpdWd1YW5naHVpL0RvY3VtZW50cy9jbXNfY29kZS9teS1tZXNzYWdlL2Ntcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRVc2VyTWVzc2FnZUxpc3QsIG1hcmtBbGxNZXNzYWdlUmVhZCwgbWFya01lc3NhZ2VSZWFkT25lIH0gZnJvbSAiQC9hcGkvZ2V0RGF0YS5qcyI7CmltcG9ydCB7IGp1bXBUb0RldGFpbCB9IGZyb20gIkAvdXRpbHMvY29tbW9uLmpzIjsKaW1wb3J0IHsgZ2V0TXNnUmVtaW5kZXJTdGF0dXNEZXNjIH0gZnJvbSAiQC91dGlscy9hcnRpY2xlVXRpbHMuanMiOwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIkAvdXRpbHMvZXZlbnQtYnVzIjsKZXhwb3J0IGRlZmF1bHQgewogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvL+WIneWni+WMli4uLi4uIOmcgOimgeWQl++8nwogICAgdGhpcy5tZXNzYWdlTWFwID0gbmV3IE1hcCgpOwogICAgdGhpcy5tZXNzYWdlRGF0ZXMgPSBbXTsKICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOwogICAgdGhpcy5sb2FkVXNlck1lc3NhZ2UodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5wYWdlTnVtYmVyKTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHBhZ2VMb2FkZXI6IGZ1bmN0aW9uIHBhZ2VMb2FkZXIoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIi4vYXJ0aWNsZUxpc3QvcGFnZUxvYWRlci52dWUiKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlTWFwOiBuZXcgTWFwKCksCiAgICAgIG1lc3NhZ2VEYXRlczogW10sCiAgICAgIHBhZ2VOdW1iZXI6IDEwLAogICAgICBjdXJyZW50UGFnZTogMQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENvbG9yOiBmdW5jdGlvbiBnZXRDb2xvcihtc2dTdGF0dXMpIHsKICAgICAgaWYgKG1zZ1N0YXR1cyA9PT0gIjAiKSByZXR1cm4gIiM5OTk5OTkiO2Vsc2UgaWYgKG1zZ1N0YXR1cyA9PT0gIjQiKSByZXR1cm4gIiNGNDQzMzYiO2Vsc2UgaWYgKG1zZ1N0YXR1cyA9PT0gIi0xIikgcmV0dXJuICIjMTg2N0MwIjtlbHNlIHJldHVybiAiIzE4NjdDMCI7CiAgICB9LAogICAgLy9nbyB0byBhcnRpY2xlIGRldGFpbCBwYWdlCiAgICB0b0RldGFpbDogZnVuY3Rpb24gdG9EZXRhaWwobWVzc2FnZSkgewogICAgICBqdW1wVG9EZXRhaWwodGhpcy4kcm91dGVyLCBtZXNzYWdlLm1lc3NhZ2VJZCk7CgogICAgICBpZiAobWVzc2FnZS5pc1JlYWQgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy5tYXJrT25jZVJlYWQobWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkxvYWRNb3JlOiBmdW5jdGlvbiBvbkxvYWRNb3JlKCkgewogICAgICBpZiAodGhpcy5sb2FkaW5nID09IHRydWUpIHJldHVybjsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5sb2FkVXNlck1lc3NhZ2UodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5wYWdlTnVtYmVyKTsKICAgIH0sCiAgICBtYXJrQWxsUmVhZDogZnVuY3Rpb24gbWFya0FsbFJlYWQoKSB7CiAgICAgIG1hcmtBbGxNZXNzYWdlUmVhZCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlICE9IG51bGwgJiYgcmVzcG9uc2UuY29kZSA9PT0gMCAmJiByZXNwb25zZS5tZXNzYWdlID09PSAic3VjY2VzcyIpIHsKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCJtYWtlQWxsTXNnUmVhZCIsICJhbGwgbWVzc2FnZSByZWFkZWQiKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCk7CiAgICB9LAogICAgbWFya09uY2VSZWFkOiBmdW5jdGlvbiBtYXJrT25jZVJlYWQobWVzc2FnZSkgewogICAgICBtYXJrTWVzc2FnZVJlYWRPbmUobWVzc2FnZS5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCAmJiByZXNwb25zZS5jb2RlID09PSAwICYmIHJlc3BvbnNlLm1lc3NhZ2UgPT09ICJzdWNjZXNzIikgewogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoIm1hcmtTaW5nbGVSZWFkIiwgIm9uZSBtZXNzYWdlIHJlYWRlZCIpOwogICAgICAgICAgbWVzc2FnZS5pc1JlYWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKTsKICAgIH0sCiAgICAvL3NldCBhbGwgdW5yZWFkIGFydGljbGVzIGFzIHJlYWQuCiAgICBhbGxSZWFkOiBmdW5jdGlvbiBhbGxSZWFkKCkgewogICAgICBjb25zb2xlLmxvZygic2V0IGFsbCBtZXNzYWdlIGFzIHJlYWQiKTsKICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5pbmZvLmZvckVhY2goZnVuY3Rpb24gKGkpIHsKICAgICAgICAgIGkucmVhZFN0YXR1cyA9IDE7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRVc2VyTWVzc2FnZTogZnVuY3Rpb24gbG9hZFVzZXJNZXNzYWdlKHBhZ2VOdW0sIHBhZ2VTaXplKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBnZXRVc2VyTWVzc2FnZUxpc3QocGFnZU51bSwgcGFnZVNpemUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuZmlsbERhdGFzKHJlc3BvbnNlKTsKICAgICAgfSkuY2F0Y2goKTsKICAgIH0sCiAgICBmaWxsRGF0YXM6IGZ1bmN0aW9uIGZpbGxEYXRhcyhyZXNwb25zZSkgewogICAgICBjb25zb2xlLmRlYnVnKCJyZXNwb25lIiArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7CgogICAgICBpZiAocmVzcG9uc2UgPT0gbnVsbCB8fCByZXNwb25zZS5kYXRhID09IG51bGwgfHwgcmVzcG9uc2UuZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UrKzsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBtZXNzYWdlID0gcmVzcG9uc2UuZGF0YVtpXTsKICAgICAgICB2YXIgZGF0ZSA9IG1lc3NhZ2Uub3BlcmF0aW9uVGltZS5zcGxpdCgiICIpOwogICAgICAgIHZhciBrZXkgPSAiIjsKICAgICAgICBjb25zb2xlLmxvZygiIyMjIyMjIyMgZGF0ZSA9PT09PT09PT0+ICMjIyMjIyMgIiArIEpTT04uc3RyaW5naWZ5KGRhdGUpKTsKCiAgICAgICAgaWYgKGRhdGUgIT0gbnVsbCAmJiBfdHlwZW9mKGtleSkgIT0gdW5kZWZpbmVkICYmIGRhdGUubGVuZ3RoID49IDIpIHsKICAgICAgICAgIGtleSA9IGRhdGVbMF07CiAgICAgICAgICBtZXNzYWdlLnRpbWUgPSBkYXRlWzFdOwogICAgICAgICAgbWVzc2FnZS5wcmVmaXhUaW1lID0ga2V5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBrZXkgPSBtZXNzYWdlLm9wZXJhdGlvblRpbWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoa2V5ICE9IG51bGwgJiYgX3R5cGVvZihrZXkpICE9IHVuZGVmaW5lZCAmJiBrZXkgIT0gIiIpIHsKICAgICAgICAgIHZhciBsaXN0ID0gdGhpcy5tZXNzYWdlTWFwLmdldChrZXkpOwoKICAgICAgICAgIGlmIChsaXN0ID09IG51bGwgfHwgX3R5cGVvZihsaXN0KSA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgbGlzdCA9IFtdOwogICAgICAgICAgfQoKICAgICAgICAgIG1lc3NhZ2UuY29sb3IgPSBtZXNzYWdlLmlzUmVhZCA/ICJncmV5IiA6ICJyZWQiOwogICAgICAgICAgbWVzc2FnZS5jYXJkQ29sb3IgPSBtZXNzYWdlLmlzUmVhZCA/ICJncmV5IiA6ICJibHVlLWdyZXkiOyAvLy0tLS0tIG1vY2sgZWZmZWN0IC0tLS0KICAgICAgICAgIC8vbWVzc2FnZS5jb2xvciA9IGkgJSAyID09PSAwID8gImdyZXkiIDogInJlZCI7CiAgICAgICAgICAvL21lc3NhZ2UuY2FyZENvbG9yID0gaSAlIDIgPT09IDAgPyAiZ3JleSIgOiAiaW5kaWdvIjsKICAgICAgICAgIC8vbWVzc2FnZS5pc1JlYWQgPSBpICUgMiA9PT0gMCA/IHRydWUgOiBmYWxzZTsKICAgICAgICAgIC8vLS0tLS0gbW9jayBlZmZlY3QgLS0tLQoKICAgICAgICAgIG1lc3NhZ2UudHlwZVRleHQgPSBnZXRNc2dSZW1pbmRlclN0YXR1c0Rlc2MobWVzc2FnZS5vcGVyYXRpb24pOwogICAgICAgICAgY29uc29sZS5sb2coInR5cGVUZXh0ID09PT09PT09PT0+IiArIG1lc3NhZ2UuY29sb3IpOwogICAgICAgICAgbGlzdC5wdXNoKG1lc3NhZ2UpOwogICAgICAgICAgdGhpcy5tZXNzYWdlTWFwLnNldChrZXksIGxpc3QpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5tZXNzYWdlRGF0ZXMgPSBBcnJheS5mcm9tKHRoaXMubWVzc2FnZU1hcC5rZXlzKCkpOyAvL2FsZXJ0KCJvbiByZXNwb25zZSBsZW5ndGggPj4+PiAiK0FycmF5LmZyb20odGhpcy5tZXNzYWdlRGF0ZXMpLmxlbmd0aCkKICAgIH0KICB9LAogIC8vU2V0IHRoZSBsZW5ndGggb2YgYSBwYXJhZ3JhcGgKICBmaWx0ZXJzOiB7CiAgICBsZW5ndGg6IGZ1bmN0aW9uIGxlbmd0aCh0ZXh0LCBfbGVuZ3RoKSB7CiAgICAgIHZhciBzdWZmaXggPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICIuLi4iOwoKICAgICAgaWYgKCF0ZXh0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGV4dC5sZW5ndGggPD0gX2xlbmd0aCkgewogICAgICAgIHJldHVybiB0ZXh0OwogICAgICB9CgogICAgICByZXR1cm4gKHRleHQgKyAiIikucmVwbGFjZSgvXG4vZywgIjxici8+Iikuc3Vic3RyaW5nKDAsIF9sZW5ndGgpICsgc3VmZml4OwogICAgfQogIH0KfTs="},{"version":3,"sources":["messageCenter.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-container fluid class=\"ml-0 mx-auto\">\n    <v-card class=\"mx-auto blue\">\n      <v-list two-line>\n        <v-card-actions>\n          <v-btn \n          v-if=\"messageDates.length > 0\"\n          min-width=\"105px\"\n          height=\"36px\"\n          depressed\n          dark\n          outlined\n          color=\"#1867C0FF\"\n          style=\"margin-left: 8px; margin-top:1px\"\n           @click=\"markAllRead\">全部已读</v-btn>\n        </v-card-actions>\n         <v-subheader \n         class=\"subtitle-1 my-n2 \" \n         v-text=\"'还没有任何消息'\"\n         v-if=\"messageDates.length === 0\"\n         />\n        \n        <template v-for=\"date in messageDates\">\n          <v-subheader\n            class=\"subtitle-2 my-n2\"\n            :key=\"date\"\n            v-text=\"date\"\n          ></v-subheader>\n          <template v-for=\"(msg) in messageMap.get(date)\">      \n              <v-row :key=\"msg.id\" >    \n              <v-list-item class=\"item\">\n                <v-list-item-content @click=\"toDetail(msg)\">\n                  <v-row class=\"message-list-text\">\n                    <span class=\"mt-n2\" v-if=\"msg.isRead === false\">\n                      <v-icon large color=\"red darken-3\">mdi-circle-small</v-icon>\n                    </span>\n                    <span class=\"ml-9\" v-else></span>\n                    <span class=\"ml-2 message-list-releasetime-text\"\n                      >{{ msg.releaseTime }}\n                    </span>\n                    <span class=\"ml-2 message-list-time-text\">{{ msg.time }}</span>\n                    <span class=\"ml-2 message-list-time-text\">{{ msg.operator }}</span>\n                    <span class=\"ml-2 message-list-operate-type-text\">{{ msg.typeText }} </span\n                    ><a class=\"ml-3 message-list-title-text\">{{ msg.messageTitle }} </a>\n                  </v-row>\n                  <v-divider\n                      class=\"my-sm-auto\"\n                  ></v-divider>\n                </v-list-item-content>\n              </v-list-item>\n              </v-row>\n          </template>\n        </template>\n      </v-list>\n    </v-card>\n    <page-loader @onLoadMore=\"onLoadMore\" />\n  </v-container>\n  <!--\n\n  <v-container style=\"max-width: 600px\">\n    <v-timeline dense :align-top=\"true\">\n      <template v-for=\"(date, pos) in messageDates\">\n        <v-timeline-item :key=\"pos + '_parent'\" class=\"white--text mb-1\">\n          <v-subheader class=\"subtitle-1 my-n2\" v-text=\"date\"></v-subheader>\n        </v-timeline-item>\n        <template v-for=\"msg in messageMap.get(date)\">\n           \n          <v-timeline-item\n            v-if=\"msg.isRead\"\n            :key=\"index+'_read'\"\n            class=\"mb-4\"\n            color=\"grey\"\n            icon-color=\"grey lighten-2\"\n            small\n          >\n            <v-card dark :color=\"'indigo'\" class=\"elevation-2\" @click=\"toDetail(msg)\">\n              <v-row>\n                <v-card-title class=\"text-h6 ml-3\">\n                  {{ msg.operator }}\n                </v-card-title>\n                <v-subheader\n                  class=\"subtitle-1 my-0 mt-2 ml-0\"\n                  v-text=\"msg.time\"\n                ></v-subheader>\n              </v-row>\n              <v-col>\n                <p class=\"ml-1\" :style=\"{ color: getColor(msg.operation) }\">\n                  {{ msg.typeText }}\n                </p>\n                <p class=\"ml-1\" :style=\"{ color: getColor('1') }\">\n                  {{ msg.messageTitle }}\n                </p>\n              </v-col>\n            </v-card>\n          </v-timeline-item>\n          \n          <v-timeline-item\n            :key=\"msg.id\"\n            class=\"mb-4\"\n            :color=\"msg.color\"\n            icon-color=\"grey lighten-2\"\n            small\n          >\n            <v-card\n              :dark=\"!msg.isRead\"\n              :color=\"msg.cardColor\"\n              class=\"elevation-2\"\n              @click=\"toDetail(msg)\"\n            >\n              <v-row>\n                <v-card-title class=\"text-h6 ml-3 mb-2\">\n                  {{ msg.operator }}\n                </v-card-title>\n\n                <v-subheader\n                  class=\"subtitle-1 my-0 mt-2 ml-0\"\n                  v-text=\"msg.time\"\n                ></v-subheader>\n              </v-row>\n\n              <v-col class=\"white\">\n                <p class=\"ml-1\" :style=\"{ color: getColor(msg.operation) }\">\n                  {{ msg.typeText }}\n                </p>\n                <p class=\"ml-1\" :style=\"{ color: getColor('1') }\">\n                  {{ msg.messageTitle }}\n                </p>\n                <v-spacer></v-spacer>\n              </v-col>\n            </v-card>\n          </v-timeline-item>\n        </template>\n      </template>\n    </v-timeline>\n    <page-loader @onLoadMore=\"onLoadMore\" /> \n  </v-container>\n  -->\n</template>\n\n<script>\nimport {\n  getUserMessageList,\n  markAllMessageRead,\n  markMessageReadOne,\n} from \"@/api/getData.js\";\nimport { jumpToDetail } from \"@/utils/common.js\";\nimport { getMsgReminderStatusDesc } from \"@/utils/articleUtils.js\";\nimport { EventBus } from \"@/utils/event-bus\";\nexport default {\n  mounted() {\n    //初始化..... 需要吗？\n    this.messageMap = new Map();\n    this.messageDates = [];\n    this.currentPage = 1;\n    this.loadUserMessage(this.currentPage, this.pageNumber);\n  },\n  components: {\n    pageLoader: () => import(\"./articleList/pageLoader.vue\"),\n  },\n  data: () => ({\n    messageMap: new Map(),\n    messageDates: [],\n    pageNumber: 10,\n    currentPage: 1,\n  }),\n  methods: {\n    getColor(msgStatus) {\n      if (msgStatus === \"0\") return \"#999999\";\n      else if (msgStatus === \"4\") return \"#F44336\";\n      else if (msgStatus === \"-1\") return \"#1867C0\";\n      else return \"#1867C0\";\n    },\n\n    //go to article detail page\n    toDetail(message) {\n      jumpToDetail(this.$router, message.messageId);\n      if (message.isRead === false) {\n        this.markOnceRead(message);\n      }\n    },\n\n    onLoadMore() {\n      if (this.loading == true) return;\n      this.loading = true;\n      this.loadUserMessage(this.currentPage, this.pageNumber);\n    },\n\n    markAllRead() {\n      markAllMessageRead()\n        .then((response) => {\n          if (\n            response != null &&\n            response.code === 0 &&\n            response.message === \"success\"\n          ) {\n            EventBus.$emit(\"makeAllMsgRead\", \"all message readed\");\n          }\n        })\n        .catch();\n    },\n\n    markOnceRead(message) {\n      markMessageReadOne(message.id)\n        .then((response) => {\n          if (\n            response != null &&\n            response.code === 0 &&\n            response.message === \"success\"\n          ) {\n            EventBus.$emit(\"markSingleRead\", \"one message readed\");\n            message.isRead = true;\n          }\n        })\n        .catch();\n    },\n\n    //set all unread articles as read.\n    allRead() {\n      console.log(\"set all message as read\");\n      this.items.forEach((item) => {\n        item.info.forEach((i) => {\n          i.readStatus = 1;\n        });\n      });\n    },\n\n    loadUserMessage(pageNum, pageSize) {\n      getUserMessageList(pageNum, pageSize)\n        .then((response) => {\n          this.fillDatas(response);\n        })\n        .catch();\n    },\n\n    fillDatas(response) {\n      console.debug(\"respone\" + JSON.stringify(response));\n      if (\n        response == null ||\n        response.data == null ||\n        response.data.length == 0\n      ) {\n        return;\n      }\n      this.loading = false;\n      this.currentPage++;\n      for (let i = 0; i < response.data.length; i++) {\n        let message = response.data[i];\n        let date = message.operationTime.split(\" \");\n        let key = \"\";\n        console.log(\"######## date =========> ####### \" + JSON.stringify(date));\n        if (date != null && typeof key != undefined && date.length >= 2) {\n          key = date[0];\n          message.time = date[1];\n          message.prefixTime = key;\n        } else {\n          key = message.operationTime;\n        }\n        if (key != null && typeof key != undefined && key != \"\") {\n          let list = this.messageMap.get(key);\n          if (list == null || typeof list == undefined) {\n            list = [];\n          }\n          message.color = message.isRead ? \"grey\" : \"red\";\n          message.cardColor = message.isRead ? \"grey\" : \"blue-grey\";\n          //----- mock effect ----\n          //message.color = i % 2 === 0 ? \"grey\" : \"red\";\n          //message.cardColor = i % 2 === 0 ? \"grey\" : \"indigo\";\n          //message.isRead = i % 2 === 0 ? true : false;\n          //----- mock effect ----\n          message.typeText = getMsgReminderStatusDesc(message.operation);\n          console.log(\"typeText ==========>\" + message.color);\n          list.push(message);\n          this.messageMap.set(key, list);\n        }\n      }\n      this.messageDates = Array.from(this.messageMap.keys());\n      //alert(\"on response length >>>> \"+Array.from(this.messageDates).length)\n    },\n  },\n\n  //Set the length of a paragraph\n  filters: {\n    length(text, length, suffix = \"...\") {\n      if (!text) {\n        return;\n      }\n      if (text.length <= length) {\n        return text;\n      }\n      return (text + \"\").replace(/\\n/g, \"<br/>\").substring(0, length) + suffix;\n    },\n  },\n};\n</script>\n<style scoped>\n.message-list-text {\n  font-family: PingFang SC;\n  font-weight: semibold;\n  font-size: 14px !important;\n  line-height: 20px;\n  letter-spacing: 0px;\n  text-align: left;\n}\n.message-list-releasetime-text {\n  opacity: 0.800000011920929;\n  color: #333333;\n}\n.message-list-time-text {\n  color: #666666;\n  font-family: Roboto;\n  font-weight: regular;\n}\n.message-list-operate-type-text{\n  color: #333333;\n  font-family: Roboto;\n  font-weight: regular;\n}\n.message-list-title-text{\n  color: #1867C0;\n  font-family: Roboto;\n  font-weight: regular;\n}\n</style>"],"sourceRoot":"src/views/page"}]}