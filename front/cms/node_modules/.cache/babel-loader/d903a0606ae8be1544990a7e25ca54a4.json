{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/eslint-loader/index.js??ref--13-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/utils/filesUtils.js","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/utils/filesUtils.js","mtime":1639987408470},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90aGlzID0gdGhpczsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiKTsKCmV4cG9ydHMuZ2V0RmlsZU5hbWVCeVBhdGggPSBmdW5jdGlvbiAocGF0aCkgewogIHZhciBpbmRleCA9IHBhdGgubGFzdEluZGV4T2YoIi8iKTsgLy8gbGFzdEluZGV4T2YoIi8iKSAg5om+5Yiw5pyA5ZCO5LiA5LiqICAvICDnmoTkvY3nva4KCiAgdmFyIGZpbGVOYW1lID0gcGF0aC5zdWJzdHIoaW5kZXggKyAxKTsgLy8gc3Vic3RyKCkg5oiq5Y+W5Ymp5L2Z55qE5a2X56ym77yM5Y2z5b6X5paH5Lu25ZCNeHh4LmRvYwoKICByZXR1cm4gZmlsZU5hbWU7Cn07CgpleHBvcnRzLmdldFVwbG9hZFJlYWxGaWxlTmFtZUJ5UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgdmFyIGZpbGVOYW1lID0gX3RoaXMuZ2V0RmlsZU5hbWVCeVBhdGgocGF0aCk7CgogIHZhciB0aW1lU3RhbXBJbmRleCA9IGZpbGVOYW1lLmxhc3RJbmRleE9mKCJfIik7CiAgdmFyIGV4dEluZGV4ID0gZmlsZU5hbWUubGFzdEluZGV4T2YoIi4iKTsKICByZXR1cm4gZmlsZU5hbWUuc3Vic3RyKDAsIHRpbWVTdGFtcEluZGV4KSArIGZpbGVOYW1lLnN1YnN0cihleHRJbmRleCk7Cn07CgpleHBvcnRzLmdldERpc3RyaWJ1dG9yTnVtYmVyQnlGaWxlTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgaWYgKCFuYW1lIHx8IG5hbWVbMF0gIT0gIlsiKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHJldHVybiBuYW1lLnN1YnN0cigxLCBuYW1lLmluZGV4T2YoIl0iKSAtIDEpOwp9OwoKZXhwb3J0cy5jaGVja1VwbG9hZEZpbGVUeXBlID0gZnVuY3Rpb24gKG5hbWUpIHsKICB2YXIgaWR4ID0gbmFtZS5sYXN0SW5kZXhPZigiLiIpOwoKICBpZiAoaWR4ICE9IC0xKSB7CiAgICB2YXIgZXh0ID0gbmFtZS5zdWJzdHIoaWR4ICsgMSkudG9VcHBlckNhc2UoKTsKICAgIGV4dCA9IGV4dC50b0xvd2VyQ2FzZSgpOwoKICAgIGlmIChleHQgIT0gJ3BkZicgJiYgZXh0ICE9ICdkb2MnICYmIGV4dCAhPSAnZG9jeCcgJiYgZXh0ICE9ICdqcGcnICYmIGV4dCAhPSAnanBlZycgJiYgZXh0ICE9ICd4bHMnICYmIGV4dCAhPSAneGxzeCcgJiYgZXh0ICE9ICd0eHQnKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGV4dDsKICAgIH0KICB9Cn07Cgp2YXIgVU5JVFMgPSBbIkIiLCAiS0IiLCAiTUIiLCAiR0IiLCAiVEIiLCAiUEIiLCAiRUIiLCAiWkIiLCAiWUIiXTsKdmFyIFNURVAgPSAxMDI0OwoKZXhwb3J0cy5yZWFkRmlsZVNpemVVbml0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgPT0gInVuZGVmaW5lZCIpIHJldHVybiAiIjsKICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUsIDEwKTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBVTklUUy5sZW5ndGg7IGkrKykgewogICAgaWYgKHZhbHVlIDwgTWF0aC5wb3coU1RFUCwgaSkpIHsKICAgICAgaWYgKFVOSVRTW2kgLSAxXSkgewogICAgICAgIHJldHVybiBmb3JtYXQodmFsdWUsIGkgLSAxKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlICsgVU5JVFNbaV07CiAgICB9CiAgfQoKICByZXR1cm4gX3RoaXMuZm9ybWF0KHZhbHVlLCBpIC0gMSk7Cn07CgpmdW5jdGlvbiBmb3JtYXQodmFsdWUsIHBvd2VyKSB7CiAgcmV0dXJuICh2YWx1ZSAvIE1hdGgucG93KFNURVAsIHBvd2VyKSkudG9GaXhlZCgyKSArIFVOSVRTW3Bvd2VyXTsKfQ=="},{"version":3,"sources":["/Users/liuguanghui/Documents/cms_code/my-message/cms/src/utils/filesUtils.js"],"names":["exports","getFileNameByPath","path","index","lastIndexOf","fileName","substr","getUploadRealFileNameByPath","timeStampIndex","extIndex","getDistributorNumberByFileName","name","indexOf","checkUploadFileType","idx","ext","toUpperCase","toLowerCase","UNITS","STEP","readFileSizeUnit","value","parseFloat","i","length","Math","pow","format","power","toFixed"],"mappings":"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","sourcesContent":["exports.getFileNameByPath = (path) => {\n  var index = path.lastIndexOf(\"/\"); // lastIndexOf(\"/\")  找到最后一个  /  的位置\n  var fileName = path.substr(index + 1); // substr() 截取剩余的字符，即得文件名xxx.doc\n\n  return fileName;\n};\n\nexports.getUploadRealFileNameByPath = (path) =>{\n  var fileName = this.getFileNameByPath(path);\n  var timeStampIndex = fileName.lastIndexOf(\"_\");\n  var extIndex = fileName.lastIndexOf(\".\");\n  return fileName.substr(0,timeStampIndex)+fileName.substr(extIndex)\n\n}\n\nexports.getDistributorNumberByFileName = (name) =>{\n  if(!name || name[0]!= \"[\"){\n    return null;\n  }\n  return name.substr(1,name.indexOf(\"]\")-1)\n}\n\n\nexports.checkUploadFileType = (name) =>{\n  var idx = name.lastIndexOf(\".\");\n  if (idx != -1) {\n    let ext = name.substr(idx + 1).toUpperCase();\n    ext = ext.toLowerCase();\n    if (ext != 'pdf' && \n        ext != 'doc' && \n        ext != 'docx' && \n        ext != 'jpg' && \n        ext != 'jpeg' && \n        ext != 'xls' && \n        ext != 'xlsx' &&\n        ext != 'txt') {\n      return null;\n    } else {\n      return ext;    \n    }\n  }\n}\n\nconst UNITS = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\nconst STEP =  1024;\nexports.readFileSizeUnit = (value) => {\n  if(!value || typeof(value) == \"undefined\") return \"\";\n  value = parseFloat(value, 10);\n  for (var i = 0; i < UNITS.length; i++) {\n    if (value < Math.pow(STEP, i)) {\n      if (UNITS[i - 1]) {\n        return format(value, i - 1);\n      }\n      return value + UNITS[i];\n    }\n  }\n  return this.format(value, i - 1);\n}\n\nfunction format(value, power) {\n  return (\n    (value / Math.pow(STEP, power)).toFixed(2) + UNITS[power]\n  );\n}\n\n"]}]}