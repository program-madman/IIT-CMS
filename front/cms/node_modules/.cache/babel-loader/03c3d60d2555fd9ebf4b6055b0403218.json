{"remainingRequest":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/eslint-loader/index.js??ref--13-0!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/store/modules/user.js","dependencies":[{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/store/modules/user.js","mtime":1640475499750},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgeyBtZW51cyB9IGZyb20gIi4vbWVudS5qcyI7CnZhciBzdGF0ZSA9IHsKICBhdXRob3JpemF0aW9uOiBudWxsLAogIGxvZ2luU3RhdHVzOiBmYWxzZSwKICB1c2VySW5mbzogewogICAgdG9rZW46IG51bGwsCiAgICBuYW1lOiAiIiwKICAgIHJvbGU6IG51bGwsCiAgICB1c2VySWQ6ICIiLAogICAgcG9zaXRpb25OYW1lOiAiIiwKICAgIG1lbnVMaXN0OiBbXSwKICAgIGRlYWxlck9iajogewogICAgICBjb21wYW55TmFtZTogIiIsCiAgICAgIGNvbXBhbnlDb2RlOiAiIiwKICAgICAgY29tcGFueVR5cGU6IG51bGwsCiAgICAgIGRlYWxlclR5cGU6IG51bGwsCiAgICAgIGFyZWE6ICIiLAogICAgICBwb3NpdGlvbnM6IG51bGwsCiAgICAgIHNlbGVjdGVkOiBudWxsCiAgICB9LAogICAgY29tcGFueUNvZGU6ICIiLAogICAgZGVwYXJ0bWVudDogIiIsCiAgICBzZW5kRGVhbGVyczogbnVsbAogIH0KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBzZXRVc2VyOiBmdW5jdGlvbiBzZXRVc2VyKHN0YXRlLCB1c2VyKSB7CiAgICAvLyDlj5jmm7TnirbmgIEKICAgIHN0YXRlLnVzZXJJbmZvID0gdXNlcjsKICAgIHN0YXRlLmxvZ2luU3RhdHVzID0gdHJ1ZTsgLy90aGlzLnN0b3JlU2Vzc2lvbihzdGF0ZSk7CiAgfSwKICBzZXRBdXRob3JpemF0aW9uOiBmdW5jdGlvbiBzZXRBdXRob3JpemF0aW9uKHN0YXRlLCBhdXRob3JpemF0aW9uKSB7CiAgICBzdGF0ZS5hdXRob3JpemF0aW9uID0gYXV0aG9yaXphdGlvbjsKICB9LAogIHNldFBvc2l0aW9uOiBmdW5jdGlvbiBzZXRQb3NpdGlvbihzdGF0ZSwgcG9zaXRpb24pIHsKICAgIHN0YXRlLnBvc2l0aW9uID0gcG9zaXRpb247CiAgfSwKICBzZXRUaWNrZXQ6IGZ1bmN0aW9uIHNldFRpY2tldChzdGF0ZSwgdGlja2V0KSB7CiAgICBzdGF0ZS50aWNrZXQgPSB0aWNrZXQ7CiAgfSwKICBzZXRUaWNrZXRFeHBpcmVUaW1lOiBmdW5jdGlvbiBzZXRUaWNrZXRFeHBpcmVUaW1lKHN0YXRlLCBleHBpcmVUaW1lKSB7CiAgICBzdGF0ZS5leHBpcmVUaW1lID0gZXhwaXJlVGltZTsKICB9LAogIHN0b3JlU2Vzc2lvbjogZnVuY3Rpb24gc3RvcmVTZXNzaW9uKHN0YXRlKSB7CiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhdXRob3JpemF0aW9uIiwgZXNjYXBlKHN0YXRlLmF1dGhvcml6YXRpb24pKTsKICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXJJbmZvIiwgZXNjYXBlKEpTT04uc3RyaW5naWZ5KHN0YXRlLnVzZXJJbmZvKSkpOwogICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgicG9zaXRpb24iLCBlc2NhcGUoc3RhdGUucG9zaXRpb24pKTsKICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInRpY2tldCIsIGVzY2FwZShzdGF0ZS50aWNrZXQpKTsKICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImV4cGlyZXRpbWUiLCBlc2NhcGUoc3RhdGUuZXhwaXJlVGltZSkpOwogIH0sCiAgcmVzZXREYXRhRnJvbVNlc3Npb246IGZ1bmN0aW9uIHJlc2V0RGF0YUZyb21TZXNzaW9uKHN0YXRlKSB7CiAgICB2YXIgdXNlckluZm8gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpOyAvLyBjb25zb2xlLmRlYnVnKCI9PT09PT09PT09PT09PT09PT4iK3VzZXJJbmZvKQoKICAgIGlmICh1c2VySW5mbyA9PSBudWxsIHx8IHR5cGVvZiB1c2VySW5mbyA9PSAidW5kZWZpbmVkIikgcmV0dXJuOwogICAgc3RhdGUubG9naW5TdGF0dXMgPSB0cnVlOwogICAgc3RhdGUuYXV0aG9yaXphdGlvbiA9IHVuZXNjYXBlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImF1dGhvcml6YXRpb24iKSk7CiAgICBzdGF0ZS5wb3NpdGlvbiA9IHVuZXNjYXBlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInBvc2l0aW9uIikpOwogICAgc3RhdGUudGlja2V0ID0gdW5lc2NhcGUoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidGlja2V0IikpOwogICAgc3RhdGUuZXhwaXJlVGltZSA9IHVuZXNjYXBlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImV4cGlyZXRpbWUiKSk7CiAgICBzdGF0ZS51c2VySW5mbyA9IEpTT04ucGFyc2UodW5lc2NhcGUodXNlckluZm8pKTsKICB9Cn07CnZhciBhY3Rpb25zID0ge307CnZhciBnZXR0ZXJzID0gewogIGhhc0VkaXRQZXJtaXNzaW9uOiBmdW5jdGlvbiBoYXNFZGl0UGVybWlzc2lvbihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXJJbmZvLm1lbnVMaXN0LmluZGV4T2YoMjEpID49IDA7CiAgfSwKICBwZXJtaXNzaW9uTGlzdDogZnVuY3Rpb24gcGVybWlzc2lvbkxpc3Qoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS51c2VySW5mby5tZW51TGlzdDsKICB9LAogIGdldEluZGV4UGFnZTogZnVuY3Rpb24gZ2V0SW5kZXhQYWdlKHN0YXRlKSB7CiAgICB2YXIgbWVudSA9IHN0YXRlLnVzZXJJbmZvLm1lbnVMaXN0OwogICAgbWVudS5zb3J0KCk7CiAgICB2YXIgaW5kZXggPSBtZW51LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbSA+IDEwICYmIGl0ZW0gPCAyMTsKICAgIH0pOwogICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuIG51bGw7CiAgICByZXR1cm4gbWVudXNbbWVudVtpbmRleF1dOwogIH0KfTsgLy/miopzdGF0ZSwgbXV0YXRpb25z562J5pq06Zyy5Ye65Y6744CCCgpleHBvcnQgZGVmYXVsdCB7CiAgLy/pnIDopoHlkb3lkI3nqbrpl7QKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zLAogIGdldHRlcnM6IGdldHRlcnMKfTs="},{"version":3,"sources":["/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/store/modules/user.js"],"names":["menus","state","authorization","loginStatus","userInfo","token","name","role","userId","positionName","menuList","dealerObj","companyName","companyCode","companyType","dealerType","area","positions","selected","department","sendDealers","mutations","setUser","user","setAuthorization","setPosition","position","setTicket","ticket","setTicketExpireTime","expireTime","storeSession","sessionStorage","setItem","escape","JSON","stringify","resetDataFromSession","getItem","unescape","parse","actions","getters","hasEditPermission","indexOf","permissionList","getIndexPage","menu","sort","index","findIndex","item","namespaced"],"mappings":"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","sourcesContent":["import { menus } from \"./menu.js\"\nconst state = {\n  authorization: null,\n  loginStatus: false,\n  userInfo: {\n    token: null,\n    name: \"\",\n    role: null,\n    userId: \"\",\n    positionName: \"\",\n    menuList: [],\n    dealerObj: {\n      companyName: \"\",\n      companyCode: \"\",\n      companyType: null,\n      dealerType: null,\n      area: \"\",\n      positions: null,\n      selected: null\n    },\n    companyCode: \"\",\n    department: \"\",\n    sendDealers: null\n  }\n};\n\nconst mutations = {\n  setUser(state, user) {\n    // 变更状态\n    state.userInfo = user;\n    state.loginStatus = true;\n    //this.storeSession(state);\n  },\n  setAuthorization(state, authorization) {\n    state.authorization = authorization;\n  },\n  setPosition(state, position){\n    state.position = position\n  },\n  setTicket(state, ticket){\n    state.ticket = ticket\n  },\n  setTicketExpireTime(state, expireTime){\n    state.expireTime = expireTime\n  },\n  storeSession(state) {\n    sessionStorage.setItem(\"authorization\", escape(state.authorization))\n    sessionStorage.setItem(\"userInfo\", escape(JSON.stringify(state.userInfo)));\n    sessionStorage.setItem(\"position\", escape(state.position));\n    sessionStorage.setItem(\"ticket\", escape(state.ticket));\n    sessionStorage.setItem(\"expiretime\", escape(state.expireTime));\n\n  },\n  resetDataFromSession(state) {\n    let userInfo = sessionStorage.getItem(\"userInfo\")\n    // console.debug(\"=================>\"+userInfo)\n    if (userInfo == null || typeof (userInfo) == \"undefined\") return\n\n    state.loginStatus = true;\n    state.authorization = unescape(sessionStorage.getItem(\"authorization\"));\n    state.position = unescape(sessionStorage.getItem(\"position\"))\n    state.ticket = unescape(sessionStorage.getItem(\"ticket\"))\n    state.expireTime = unescape(sessionStorage.getItem(\"expiretime\"))\n    state.userInfo = JSON.parse(unescape(userInfo));\n  },\n};\n\n\nconst actions = {\n\n};\nconst getters = {\n  hasEditPermission: state => {\n    return state.userInfo.menuList.indexOf(21) >= 0;\n  },\n  permissionList: state => {\n    return state.userInfo.menuList;\n  },\n  getIndexPage: state => {\n    let menu = state.userInfo.menuList\n    menu.sort();\n    let index = menu.findIndex(item => item > 10 && item < 21);\n    if (index < 0) return null;\n    return menus[menu[index]];\n  }\n};\n\n\n//把state, mutations等暴露出去。\nexport default {\n  //需要命名空间\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n}"]}]}