{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue","mtime":1639763210648},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2xpdWd1YW5naHVpL0RvY3VtZW50cy9jbXNfY29kZS9teS1tZXNzYWdlL2Ntcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRVc2VySW5mbyB9IGZyb20gIkAvYXBpL2dldERhdGEuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIGxvYWRpbmdFcnJvcjogZmFsc2UKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nOiBmdW5jdGlvbiBMb2FkaW5nKCkgewogICAgICByZXR1cm4gaW1wb3J0KCIuL2xvZ2luTG9hZGluZy52dWUiKTsKICAgIH0sCiAgICBMb2dpbkVycm9yOiBmdW5jdGlvbiBMb2dpbkVycm9yKCkgewogICAgICByZXR1cm4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9lcnJvci12aWV3LnZ1ZSIpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGF1dGhvcml6YXRpb24gPSB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgIGNvbnNvbGUubG9nKCJhdXRob3JpemF0aW9uID09PT0+ICIgKyBKU09OLnN0cmluZ2lmeShhdXRob3JpemF0aW9uKSk7CiAgICBjb25zb2xlLmxvZyhhdXRob3JpemF0aW9uKTsKCiAgICBpZiAoYXV0aG9yaXphdGlvbiA9PSBudWxsIHx8IHR5cGVvZiBhdXRob3JpemF0aW9uID09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmxvZ2luU3RhdHVzKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImFsbEFydGljbGUiCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5sb2FkaW5nRXJyb3IgPSB0cnVlOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyL3NldEF1dGhvcml6YXRpb24iLCBKU09OLnN0cmluZ2lmeShhdXRob3JpemF0aW9uKSk7CiAgICBnZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb25zb2xlLmxvZygidXNlcmluZm89PT09PT4iICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7CgogICAgICBpZiAocmVzID09IG51bGwgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgX3RoaXMubG9hZGluZ0Vycm9yID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyL3NldFVzZXIiLCByZXMuZGF0YSk7CgogICAgICAgIHZhciBpbmRleCA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzWyJ1c2VyL2dldEluZGV4UGFnZSJdOwoKICAgICAgICBpZiAoaW5kZXggIT0gbnVsbCAmJiBfdHlwZW9mKGluZGV4KSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaChpbmRleC5wYXRoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMubG9hZGluZ0Vycm9yID0gdHJ1ZTsKICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;AAQA,SAAA,WAAA,QAAA,kBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,IADA;AAEA,MAAA,YAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AAAA,aAAA,OAAA,oBAAA,CAAA;AAAA,KADA;AAEA,IAAA,UAAA,EAAA;AAAA,aAAA,OAAA,kCAAA,CAAA;AAAA;AAFA,GAPA;AAWA,EAAA,OAXA,qBAWA;AAAA;;AACA,QAAA,aAAA,GAAA,KAAA,MAAA,CAAA,KAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,yBAAA,IAAA,CAAA,SAAA,CAAA,aAAA,CAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,aAAA;;AAEA,QAAA,aAAA,IAAA,IAAA,IAAA,OAAA,aAAA,IAAA,WAAA,EAAA;AACA,UAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,WAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA,OAFA,MAEA;AACA,aAAA,OAAA,GAAA,KAAA;AACA,aAAA,YAAA,GAAA,IAAA;AACA;;AACA;AACA;;AAEA,SAAA,MAAA,CAAA,MAAA,CAAA,uBAAA,EAAA,IAAA,CAAA,SAAA,CAAA,aAAA,CAAA;AACA,IAAA,WAAA,GACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,mBAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA;;AACA,UAAA,GAAA,IAAA,IAAA,IAAA,OAAA,GAAA,IAAA,WAAA,IAAA,GAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,cAAA,EAAA,GAAA,CAAA,IAAA;;AACA,YAAA,KAAA,GAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA,mBAAA,CAAA;;AACA,YAAA,KAAA,IAAA,IAAA,IAAA,QAAA,KAAA,KAAA,SAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA;AACA;AAEA;AACA,KAbA,EAcA,KAdA,CAcA,YAAA;AACA,MAAA,KAAA,CAAA,YAAA,GAAA,IAAA;AACA,KAhBA,EAiBA,OAjBA,CAiBA,YAAA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,KAnBA;AAoBA;AA/CA,CAAA","sourcesContent":["<template>\n  <v-app>\n    <loading v-if=\"loading\" />\n    <login-error v-if=\"loadingError\" />\n  </v-app>\n</template>\n\n<script>\nimport { getUserInfo } from \"@/api/getData.js\";\nexport default {\n  data() {\n    return {\n      loading: true,\n      loadingError: false,\n    };\n  },\n  components: {\n    Loading: () => import(\"./loginLoading.vue\"),\n    LoginError: () => import(\"@/components/base/error-view.vue\"),\n  },\n  mounted() {\n    let authorization = this.$route.query;\n    console.log(\"authorization ====> \"+JSON.stringify(authorization))\n    console.log(authorization)\n\n    if (authorization == null || typeof authorization == \"undefined\") {\n      if (this.$store.state.user.loginStatus) {\n        this.$router.push({name:\"allArticle\"});\n      } else {\n        this.loading = false;\n        this.loadingError = true;\n      }\n      return;\n    }\n\n    this.$store.commit(\"user/setAuthorization\",JSON.stringify(authorization));\n    getUserInfo()\n      .then((res) => {\n        console.log(\"userinfo=====>\" + JSON.stringify(res));\n        if (res == null || typeof res == \"undefined\" || res.code != 0) {\n          this.loadingError = true;\n        } else {\n          this.$store.commit(\"user/setUser\", res.data);\n          var index = this.$store.getters[\"user/getIndexPage\"]\n          if(index != null && typeof index != undefined){\n            this.$router.push(index.path);\n          }\n          \n        }\n      })\n      .catch(() => {\n        this.loadingError = true;\n      })\n      .finally(() => {\n        this.loading = false;\n      });\n  },\n};\n</script>\n"],"sourceRoot":"src/views"}]}