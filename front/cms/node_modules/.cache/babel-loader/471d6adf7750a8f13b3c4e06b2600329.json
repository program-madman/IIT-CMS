{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/thread-loader/dist/cjs.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/articleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/articleDetail.vue","mtime":1641464435139},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQXBwZW5kVmlldyBmcm9tICdAL2NvbXBvbmVudHMvYXBwZW5kVmlldy52dWUnOwppbXBvcnQgUmVwb3J0VmlldyBmcm9tICdAL2NvbXBvbmVudHMvc3RhdGlzdGljYWxSZXBvcnRWaWV3LnZ1ZSc7CmltcG9ydCBSYW5nZVZpZXcgZnJvbSAnQC9jb21wb25lbnRzL3Zpc2lhYmxlUmFuZ2VWaWV3LnZ1ZSc7CmltcG9ydCB2b3RlUmVzdWx0VmlldyBmcm9tICcuL3B1Ymxpc2hBcnRpY2xlL3ZvdGVSZXN1bHQudnVlJzsKaW1wb3J0IHsgaXNOdWxsIH0gZnJvbSAiQC91dGlscy9jb21tb24uanMiOwppbXBvcnQgeyBzaG93U25hY2tiYXIgfSBmcm9tICJAL3V0aWxzL3NuYWNrYmFyLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBUaHJvdHRsZSB9IGZyb20gIkAvdXRpbHMvdG9vbHMuanMiOwppbXBvcnQgeyBnZXRBcnRpY2xlRGV0YWlsLCBnZXRBcnRpY2xlTG9nIGFzIF9nZXRBcnRpY2xlTG9nLCB1cGxvYWRGaWxlLCBnZXREZXRhaWxBcHBlbmQsIGdldEFydGljbGVSZXBvcnRBdXRob3IsIGdldEFydGljbGVSZXBvcnRWaWV3ZXIsIGdldERldGFpbFRvUmVwb3J0LCBnZXRBbGxEb3dubG9hZFVybEluQURWaWV3LCBtZXNzYWdlUmVhZCB9IGZyb20gIkAvYXBpL2dldERhdGEuanMiOwppbXBvcnQgeyBnZXRNc2dTdGF0dXNEZXNjIH0gZnJvbSAiQC91dGlscy9hcnRpY2xlVXRpbHMuanMiOwppbXBvcnQgeyBkb3dubG9hZEZpbGVCeVVybCB9IGZyb20gIkAvdXRpbHMvZG93bmxvYWQuanMiOwppbXBvcnQgeyBjaGVja1VwbG9hZEZpbGVUeXBlLCByZWFkRmlsZVNpemVVbml0IH0gZnJvbSAiQC91dGlscy9maWxlc1V0aWxzLmpzIjsKaW1wb3J0IHsgYWVzRGVjcnlwdCB9IGZyb20gIkAvdXRpbHMvZW5jcnlwdGlvbi5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBcHBlbmRWaWV3OiBBcHBlbmRWaWV3LAogICAgUmVwb3J0VmlldzogUmVwb3J0VmlldywKICAgIFJhbmdlVmlldzogUmFuZ2VWaWV3LAogICAgdm90ZVJlc3VsdFZpZXc6IHZvdGVSZXN1bHRWaWV3LAogICAgZmlsZUl0ZW06IGZ1bmN0aW9uIGZpbGVJdGVtKCkgewogICAgICByZXR1cm4gaW1wb3J0KCIuL3B1Ymxpc2hBcnRpY2xlL2ZpbGVPcHRpb24udnVlIik7CiAgICB9LAogICAgY29uZmlybTogZnVuY3Rpb24gY29uZmlybSgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiQC9jb21wb25lbnRzL2Jhc2UvY29uZm9ybS52dWUiKTsKICAgIH0sCiAgICBwYWdlTG9hZGVyOiBmdW5jdGlvbiBwYWdlTG9hZGVyKCkgewogICAgICByZXR1cm4gaW1wb3J0KCIuL2FydGljbGVMaXN0L3BhZ2VMb2FkZXIudnVlIik7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZE1vcmU6IGZhbHNlLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgY2F1dGlvbjogZmFsc2UsCiAgICAgIGNhdXRpb25UZXh0OiAi5Zue5aSN5raI5oGv5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VIiwKICAgICAgY2F1dGlvblRpbWVvdXQ6IDE1MDAsCiAgICAgIGJhY2tEYXRhOiB7fSwKICAgICAgYXBwZW5kQmFja0RhdGE6IHt9LAogICAgICBjaGFuZ0hpc3Rvcnk6IFtdLAogICAgICAvL+aWh+acrOWbnuWkjQogICAgICB0ZXh0UmVwbHk6IFtdLAogICAgICAvL+mZhOS7tuWbnuWkjQogICAgICBhdHRhY2htZW50UmVwbHk6IFtdLAogICAgICB0ZXh0UnVsZTogewogICAgICAgIG1lc3NhZ2U6ICcnLAogICAgICAgIHJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiB2Lmxlbmd0aCA8PSAyNSB8fCAnTWF4IDI1IGNoYXJhY3RlcnMnOwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIC8v5piv5ZCm5pivYWRtaW7nlKjmiLcKICAgICAgaXNBZG1pbjogZmFsc2UsCiAgICAgIC8v5YWz6ZetZGlhbG9nCiAgICAgIGNsb3NlRGlhbG9nX3JlcG9ydDogZmFsc2UsCiAgICAgIGNsb3NlRGlhbG9nX3NlZTogZmFsc2UsCiAgICAgIC8v5b2T5YmN6YCJ5Lit55qEZGlhbG9nIOm7mOiupDAg5pyq6YCJ5oupZGlhbG9nLCAxLuWPr+ingeiMg+WbtO+8jDIu57uf6K6h5oql5ZGKCiAgICAgIG5vd0RpYWxvZzogMCwKICAgICAgLy/mlofnq6DnirbmgIEKICAgICAgbXNnVGV4dDogJycsCiAgICAgIC8v6YCJ5oup55qE5oqV56WoaXRlbQogICAgICByYWRpb0dyb3VwOiAwLAogICAgICAvL+aZrumAmumZhOS7tgogICAgICBmZWViYWNrQmFja1R5cGU6IC0xLAogICAgICBjb21tb25GaWxlczogW10sCiAgICAgIC8v5a6a5ZCR6ZmE5Lu2CiAgICAgIGRpcmVjdGlvbmFsRmlsZXM6IFtdLAogICAgICAvL+aKleelqOaMiemSrueKtuaAgQogICAgICB2b3RlRGlzYWJsZTogdHJ1ZSwKICAgICAgLy/mipXnpajnu5PmnpwKICAgICAgdm90ZXM6IFtdLAogICAgICAvL+WbnuWkjeWGheWuuQogICAgICByZXBvcnRDb3RlbnQ6ICIiLAogICAgICAvL+aWh+eroGlkCiAgICAgIG1zZ0lkOiAnJywKICAgICAgLy/mmK/lkKbku47miJHnmoTlj5HluIPov5vlhaXnmoQKICAgICAgaXNNeVB1Ymxpc2g6IGZhbHNlLAogICAgICAvL+iOt+WPlueahOWbnuWkjeS/oeaBryzlhYjotYvpu5jorqTlgLzjgILpmLLmraLmuLLmn5Plh7rplJkKICAgICAgcmVwb3J0czoge30sCiAgICAgIC8v5Zue5aSN6ZmE5Lu2CiAgICAgIHVwbG9hZEZpbGVOb3JtYWw6IFtdLAogICAgICAvL+WumuaXtuWZqAogICAgICB0aW1lb3V0OiBudWxsLAogICAgICBpc0NvbW1vbkZpbGVzRG93bmxvYWRMb2FkaW5nOiBmYWxzZSwKICAgICAgaXNEaXJlY3Rpb25hbEZpbGVzRG93bmxvYWRMb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICByYWRpb0dyb3VwOiBmdW5jdGlvbiByYWRpb0dyb3VwKG9sZFZhbCwgbmV3VmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCdyYWRpb0dyb3VwLS0tJyArIG5ld1ZhbCArICIgb2xkVmFsOiIgKyBvbGRWYWwgKyAiICBjdXJyZW50OiIgKyB0aGlzLnJhZGlvR3JvdXApOyAvL+acqumAieaLqeaKleelqOmAiemhuQoKICAgICAgaWYgKHRoaXMucmFkaW9Hcm91cCA9PSAwKSB7CiAgICAgICAgdGhpcy52b3RlRGlzYWJsZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy52b3RlRGlzYWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBiZWZvcmVSb3V0ZVVwZGF0ZTogZnVuY3Rpb24gYmVmb3JlUm91dGVVcGRhdGUodG8sIGZyb20sIG5leHQpIHsKICAgIG5leHQoKTsKICAgIHRoaXMuaW5pdGlhbGl6ZSgpOwogIH0sCiAgLy9rZWVwQWxpdmXnlJ/lkb3lkajmnJ8g5aSa5qyh5omn6KGMIGFjdGl2YXRlZCDlj6rmiafooYzkuIDmrKFtb3VudGVkCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdGlhbGl6ZSgpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMubm93RGlhbG9nID0gMDsKICB9LAogIGRlYWN0aXZhdGVkOiBmdW5jdGlvbiBkZWFjdGl2YXRlZCgpIHsKICAgIHRoaXMudGltZW91dC5jbGVhckltbWVkaWF0ZSgpOwogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7Ly8g6ZSA5q+B5LqL5Lu2CiAgICAvLyB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxUb1RvcCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkxvYWRNb3JlOiBmdW5jdGlvbiBvbkxvYWRNb3JlKCkgewogICAgICBpZiAodGhpcy5sb2FkTW9yZSA9PSB0cnVlIHx8ICF0aGlzLmlzTXlQdWJsaXNoKSByZXR1cm47CiAgICAgIHRoaXMubG9hZE1vcmUgPSB0cnVlOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBtc2dJZDogdGhpcy5tc2dJZCwKICAgICAgICBwYWdlTnVtOiArK3RoaXMuY3VycmVudFBhZ2UKICAgICAgfTsKICAgICAgdGhpcy5nZXRSZXBvcnRzKGRhdGEpOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5sb2FkTW9yZSA9IGZhbHNlOwogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgdGhpcy5jYXV0aW9uOwogICAgICB0aGlzLmJhY2tEYXRhID0ge307CiAgICAgIHRoaXMuYXBwZW5kQmFja0RhdGEgPSB7fTsKICAgICAgdGhpcy5jaGFuZ0hpc3RvcnkgPSBbXTsKICAgICAgdGhpcy50ZXh0UmVwbHkgPSBbXTsKICAgICAgdGhpcy5hdHRhY2htZW50UmVwbHkgPSBbXTsKICAgICAgdGhpcy5pc0FkbWluID0gZmFsc2U7CiAgICAgIHRoaXMuY2xvc2VEaWFsb2dfcmVwb3J0ID0gZmFsc2U7CiAgICAgIHRoaXMuY2xvc2VEaWFsb2dfc2VlID0gZmFsc2U7CiAgICAgIHRoaXMubm93RGlhbG9nID0gMDsKICAgICAgdGhpcy5tc2dUZXh0ID0gJyc7CiAgICAgIHRoaXMucmFkaW9Hcm91cCA9IDA7CiAgICAgIHRoaXMuZmVlYmFja0JhY2tUeXBlID0gLTE7CiAgICAgIHRoaXMuY29tbW9uRmlsZXMgPSBbXTsKICAgICAgdGhpcy5kaXJlY3Rpb25hbEZpbGVzID0gW107CiAgICAgIHRoaXMudm90ZURpc2FibGUgPSB0cnVlOwogICAgICB0aGlzLnZvdGVzID0gW107CiAgICAgIHRoaXMucmVwb3J0Q290ZW50ID0gIiI7CiAgICAgIHRoaXMubXNnSWQgPSAnJzsKICAgICAgdGhpcy5pc015UHVibGlzaCA9IGZhbHNlOwogICAgICB0aGlzLnJlcG9ydHMgPSB7fTsKICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsID0gW107CiAgICAgIHRoaXMudGltZW91dCA9IG51bGw7CiAgICAgIHRoaXMuaXNDb21tb25GaWxlc0Rvd25sb2FkTG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLmlzRGlyZWN0aW9uYWxGaWxlc0Rvd25sb2FkTG9hZGluZyA9IGZhbHNlOwogICAgfSwKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZygiW1tbW1tbW1sgPT0+IiArIEpTT04uc3RyaW5naWZ5KHN0b3JlLnN0YXRlLnVzZXIuYXV0aG9yaXphdGlvbikpOwogICAgICB0aGlzLnJlc2V0KCk7IC8v55CG6K665LiK77yM5piv6KaB5Y2V54us5Yik5pat5piv5ZCmQWRtaW7nmoTvvIzkvYbmmK/nm67liY3nnIvkuIrljrthZG1pbui/m+WFpeafpeeci+eahOiDveWKm+WSjOS9nOiAheS4gOiHtAogICAgICAvL+S6p+WTgei/meS5iOivtOeahO+8jOS9huaYr+WPr+iDveS8muWtmOaJjembt+WMui7mr5TlpoLmn6XnnIvlt7Lor7vmiqXlkYrvvIzlubblj5HpgIHmj5DphpIuLi4gQWRtaW7nnJ/nmoTlj6/ku6Xov5nkuYjlgZrlkJfvvJ8g5bm25LiU44CC5ZCO56uv5piv5ZCm6L+b6KGM5LqG6aqM6K+B77yfCiAgICAgIC8v5Y2V54us5Yik5pat5Lya5pu05aW95LiA5Lqb77yM5L2G5piv6YC76L6R5Lya5aSN5p2C5LiA5Lqb44CCIOebruWJjemhueebruaXtumXtOaciemZkO+8jOWmguaenOS9oOeci+WIsOi/meauteS7o+eggeOAguW5tuS4lOacieaXtumXtO+8jOW6lOivpeS/ruWkjei/meS4qumXrumimAoKICAgICAgdmFyIHVzZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2Uoc3RvcmUuc3RhdGUudXNlci5hdXRob3JpemF0aW9uKSkpOwogICAgICB0aGlzLmlzQWRtaW4gPSB1c2VyLkpCID09PSAiQ01TLkFETUlOIiB8fCB1c2VyLkpCID09PSAiQ01TLkFETUlOIiB8fCB1c2VyLmpiID09PSAiY21zLmFkbWluIiB8fCB1c2VyLmpiID09PSAiQ01TLkFETUlOIjsgLy90aGlzLmlzTXlQdWJsaXNoID0gdXNlci5KQiA9PT0gIkFETUlOIgoKICAgICAgdGhpcy5pc015UHVibGlzaCA9IHRoaXMuaXNBZG1pbiA/IHRydWUgOiB0aGlzLiRyb3V0ZS5xdWVyeS5pc015UHVibGlzaDsKICAgICAgdGhpcy5tc2dJZCA9IGFlc0RlY3J5cHQodGhpcy4kcm91dGUucXVlcnkuaWQpOyAvL+mhtumDqOWbnua7muS6i+S7tuebkeWQrAogICAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxUb1RvcCkKCiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnRpbWVPdXRSZXBvcnQsIDEwMDAwKTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgbXNnSWQ6IHRoaXMubXNnSWQsCiAgICAgICAgcGFnZU51bTogdGhpcy5jdXJyZW50UGFnZQogICAgICB9OyAvL+iOt+WPluaWh+eroOivpuaDhQoKICAgICAgdGhpcy5nZXREZXRhaWxzKHRoaXMubXNnSWQpOyAvL+iOt+WPluWbnuWkjeS/oeaBrwoKICAgICAgdGhpcy5nZXRSZXBvcnRzKGRhdGEpOyAvL+iOt+WPluaWh+eroOmZhOS7tgoKICAgICAgZ2V0RGV0YWlsQXBwZW5kKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKCI+Pj4+Pj4+Pj4+PuiOt+WPluaWh+eroOmZhOS7tj4+Pj4+Pj4+Pj4+Pj4+PiIpOwogICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgIHRoYXQuYXBwZW5kQmFja0RhdGEgPSByZXM7CiAgICAgICAgdGhhdC5kaXJlY3Rpb25hbEZpbGVzID0gbmV3IEFycmF5KCk7CiAgICAgICAgdGhhdC5jb21tb25GaWxlcyA9IG5ldyBBcnJheSgpOwoKICAgICAgICBpZiAodGhhdC5hcHBlbmRCYWNrRGF0YSAmJiB0aGF0LmFwcGVuZEJhY2tEYXRhLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0LmFwcGVuZEJhY2tEYXRhLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWxlID0gdGhhdC5hcHBlbmRCYWNrRGF0YS5kYXRhW2ldOwoKICAgICAgICAgICAgaWYgKCF0aGF0LmlzTXlQdWJsaXNoKSB7CiAgICAgICAgICAgICAgY3VycmVudEZpbGUuZG93bmxvYWRlZCA9IDA7CiAgICAgICAgICAgICAgY3VycmVudEZpbGUuY291bnQgPSAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY3VycmVudEZpbGUub3JpZW50YXRpb24pIHsKICAgICAgICAgICAgICB0aGF0LmRpcmVjdGlvbmFsRmlsZXMucHVzaChjdXJyZW50RmlsZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhhdC5jb21tb25GaWxlcy5wdXNoKGN1cnJlbnRGaWxlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coImNvbW1vbkZpbGVzOiIgKyBKU09OLnN0cmluZ2lmeShfdGhpcy5jb21tb25GaWxlcykpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+iOt+WPluaWh+eroOWPmOabtOWOhuWPsgogICAgZ2V0QXJ0aWNsZUxvZzogZnVuY3Rpb24gZ2V0QXJ0aWNsZUxvZygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgdGhhdCA9IHRoaXM7CgogICAgICBfZ2V0QXJ0aWNsZUxvZyh0aGlzLm1zZ0lkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZygiPj4+Pj4+Pj4+Pj7ojrflj5bmlofnq6Dlj5jmm7Tljoblj7I+Pj4+Pj4+Pj4+Pj4+Pj4iKTsKICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgICAgICB0aGF0LmFydGljbGVDaGFuZ2VEYXRhID0gcmVzOwogICAgICAgIHRoYXQuYXJ0aWNsZUNoYW5nZURhdGEuZGF0YS5saXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGl0ZW0ub3BlcmF0ZVR5cGUgPSBnZXRNc2dTdGF0dXNEZXNjKGl0ZW0ub3BlcmF0ZVR5cGUpOwogICAgICAgICAgdGhhdC5jaGFuZ0hpc3RvcnkucHVzaChpdGVtKTsKICAgICAgICAgIHRoYXQuY2hhbmdIaXN0b3J5LnB1c2goewogICAgICAgICAgICBkaXZpZGVyOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi50b0NoYW5nZUxvZygpOwogICAgICAgIH0sIDgwMCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB9KTsKICAgIH0sCiAgICB0b0NoYW5nZUxvZzogZnVuY3Rpb24gdG9DaGFuZ2VMb2coKSB7CiAgICAgIHZhciBxdWVyeSA9IHRoaXMuJHJvdXRlLnF1ZXJ5OwogICAgICBjb25zb2xlLmxvZygiPT09PT09PT09PT0+dG8gbG9nIHBhcmFtcyAiICsgSlNPTi5zdHJpbmdpZnkocXVlcnkpKTsKICAgICAgaWYgKHF1ZXJ5ID09IG51bGwgfHwgdHlwZW9mIHF1ZXJ5ID09ICJ1bmRlZmluZWQiKSByZXR1cm47CiAgICAgIHZhciBuZWVkVG9Mb2cgPSBxdWVyeS5wYXJhbTsKICAgICAgY29uc29sZS5sb2coIj09PT09PT09PT09PnRvIGxvZyBuZWVkIHRvIGxvZyAiICsgbmVlZFRvTG9nKTsKICAgICAgaWYgKCFuZWVkVG9Mb2cgfHwgdHlwZW9mIG5lZWRUb0xvZyA9PSAidW5kZWZpbmVkIikgcmV0dXJuOwogICAgICB0aGlzLiRyZWZzLmNoYW5nZWxvZy5zY3JvbGxJbnRvVmlldyh0cnVlKTsKICAgIH0sCiAgICAvL+aYr+WQpuaYvuekuuaWh+eroOWGheWuuQogICAgbmVlZFNob3dDb250ZW50OiBmdW5jdGlvbiBuZWVkU2hvd0NvbnRlbnQoKSB7CiAgICAgIC8vdi1pZj0iYmFja0RhdGEuZGF0YSAmJiFpc015UHVibGlzaCAmJiByZXBvcnRzICYmIHJlcG9ydHMuZGF0YSAmJiByZXBvcnRzLmRhdGEuZmVlZEJhY2tUeXBlID09PSAwICYmIGJhY2tEYXRhLmRhdGEuZmVlZGJhY2tTdGF0dXMgIT09IDEiCiAgICAgIC8v5piv5bey6K+75Zue5omn55qE5raI5oGvCiAgICAgIGlmICh0aGlzLmJhY2tEYXRhLmRhdGEgJiYgIXRoaXMuaXNNeVB1Ymxpc2ggJiYgdGhpcy5yZXBvcnRzICYmIHRoaXMucmVwb3J0cy5kYXRhICYmIHRoaXMucmVwb3J0cy5kYXRhLmZlZWRCYWNrVHlwZSA9PT0gMCkgewogICAgICAgIGlmICh0aGlzLmJhY2tEYXRhLmRhdGEuZmVlZGJhY2tTdGF0dXMgIT09IDEpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICog5piv5ZCm5pi+56S66ZmE5Lu25LiL6L29CiAgICAgKi8KICAgIG5lZWRTaG93RG93bmxvYWRGaWxlOiBmdW5jdGlvbiBuZWVkU2hvd0Rvd25sb2FkRmlsZSgpIHsKICAgICAgdmFyIGZlZWRiYWNrU3RhdHVzID0gdGhpcy5iYWNrRGF0YSAmJiB0aGlzLmJhY2tEYXRhLmRhdGEgJiYgdGhpcy5iYWNrRGF0YS5kYXRhLmZlZWRiYWNrU3RhdHVzID09PSAxOwogICAgICBjb25zb2xlLmxvZygibmVlZFNob3dEb3dubG9hZEZpbGU6IiArIGZlZWRiYWNrU3RhdHVzICsgIiBmZWViYWNrQmFja1R5cGU6IiArIHRoaXMuZmVlYmFja0JhY2tUeXBlKTsgLy/lpoLmnpzmmK/lt7Lor7vlm57miafnsbvlnovvvIzlubbkuJTmnKrlm57lpI0KCiAgICAgIGlmICghdGhpcy5pc015UHVibGlzaCAmJiB0aGlzLmZlZWJhY2tCYWNrVHlwZSA9PSAwICYmICFmZWVkYmFja1N0YXR1cykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIG5lZWRTaG93Q29tbWVudHM6IGZ1bmN0aW9uIG5lZWRTaG93Q29tbWVudHMoKSB7CiAgICAgIHZhciBoYXNDb21tZW50cyA9IHRoaXMucmVwb3J0cyAmJiB0aGlzLnJlcG9ydHMuZGF0YSAmJiB0aGlzLmJhY2tEYXRhLmRhdGEgJiYgKHRoaXMudGV4dFJlcGx5ICYmIHRoaXMudGV4dFJlcGx5Lmxlbmd0aCA+IDAgfHwgdGhpcy5hdHRhY2htZW50UmVwbHkgJiYgdGhpcy5hdHRhY2htZW50UmVwbHkubGVuZ3RoID4gMCk7CgogICAgICBpZiAoaGFzQ29tbWVudHMpIHsKICAgICAgICByZXR1cm4gdGhpcy5pc015UHVibGlzaCA/IHRydWUgOiB0aGlzLmJhY2tEYXRhLmRhdGEuZmVlZGJhY2tTdGF0dXMgPT09IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgcmVwb3J0RGlhbG9nOiBmdW5jdGlvbiByZXBvcnREaWFsb2coKSB7CiAgICAgIHRoaXMubm93RGlhbG9nID0gMTsKICAgIH0sCiAgICBzZWVEaWFsb2c6IGZ1bmN0aW9uIHNlZURpYWxvZygpIHsKICAgICAgdGhpcy5ub3dEaWFsb2cgPSAyOwogICAgfSwKICAgIC8v5YWz6ZetZGlhbG9nCiAgICBjbG9zZVBhcmVudDogZnVuY3Rpb24gY2xvc2VQYXJlbnQoY2hpbGRTdGF0ZSkgewogICAgICAvL2NvbnNvbGUubG9nKCItLS0tLS0tLS0tLSIgKyB0aGlzLm5vd0RpYWxvZyk7CiAgICAgIC8vY29uc29sZS5sb2coIi0tLS0tLS0tLS0tIiArIGNoaWxkU3RhdGUpOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CgogICAgICBzd2l0Y2ggKHRoaXMubm93RGlhbG9nKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgdGhhdC5jbG9zZURpYWxvZ19yZXBvcnQgPSBjaGlsZFN0YXRlOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHRoYXQuY2xvc2VEaWFsb2dfc2VlID0gY2hpbGRTdGF0ZTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICAvL+WxleekuuaXl+W4nOiDjOaZr+WbvueJhwogICAgc2hvd0ltYWc6IGZ1bmN0aW9uIHNob3dJbWFnKHN0YXR1cykgewogICAgICB2YXIgaW1nc3JjOwoKICAgICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBpbWdzcmMgPSByZXF1aXJlKCdAL2Fzc2V0cy9kYWlmYWJ1LnBuZycpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMToKICAgICAgICAgIGltZ3NyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL3lpZmFidS5wbmcnKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgaW1nc3JjID0gcmVxdWlyZSgnQC9hc3NldHMveWljaGV4aWFvLnBuZycpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIGltZ3NyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL3lpc2hpeGlhby5wbmcnKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbWdzcmM7CiAgICB9LAogICAgLy/ojrflj5bmlofnq6Dkv6Hmga8KICAgIGdldERldGFpbHM6IGZ1bmN0aW9uIGdldERldGFpbHMobXNnSWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvL+iOt+WPluaWh+eroOivpuaDhQogICAgICBnZXRBcnRpY2xlRGV0YWlsKG1zZ0lkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZygiPj4+Pj4+Pj4+Pj7ojrflj5bmlofnq6Dor6bmg4U+Pj4+Pj4+Pj4+Pj4+Pj4iKTsKICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgICAgICBfdGhpczMuYmFja0RhdGEgPSByZXM7CiAgICAgICAgX3RoaXMzLm1zZ1RleHQgPSBnZXRNc2dTdGF0dXNEZXNjKF90aGlzMy5iYWNrRGF0YS5kYXRhLm1zZ1N0YXR1cyk7CiAgICAgICAgX3RoaXMzLmZlZWJhY2tCYWNrVHlwZSA9IF90aGlzMy5iYWNrRGF0YS5kYXRhLmZlZWRiYWNrVHlwZTsgLy/ojrflj5bmlofnq6DorrDlvZUKCiAgICAgICAgX3RoaXMzLmdldEFydGljbGVMb2coKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFJlcG9ydHM6IGZ1bmN0aW9uIGdldFJlcG9ydHMoZGF0YSkgewogICAgICB0aGlzLmxvYWRNb3JlID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLmlzTXlQdWJsaXNoKSB7CiAgICAgICAgdGhpcy5nZXRBdXRob3JSZXBvcnRzKGRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZ2V0Vmlld2VyUmVwb3J0cyhkYXRhKTsKICAgICAgfQogICAgfSwKICAgIC8v6I635Y+W5Zue5aSN5L+h5oGvLOWFqOmDqOeahO+8jGFkbWluIOWSjCBhdXRob3Lop4bop5IKICAgIGdldEF1dGhvclJlcG9ydHM6IGZ1bmN0aW9uIGdldEF1dGhvclJlcG9ydHMoZGF0YSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGdldEFydGljbGVSZXBvcnRBdXRob3IoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2coIj4+Pj4+Pj4+Pj4+6I635Y+W5Zue5aSN5L+h5oGvIGF1dGhvciBvciBhZG1pbiA+Pj4+Pj4+Pj4+Pj4+Pj4iKTsKCiAgICAgICAgX3RoaXM0Lm9uR2V0UmVwb3J0UmVzdWx0KHJlcyk7CgogICAgICAgIF90aGlzNC5sb2FkTW9yZSA9IGZhbHNlOwogICAgICB9KS5jYXRjaCh0aGlzLmxvYWRNb3JlID0gZmFsc2UpOwogICAgfSwKICAgIC8v6I635Y+W5Zue5aSN5L+h5oGv77yMdmlld2Vy6KeG6KeSCiAgICBnZXRWaWV3ZXJSZXBvcnRzOiBmdW5jdGlvbiBnZXRWaWV3ZXJSZXBvcnRzKG1zZ0lkKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgZ2V0QXJ0aWNsZVJlcG9ydFZpZXdlcihtc2dJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2coIj4+Pj4+Pj4+Pj4+6I635Y+W5Zue5aSN5L+h5oGvIHZpZXdlcj4+Pj4+Pj4+Pj4+Pj4+PiIpOwoKICAgICAgICBfdGhpczUub25HZXRSZXBvcnRSZXN1bHQocmVzKTsKCiAgICAgICAgX3RoaXM1LmxvYWRNb3JlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIG9uR2V0UmVwb3J0UmVzdWx0OiBmdW5jdGlvbiBvbkdldFJlcG9ydFJlc3VsdChyZXN1bHQpIHsKICAgICAgdGhpcy5yZXBvcnRzID0gcmVzdWx0OwoKICAgICAgaWYgKGlzTnVsbChyZXN1bHQpIHx8IHJlc3VsdC5jb2RlICE9IDAgfHwgaXNOdWxsKHJlc3VsdC5kYXRhKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFpc051bGwocmVzdWx0LmRhdGEuY29udGVudHMpICYmIHJlc3VsdC5kYXRhLmNvbnRlbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLnRleHRSZXBseSA9IHRoaXMudGV4dFJlcGx5LmNvbmNhdChyZXN1bHQuZGF0YS5jb250ZW50cyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIWlzTnVsbChyZXN1bHQuZGF0YS5hdHRhY2htZW50cykgJiYgcmVzdWx0LmRhdGEuYXR0YWNobWVudHMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuYXR0YWNobWVudFJlcGx5ID0gdGhpcy5hdHRhY2htZW50UmVwbHkuY29uY2F0KHJlc3VsdC5kYXRhLmF0dGFjaG1lbnRzKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnJlcG9ydHMgJiYgdGhpcy5yZXBvcnRzLmRhdGEgJiYgdGhpcy5yZXBvcnRzLmRhdGEudm90ZUluZm8pIHsKICAgICAgICBpZiAodGhpcy5yZXBvcnRzLmRhdGEudm90ZUluZm8ub3B0aW9uSWQgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLnJhZGlvR3JvdXAgPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnJhZGlvR3JvdXAgPSB0aGlzLnJlcG9ydHMuZGF0YS52b3RlSW5mby5vcHRpb25JZDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkb3dubG9hZENvbW1vbkZpbGVzOiBmdW5jdGlvbiBkb3dubG9hZENvbW1vbkZpbGVzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIC8vIGxldCB0aGF0ID0gdGhpczsKICAgICAgLy9sZXQgZmlsZW5hbWUgPSB0aGlzLmJhY2tEYXRhLmRhdGEudGl0bGUgKyAiLeaZrumAmumZhOS7ti56aXAiOwogICAgICB0aGlzLmlzQ29tbW9uRmlsZXNEb3dubG9hZExvYWRpbmcgPSB0cnVlOwogICAgICBnZXRBbGxEb3dubG9hZFVybEluQURWaWV3KHRoaXMubXNnSWQsIDApLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmICghaXNOdWxsKHJlcykgJiYgcmVzLmNvZGUgPT09IDAgJiYgIWlzTnVsbChyZXMuZGF0YSkgJiYgcmVzLmRhdGEgIT09ICIiKSB7CiAgICAgICAgICBkb3dubG9hZEZpbGVCeVVybChyZXMuZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNob3dTbmFja2Jhcign5LiL6L295aSx6LSl77yM6K+356iN5YCZ6YeN6K+VJyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2hvd1NuYWNrYmFyKCfkuIvovb3lpLHotKXvvIzor7fnqI3lgJnph43or5UnKTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM2LmlzQ29tbW9uRmlsZXNEb3dubG9hZExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZG93bmxvYWREaXJlY3Rpb25hbEZpbGVzOiBmdW5jdGlvbiBkb3dubG9hZERpcmVjdGlvbmFsRmlsZXMoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgLy8gbGV0IHRoYXQgPSB0aGlzOwogICAgICAvL2xldCBmaWxlbmFtZSA9IHRoaXMuYmFja0RhdGEuZGF0YS50aXRsZSArICIt5a6a5ZCR6ZmE5Lu2LnppcCI7CiAgICAgIHRoaXMuaXNEaXJlY3Rpb25hbEZpbGVzRG93bmxvYWRMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0QWxsRG93bmxvYWRVcmxJbkFEVmlldyh0aGlzLm1zZ0lkLCAxKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoIWlzTnVsbChyZXMpICYmIHJlcy5jb2RlID09PSAwICYmICFpc051bGwocmVzLmRhdGEpICYmIHJlcy5kYXRhICE9PSAiIikgewogICAgICAgICAgZG93bmxvYWRGaWxlQnlVcmwocmVzLmRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzaG93U25hY2tiYXIoJ+S4i+i9veWksei0pe+8jOivt+eojeWAmemHjeivlScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIHNob3dTbmFja2Jhcign5LiL6L295aSx6LSl77yM6K+356iN5YCZ6YeN6K+VJyk7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNy5pc0RpcmVjdGlvbmFsRmlsZXNEb3dubG9hZExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy/lm57lpI3lhoXlrrkKICAgIHRvUmVwb3J0Q29udGVudDogVGhyb3R0bGUoZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIC8v5LqM5qyh56Gu6K6kCiAgICAgIHRoaXMuJHJlZnMuY29uZmlybS5jb25maXJtKCLlj6rog73lm57lpI3kuIDmrKHvvIzkuI3og73mm7TmlLnvvIznoa7orqTlm57lpI3lkJc/IikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM4LnRvUmVwb3J0KDEsIF90aGlzOC5yZXBvcnRDb3RlbnQpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgIHNob3dTbmFja2Jhcigi5oKo5o+Q5Lqk55qE5aSq6aKR57mB5LqG77yM56iN562J5LiA5Lya6K+V6K+V5ZCnIik7CiAgICB9KSwKICAgIC8v5bey6K+75Zue5omnCiAgICB0b1JlcG9ydFJlY2VpcHQ6IGZ1bmN0aW9uIHRvUmVwb3J0UmVjZWlwdCgpIHsKICAgICAgdGhpcy50b1JlcG9ydCgwLCAiIik7CiAgICB9LAogICAgLy/lm57lpI3pmYTku7YKICAgIHRvUmVwb3J0RmlsZTogZnVuY3Rpb24gdG9SZXBvcnRGaWxlKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIC8v5LqM5qyh56Gu6K6kCiAgICAgIHRoaXMuJHJlZnMuY29uZmlybS5jb25maXJtKCLlj6rog73lm57lpI3kuIDmrKHvvIzkuI3og73mm7TmlLnvvIznoa7orqTlm57lpI3lkJc/IikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM5LnN1Ym1pdFJlcG9ydCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgc3VibWl0UmVwb3J0OiBmdW5jdGlvbiBzdWJtaXRSZXBvcnQoKSB7CiAgICAgIHZhciBhdHRhY2htZW50TGlzdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnVwbG9hZEZpbGVOb3JtYWwubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgYXR0YWNobWVudCA9IHt9OwogICAgICAgIGF0dGFjaG1lbnQucGF0aCA9IHRoaXMudXBsb2FkRmlsZU5vcm1hbFtpXS5wYXRoOwogICAgICAgIGF0dGFjaG1lbnQuYXR0YWNobWVudFNpemUgPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWxbaV0uZmlsZVNpemU7CiAgICAgICAgYXR0YWNobWVudExpc3QucHVzaChhdHRhY2htZW50KTsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coInNhdmUgYXR0YWNobWVudDoiICsgSlNPTi5zdHJpbmdpZnkoYXR0YWNobWVudExpc3QpKTsKICAgICAgdGhpcy50b1JlcG9ydCgyLCAiIiwgYXR0YWNobWVudExpc3QpOyAvLyBsZXQgZGF0YSA9IHsKICAgICAgLy8gICAgIG1zZ0lkOiB0aGlzLm1zZ0lkLAogICAgICAvLyB9CiAgICAgIC8vdGhpcy5nZXRSZXBvcnRzKGRhdGEpOwogICAgICAvL3RoaXMuZ2V0RGV0YWlscyh0aGlzLm1zZ0lkKQogICAgfSwKICAgIG9uRGVsZXRlRmlsZTogZnVuY3Rpb24gb25EZWxldGVGaWxlKGluZGV4KSB7CiAgICAgIGNvbnNvbGUubG9nKCJvbmRlbGV0ZSBmaWxlOiIgKyBpbmRleCk7CiAgICAgIHRoaXMudXBsb2FkRmlsZU5vcm1hbC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIHVwbG9hZEZpbGVOOiBmdW5jdGlvbiB1cGxvYWRGaWxlTigpIHsKICAgICAgY29uc29sZS5sb2coInVwbG9hZEZpbGVOIik7CgogICAgICBpZiAodGhpcy51cGxvYWRGaWxlTm9ybWFsLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgc2hvd1NuYWNrYmFyKCLmr4/mrKHmnIDlpJrlj6rog73kuIrkvKAx5Liq5paH5Lu2Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRyZWZzLnVwbG9hZEZpbGVOLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoImNsaWNrIikpOwogICAgfSwKICAgIGZpbGVVcGxvYWQ6IGZ1bmN0aW9uIGZpbGVVcGxvYWQoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIHVwRmlsZXMgPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWw7CiAgICAgIHZhciBzZWxlY3RlZEZpbGVzID0gZXZlbnQudGFyZ2V0LmZpbGVzOwoKICAgICAgaWYgKHNlbGVjdGVkRmlsZXMubGVuZ3RoID4gMSkgewogICAgICAgIHNob3dTbmFja2Jhcigi5q+P5qyh5pyA5aSa5Y+q6IO95LiK5LygMeS4quaWh+S7tiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkgewogICAgICAgIHZhciBpdGVtID0gc2VsZWN0ZWRGaWxlc1tpXTsKCiAgICAgICAgaWYgKGl0ZW0uc2l6ZSAvIDEwMjQgLyAxMDI0ID49IDEpIHsKICAgICAgICAgIHNob3dTbmFja2Jhcigi5oKo5pyJ5paH5Lu25LiK5Lyg5aSx6LSlLOmZhOS7tuacgOWkp+mZkOWItjFNIik7CiAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICB9IC8v5LiK5Lyg5paH5Lu25Y676YeNCgoKICAgICAgICBpZiAodXBGaWxlcy5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiB0LnRleHQgPT0gaXRlbS5uYW1lOwogICAgICAgIH0pID49IDApIHsKICAgICAgICAgIHJldHVybiAiY29udGludWUiOwogICAgICAgIH0gLy/kuIrkvKDnsbvlnovliKTmlq0KCgogICAgICAgIHZhciBleHQgPSBjaGVja1VwbG9hZEZpbGVUeXBlKGl0ZW0ubmFtZSk7CiAgICAgICAgaWYgKGV4dCA9PSBudWxsKSByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICB2YXIgdGVtcCA9IHt9OwogICAgICAgIHRlbXAudGV4dCA9IGl0ZW0ubmFtZTsKICAgICAgICB0ZW1wLmZpbGVUeXBlID0gZXh0OwogICAgICAgIHRlbXAuZmlsZVNpemUgPSByZWFkRmlsZVNpemVVbml0KGl0ZW0uc2l6ZSk7CiAgICAgICAgY29uc29sZS5sb2codGVtcCk7IC8v5re75Yqg5LiK5Lyg5paH5Lu25YiX6KGoCgogICAgICAgIHVwRmlsZXMucHVzaCh0ZW1wKTsgLy/kuIrkvKDmnI3liqHlmagKCiAgICAgICAgdXBsb2FkRmlsZShpdGVtLCBmdW5jdGlvbiAocHJvZ3Jlc3MsIGZpbGVOYW1lKSB7CiAgICAgICAgICBfdGhpczEwLnVwbG9hZEZpbGVOb3JtYWwuZmlsdGVyKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiB0LnRleHQgPT0gZmlsZU5hbWU7CiAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKHVwZGF0ZSkgewogICAgICAgICAgICB1cGRhdGUucHJvZ3Jlc3MgPSBwcm9ncmVzczsKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMTAudXBsb2FkRmlsZU5vcm1hbCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMxMC51cGxvYWRGaWxlTm9ybWFsKSk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygidXBsb2FkIiArIEpTT04uc3RyaW5naWZ5KHJlcykpOwoKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgIC8v5pu05paw5LiK5Lyg5L+h5oGvCiAgICAgICAgICAgIHZhciBmaWxlcyA9IF90aGlzMTAudXBsb2FkRmlsZU5vcm1hbDsKICAgICAgICAgICAgZmlsZXMuZmlsdGVyKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHQudGV4dCA9PSByZXMuZGF0YS5hdHRhY2htZW50TmFtZTsKICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uICh1cGRhdGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlLnBhdGggPSByZXMuZGF0YS51cmw7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zb2xlLmxvZygidXBsb2FkIGZpbGUgbWVzc2FnZTI6IiArIEpTT04uc3RyaW5naWZ5KGZpbGVzKSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgICB9OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZEZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIF9yZXQgPSBfbG9vcChpKTsKCiAgICAgICAgaWYgKF9yZXQgPT09ICJjb250aW51ZSIpIGNvbnRpbnVlOwogICAgICB9CiAgICB9LAogICAgcmVzZXRVcGxvYWRlcjogZnVuY3Rpb24gcmVzZXRVcGxvYWRlcigpIHsKICAgICAgdGhpcy4kcmVmcy51cGxvYWRGaWxlTi52YWx1ZSA9ICIiOwogICAgfSwKICAgIGdvVm90ZUNvbmZpcm06IGZ1bmN0aW9uIGdvVm90ZUNvbmZpcm0oKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuY29uZmlybS5jb25maXJtKCLlj6rog73lm57lpI3kuIDmrKHvvIzkuI3og73mm7TmlLnvvIznoa7orqTlm57lpI3lkJc/IikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMS5nb1ZvdGUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSwKICAgIC8v5Y675oqV56WoCiAgICBnb1ZvdGU6IGZ1bmN0aW9uIGdvVm90ZSgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgLy90aGlzLnRvUmVwb3J0KDMsIiIsdGhpcy5yYWRpb0dyb3VwKTsKICAgICAgdmFyIHJlcG9ydERhdGFzID0gewogICAgICAgIG1zZ0lkOiB0aGlzLm1zZ0lkLAogICAgICAgIGZlZWRiYWNrVHlwZTogMywKICAgICAgICB2b3RlSWQ6IHRoaXMuYmFja0RhdGEuZGF0YS52b3RlSW5mb0RUTy52b3RlSWQsCiAgICAgICAgdm90ZU9wdGlvbklkOiB0aGlzLnJhZGlvR3JvdXAKICAgICAgfTsKICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVwb3J0RGF0YXMpKTsKICAgICAgZ2V0RGV0YWlsVG9SZXBvcnQocmVwb3J0RGF0YXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKCLmipXnpajlrozmiJAiKTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgbXNnSWQ6IF90aGlzMTIubXNnSWQKICAgICAgICB9OwoKICAgICAgICBfdGhpczEyLmdldFJlcG9ydHMoZGF0YSk7CgogICAgICAgIF90aGlzMTIuZ2V0RGV0YWlscyhfdGhpczEyLm1zZ0lkKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMgIT0gbnVsbCAmJiByZXMuZGF0YS5jb2RlID09ICI5IikgewogICAgICAgICAgc2hvd1NuYWNrYmFyKCLmipXnpajlt7LmiKrmraIiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Zue5aSN5L+h5oGvCiAgICB0b1JlcG9ydDogZnVuY3Rpb24gdG9SZXBvcnQoZmVlZGJhY2tUeXBlLCBjb250ZW50LCBhdHRhY2htZW50TGlzdCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICB2YXIgcmVwb3J0RGF0YXMgPSB7CiAgICAgICAgbXNnSWQ6IHRoaXMubXNnSWQsCiAgICAgICAgZmVlZGJhY2tUeXBlOiBmZWVkYmFja1R5cGUKICAgICAgfTsKCiAgICAgIGlmIChjb250ZW50KSB7CiAgICAgICAgcmVwb3J0RGF0YXMuY29udGVudCA9IGNvbnRlbnQ7CiAgICAgIH0KCiAgICAgIGlmIChhdHRhY2htZW50TGlzdCkgewogICAgICAgIHJlcG9ydERhdGFzLmF0dGFjaG1lbnRMaXN0ID0gYXR0YWNobWVudExpc3Q7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlcG9ydERhdGFzKSk7CiAgICAgIGdldERldGFpbFRvUmVwb3J0KHJlcG9ydERhdGFzKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgbXNnSWQ6IF90aGlzMTMubXNnSWQKICAgICAgICB9OwoKICAgICAgICBfdGhpczEzLmdldFJlcG9ydHMoZGF0YSk7CgogICAgICAgIF90aGlzMTMuZ2V0RGV0YWlscyhfdGhpczEzLm1zZ0lkKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiLS0tLS0tLS0tLS0tPj09PT09IiArIEpTT04uc3RyaW5naWZ5KGUucmVzcG9uc2UpKTsKICAgICAgICBfdGhpczEzLmNhdXRpb25UZXh0ID0gIuWbnuWkjea2iOaBr+Wksei0pe+8jOivt+eojeWQjuWGjeivlSI7CiAgICAgICAgdmFyIHJlc3AgPSBlLnJlc3BvbnNlOwoKICAgICAgICBpZiAocmVzcCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzcCA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCI+Pj4+PiByZXNwb25zZSBpcyBudWxsIDw8PDw8PDw8Iik7CiAgICAgICAgICBfdGhpczEzLmNhdXRpb24gPSB0cnVlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc3AuZGF0YSA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzcC5kYXRhID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgY29uc29sZS5sb2coIj4+Pj4+IGRhdGEgaXMgbnVsbCA8PDw8PDw8PCIpOwogICAgICAgICAgX3RoaXMxMy5jYXV0aW9uID0gdHJ1ZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBkYXRhID0gcmVzcC5kYXRhOwoKICAgICAgICBpZiAoZGF0YS5jb2RlID09PSBudWxsIHx8IHR5cGVvZiBkYXRhLmNvZGUgPT09ICJ1bmRlZmluZWQiIHx8IGRhdGEuY29kZSAhPT0gNCkgewogICAgICAgICAgY29uc29sZS5sb2coIj4+Pj4+IGVycm9yIDw8PDw8PDw8Iik7CiAgICAgICAgICBfdGhpczEzLmNhdXRpb24gPSB0cnVlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHNlbnNpdGl2ZVdvcmRzID0gZGF0YS5kYXRhOwoKICAgICAgICBpZiAoc2Vuc2l0aXZlV29yZHMgPT09IG51bGwgfHwgdHlwZW9mIHNlbnNpdGl2ZVdvcmRzID09PSAidW5kZWZpbmVkIiB8fCBzZW5zaXRpdmVXb3Jkcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCI+Pj4+PiBzZW5zaXRpdmUgV29yZHMgYXJlIG51bGwgPDw8PDw8PDwiKTsKICAgICAgICAgIF90aGlzMTMuY2F1dGlvbiA9IHRydWU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBfdGhpczEzLiRyZWZzLmNvbmZpcm0uY29uZmlybSgi5oKo5Zue5aSN55qE5YaF5a655YyF5ZCr5pWP5oSf6K+N77yM6K+35Y675o6J6L+Z5Lqb5pWP5oSf6K+NOiIgKyBKU09OLnN0cmluZ2lmeShzZW5zaXRpdmVXb3JkcykpLmNhdGNoKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHRvTWVzc2FnZVJlYWQ6IGZ1bmN0aW9uIHRvTWVzc2FnZVJlYWQoKSB7CiAgICAgIHZhciByZXF1ZXN0RGF0YXMgPSB7CiAgICAgICAgaWQ6IHRoaXMubXNnSWQKICAgICAgfTsKICAgICAgbWVzc2FnZVJlYWQocmVxdWVzdERhdGFzKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+WAkuiuoeaXtu+8jOWwhuaWh+eroOeKtuaAgeWPmOS4uuW3suivuwogICAgdGltZU91dFJlcG9ydDogZnVuY3Rpb24gdGltZU91dFJlcG9ydCgpIHsKICAgICAgY29uc29sZS5sb2coIuWAkuiuoeaXtue7k+adn++8jOaKiueKtuaAgee9ruS4uuW3suivuyIpOwogICAgICB0aGlzLnRvTWVzc2FnZVJlYWQoKTsKICAgIH0KICB9Cn07"},null]}