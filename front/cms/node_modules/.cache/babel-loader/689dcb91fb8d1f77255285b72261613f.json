{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue","mtime":1638103240531},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRVc2VySW5mbyB9IGZyb20gIkAvYXBpL2dldERhdGEuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIGxvYWRpbmdFcnJvcjogZmFsc2UKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nOiBmdW5jdGlvbiBMb2FkaW5nKCkgewogICAgICByZXR1cm4gaW1wb3J0KCIuL2xvZ2luTG9hZGluZy52dWUiKTsKICAgIH0sCiAgICBMb2dpbkVycm9yOiBmdW5jdGlvbiBMb2dpbkVycm9yKCkgewogICAgICByZXR1cm4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9lcnJvci12aWV3LnZ1ZSIpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIHRva2VuID0gdGhpcy4kcm91dGUucXVlcnkudG9rZW47CgogICAgaWYgKHRva2VuID09IG51bGwgfHwgdHlwZW9mIHRva2VuID09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmxvZ2luU3RhdHVzKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hbGxBcnRpY2xlIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5sb2FkaW5nRXJyb3IgPSB0cnVlOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyL3NldEF1dGhvcml6YXRpb24iLCB0b2tlbik7CiAgICBnZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb25zb2xlLmRlYnVnKCJ1c2VyaW5mbz09PT09PiIgKyBKU09OLnN0cmluZ2lmeShyZXMpKTsKCiAgICAgIGlmIChyZXMgPT0gbnVsbCB8fCB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8IHJlcy5jb2RlICE9IDApIHsKICAgICAgICBfdGhpcy5sb2FkaW5nRXJyb3IgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoInVzZXIvc2V0VXNlciIsIHJlcy5kYXRhKTsKCiAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvYWxsQXJ0aWNsZSIpOwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLmxvYWRpbmdFcnJvciA9IHRydWU7CiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;AAQA,SAAA,WAAA,QAAA,kBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,IADA;AAEA,MAAA,YAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AAAA,aAAA,OAAA,oBAAA,CAAA;AAAA,KADA;AAEA,IAAA,UAAA,EAAA;AAAA,aAAA,OAAA,kCAAA,CAAA;AAAA;AAFA,GAPA;AAWA,EAAA,OAXA,qBAWA;AAAA;;AACA,QAAA,KAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;;AAEA,QAAA,KAAA,IAAA,IAAA,IAAA,OAAA,KAAA,IAAA,WAAA,EAAA;AACA,UAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,WAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,aAAA;AACA,OAFA,MAEA;AACA,aAAA,OAAA,GAAA,KAAA;AACA,aAAA,YAAA,GAAA,IAAA;AACA;;AACA;AACA;;AAEA,SAAA,MAAA,CAAA,MAAA,CAAA,uBAAA,EAAA,KAAA;AACA,IAAA,WAAA,GACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,KAAA,CAAA,mBAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA;;AACA,UAAA,GAAA,IAAA,IAAA,IAAA,OAAA,GAAA,IAAA,WAAA,IAAA,GAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,cAAA,EAAA,GAAA,CAAA,IAAA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,aAAA;AACA;AACA,KATA,EAUA,KAVA,CAUA,YAAA;AACA,MAAA,KAAA,CAAA,YAAA,GAAA,IAAA;AACA,KAZA,EAaA,OAbA,CAaA,YAAA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,KAfA;AAgBA;AAzCA,CAAA","sourcesContent":["<template>\n  <v-app>\n    <loading v-if=\"loading\" />\n    <login-error v-if=\"loadingError\" />\n  </v-app>\n</template>\n\n<script>\nimport { getUserInfo } from \"@/api/getData.js\";\nexport default {\n  data() {\n    return {\n      loading: true,\n      loadingError: false,\n    };\n  },\n  components: {\n    Loading: () => import(\"./loginLoading.vue\"),\n    LoginError: () => import(\"@/components/base/error-view.vue\"),\n  },\n  mounted() {\n    let token = this.$route.query.token;\n\n    if (token == null || typeof token == \"undefined\") {\n      if (this.$store.state.user.loginStatus) {\n        this.$router.push(\"/allArticle\");\n      } else {\n        this.loading = false;\n        this.loadingError = true;\n      }\n      return;\n    }\n\n    this.$store.commit(\"user/setAuthorization\", token);\n    getUserInfo()\n      .then((res) => {\n        console.debug(\"userinfo=====>\" + JSON.stringify(res));\n        if (res == null || typeof res == \"undefined\" || res.code != 0) {\n          this.loadingError = true;\n        } else {\n          this.$store.commit(\"user/setUser\", res.data);\n          this.$router.push(\"/allArticle\");\n        }\n      })\n      .catch(() => {\n        this.loadingError = true;\n      })\n      .finally(() => {\n        this.loading = false;\n      });\n  },\n};\n</script>\n"],"sourceRoot":"src/views"}]}