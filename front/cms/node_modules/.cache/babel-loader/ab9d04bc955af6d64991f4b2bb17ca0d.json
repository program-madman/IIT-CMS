{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/eslint-loader/index.js??ref--13-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/router/permission.js","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/router/permission.js","mtime":1638535920899},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2xpdWd1YW5naHVpL0RvY3VtZW50cy9jbXNfY29kZS9teS1tZXNzYWdlL2Ntcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9saXVndWFuZ2h1aS9Eb2N1bWVudHMvY21zX2NvZGUvbXktbWVzc2FnZS9jbXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9pbmRleCc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBwZXJtaXNzaW9uOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBzZXQgcGFnZSB0aXRsZQogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRvLm1ldGEudGl0bGUgPT09IHVuZGVmaW5lZCA/ICdNeSBNZXNzYWdlJyA6IHRvLm1ldGEudGl0bGU7CiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoIj09PT09PT09PT09PT0+cm91dGVyIHBhdGg6IiArIHRvLnBhdGggKyAiICAgIGxvZ2luIHN0YXR1czoiICsgc3RvcmUuc3RhdGUudXNlci5sb2dpblN0YXR1cyk7CgogICAgICAgICAgICBpZiAoIXN0b3JlLnN0YXRlLnVzZXIubG9naW5TdGF0dXMpIHsKICAgICAgICAgICAgICBzdG9yZS5jb21taXQoJ3VzZXIvcmVzZXREYXRhRnJvbVNlc3Npb24nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEodG8ucGF0aCA9PSAiLyIgfHwgdG8ucGF0aCA9PSAiL2xvZ2luIikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGlmIChzdG9yZS5zdGF0ZS51c2VyLmxvZ2luU3RhdHVzKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoIi8iKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBwZXJtaXNzaW9uID0gdG8ubWV0YS5wZXJtaXNzaW9uOwogICAgICAgICAgICBjb25zb2xlLmxvZyhwZXJtaXNzaW9uKTsKCiAgICAgICAgICAgIGlmICghKHBlcm1pc3Npb24gIT0gbnVsbCAmJiBfdHlwZW9mKHBlcm1pc3Npb24pICE9IHVuZGVmaW5lZCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHN0b3JlLmdldHRlcnNbInVzZXIvcGVybWlzc2lvbkxpc3QiXS5pbmRleE9mKHBlcm1pc3Npb24pIDwgMCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoIi8iKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgbmV4dCgpOwoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHt9KTs="},{"version":3,"sources":["/Users/liuguanghui/Documents/cms_code/my-message/cms/src/router/permission.js"],"names":["router","store","beforeEach","to","from","next","document","title","meta","undefined","console","debug","path","state","user","loginStatus","commit","permission","log","getters","indexOf","afterEach"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,SAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACAD,MAAM,CAACE,UAAP;AAAA,qEAAkB,iBAAMC,EAAN,EAAUC,IAAV,EAAgBC,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAEhB;AACAC,YAAAA,QAAQ,CAACC,KAAT,GAAiBJ,EAAE,CAACK,IAAH,CAAQD,KAAR,KAAkBE,SAAlB,GAA8B,YAA9B,GAA6CN,EAAE,CAACK,IAAH,CAAQD,KAAtE;AACAG,YAAAA,OAAO,CAACC,KAAR,CAAc,+BAA6BR,EAAE,CAACS,IAAhC,GAAqC,mBAArC,GAAyDX,KAAK,CAACY,KAAN,CAAYC,IAAZ,CAAiBC,WAAxF;;AAEA,gBAAG,CAACd,KAAK,CAACY,KAAN,CAAYC,IAAZ,CAAiBC,WAArB,EAAiC;AAC/Bd,cAAAA,KAAK,CAACe,MAAN,CAAa,2BAAb;AACD;;AARe,kBAUbb,EAAE,CAACS,IAAH,IAAU,GAAV,IAAiBT,EAAE,CAACS,IAAH,IAAW,QAVf;AAAA;AAAA;AAAA;;AAWdP,YAAAA,IAAI;AAXU;;AAAA;AAAA,gBAeZJ,KAAK,CAACY,KAAN,CAAYC,IAAZ,CAAiBC,WAfL;AAAA;AAAA;AAAA;;AAgBdV,YAAAA,IAAI,CAAC,GAAD,CAAJ;AAhBc;;AAAA;AAoBZY,YAAAA,UApBY,GAoBCd,EAAE,CAACK,IAAH,CAAQS,UApBT;AAqBhBP,YAAAA,OAAO,CAACQ,GAAR,CAAYD,UAAZ;;AArBgB,kBAsBbA,UAAU,IAAI,IAAd,IAAsB,QAAOA,UAAP,KAAqBR,SAtB9B;AAAA;AAAA;AAAA;;AAAA,kBAuBXR,KAAK,CAACkB,OAAN,CAAc,qBAAd,EAAqCC,OAArC,CAA6CH,UAA7C,IAA2D,CAvBhD;AAAA;AAAA;AAAA;;AAwBVZ,YAAAA,IAAI,CAAC,GAAD,CAAJ;AAxBU;;AAAA;AA6BhBA,YAAAA,IAAI;;AA7BY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAiCAL,MAAM,CAACqB,SAAP,CAAiB,YAAM,CAEtB,CAFD","sourcesContent":["import router from './index'\nimport store from '@/store';\nrouter.beforeEach(async(to, from, next) => {\n\n  // set page title\n  document.title = to.meta.title === undefined ? 'My Message' : to.meta.title\n  console.debug(\"=============>router path:\"+to.path+\"    login status:\"+store.state.user.loginStatus)\n  \n  if(!store.state.user.loginStatus){\n    store.commit('user/resetDataFromSession')\n  }\n\n  if(to.path ==\"/\" || to.path == \"/login\"){\n    next();\n    return;\n  }\n\n  if(!store.state.user.loginStatus){\n    next(\"/\");\n    return\n  }\n\n  let permission = to.meta.permission;\n  console.log(permission)\n  if(permission != null && typeof permission != undefined) {\n    if(store.getters[\"user/permissionList\"].indexOf(permission) < 0){\n        next(\"/\")\n        return\n    }\n  } \n  \n  next();\n\n})\n\nrouter.afterEach(() => {\n\n})\n"]}]}