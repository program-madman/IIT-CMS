{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/thread-loader/dist/cjs.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/index.vue","mtime":1639499424013},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2xpdWd1YW5naHVpL0RvY3VtZW50cy9jbXNfY29kZS9teS1tZXNzYWdlL2Ntcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgc2F2ZU1lc3NhZ2UsIGdldEFydGljbGVEZXRhaWwsIHNhdmVWb3RlLCB1cGxvYWRGaWxlLCBkZWFsZXJDb2RlVmFsaWQgfSBmcm9tICJAL2FwaS9nZXREYXRhLmpzIjsKaW1wb3J0IHsgYWVzRW5jcnlwdCwgYWVzRGVjcnlwdCB9IGZyb20gIkAvdXRpbHMvZW5jcnlwdGlvbi5qcyI7CmltcG9ydCB7IGhpZ2hMaWdodEFsbFRleHQgfSBmcm9tICJAL3V0aWxzL2FydGljbGVVdGlscy5qcyI7CmltcG9ydCB7IERlYm91bmNlLCBUaHJvdHRsZSwgZGVlcENsb25lIH0gZnJvbSAiQC91dGlscy90b29scy5qcyI7CmltcG9ydCB7IHNob3dTbmFja2JhciwgY2xvc2VTbmFja2JhciB9IGZyb20gIkAvdXRpbHMvc25hY2tiYXIuanMiOwppbXBvcnQgeyBpc051bGwgfSBmcm9tICJAL3V0aWxzL3N0cmluZ1V0aWxzLmpzIjsKaW1wb3J0IHsgb2Zmc2V0TW9udGhUaW1lIH0gZnJvbSAiQC91dGlscy90aW1lRm9ybWF0ZS5qcyI7CmltcG9ydCB7IGNoZWNrVXBsb2FkRmlsZVR5cGUsIHJlYWRGaWxlU2l6ZVVuaXQsIGdldERpc3RyaWJ1dG9yTnVtYmVyQnlGaWxlTmFtZSB9IGZyb20gIkAvdXRpbHMvZmlsZXNVdGlscy5qcyI7CnZhciB2b3RlRGVmYXVsdCA9IHsKICBpZDogbnVsbCwKICBlbmFibGU6IGZhbHNlLAogIHRvcGljOiAiIiwKICB2b3RlVHlwZTogZmFsc2UsCiAgdm90ZU9wdGlvbnM6IFt7fSwge31dLAogIGVuZFRpbWU6IG9mZnNldE1vbnRoVGltZSgxKS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW06c3MiKQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlkOiBudWxsLAogICAgICB0aXRsZTogIiIsCiAgICAgIGNvbnRlbnQ6ICIiLAogICAgICB0aXRsZUVycm9yTWVzc2FnZTogIiIsCiAgICAgIG1heFRpbWU6IG9mZnNldE1vbnRoVGltZSgxKSwKICAgICAgdm90ZTogZGVlcENsb25lKHZvdGVEZWZhdWx0KSwKICAgICAgdm90ZVRlbXA6IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCksCiAgICAgIHZvdGVEaWFsb2c6IGZhbHNlLAogICAgICB1cGxvYWRGaWxlTm9ybWFsOiBbXSwKICAgICAgdXBsb2FkRmlsZURpcmVjdDogW10sCiAgICAgIGRlbGVhckxpc3Q6IFtdLAogICAgICBwcmV2aWV3OiBmYWxzZSwKICAgICAgcHVibGlzaDogZmFsc2UsCiAgICAgIG5lZWRTYXZlOiBmYWxzZSwKICAgICAgYXV0b1NhdmluZzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBhcHBFZGl0b3I6IGZ1bmN0aW9uIGFwcEVkaXRvcigpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiLi9lZGl0b3IudnVlIik7CiAgICB9LAogICAgdGl0bGVFZGl0b3I6IGZ1bmN0aW9uIHRpdGxlRWRpdG9yKCkgewogICAgICByZXR1cm4gaW1wb3J0KCIuL3RpdGxlLnZ1ZSIpOwogICAgfSwKICAgIHZvdGU6IGZ1bmN0aW9uIHZvdGUoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIi4vdm90ZSIpOwogICAgfSwKICAgIHZvdGVPcHRpb246IGZ1bmN0aW9uIHZvdGVPcHRpb24oKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIi4vdm90ZU9wdGlvbi52dWUiKTsKICAgIH0sCiAgICBmaWxlSXRlbTogZnVuY3Rpb24gZmlsZUl0ZW0oKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIi4vZmlsZU9wdGlvbi52dWUiKTsKICAgIH0sCiAgICB0aW1lUGlja2VyOiBmdW5jdGlvbiB0aW1lUGlja2VyKCkgewogICAgICByZXR1cm4gaW1wb3J0KCIuL3RpbWVQaWNrZXIudnVlIik7CiAgICB9LAogICAgcHJldmlldzogZnVuY3Rpb24gcHJldmlldygpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiLi9wcmV2aWV3LnZ1ZSIpOwogICAgfSwKICAgIHB1Ymxpc2g6IGZ1bmN0aW9uIHB1Ymxpc2goKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIi4vcHVibGlzaC52dWUiKTsKICAgIH0sCiAgICBjb25maXJtOiBmdW5jdGlvbiBjb25maXJtKCkgewogICAgICByZXR1cm4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9jb25mb3JtLnZ1ZSIpOwogICAgfQogIH0sCiAgLy8g6Lev55Sx5pu05paw5aSE55CGCiAgYmVmb3JlUm91dGVVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlVXBkYXRlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGlmICh0aGlzLm5lZWRTYXZlKSB7CiAgICAgIHRoaXMuJHJlZnMuY29uZmlybS5jb25maXJtKCLmgqjlvZPliY3mnInkv67mlLnnmoTkv6Hmga/mnKrkv53lrZjvvIznprvlvIDlvZPliY3pobXpnaLmgqjovpPlhaXnmoTkv6Hmga/lsIbkuI3kvJrooqvkv53lrZjjgIIiKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBuZXh0KHRydWUpOwoKICAgICAgICBfdGhpcy5yZUVkaXRJZk5lZWQodG8ucXVlcnkuaWQpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG5leHQoZmFsc2UpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQodHJ1ZSk7CiAgICAgIGlmICh0aGlzLnJlRWRpdElmTmVlZCh0by5xdWVyeS5pZCkpIHJldHVybjsKICAgICAgdGhpcy5zYXZlQXNOZXdNZXNzYWdlKHRvLnBhcmFtcyk7CiAgICB9CiAgfSwKICAvL+i3r+eUseemu+W8gOWkhOeQhgogIGJlZm9yZVJvdXRlTGVhdmU6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlTGVhdmUodG8sIGZyb20sIG5leHQpIHsKICAgIHRoaXMuY2xvc2VTbmFjaygpOwoKICAgIGlmICh0aGlzLm5lZWRTYXZlKSB7CiAgICAgIHRoaXMuJHJlZnMuY29uZmlybS5jb25maXJtKCLmgqjlvZPliY3mnInkv67mlLnnmoTkv6Hmga/mnKrkv53lrZjvvIznprvlvIDlvZPliY3pobXpnaLmgqjovpPlhaXnmoTkv6Hmga/lsIbkuI3kvJrooqvkv53lrZjjgIIiKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbmV4dCh0cnVlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuZXh0KGZhbHNlKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KHRydWUpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGlmICghdGhpcy5yZUVkaXRJZk5lZWQodGhpcy4kcm91dGUucXVlcnkuaWQpKSB7CiAgICAgIHRoaXMuc2F2ZUFzTmV3TWVzc2FnZSh0aGlzLiRyb3V0ZS5wYXJhbXMpOwogICAgfQoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJiZWZvcmV1bmxvYWQiLCB0aGlzLmJlZm9yZXVubG9hZEhhbmRsZXIpOwogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIiwgdGhpcy5iZWZvcmV1bmxvYWRIYW5kbGVyKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGJlZm9yZXVubG9hZEhhbmRsZXI6IGZ1bmN0aW9uIGJlZm9yZXVubG9hZEhhbmRsZXIoZSkgewogICAgICBpZiAoZSkgewogICAgICAgIGUucmV0dXJuVmFsdWUgPSAi5YWz6Zet5o+Q56S6IjsKICAgICAgfQoKICAgICAgcmV0dXJuICLlhbPpl63mj5DnpLoiOwogICAgfSwKICAgIC8v5Y+m5a2Y5Li65Yib5bu65paw5raI5oGvCiAgICBzYXZlQXNOZXdNZXNzYWdlOiBmdW5jdGlvbiBzYXZlQXNOZXdNZXNzYWdlKHBhcmFtcykgewogICAgICBjb25zb2xlLmRlYnVnKCJwdWJsaWM9PT09PT0+IiArIHBhcmFtcyk7CiAgICAgIGlmIChwYXJhbXMgPT0gbnVsbCB8fCB0eXBlb2YgcGFyYW1zID09ICJ1bmRlZmluZWQiKSByZXR1cm47CiAgICAgIHZhciBpZCA9IHBhcmFtcy5pZDsKICAgICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgPT0gInVuZGVmaW5lZCIgfHwgaXNOYU4oaWQpKSByZXR1cm47CiAgICAgIHRoaXMuaWQgPSBudWxsOwogICAgICB0aGlzLnJlc3RvcmVNZXNzYWdlKGlkLCB0cnVlKTsKICAgIH0sCiAgICAvL+iNieeov+mHjeaWsOe8lui+kQogICAgcmVFZGl0SWZOZWVkOiBmdW5jdGlvbiByZUVkaXRJZk5lZWQoaWQpIHsKICAgICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgPT0gInVuZGVmaW5lZCIpIHJldHVybiBmYWxzZTsKICAgICAgaWQgPSBOdW1iZXIoYWVzRGVjcnlwdChpZCkpOwogICAgICBpZiAoaWQgPT0gbnVsbCB8fCBpc05hTihpZCkgfHwgdGhpcy5pZCA9PSBpZCkgcmV0dXJuIGZhbHNlOwogICAgICB0aGlzLmlkID0gaWQ7CiAgICAgIHRoaXMucmVzdG9yZU1lc3NhZ2UoaWQpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICAvL+mHjeiuvua2iOaBr+WGheWuuQogICAgcmVzdG9yZU1lc3NhZ2U6IGZ1bmN0aW9uIHJlc3RvcmVNZXNzYWdlKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGlzTmV3ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgdGhpcy5jbGVhckNvbnRlbnQoKTsgLy/or7fmsYLlkI7lj7Dojrflj5bmtojmga/lhoXlrrkKCiAgICAgIGdldEFydGljbGVEZXRhaWwoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMgPT0gbnVsbCB8fCBfdHlwZW9mKHJlcykgPT0gdW5kZWZpbmVkKSByZXR1cm47CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczIudGl0bGUgPSBkYXRhLnRpdGxlOwogICAgICAgIF90aGlzMi5jb250ZW50ID0gZGF0YS5jb250ZW50OwoKICAgICAgICBpZiAoZGF0YS52b3RlSW5mb0RUTyAhPSBudWxsICYmIF90eXBlb2YoZGF0YS52b3RlSW5mb0RUTykgIT0gdW5kZWZpbmVkICYmIGRhdGEudm90ZUluZm9EVE8ub3B0aW9ucy5sZW5ndGggPj0gMikgewogICAgICAgICAgdmFyIHZvdGUgPSB7CiAgICAgICAgICAgIGlkOiBpc05ldyA/IG51bGwgOiBkYXRhLnZvdGVJbmZvRFRPLnZvdGVJZCwKICAgICAgICAgICAgZW5hYmxlOiB0cnVlLAogICAgICAgICAgICB0b3BpYzogZGF0YS52b3RlSW5mb0RUTy50b3BpYywKICAgICAgICAgICAgdm90ZU9wdGlvbnM6IGRhdGEudm90ZUluZm9EVE8ub3B0aW9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0ub3B0aW9uTmFtZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB2b3RlVHlwZTogZmFsc2UsCiAgICAgICAgICAgIGVuZFRpbWU6IG9mZnNldE1vbnRoVGltZSgxKS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW06c3MiKQogICAgICAgICAgfTsKICAgICAgICAgIF90aGlzMi52b3RlVGVtcCA9IGRlZXBDbG9uZSh2b3RlKTsKCiAgICAgICAgICBpZiAoaXNOZXcpIHsKICAgICAgICAgICAgX3RoaXMyLnZvdGVTYXZlKHRydWUpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMyLnZvdGUgPSBkZWVwQ2xvbmUodm90ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIWRhdGEuYXR0YWNobWVudHMgfHwgdHlwZW9mIGRhdGEuYXR0YWNobWVudHMgPT0gInVuZGVmaW5lZCIgfHwgZGF0YS5hdHRhY2htZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zb2xlLmRlYnVnKCJhdHRhY2htZW50czoiICsgSlNPTi5zdHJpbmdpZnkoZGF0YS5hdHRhY2htZW50cykpOwogICAgICAgICAgZGF0YS5hdHRhY2htZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IGl0ZW0uYXR0YWNobWVudE5hbWU7CiAgICAgICAgICAgIHZhciB0ZW1wID0gewogICAgICAgICAgICAgIHJlczogdHJ1ZSwKICAgICAgICAgICAgICB0ZXh0OiBmaWxlTmFtZSwKICAgICAgICAgICAgICBmaWxlVHlwZTogY2hlY2tVcGxvYWRGaWxlVHlwZShmaWxlTmFtZSksCiAgICAgICAgICAgICAgcGF0aDogaXRlbS51cmwsCiAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDEwMCwKICAgICAgICAgICAgICBvcmllbnRhdGlvbjogaXRlbS5vcmllbnRhdGlvbiwKICAgICAgICAgICAgICB1cGxvYWRTaXplOiBpdGVtLmF0dGFjaG1lbnRTaXplLAogICAgICAgICAgICAgIGZpbGVTaXplOiByZWFkRmlsZVNpemVVbml0KGl0ZW0uYXR0YWNobWVudFNpemUpCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAoaXRlbS5vcmllbnRhdGlvbiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgX3RoaXMyLnVwbG9hZEZpbGVOb3JtYWwucHVzaCh0ZW1wKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczIudXBsb2FkRmlsZURpcmVjdC5wdXNoKHRlbXApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCk7CiAgICB9LAogICAgLy/muIXnqbrmtojmga/lhoXlrrkKICAgIGNsZWFyQ29udGVudDogZnVuY3Rpb24gY2xlYXJDb250ZW50KCkgewogICAgICB0aGlzLnRpdGxlID0gIiI7CiAgICAgIHRoaXMuY29udGVudCA9ICIiOwogICAgICB0aGlzLnZvdGUgPSBkZWVwQ2xvbmUodm90ZURlZmF1bHQpOwogICAgICB0aGlzLnZvdGVUZW1wID0gZGVlcENsb25lKHZvdGVEZWZhdWx0KTsKICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsID0gW107CiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IFtdOwogICAgfSwKICAgIC8vICotLS0tLS0tLS0tLS0tLS0tLS0t5oqV56Wo5pON5L2cLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KICAgIC8v5Y+W5raI5L+d5a2YCiAgICBjYW5jbGVWb3RlRWRpdDogZnVuY3Rpb24gY2FuY2xlVm90ZUVkaXQoKSB7CiAgICAgIHRoaXMudm90ZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnZvdGVUZW1wID0gZGVlcENsb25lKHRoaXMudm90ZSk7CiAgICB9LAogICAgLy/noa7orqTkv53lrZjmipXnpagKICAgIHZvdGVTYXZlOiBUaHJvdHRsZShmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGlzU2F2ZUFTID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTsKICAgICAgaWYgKCFpc1NhdmVBUyAmJiAhdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHJldHVybjsKICAgICAgdmFyIHRlbXAgPSB0aGlzLnZvdGVUZW1wOwogICAgICB0ZW1wLmVuYWJsZSA9IHRydWU7CiAgICAgIHRlbXAudm90ZU9wdGlvbnMgPSB0ZW1wLnZvdGVPcHRpb25zLmZpbHRlcihmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB0LnZhbHVlICE9IG51bGwgJiYgdC52YWx1ZSAhPSAiIjsKICAgICAgfSk7CiAgICAgIHZhciB1cGxvYWQgPSB7fTsKICAgICAgdXBsb2FkLmlkID0gdGVtcC5pZDsKICAgICAgdXBsb2FkLnRvcGljID0gdGVtcC50b3BpYzsKICAgICAgdXBsb2FkLnZvdGVUeXBlID0gdGVtcC52b3RlVHlwZSA/IDEgOiAwOwogICAgICB1cGxvYWQudm90ZU9wdGlvbnMgPSB0ZW1wLnZvdGVPcHRpb25zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnZhbHVlOwogICAgICB9KTsKICAgICAgdXBsb2FkLmVuZFRpbWUgPSB0ZW1wLmVuZFRpbWU7CiAgICAgIHNhdmVWb3RlKHVwbG9hZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5kZWJ1Zygic2F2ZSB2b3RlID09PiIgKyBKU09OLnN0cmluZ2lmeShyZXMpKTsKCiAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgIF90aGlzMy52b3RlRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmRlYnVnKCJzYXZlIGlkIiArIHJlcy5kYXRhLnZvdGVJZCk7CiAgICAgICAgICB0ZW1wLmlkID0gcmVzLmRhdGEudm90ZUlkOwogICAgICAgICAgX3RoaXMzLnZvdGUgPSBkZWVwQ2xvbmUodGVtcCk7CiAgICAgICAgICBfdGhpczMudm90ZVRlbXAgPSBkZWVwQ2xvbmUodGVtcCk7CgogICAgICAgICAgX3RoaXMzLmNoYW5nZVNhdmVTdGF0dXMoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoaXNTYXZlQVMpIHsKICAgICAgICAgIF90aGlzMy5vblZvdGVEZWxldGUoKTsKCiAgICAgICAgICBfdGhpczMuc2hvd1NuYWNrKCLmipXnpajlj6blrZjkuLrlpLHotKUiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLnNob3dTbmFjaygi5re75Yqg5oqV56Wo5aSx6LSlIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zaG93U25hY2soIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgfSwgMzAwMCksCiAgICAvL+a3u+WKoOaKleelqOmAiemhuQogICAgYWRkSXRlbTogZnVuY3Rpb24gYWRkSXRlbSgpIHsKICAgICAgdGhpcy52b3RlVGVtcC52b3RlT3B0aW9ucy5wdXNoKHsKICAgICAgICB2YWx1ZTogbnVsbAogICAgICB9KTsKICAgIH0sCiAgICAvL+WIoOmZpOaKleelqOmAiemhuQogICAgZGVsZXRlSXRlbTogZnVuY3Rpb24gZGVsZXRlSXRlbShpbmRleCkgewogICAgICAvLyAgbm90IGFsbG93IHRvIGRlbGV0ZSB0aGUgZmlyc3QKICAgICAgaWYgKGluZGV4ID4gMSkgewogICAgICAgIHRoaXMudm90ZVRlbXAudm90ZU9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfSwKICAgIC8v5Yig6Zmk5oqV56WoCiAgICBvblZvdGVEZWxldGU6IGZ1bmN0aW9uIG9uVm90ZURlbGV0ZSgpIHsKICAgICAgdGhpcy52b3RlVGVtcCA9IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCk7CiAgICAgIHRoaXMudm90ZSA9IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCk7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS3pmYTku7bkuIrkvKDmk43kvZwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogICAgdXBsb2FkRmlsZU46IGZ1bmN0aW9uIHVwbG9hZEZpbGVOKCkgewogICAgICAvL3RoaXMuJHJlZnMudXBsb2FkRmlsZU4uZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgiY2xpY2siKSk7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkRmlsZU4uY2xpY2soKTsKICAgIH0sCiAgICB1cGxvYWRGaWxlRDogZnVuY3Rpb24gdXBsb2FkRmlsZUQoKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkRmlsZUQuY2xpY2soKTsKICAgIH0sCiAgICBvbkRlbGV0ZUZpbGU6IGZ1bmN0aW9uIG9uRGVsZXRlRmlsZShpbmRleCwgaXNEaXJlY3RGaWxlKSB7CiAgICAgIGlmIChpc0RpcmVjdEZpbGUpIHsKICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfSwKICAgIGZpbGVVcGxvYWQ6IGZ1bmN0aW9uIGZpbGVVcGxvYWQoZXZlbnQsIGRpcmVjdCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciB1cEZpbGVzID0gZGlyZWN0ID8gdGhpcy51cGxvYWRGaWxlRGlyZWN0IDogdGhpcy51cGxvYWRGaWxlTm9ybWFsOwogICAgICB2YXIgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlczsKCiAgICAgIGlmICghZGlyZWN0ICYmIGZpbGUubGVuZ3RoICsgdGhpcy51cGxvYWRGaWxlTm9ybWFsLmxlbmd0aCA+IDMpIHsKICAgICAgICB0aGlzLnNob3dTbmFjaygi5q+P5qyh5pyA5aSa5Y+q6IO95LiK5LygM+S4quaWh+S7tiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkgewogICAgICAgIHZhciBpdGVtID0gZmlsZVtpXTsKICAgICAgICBpdGVtLmRpcmVjdCA9IGRpcmVjdDsKCiAgICAgICAgaWYgKGl0ZW0uc2l6ZSAvIDEwMjQgLyAxMDI0ID49IDIwKSB7CiAgICAgICAgICBfdGhpczQuc2hvd1NuYWNrKCLmgqjmnInmlofku7bkuIrkvKDlpLHotKUs6ZmE5Lu25pyA5aSn6ZmQ5Yi2MjBNIik7CgogICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgfSAvL+S4iuS8oOaWh+S7tuWOu+mHjQoKCiAgICAgICAgaWYgKHVwRmlsZXMuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICByZXR1cm4gdC50ZXh0ID09IGl0ZW0ubmFtZTsKICAgICAgICB9KSA+PSAwKSB7CiAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICB9IC8v5LiK5Lyg57G75Z6L5Yik5patCgoKICAgICAgICB2YXIgZXh0ID0gY2hlY2tVcGxvYWRGaWxlVHlwZShpdGVtLm5hbWUpOwogICAgICAgIGlmIChleHQgPT0gbnVsbCkgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgdmFyIHRlbXAgPSB7fTsKICAgICAgICB0ZW1wLnRleHQgPSBpdGVtLm5hbWU7CiAgICAgICAgdGVtcC5maWxlVHlwZSA9IGV4dDsKICAgICAgICB0ZW1wLnJlcyA9IGZhbHNlOwogICAgICAgIHRlbXAuZmlsZVNpemUgPSByZWFkRmlsZVNpemVVbml0KGl0ZW0uc2l6ZSk7CiAgICAgICAgdGVtcC51cGxvYWRTaXplID0gaXRlbS5zaXplOwoKICAgICAgICBpZiAoZGlyZWN0KSB7CiAgICAgICAgICB0ZW1wLm9yaWVudGF0aW9uID0gZ2V0RGlzdHJpYnV0b3JOdW1iZXJCeUZpbGVOYW1lKGl0ZW0ubmFtZSk7CgogICAgICAgICAgaWYgKHRlbXAub3JpZW50YXRpb24gPT0gbnVsbCB8fCB0eXBlb2YgdGVtcC5vcmllbnRhdGlvbiA9PSAidW5kZWZpbmVkIiB8fCB0ZW1wLm9yaWVudGF0aW9uID09ICIiKSB7CiAgICAgICAgICAgIHRlbXAuZXJyb3IgPSAi5paH5Lu25ZCN5LiN56ym5ZCI6KaB5rGCIjsKICAgICAgICAgICAgdXBGaWxlcy5wdXNoKHRlbXApOwogICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHVwRmlsZXMucHVzaCh0ZW1wKTsKCiAgICAgICAgaWYgKGRpcmVjdCkgewogICAgICAgICAgX3RoaXM0LnVwbG9hZERpcmVjdEltcChpdGVtLCB0ZW1wKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXM0LnVwbG9hZE5vcm1hbEltcChpdGVtKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGUubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgX3JldCA9IF9sb29wKGkpOwoKICAgICAgICBpZiAoX3JldCA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgIH0KICAgIH0sCiAgICAvL+S4iuS8oOaZrumAmumZhOS7tgogICAgdXBsb2FkTm9ybWFsSW1wOiBmdW5jdGlvbiB1cGxvYWROb3JtYWxJbXAoaXRlbSkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHVwbG9hZEZpbGUoaXRlbSwgZnVuY3Rpb24gKHByb2dyZXNzLCBmaWxlTmFtZSkgewogICAgICAgIHZhciBpbmRleCA9IF90aGlzNS51cGxvYWRGaWxlTm9ybWFsLmZpbmRJbmRleChmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIHQudGV4dCA9PSBmaWxlTmFtZTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgIF90aGlzNS51cGxvYWRGaWxlTm9ybWFsW2luZGV4XS5wcm9ncmVzcyA9IHByb2dyZXNzOwogICAgICAgIF90aGlzNS51cGxvYWRGaWxlTm9ybWFsID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczUudXBsb2FkRmlsZU5vcm1hbCkpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgaW5kZXggPSBfdGhpczUudXBsb2FkRmlsZU5vcm1hbC5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiB0LnRleHQgPT0gaXRlbS5uYW1lOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgdXBkYXRlID0gX3RoaXM1LnVwbG9hZEZpbGVOb3JtYWxbaW5kZXhdOwoKICAgICAgICBpZiAoIXJlcyB8fCB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8IHJlcy5jb2RlICE9IDApIHsKICAgICAgICAgIHVwZGF0ZVtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXBkYXRlLnBhdGggPSByZXMuZGF0YS51cmw7CiAgICAgICAgICB1cGRhdGUucmVzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaW5kZXggPSBfdGhpczUudXBsb2FkRmlsZU5vcm1hbC5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiB0LnRleHQgPT0gaXRlbS5uYW1lOwogICAgICAgIH0pOwoKICAgICAgICBfdGhpczUudXBsb2FkRmlsZU5vcm1hbFtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS51cGxvYWRGaWxlTm9ybWFsID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczUudXBsb2FkRmlsZU5vcm1hbCkpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+S4iuS8oOWumuWQkemZhOS7tgogICAgdXBsb2FkRGlyZWN0SW1wOiBmdW5jdGlvbiB1cGxvYWREaXJlY3RJbXAoaXRlbSwgdGVtcCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGRlYWxlckNvZGVWYWxpZCh0ZW1wLm9yaWVudGF0aW9uKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoIXJlcyB8fCB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8IHJlcy5jb2RlICE9IDApIHsKICAgICAgICAgIHRlbXAuZXJyb3IgPSAi5paH5Lu25ZCN5LiN56ym5ZCI6KaB5rGCIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGluZGV4ID0gX3RoaXM2LnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiB0LnRleHQgPT0gaXRlbS5uYW1lOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgICAgdXBsb2FkRmlsZShpdGVtLCBmdW5jdGlvbiAocHJvZ3Jlc3MsIGZpbGVOYW1lKSB7CiAgICAgICAgICAgIHZhciBpbmRleCA9IF90aGlzNi51cGxvYWRGaWxlRGlyZWN0LmZpbmRJbmRleChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiB0LnRleHQgPT0gZmlsZU5hbWU7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgICAgICBfdGhpczYudXBsb2FkRmlsZURpcmVjdFtpbmRleF0ucHJvZ3Jlc3MgPSBwcm9ncmVzczsKICAgICAgICAgICAgX3RoaXM2LnVwbG9hZEZpbGVEaXJlY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNi51cGxvYWRGaWxlRGlyZWN0KSk7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgdmFyIGluZGV4ID0gX3RoaXM2LnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHQudGV4dCA9PSBpdGVtLm5hbWU7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyIHVwZGF0ZSA9IF90aGlzNi51cGxvYWRGaWxlRGlyZWN0W2luZGV4XTsKCiAgICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICAgIHVwZGF0ZVtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB1cGRhdGUucGF0aCA9IHJlcy5kYXRhLnVybDsKICAgICAgICAgICAgICB1cGRhdGUucmVzID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaW5kZXggPSBfdGhpczYudXBsb2FkRmlsZURpcmVjdC5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICByZXR1cm4gdC50ZXh0ID09IGl0ZW0ubmFtZTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpczYudXBsb2FkRmlsZURpcmVjdFtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXM2LnVwbG9hZEZpbGVEaXJlY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNi51cGxvYWRGaWxlRGlyZWN0KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaW5kZXggPSBfdGhpczYudXBsb2FkRmlsZURpcmVjdC5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiB0LnRleHQgPT0gaXRlbS5uYW1lOwogICAgICAgIH0pOwoKICAgICAgICBfdGhpczYudXBsb2FkRmlsZURpcmVjdFtpbmRleF0uZXJyb3IgPSAi5paH5Lu25ZCN5LiN56ym5ZCI6KaB5rGCIjsKICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShfdGhpczYudXBsb2FkRmlsZURpcmVjdCkpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LnVwbG9hZEZpbGVEaXJlY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNi51cGxvYWRGaWxlRGlyZWN0KSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS3kv53lrZjojYnnqL/mk43kvZwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogICAgc2F2ZUFydGljbGU6IFRocm90dGxlKGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zYXZlQXJ0aWNsZUltcCgpOwogICAgfSwgZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnNob3dTbmFjaygi5oKo5o+Q5Lqk55qE5aSq6aKR57mB5LqG77yM56iN562J5LiA5Lya6K+V6K+V5ZCnIik7CiAgICB9KSwKICAgIGF1dG9TYXZlOiBEZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLm5lZWRTYXZlKSB7CiAgICAgICAgdGhpcy5hdXRvU2F2aW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLnNhdmVBcnRpY2xlSW1wKCk7CiAgICAgIH0KICAgIH0sIDEwMDAwKSwKICAgIHNhdmVBcnRpY2xlSW1wOiBmdW5jdGlvbiBzYXZlQXJ0aWNsZUltcCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uKCkpIHsKICAgICAgICB0aGlzLmF1dG9TYXZpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhdHRhY2htZW50TGlzdHMgPSBbXTsKICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgdGVtcCA9IHt9OwogICAgICAgIHRlbXAucGF0aCA9IGl0ZW0ucGF0aDsKICAgICAgICB0ZW1wLmF0dGFjaG1lbnRTaXplID0gaXRlbS51cGxvYWRTaXplOwogICAgICAgIGF0dGFjaG1lbnRMaXN0cy5wdXNoKHRlbXApOwogICAgICB9KTsKICAgICAgdGhpcy51cGxvYWRGaWxlRGlyZWN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgdGVtcCA9IHt9OwogICAgICAgIHRlbXAucGF0aCA9IGl0ZW0ucGF0aDsKICAgICAgICB0ZW1wLm9yaWVudGF0aW9uID0gaXRlbS5vcmllbnRhdGlvbjsKICAgICAgICB0ZW1wLmF0dGFjaG1lbnRTaXplID0gaXRlbS51cGxvYWRTaXplOwogICAgICAgIGF0dGFjaG1lbnRMaXN0cy5wdXNoKHRlbXApOwogICAgICB9KTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50LAogICAgICAgIHZvdGVJZDogdGhpcy52b3RlLmlkLAogICAgICAgIGF0dGFjaG1lbnRMaXN0OiBhdHRhY2htZW50TGlzdHMKICAgICAgfTsKICAgICAgc2F2ZU1lc3NhZ2UoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgIF90aGlzNy5uZWVkU2F2ZSA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzNy5zaG93U25hY2soX3RoaXM3LmF1dG9TYXZpbmcgPyAi6Ieq5Yqo5L+d5a2Y5oiQ5YqfIiA6ICLkv53lrZjmiJDlip8iKTsKCiAgICAgICAgICBpZiAoX3RoaXM3LmlkICE9IHJlcy5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzNy5pZCA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgX3RoaXM3LiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIGlkOiBhZXNFbmNyeXB0KF90aGlzNy5pZCArICIiKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghX3RoaXM3LmF1dG9TYXZpbmcpIF90aGlzNy5zaG93U25hY2soIuS/neWtmOWksei0pSIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlID09IG51bGwgfHwgdHlwZW9mIGVycm9yLnJlc3BvbnNlID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICBpZiAoIV90aGlzNy5hdXRvU2F2aW5nKSBfdGhpczcuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciByZXMgPSBlcnJvci5yZXNwb25zZTsKCiAgICAgICAgaWYgKHJlcy5kYXRhID09IG51bGwgfHwgdHlwZW9mIHJlcy5kYXRhID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICBpZiAoIV90aGlzNy5hdXRvU2F2aW5nKSBfdGhpczcuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CgogICAgICAgIGlmIChkYXRhLmNvZGUgPT0gbnVsbCB8fCB0eXBlb2YgZGF0YS5jb2RlID09ICJ1bmRlZmluZWQiIHx8IGRhdGEuY29kZSAhPSA0KSB7CiAgICAgICAgICBpZiAoIV90aGlzNy5hdXRvU2F2aW5nKSBfdGhpczcuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBzZW5zaXRpdmVXb3JkcyA9IGRhdGEuZGF0YTsKCiAgICAgICAgaWYgKHNlbnNpdGl2ZVdvcmRzID09IG51bGwgfHwgdHlwZW9mIHNlbnNpdGl2ZVdvcmRzID09ICJ1bmRlZmluZWQiIHx8IHNlbnNpdGl2ZVdvcmRzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICBpZiAoIV90aGlzNy5hdXRvU2F2aW5nKSBfdGhpczcuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKF90aGlzNy5hdXRvU2F2aW5nKSByZXR1cm47CgogICAgICAgICAgX3RoaXM3LnNob3dTbmFjaygi5oKo5o+Q5Lqk55qE5YaF5a655Lit5pyJ5pWP5oSf6K+N77yM6K+36L+b6KGM5L+u5pS55ZCO6YeN5paw5o+Q5LqkIik7CgogICAgICAgICAgY29uc29sZS5kZWJ1ZygiZXJyb3IiICsgSlNPTi5zdHJpbmdpZnkoc2Vuc2l0aXZlV29yZHMpKTsKICAgICAgICAgIHZhciB0aXRsZUVycm9yID0gW107CiAgICAgICAgICBzZW5zaXRpdmVXb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7CiAgICAgICAgICAgIGlmIChfdGhpczcudGl0bGUuaW5kZXhPZih3b3JkKSA+PSAwKSB7CiAgICAgICAgICAgICAgdGl0bGVFcnJvci5wdXNoKHdvcmQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczcuY29udGVudCA9IGhpZ2hMaWdodEFsbFRleHQoX3RoaXM3LmNvbnRlbnQsIHdvcmQpOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKHRpdGxlRXJyb3IubGVuZ3RoID4gMCkgewogICAgICAgICAgICBfdGhpczcudGl0bGVFcnJvck1lc3NhZ2UgPSAi5YyF5ZCr5pWP5oSf6K+NOiI7CiAgICAgICAgICAgIHRpdGxlRXJyb3IuZm9yRWFjaChmdW5jdGlvbiAod29yZCkgewogICAgICAgICAgICAgIF90aGlzNy50aXRsZUVycm9yTWVzc2FnZSArPSB3b3JkICsgIiAiOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczcuYXV0b1NhdmluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBjYWN1bGF0ZURlbGVhckxpc3Q6IGZ1bmN0aW9uIGNhY3VsYXRlRGVsZWFyTGlzdCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLmRlbGVhckxpc3QgPSBbXTsKICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KSk7CiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0ucmVzICYmIChpdGVtLmVycm9yID09IG51bGwgfHwgdHlwZW9mIGl0ZW0uZXJyb3IgPT0gInVuZGVmaW5lZCIpKSB7CiAgICAgICAgICBfdGhpczguZGVsZWFyTGlzdC5wdXNoKGl0ZW0ub3JpZW50YXRpb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGVsZWFyTGlzdCk7CiAgICB9LAogICAgcHVibGlzaEFydGljbGU6IGZ1bmN0aW9uIHB1Ymxpc2hBcnRpY2xlKCkgewogICAgICBpZiAodGhpcy5uZWVkU2F2ZSkgewogICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmgqjmnInkv67mlLnmnKrkv53lrZjvvIzor7fkv53lrZjlkI7lho3ov5vooYzlj5HluIPjgIIiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5wcmVjb25kaXRpb24oKSkgcmV0dXJuOwogICAgICB0aGlzLnB1Ymxpc2ggPSB0cnVlOwogICAgfSwKICAgIHByZWNvbmRpdGlvbjogZnVuY3Rpb24gcHJlY29uZGl0aW9uKCkgewogICAgICB2YXIgZXJyb3IgPSBudWxsOwoKICAgICAgaWYgKGlzTnVsbCh0aGlzLnRpdGxlKSkgewogICAgICAgIGlmICghdGhpcy5hdXRvU2F2aW5nKSB7CiAgICAgICAgICBlcnJvciA9IHRoaXMudGl0bGVFcnJvck1lc3NhZ2UgPSAi5qCH6aKY5LiN6IO95Li656m6IjsKICAgICAgICAgIHRoaXMuc2hvd1NuYWNrKGVycm9yKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKGlzTnVsbCh0aGlzLmNvbnRlbnQpKSB7CiAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHRoaXMuc2hvd1NuYWNrKCLmraPmloflhoXlrrnkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS5lcnJvciAhPSBudWxsKSB7CiAgICAgICAgICBlcnJvciA9IGl0ZW0uZXJyb3I7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChpdGVtLnJlcyA9PSBmYWxzZSkgewogICAgICAgICAgZXJyb3IgPSAi6K+3562J5b6F5paH5Lu25LiK5Lyg5a6M5oiQIjsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAoZXJyb3IgIT0gbnVsbCAmJiAhdGhpcy5hdXRvU2F2aW5nKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soZXJyb3IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS5lcnJvciAhPSBudWxsKSB7CiAgICAgICAgICBlcnJvciA9IGl0ZW0uZXJyb3I7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChpdGVtLnJlcyA9PSBmYWxzZSkgewogICAgICAgICAgZXJyb3IgPSAi6K+3562J5b6F5paH5Lu25LiK5Lyg5a6M5oiQIjsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAoZXJyb3IgIT0gbnVsbCAmJiAhdGhpcy5hdXRvU2F2aW5nKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soZXJyb3IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgc2hvd1NuYWNrOiBmdW5jdGlvbiBzaG93U25hY2sobWVzc2FnZSkgewogICAgICBpZiAodGhpcy5wcmV2aWV3IHx8IHRoaXMucHVibGlzaCB8fCB0aGlzLiRyb3V0ZS5wYXRoICE9ICIvcHVibGlzaEFydGljbGUiKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzaG93U25hY2tiYXIobWVzc2FnZSk7CiAgICB9LAogICAgY2xvc2VTbmFjazogZnVuY3Rpb24gY2xvc2VTbmFjaygpIHsKICAgICAgY2xvc2VTbmFja2JhcigpOwogICAgfSwKICAgIGNoYW5nZVNhdmVTdGF0dXM6IGZ1bmN0aW9uIGNoYW5nZVNhdmVTdGF0dXMoKSB7CiAgICAgIHRoaXMubmVlZFNhdmUgPSB0cnVlOwogICAgICB0aGlzLmF1dG9TYXZlKCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY29udGVudDogZnVuY3Rpb24gY29udGVudCgpIHsKICAgICAgdGhpcy5jaGFuZ2VTYXZlU3RhdHVzKCk7CiAgICB9LAogICAgdGl0bGU6IGZ1bmN0aW9uIHRpdGxlKCkgewogICAgICB0aGlzLnRpdGxlRXJyb3JNZXNzYWdlID0gIiI7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKICAgIHVwbG9hZEZpbGVEaXJlY3Q6IGZ1bmN0aW9uIHVwbG9hZEZpbGVEaXJlY3QoKSB7CiAgICAgIHRoaXMuY2FjdWxhdGVEZWxlYXJMaXN0KCk7CiAgICB9CiAgfQp9Ow=="},null]}