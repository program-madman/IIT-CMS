{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/thread-loader/dist/cjs.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/publish.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/publish.vue","mtime":1640382236585},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2xpdWd1YW5naHVpL0RvY3VtZW50cy9jbXNfY29kZS9teS1tZXNzYWdlL2Ntcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBwdWJsaXNoTWVzc2FnZSwgZ2V0RGVhbGVyTGlzdCwgZ2V0RGVhbGVyRGVwTGlzdCwgZ2V0T2VtRGVwTGlzdCB9IGZyb20gIkAvYXBpL2dldERhdGEuanMiOwppbXBvcnQgIkAvdXRpbHMvdGltZUZvcm1hdGUuanMiOwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIkAvdXRpbHMvZXZlbnQtYnVzIjsKaW1wb3J0IHsgc2hvd1NuYWNrYmFyLCBjbG9zZVNuYWNrYmFyIH0gZnJvbSAiQC91dGlscy9zbmFja2Jhci5qcyI7CmltcG9ydCB7IFRocm90dGxlLCBkZWVwQ2xvbmUgfSBmcm9tICJAL3V0aWxzL3Rvb2xzLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBvcGVuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgdm90ZUVuYWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGRlYWxlcjogewogICAgICB0eXBlOiBbT2JqZWN0LCBBcnJheSwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICB0aW1lUGlja2VyOiBmdW5jdGlvbiB0aW1lUGlja2VyKCkgewogICAgICByZXR1cm4gaW1wb3J0KCIuL3RpbWVQaWNrZXIudnVlIik7CiAgICB9LAogICAgY29uZmlybTogZnVuY3Rpb24gY29uZmlybSgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiLi9wdWJsaXNoQ29uZmlybS52dWUiKTsKICAgIH0sCiAgICBhbGVydFRpbWU6IGZ1bmN0aW9uIGFsZXJ0VGltZSgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgiQC9jb21wb25lbnRzL2Jhc2UvYWxlcnRUaW1lIik7CiAgICB9LAogICAgbG9hZGluZ0FsZXJ0OiBmdW5jdGlvbiBsb2FkaW5nQWxlcnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2xvYWRpbmdBbGVydCIpOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogdGhpcy5vcGVuLAogICAgICBtc2dOdW1iZXI6IG51bGwsCiAgICAgIHJlbGVhc2VUaW1lOiAiIiwKICAgICAgZWZmZWN0aXZlVGltZTogIiIsCiAgICAgIGludmFsaWRUaW1lOiAiIiwKICAgICAgZmVlZGJhY2tUeXBlOiA0LAogICAgICB1cGxvYWRpbmc6IGZhbHNlLAogICAgICByZXBseVR5cGVzOiBbewogICAgICAgIHRleHQ6ICLml6DpnIDlm57lpI0iLAogICAgICAgIHZhbHVlOiA0CiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAi5bey6K+75Zue5omnIiwKICAgICAgICB2YWx1ZTogMAogICAgICB9LCB7CiAgICAgICAgdGV4dDogIuaWh+Wtl+WbnuWkjSIsCiAgICAgICAgdmFsdWU6IDEKICAgICAgfSwgewogICAgICAgIHRleHQ6ICLpmYTku7YiLAogICAgICAgIHZhbHVlOiAyCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAi5oqV56WoIiwKICAgICAgICB2YWx1ZTogMwogICAgICB9XSwKICAgICAgY2hfZGVsZWFyX2Rpc2FibGU6IGZhbHNlLAogICAgICBjaF9kZWxlYXI6IGZhbHNlLAogICAgICBjaF9hcmVhX3N1cHA6IFtdLAogICAgICBjaF9jb21fc3VwcDogW10sCiAgICAgIGNoX2RlbGVhcl9zZWxlY3Q6IFtdLAogICAgICBjaF9kZWxlYXJfZGVwbGlzdF9hbGw6IGZhbHNlLAogICAgICBjaF9kZWxlYXJfZGVwbGlzdDogW10sCiAgICAgIGNoX29lbTogZmFsc2UsCiAgICAgIGNoX29lbV9kZXBsaXN0OiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXREZWFsZXJMaXN0KCk7CiAgICB0aGlzLmluaXREZWFsZXJEZXAoKTsKICAgIHRoaXMuaW5pdE9lbURlcCgpOwogIH0sCiAgbWV0aG9kczogewogICAgcmVzZXRQdWJsaXNoVGltZTogZnVuY3Rpb24gcmVzZXRQdWJsaXNoVGltZSgpIHsKICAgICAgdGhpcy5yZWxlYXNlVGltZSA9ICIiOwogICAgfSwKICAgIHJlc2V0UG9saWN5VGltZTogZnVuY3Rpb24gcmVzZXRQb2xpY3lUaW1lKCkgewogICAgICB0aGlzLmVmZmVjdGl2ZVRpbWUgPSAiIjsKICAgICAgdGhpcy5pbnZhbGlkVGltZSA9ICIiOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2VEaWFsb2ciKTsKICAgICAgY2xvc2VTbmFja2JhcigpOwogICAgfSwKICAgIGluaXREZWFsZXJMaXN0OiBmdW5jdGlvbiBpbml0RGVhbGVyTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGdldERlYWxlckxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvL2NvbnNvbGUuZGVidWcoSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgaWYgKCFyZXMgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwoKICAgICAgICBpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgPT0gInVuZGVmaW5lZCIgfHwgZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGFyZWFTZXQgPSBuZXcgU2V0KCk7CiAgICAgICAgdmFyIGRlYWxlclR5cGVTZXQgPSBuZXcgU2V0KCk7CiAgICAgICAgX3RoaXMuY2hfZGVsZWFyX3NlbGVjdCA9IFtdOwogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIHZhciBhcmVhID0gaXRlbS5hcmVhOwoKICAgICAgICAgIGlmIChhcmVhICE9IG51bGwgJiYgX3R5cGVvZihhcmVhKSAhPSB1bmRlZmluZWQgJiYgYXJlYSAhPSAiIikgewogICAgICAgICAgICBhcmVhU2V0LmFkZChhcmVhKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgdHlwZSA9IGl0ZW0uZGVhbGVyVHlwZTsKCiAgICAgICAgICBpZiAodHlwZSAhPSBudWxsICYmIF90eXBlb2YodHlwZSkgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGlmICh0eXBlID09IDApIHR5cGUgKz0gMzsKICAgICAgICAgICAgZGVhbGVyVHlwZVNldC5hZGQodHlwZSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgIGlkOiBpbmRleCwKICAgICAgICAgICAgaXNDaGVjazogZmFsc2UsCiAgICAgICAgICAgIGRpc2FibGU6IGZhbHNlLAogICAgICAgICAgICBjb21wYW55TmFtZTogaXRlbS5jb21wYW55TmFtZSwKICAgICAgICAgICAgY29tcGFueUNvZGU6IGl0ZW0uY29tcGFueUNvZGUsCiAgICAgICAgICAgIGNvbXBhbnlUeXBlOiBpdGVtLmNvbXBhbnlUeXBlLAogICAgICAgICAgICBkZWFsZXJUeXBlOiBpdGVtLmRlYWxlclR5cGUsCiAgICAgICAgICAgIGFyZWE6IGl0ZW0uYXJlYSwKICAgICAgICAgICAgYXJlYWxhYjogaXRlbS5hcmVhID09IG51bGwgPyBudWxsIDogaXRlbS5hcmVhLnN1YnN0cmluZygwLCAxKQogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5jaF9kZWxlYXJfc2VsZWN0LnB1c2godGVtcCk7CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMuY2hfZGVsZWFyX3NlbGVjdF92aWV3ID0gZGVlcENsb25lKF90aGlzLmNoX2RlbGVhcl9zZWxlY3QpOwogICAgICAgIF90aGlzLmNoX2FyZWFfc3VwcCA9IFtdOwogICAgICAgIEFycmF5LmZyb20oYXJlYVNldCkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIHZhciB0ZW1wID0gewogICAgICAgICAgICBpZDogaW5kZXgsCiAgICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlLAogICAgICAgICAgICBsYWJsZTogaXRlbQogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5jaF9hcmVhX3N1cHAucHVzaCh0ZW1wKTsKICAgICAgICB9KTsKICAgICAgICBfdGhpcy5jaF9jb21fc3VwcCA9IFtdOwogICAgICAgIEFycmF5LmZyb20oZGVhbGVyVHlwZVNldCkuc29ydCgpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICB2YXIgdGVtcCA9IHsKICAgICAgICAgICAgaWQ6IGluZGV4LAogICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgbGFibGU6IF90aGlzLmdldERlYWxlclR5cGVEZXNjKGl0ZW0pLAogICAgICAgICAgICB0eXBlOiBpdGVtICUgMwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5jaF9jb21fc3VwcC5wdXNoKHRlbXApOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaCgpOwogICAgfSwKICAgIGluaXREZWFsZXJEZXA6IGZ1bmN0aW9uIGluaXREZWFsZXJEZXAoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZ2V0RGVhbGVyRGVwTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKCiAgICAgICAgaWYgKCFkYXRhIHx8IHR5cGVvZiBkYXRhID09ICJ1bmRlZmluZWQiIHx8IGRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5jaF9kZWxlYXJfZGVwbGlzdCA9IFtdOwogICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgIGlkOiBrZXksCiAgICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZTogZGF0YVtrZXldCiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzMi5jaF9kZWxlYXJfZGVwbGlzdC5wdXNoKHRlbXApOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaCgpOwogICAgfSwKICAgIGluaXRPZW1EZXA6IGZ1bmN0aW9uIGluaXRPZW1EZXAoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgZ2V0T2VtRGVwTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKCiAgICAgICAgaWYgKCFkYXRhIHx8IHR5cGVvZiBkYXRhID09ICJ1bmRlZmluZWQiIHx8IGRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzMy5jaF9vZW1fZGVwbGlzdCA9IFtdOwogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIHZhciB0ZW1wID0gewogICAgICAgICAgICBpZDogaW5kZXgsCiAgICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlLAogICAgICAgICAgICBjb21wYW55TmFtZTogaXRlbS5jb21wYW55TmFtZSwKICAgICAgICAgICAgY29tcGFueUNvZGU6IGl0ZW0uY29tcGFueUNvZGUsCiAgICAgICAgICAgIGNvbXBhbnlUeXBlOiBpdGVtLmNvbXBhbnlUeXBlLAogICAgICAgICAgICBkZWFsZXJUeXBlOiBpdGVtLmRlYWxlclR5cGUsCiAgICAgICAgICAgIGFyZWE6IGl0ZW0uYXJlYQogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpczMuY2hfb2VtX2RlcGxpc3QucHVzaCh0ZW1wKTsKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShfdGhpczMuY2hfb2VtX2RlcGxpc3QpKTsKICAgICAgfSkuY2F0Y2goKTsKICAgIH0sCiAgICBnZXREZWFsZXJUeXBlRGVzYzogZnVuY3Rpb24gZ2V0RGVhbGVyVHlwZURlc2ModHlwZSkgewogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICByZXR1cm4gIjRz5bqXIjsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgcmV0dXJuICLkuoznuqfnvZHngrkiOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXR1cm4gIueLrOeri+WUruWQjiI7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gIuacquWIhuexuyI7CiAgICAgIH0KICAgIH0sCiAgICAvL+mAieaLqeWFqOmDqAogICAgc2VsZWN0QWxsRGVsZWFyOiBmdW5jdGlvbiBzZWxlY3RBbGxEZWxlYXIoKSB7CiAgICAgIHZhciBpc1NlbGVjdGVkID0gdGhpcy5jaF9kZWxlYXI7CiAgICAgIHRoaXMuY2hfYXJlYV9zdXBwLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpdGVtLmlzQ2hlY2sgPSBpc1NlbGVjdGVkOwogICAgICB9KTsKICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5pc0NoZWNrID0gaXNTZWxlY3RlZDsKICAgICAgfSk7CiAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5pc0NoZWNrID0gaXNTZWxlY3RlZDsKICAgICAgfSk7CiAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdCA9IGRlZXBDbG9uZSh0aGlzLmNoX2RlbGVhcl9zZWxlY3QpOwogICAgfSwKICAgIHNlbGVjdEFsbERlcGxpc3Q6IGZ1bmN0aW9uIHNlbGVjdEFsbERlcGxpc3QoKSB7CiAgICAgIHZhciBpc1NlbGVjdGVkID0gdGhpcy5jaF9kZWxlYXJfZGVwbGlzdF9hbGw7CiAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW0uaXNDaGVjayA9IGlzU2VsZWN0ZWQ7CiAgICAgIH0pOwogICAgICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0ID0gZGVlcENsb25lKHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QpOwogICAgfSwKICAgIHNlbGVjdEFsbE9lbTogZnVuY3Rpb24gc2VsZWN0QWxsT2VtKCkgewogICAgICB2YXIgaXNTZWxlY3RlZCA9IHRoaXMuY2hfb2VtOwogICAgICB0aGlzLmNoX29lbV9kZXBsaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpdGVtLmlzQ2hlY2sgPSBpc1NlbGVjdGVkOwogICAgICB9KTsKICAgIH0sCiAgICBvbkFyZWFTZWxlY3RDaGFuZ2U6IGZ1bmN0aW9uIG9uQXJlYVNlbGVjdENoYW5nZShpdGVtKSB7CiAgICAgIGlmICghaXRlbS5pc0NoZWNrKSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgICBpZiAoaXQuYXJlYSA9PSBpdGVtLmxhYmxlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLnNldERlYWxlclVuQ2hlY2tlZElmTmVlZCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hfZGVsZWFyID0gdHJ1ZTsKICAgICAgICB2YXIgc2VsZWNUeXBlID0gW107CiAgICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKGZ1bmN0aW9uIChpdCkgewogICAgICAgICAgaWYgKGl0LmlzQ2hlY2spIHsKICAgICAgICAgICAgc2VsZWNUeXBlLnB1c2goaXQudHlwZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKHNlbGVjVHlwZS5sZW5ndGggPT0gMCkgcmV0dXJuOwogICAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKGZ1bmN0aW9uIChpdCkgewogICAgICAgICAgdmFyIHR5cGVTZWxlY3RlZCA9IHNlbGVjVHlwZS5pbmRleE9mKGl0LmRlYWxlclR5cGUpID49IDA7CgogICAgICAgICAgaWYgKHR5cGVTZWxlY3RlZCAmJiBpdC5hcmVhID09IGl0ZW0ubGFibGUpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvblR5cGVTZWxlY3RDaGFuZ2U6IGZ1bmN0aW9uIG9uVHlwZVNlbGVjdENoYW5nZShpdGVtKSB7CiAgICAgIGlmICghaXRlbS5pc0NoZWNrKSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgICBpZiAoaXQuZGVhbGVyVHlwZSA9PSBpdGVtLnR5cGUpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2V0RGVhbGVyVW5DaGVja2VkSWZOZWVkKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXIgPSB0cnVlOwogICAgICAgIHZhciBzZWxlY3RBcmVhID0gW107CiAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHAuZm9yRWFjaChmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIGlmIChpdC5pc0NoZWNrKSB7CiAgICAgICAgICAgIHNlbGVjdEFyZWEucHVzaChpdC5sYWJsZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKHNlbGVjdEFyZWEubGVuZ3RoID09IDApIHJldHVybjsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaChmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIHZhciBhcmVhU2VsZWN0ZWQgPSBzZWxlY3RBcmVhLmluZGV4T2YoaXQuYXJlYSkgPj0gMDsKCiAgICAgICAgICBpZiAoYXJlYVNlbGVjdGVkICYmIGl0LmRlYWxlclR5cGUgPT0gaXRlbS50eXBlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25EZWFsZXJTZWxlY3RDaGFuZ2U6IGZ1bmN0aW9uIG9uRGVhbGVyU2VsZWN0Q2hhbmdlKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0uaXNDaGVjaykgewogICAgICAgIHRoaXMuY2hfZGVsZWFyID0gdHJ1ZTsKICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgICBpZiAoaXQudHlwZSA9PSBpdGVtLmRlYWxlclR5cGUpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHAuZm9yRWFjaChmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIGlmIChpdC5sYWJsZSA9PSBpdGVtLmFyZWEpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5Y+q5Yi35paw5b2T5YmN5p2h55uu55u45YWzCiAgICAgICAgLy8gaWYodGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZpbmRJbmRleCgoaXQpPT4gaXQuaXNDaGVjayAmJiBpdC5kZWFsZXJUeXBlID09IGl0ZW0uZGVhbGVyVHlwZSkgPCAwKSB7CiAgICAgICAgLy8gICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goKGl0KSA9PiBpdC50eXBlID09IGl0ZW0uZGVhbGVyVHlwZSAmJiAoaXQuaXNDaGVjayA9IGZhbHNlKSkKICAgICAgICAvLyAgIHRoaXMuc2V0RGVhbGVyVW5DaGVja2VkSWZOZWVkKCk7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGlmKHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5maW5kSW5kZXgoKGl0KSA9PiBpdC5pc0NoZWNrICYmIGl0LmFyZWEgPT0gaXRlbS5hcmVhKTwwKXsKICAgICAgICAvLyAgIHRoaXMuY2hfYXJlYV9zdXBwLmZvckVhY2goKGl0KSA9PiBpdC5sYWJsZSA9PSBpdGVtLmFyZWEgJiYgKGl0LmlzQ2hlY2sgPSBmYWxzZSkpCiAgICAgICAgLy8gICB0aGlzLnNldERlYWxlclVuQ2hlY2tlZElmTmVlZCgpOwogICAgICAgIC8vIH0KICAgICAgICAvLyDlhajpg6jliLfmlrAKICAgICAgICB2YXIgYXJlYVNldCA9IG5ldyBTZXQoKTsKICAgICAgICB2YXIgZGVhbGVyVHlwZVNldCA9IG5ldyBTZXQoKTsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaChmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIGlmIChpdC5pc0NoZWNrKSB7CiAgICAgICAgICAgIGFyZWFTZXQuYWRkKGl0LmFyZWEpOwogICAgICAgICAgICBkZWFsZXJUeXBlU2V0LmFkZChpdC5kZWFsZXJUeXBlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgYXJlYSA9IEFycmF5LmZyb20oYXJlYVNldCk7CiAgICAgICAgdmFyIGRlYWxlclR5cGUgPSBBcnJheS5mcm9tKGRlYWxlclR5cGVTZXQpOwogICAgICAgIHRoaXMuY2hfY29tX3N1cHAuZm9yRWFjaChmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIHJldHVybiBkZWFsZXJUeXBlLmluZGV4T2YoaXQudHlwZSkgPCAwICYmIChpdC5pc0NoZWNrID0gZmFsc2UpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwLmZvckVhY2goZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgICByZXR1cm4gYXJlYS5pbmRleE9mKGl0LmxhYmxlKSA8IDAgJiYgKGl0LmlzQ2hlY2sgPSBmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZXREZWFsZXJVbkNoZWNrZWRJZk5lZWQoKTsKICAgICAgfQogICAgfSwKICAgIHNldERlYWxlclVuQ2hlY2tlZElmTmVlZDogZnVuY3Rpb24gc2V0RGVhbGVyVW5DaGVja2VkSWZOZWVkKCkgewogICAgICB0aGlzLmNoX2NvbV9zdXBwLmZpbmRJbmRleChmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gaXQuaXNDaGVjazsKICAgICAgfSkgPCAwICYmIHRoaXMuY2hfYXJlYV9zdXBwLmZpbmRJbmRleChmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gaXQuaXNDaGVjazsKICAgICAgfSkgPCAwICYmICh0aGlzLmNoX2RlbGVhciA9IGZhbHNlKTsKICAgIH0sCiAgICBvbkRlYWxlckRlcGxpc3RDaGFuZ2U6IGZ1bmN0aW9uIG9uRGVhbGVyRGVwbGlzdENoYW5nZShpdGVtKSB7CiAgICAgIGlmIChpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0X2FsbCA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5jaF9kZWxlYXJfZGVwbGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIGl0LmlzQ2hlY2s7CiAgICAgIH0pIDwgMCkgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3RfYWxsID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBvbk9lbVNlbGVjdENoYW5nZTogZnVuY3Rpb24gb25PZW1TZWxlY3RDaGFuZ2UoaXRlbSkgewogICAgICBpZiAoaXRlbS5pc0NoZWNrKSB7CiAgICAgICAgdGhpcy5jaF9vZW0gPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKHRoaXMuY2hfb2VtX2RlcGxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBpdC5pc0NoZWNrID09IHRydWU7CiAgICAgIH0pIDwgMCkgewogICAgICAgIHRoaXMuY2hfb2VtID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBwdWJsaXNoOiBUaHJvdHRsZShmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucHVibGlzaEltcCgpOwogICAgfSwgZnVuY3Rpb24gKCkgewogICAgICBzaG93U25hY2tiYXIoIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgfSksCiAgICBwdWJsaXNoSW1wOiBmdW5jdGlvbiBwdWJsaXNoSW1wKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICghL15bQS1aYS16MC05XSokLy50ZXN0KHRoaXMubXNnTnVtYmVyKSkgewogICAgICAgIHNob3dTbmFja2Jhcigi5paH56ug57yW5Y+36K+36L6T5YWlMjDkvY3mlbDlrZfkuI7lrZfmr43nu4TlkIjvvIjpgInloavvvIkiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBkZWFsZXJzID0gW107CiAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0uaXNDaGVjaykgewogICAgICAgICAgdmFyIHRlbXAgPSB7CiAgICAgICAgICAgIGNvbXBhbnlOYW1lOiBpdGVtLmNvbXBhbnlOYW1lLAogICAgICAgICAgICBjb21wYW55Q29kZTogaXRlbS5jb21wYW55Q29kZSwKICAgICAgICAgICAgY29tcGFueVR5cGU6IGl0ZW0uY29tcGFueVR5cGUsCiAgICAgICAgICAgIGRlYWxlclR5cGU6IGl0ZW0uZGVhbGVyVHlwZSwKICAgICAgICAgICAgYXJlYTogaXRlbS5hcmVhCiAgICAgICAgICB9OwogICAgICAgICAgZGVhbGVycy5wdXNoKHRlbXApOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciBkZXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoKICAgICAgaWYgKGRlYWxlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBoYXNkZXAgPSBmYWxzZTsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChpdGVtLmlzQ2hlY2spIHsKICAgICAgICAgICAgZGVwW2l0ZW0uaWRdID0gaXRlbS52YWx1ZTsKICAgICAgICAgICAgaGFzZGVwID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhkZXApOwoKICAgICAgICBpZiAoIWhhc2RlcCkgewogICAgICAgICAgc2hvd1NuYWNrYmFyKCLor7fpgInmi6nlj5HluIPogYzkvY3lkI7ph43or5UiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuY2hfb2VtX2RlcGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLmlzQ2hlY2spIHsKICAgICAgICAgIHZhciB0ZW1wID0gewogICAgICAgICAgICBjb21wYW55TmFtZTogaXRlbS5jb21wYW55TmFtZSwKICAgICAgICAgICAgY29tcGFueUNvZGU6IGl0ZW0uY29tcGFueUNvZGUsCiAgICAgICAgICAgIGNvbXBhbnlUeXBlOiBpdGVtLmNvbXBhbnlUeXBlLAogICAgICAgICAgICBkZWFsZXJUeXBlOiBpdGVtLmRlYWxlclR5cGUsCiAgICAgICAgICAgIGFyZWE6IGl0ZW0uYXJlYQogICAgICAgICAgfTsKICAgICAgICAgIGRlYWxlcnMucHVzaCh0ZW1wKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKGRlYWxlcnMubGVuZ3RoID09IDApIHsKICAgICAgICBzaG93U25hY2tiYXIoIuacqumAieaLqeWPkeW4g+WvueixoSzor7fpgInmi6nlj5HluIPlr7nosaHlkI7ph43or5UiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByZWxlYXNlVGltZSA9IHRoaXMucmVsZWFzZVRpbWUgPT0gIiIgPyBuZXcgRGF0ZSgpLmZvcm1hdCgieXl5eS1NTS1kZCBoaDptbTpzcyIpIDogdGhpcy5yZWxlYXNlVGltZTsKICAgICAgdmFyIGludmFsaWRUaW1lID0gdGhpcy5pbnZhbGlkVGltZSA9PSAiIiA/IG51bGwgOiB0aGlzLmludmFsaWRUaW1lOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBpZDogdGhpcy5pZCwKICAgICAgICBtc2dOdW1iZXI6IHRoaXMubXNnTnVtYmVyLAogICAgICAgIGRlYWxlck9iakxpc3Q6IGRlYWxlcnMsCiAgICAgICAgcG9zaXRpb25zOiBkZXAsCiAgICAgICAgcmVsZWFzZVRpbWU6IHJlbGVhc2VUaW1lLAogICAgICAgIGludmFsaWRUaW1lOiBpbnZhbGlkVGltZSwKICAgICAgICBlZmZlY3RpdmVUaW1lOiB0aGlzLmVmZmVjdGl2ZVRpbWUsCiAgICAgICAgZmVlZGJhY2tUeXBlOiB0aGlzLmZlZWRiYWNrVHlwZSwKICAgICAgICBtc2dTdGF0dXM6IDEKICAgICAgfTsKICAgICAgdGhpcy4kcmVmcy5jb25maXJtLmNvbmZpcm0oZGVhbGVycykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LnVwbG9hZGluZyA9IHRydWU7CiAgICAgICAgcHVibGlzaE1lc3NhZ2UoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmRlYnVnKCJwdWJsaXNoIG1lc3NhZ2U6IiArIEpTT04uc3RyaW5naWZ5KHJlcykpOwoKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgIF90aGlzNC4kcmVmcy5hbGVyVGltZS5hbGVydCgi5paH56ug5o+Q5Lqk5oiQ5Yqf77yM5bCG5Li65oKo6Lez6L2s5paH56ug6aaW6aG144CCIiwgMTApLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBFdmVudEJ1cy4kZW1pdCgicHVibGlzaFN1Y2Vzc2Z1bCIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNob3dTbmFja2Jhcigi5Y+R5biD5aSx6LSlLOivt+eojeWQjumHjeivlSIpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNob3dTbmFja2Jhcigi5Y+R5biD5aSx6LSlLOivt+eojeWQjumHjeivlSIpOwogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM0LnVwbG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUuZGVidWcoIuWPlua2iCIpOwogICAgICB9KTsKICAgIH0sCiAgICBjYWN1bGF0ZURpcmVjdEZpbGVEZWxlYXI6IGZ1bmN0aW9uIGNhY3VsYXRlRGlyZWN0RmlsZURlbGVhcigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBjb25zb2xlLmRlYnVnKCJkZWFsZXIgPT09PT09PT09PT4iICsgSlNPTi5zdHJpbmdpZnkodGhpcy5kZWFsZXIpKTsKCiAgICAgIGlmICh0aGlzLmNoX2RlbGVhcl9zZWxlY3QubGVuZ3RoID09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRlYWxlci5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2Rpc2FibGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmNoX2FyZWFfc3VwcC5mb3JFYWNoKGZ1bmN0aW9uIChpdCkgewogICAgICAgICAgaXQuZGlzYWJsZSA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwID0gZGVlcENsb25lKHRoaXMuY2hfYXJlYV9zdXBwKTsKICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgICBpdC5kaXNhYmxlID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jaF9jb21fc3VwcCA9IGRlZXBDbG9uZSh0aGlzLmNoX2NvbV9zdXBwKTsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaChmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIGl0LmRpc2FibGUgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9kaXNhYmxlID0gdHJ1ZTsKICAgICAgICB0aGlzLmNoX2RlbGVhciA9IHRydWU7CiAgICAgICAgdGhpcy5kZWFsZXIuZm9yRWFjaChmdW5jdGlvbiAoY29kZSkgewogICAgICAgICAgdmFyIGluZGV4ID0gX3RoaXM1LmNoX2RlbGVhcl9zZWxlY3QuZmluZEluZGV4KGZ1bmN0aW9uIChkZWFsZXIpIHsKICAgICAgICAgICAgcmV0dXJuIGRlYWxlci5jb21wYW55Q29kZSA9PT0gY29kZTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKICAgICAgICAgIHZhciBjb20gPSBfdGhpczUuY2hfZGVsZWFyX3NlbGVjdFtpbmRleF07CiAgICAgICAgICBjb20uZGlzYWJsZSA9IHRydWU7CiAgICAgICAgICBjb20uaXNDaGVjayA9IHRydWU7CgogICAgICAgICAgdmFyIGFyZWFJbmRleCA9IF90aGlzNS5jaF9hcmVhX3N1cHAuZmluZEluZGV4KGZ1bmN0aW9uIChpdCkgewogICAgICAgICAgICByZXR1cm4gY29tLmFyZWEgPT0gaXQubGFibGU7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoYXJlYUluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgICAgX3RoaXM1LmNoX2FyZWFfc3VwcFthcmVhSW5kZXhdLmRpc2FibGUgPSB0cnVlOwogICAgICAgICAgX3RoaXM1LmNoX2FyZWFfc3VwcFthcmVhSW5kZXhdLmlzQ2hlY2sgPSB0cnVlOwoKICAgICAgICAgIHZhciB0eXBlSW5kZXggPSBfdGhpczUuY2hfY29tX3N1cHAuZmluZEluZGV4KGZ1bmN0aW9uIChpdCkgewogICAgICAgICAgICByZXR1cm4gY29tLmRlYWxlclR5cGUgPT0gaXQudHlwZTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICh0eXBlSW5kZXggPCAwKSByZXR1cm47CiAgICAgICAgICBfdGhpczUuY2hfY29tX3N1cHBbdHlwZUluZGV4XS5kaXNhYmxlID0gdHJ1ZTsKICAgICAgICAgIF90aGlzNS5jaF9jb21fc3VwcFt0eXBlSW5kZXhdLmlzQ2hlY2sgPSB0cnVlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHsKICAgICAgY29uc29sZS5sb2coIj09PT09PT09PT09PiBvbiBvcGVuIGNoYW5nZSIgKyB0aGlzLm9wZW4pOwogICAgICB0aGlzLmRpYWxvZyA9IHRoaXMub3BlbjsKCiAgICAgIGlmICh0aGlzLm9wZW4pIHsKICAgICAgICB0aGlzLmNhY3VsYXRlRGlyZWN0RmlsZURlbGVhcigpOwogICAgICB9CiAgICB9LAogICAgdm90ZUVuYWJsZTogZnVuY3Rpb24gdm90ZUVuYWJsZSgpIHsKICAgICAgaWYgKHRoaXMudm90ZUVuYWJsZSkgewogICAgICAgIHRoaXMuZmVlZGJhY2tUeXBlID0gMzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZlZWRiYWNrVHlwZSA9IDQ7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBlZmZlY3RpdmVUaW1lTWF4OiBmdW5jdGlvbiBlZmZlY3RpdmVUaW1lTWF4KCkgewogICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5pbnZhbGlkVGltZSk7CiAgICB9LAogICAgaW52YWxpZFRpbWVNaW46IGZ1bmN0aW9uIGludmFsaWRUaW1lTWluKCkgewogICAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZSh0aGlzLmVmZmVjdGl2ZVRpbWUpKTsKICAgIH0KICB9Cn07"},null]}