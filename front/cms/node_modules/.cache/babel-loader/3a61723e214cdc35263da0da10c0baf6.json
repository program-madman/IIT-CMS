{"remainingRequest":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/eslint-loader/index.js??ref--13-0!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/router/permission.js","dependencies":[{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/router/permission.js","mtime":1639763210647},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9saXVndWFuZ2h1aS9Eb2N1bWVudHMvSUlULzIwMjMgc3VtbWFyeSBjb3Vyc2UvaWl0LXByb2plY3QvSUlULUNNUy9mcm9udC9jbXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9pbmRleCc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBwZXJtaXNzaW9uOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBzZXQgcGFnZSB0aXRsZQogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRvLm1ldGEudGl0bGUgPT09IHVuZGVmaW5lZCA/ICdNeSBNZXNzYWdlJyA6IHRvLm1ldGEudGl0bGU7IC8vY29uc29sZS5kZWJ1ZygiPT09PT09PT09PT09PT5yb3V0ZXIgcGF0aDoiK3RvLnBhdGgrIiAgICBsb2dpbiBzdGF0dXM6IitzdG9yZS5zdGF0ZS51c2VyLmxvZ2luU3RhdHVzKQoKICAgICAgICAgICAgaWYgKCFzdG9yZS5zdGF0ZS51c2VyLmxvZ2luU3RhdHVzKSB7CiAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCd1c2VyL3Jlc2V0RGF0YUZyb21TZXNzaW9uJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHRvLnBhdGggPT0gIi8iIHx8IHRvLnBhdGggPT0gIi9sb2dpbiIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBpZiAoc3RvcmUuc3RhdGUudXNlci5sb2dpblN0YXR1cykgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCIvIik7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgcGVybWlzc2lvbiA9IHRvLm1ldGEucGVybWlzc2lvbjsKCiAgICAgICAgICAgIGlmICghKHBlcm1pc3Npb24gIT0gbnVsbCAmJiB0eXBlb2YgcGVybWlzc2lvbiAhPSAidW5kZWZpbmVkIikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHN0b3JlLmdldHRlcnNbInVzZXIvcGVybWlzc2lvbkxpc3QiXS5pbmRleE9mKHBlcm1pc3Npb24pIDwgMCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoIi8iKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgbmV4dCgpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHt9KTs="},{"version":3,"sources":["/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/router/permission.js"],"names":["router","store","beforeEach","to","from","next","document","title","meta","undefined","state","user","loginStatus","commit","path","permission","getters","indexOf","afterEach"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,SAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACAD,MAAM,CAACE,UAAP;AAAA,qEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAEhB;AACAC,YAAAA,QAAQ,CAACC,KAAT,GAAiBJ,EAAE,CAACK,IAAH,CAAQD,KAAR,KAAkBE,SAAlB,GAA8B,YAA9B,GAA6CN,EAAE,CAACK,IAAH,CAAQD,KAAtE,CAHgB,CAIhB;;AACA,gBAAI,CAACN,KAAK,CAACS,KAAN,CAAYC,IAAZ,CAAiBC,WAAtB,EAAmC;AACjCX,cAAAA,KAAK,CAACY,MAAN,CAAa,2BAAb;AACD;;AAPe,kBASZV,EAAE,CAACW,IAAH,IAAW,GAAX,IAAkBX,EAAE,CAACW,IAAH,IAAW,QATjB;AAAA;AAAA;AAAA;;AAUdT,YAAAA,IAAI;AAVU;;AAAA;AAAA,gBAcXJ,KAAK,CAACS,KAAN,CAAYC,IAAZ,CAAiBC,WAdN;AAAA;AAAA;AAAA;;AAedP,YAAAA,IAAI,CAAC,GAAD,CAAJ;AAfc;;AAAA;AAmBZU,YAAAA,UAnBY,GAmBCZ,EAAE,CAACK,IAAH,CAAQO,UAnBT;;AAAA,kBAqBZA,UAAU,IAAI,IAAd,IAAsB,OAAOA,UAAP,IAAqB,WArB/B;AAAA;AAAA;AAAA;;AAAA,kBAsBVd,KAAK,CAACe,OAAN,CAAc,qBAAd,EAAqCC,OAArC,CAA6CF,UAA7C,IAA2D,CAtBjD;AAAA;AAAA;AAAA;;AAuBZV,YAAAA,IAAI,CAAC,GAAD,CAAJ;AAvBY;;AAAA;AA2BhBA,YAAAA,IAAI;;AA3BY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AA+BAL,MAAM,CAACkB,SAAP,CAAiB,YAAM,CAEtB,CAFD","sourcesContent":["import router from './index'\nimport store from '@/store';\nrouter.beforeEach(async (to, from, next) => {\n\n  // set page title\n  document.title = to.meta.title === undefined ? 'My Message' : to.meta.title\n  //console.debug(\"=============>router path:\"+to.path+\"    login status:\"+store.state.user.loginStatus)\n  if (!store.state.user.loginStatus) {\n    store.commit('user/resetDataFromSession')\n  }\n\n  if (to.path == \"/\" || to.path == \"/login\") {\n    next();\n    return;\n  }\n\n  if (!store.state.user.loginStatus) {\n    next(\"/\");\n    return\n  }\n\n  let permission = to.meta.permission;\n\n  if (permission != null && typeof permission != \"undefined\") {\n    if (store.getters[\"user/permissionList\"].indexOf(permission) < 0) {\n      next(\"/\")\n      return\n    }\n  }\n  next();\n\n})\n\nrouter.afterEach(() => {\n\n})\n"]}]}