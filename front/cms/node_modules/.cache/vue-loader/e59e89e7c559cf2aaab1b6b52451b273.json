{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/sensitiveFilter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/sensitiveFilter.vue","mtime":1638535920908},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0U2Vuc2l0aXZlLCBzYXZlU2Vuc2l0aXZlfSBmcm9tICJAL2FwaS9nZXREYXRhLmpzIgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAic2Vuc2l0aXZlRmlsdGVyIiwKCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgLy/ljovnvKnmlofku7blpLl6aXAscGRmLGpwZyxleGNlbCxkb2Ms6buY6K6k5paH5Lu2CiAgICBpY29uczpbJ21kaS1mb2xkZXItemlwJywnbWRpLWZpbGUtcGRmLWJveCcsJ21kaS1maWxlLWpwZy1ib3gnLCdtZGktZmlsZS1leGNlbCcsJ21kaS1maWxlLWRvY3VtZW50JywnbWRpLWFwcGxpY2F0aW9uJywnbWRpLXRleHQtYm94LW91dGxpbmUnXSwKCiAgICAvL+mZhOS7tuS4i+i9veaKpeWRinRpdGxlCiAgICB0aXRsZTogJ+mZhOS7tuS4i+i9veaKpeWRiicsCgogICAgLy/kuIrkvKDmlofku7YKICAgIHVwRmlsZXM6IFtdLAogICAgcmVwbHlUZXh0OltdLAogICAgZmlsZVR5cGU6J3R4dCcsCiAgICBkaWFsb2c6IGZhbHNlLAogICAgfTsKCiAgfSwKCiAgYWN0aXZhdGVkKCkgewogICAgdGhpcy5nZXRTZW5zaXRpdmVMaXN0KCk7CiAgfSwKCiAgbWV0aG9kczogewogIC8v5qC55o2u57G75Z6L5pi+56S65a+55bqUaWNvbgogIC8vYWNjb3JkaW5nIHRvIGZpbGUgdHlwZSBzaG93IGNvcnJlc3BvbmRpbmcgaWNvbgogIHNob3dJY29uKHR5cGUpewogICAgbGV0IHRoYXQgPSB0aGlzOwogICAgc3dpdGNoKHR5cGUpewogICAgICBjYXNlICd6aXAnOgogICAgICAgIHJldHVybiB0aGF0Lmljb25zWzBdOwogICAgICBjYXNlICdwZGYnOgogICAgICAgIHJldHVybiB0aGF0Lmljb25zWzFdOwogICAgICBjYXNlICdqcGcnOgogICAgICAgIHJldHVybiB0aGF0Lmljb25zWzJdOwogICAgICBjYXNlICd4bHMnOgogICAgICBjYXNlICd4bHN4JzoKICAgICAgICByZXR1cm4gdGhhdC5pY29uc1szXTsKICAgICAgY2FzZSAnZG9jJzoKICAgICAgY2FzZSAnZG9jeCc6CiAgICAgICAgcmV0dXJuIHRoYXQuaWNvbnNbNF07CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIHRoYXQuaWNvbnNbNl07CiAgfQp9LAoKICAgIC8vc2hvdyBpY29uIGNvbG9yCiAgc2hvd0ljb25Db2xvcih0eXBlKXsKICAgIHN3aXRjaCh0eXBlKXsKICAgICAgY2FzZSAnemlwJzoKICAgICAgICByZXR1cm4gImJsdWUtZ3JleSI7CiAgICAgIGNhc2UgJ3BkZic6CiAgICAgICAgcmV0dXJuICJyZWQiOwogICAgICBjYXNlICdqcGcnOgogICAgICAgIHJldHVybiAicHVycGxlIGxpZ2h0ZW4tMSI7CiAgICAgIGNhc2UgJ3hscyc6CiAgICAgIGNhc2UgJ3hsc3gnOgogICAgICAgIHJldHVybiAibGlnaHQtZ3JlZW4iOwogICAgICBjYXNlICdkb2MnOgogICAgICBjYXNlICdkb2N4JzoKICAgICAgICByZXR1cm4gInRlYWwgbGlnaHRlbi0xIjsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gIiI7CiAgICB9CiAgfSwKICAKICBnZXRTZW5zaXRpdmVMaXN0KCl7CiAgICBnZXRTZW5zaXRpdmUoe30pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnJlcGx5VGV4dCA9IHJlcy5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVwbHlUZXh0KTsKICAgICAgfSkuY2F0Y2gocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB9KQogIH0sICAKICAvL2ZpbGUgdXBsb2FkCiAgZmlsZVVwbG9hZChldmVudCkgewogICAgdGhpcy51cEZpbGVzPVtdOwogICAgbGV0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXM7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGUubGVuZ3RoOyBpKyspIHsKICAgICAgLy/kuIrkvKDnsbvlnovliKTmlq0KICAgICAgbGV0IGltZ05hbWUgPSBmaWxlW2ldLm5hbWU7CiAgICAgIGxldCBpZHggPSBpbWdOYW1lLmxhc3RJbmRleE9mKCIuIik7CiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgbGV0IGV4dCA9IGltZ05hbWUuc3Vic3RyKGlkeCArIDEpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgZXh0ID0gZXh0LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgaWYgKGV4dCAhPT0gJ3BkZicgJiYgZXh0ICE9PSAnZG9jJyAmJiBleHQgIT09ICd0eHQnICYmIGV4dCAhPT0gJ2RvY3gnICYmIGV4dCAhPT0gJ2pwZycgJiYgZXh0ICE9PSAnanBlZycgJiYgZXh0ICE9PSAneGxzJyAmJiBleHQgIT09ICd4bHN4JykgewogICAgICAgICAgY29uc29sZS5sb2coIuaWh+S7tuexu+Wei+mUmeivryIpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCLmlofku7bnsbvlnovmraPnoa4iKQogICAgICAgICAgdGhpcy5maWxlVHlwZSA9IGV4dDsKICAgICAgICAgIGNvbnNvbGUubG9nKGV4dCk7CiAgICAgICAgICB0aGlzLnVwRmlsZXMucHVzaChmaWxlW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGNvbnNvbGUubG9nKCI9PT09PT09PT09IikKICAgIGNvbnNvbGUubG9nKGZpbGUpOwogICAgdGhpcy5yZWFkRmlsZShmaWxlWzBdKTsKICAgIC8vY2FsbCBiYWNrZW5kIGludGVyZmFjZQoKICB9LAoKICAvL2FkZCBhdHRhY2htZW50CiAgYWRkQXBwZW5kKCkgewogICAgY29uc29sZS5sb2coIua3u+WKoOmZhOS7tiIpOwogICAgdGhpcy4kcmVmcy51cGxvYWRGaWxlLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpCiAgfSwKCiAgLy9yZWFkIHVwbG9hZCBmaWxlIGFuZCBkaXNwbGF5IG9uIHBhZ2UKICByZWFkRmlsZShmaWxlKXsKICAgIGxldCByZWFkZXI9bmV3IEZpbGVSZWFkZXIoKTsKICAgIGxldCB0aGF0ID10aGlzOwogICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgICByZWFkZXIub25sb2FkPWZ1bmN0aW9uKCkKICAgIHsKICAgICAgdGhhdC5yZXBseVRleHQgPSByZWFkZXIucmVzdWx0CiAgICAgIGxldCByZXBseUFycmF5ID0gcmVhZGVyLnJlc3VsdC5zcGxpdCgnLCcpOwogICAgICBjb25zb2xlLmxvZyhyZXBseUFycmF5KTsKICAgICAgbGV0IHdvcmRzID0gewogICAgICAgIHdvcmRzOiByZXBseUFycmF5LAogICAgICB9CiAgICAgIHNhdmVTZW5zaXRpdmUod29yZHMpLnRoZW4ocmVzID0+IHsgCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOyAKICAgICAgICAgIHRoYXQuZ2V0U2Vuc2l0aXZlTGlzdCgpOwogICAgICB9KTsKICAgIH0KICB9LAoKICAvL2dldCBmaWxlIHNpemUoYixrYixtYixnYikKICBjaGFuZ2UobGltaXQpewogICAgbGV0IHNpemUgPSAiIjsKICAgIGlmKGxpbWl0IDwgMC4xICogMTAyNCl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bCP5LqOMC4xS0LvvIzliJnovazljJbmiJBCCiAgICAgIHNpemUgPSBsaW1pdC50b0ZpeGVkKDIpICsgIkIiCiAgICB9ZWxzZSBpZihsaW1pdCA8IDAuMSAqIDEwMjQgKiAxMDI0KXsgICAgICAgICAgICAvL+Wwj+S6jjAuMU1C77yM5YiZ6L2s5YyW5oiQS0IKICAgICAgc2l6ZSA9IChsaW1pdC8xMDI0KS50b0ZpeGVkKDIpICsgIktCIgogICAgfWVsc2UgaWYobGltaXQgPCAwLjEgKiAxMDI0ICogMTAyNCAqIDEwMjQpeyAgICAgICAgLy/lsI/kuo4wLjFHQu+8jOWImei9rOWMluaIkE1CCiAgICAgIHNpemUgPSAobGltaXQvKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKSArICJNQiIKICAgIH1lbHNleyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lhbbku5bovazljJbmiJBHQgogICAgICBzaXplID0gKGxpbWl0LygxMDI0ICogMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpICsgIkdCIgogICAgfQoKICAgIGxldCBzaXplU3RyID0gc2l6ZSArICIiOyAgICAgICAgICAgICAgICAgICAgICAgIC8v6L2s5oiQ5a2X56ym5LiyCiAgICBsZXQgaW5kZXggPSBzaXplU3RyLmluZGV4T2YoIi4iKTsgICAgICAgICAgICAgICAgICAgIC8v6I635Y+W5bCP5pWw54K55aSE55qE57Si5byVCiAgICBsZXQgZG91ID0gc2l6ZVN0ci5zdWJzdHIoaW5kZXggKyAxICwyKSAgICAgICAgICAgIC8v6I635Y+W5bCP5pWw54K55ZCO5Lik5L2N55qE5YC8CiAgICBpZihkb3UgPT0gIjAwIil7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WIpOaWreWQjuS4pOS9jeaYr+WQpuS4ujAw77yM5aaC5p6c5piv5YiZ5Yig6ZmkMDAKICAgICAgcmV0dXJuIHNpemVTdHIuc3Vic3RyaW5nKDAsIGluZGV4KSArIHNpemVTdHIuc3Vic3RyKGluZGV4ICsgMywgMikKICAgIH0KICAgIHJldHVybiBzaXplOwp9LAoKICAvL2RlbGV0ZSBzZW5zaXRpdmUKICBkZWxldGVTZW5zaXRpdmUoKXsKICAgIGNvbnNvbGUubG9nKCJkZWxldGUgc2Vuc2l0aXZlIik7CiAgICB0aGlzLmRpYWxvZz1mYWxzZTsKICAgIHRoaXMucmVwbHlUZXh0PSIiOwogICAgdGhpcy51cEZpbGVzPVtdOwogIH0sCgogIH0sCiAgfTsK"},{"version":3,"sources":["sensitiveFilter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"sensitiveFilter.vue","sourceRoot":"src/views/page","sourcesContent":["<template>\n\n  <v-card>\n\n    <v-card-title>敏感词管理</v-card-title>\n      <v-row no-gutters>\n       <v-btn class=\"ml-4 primary\" @click=\"addAppend\">上传配置文件</v-btn>\n        <p class=\"caption align-center ml-2 mt-2\">*支持.txt文件，在文件中请用逗号将敏感词隔开</p>\n        <input ref=\"uploadFile\" type=\"file\" @change=\"fileUpload($event)\" multiple=\"multiple\"\n               accept=\".docx,.doc,.pdf,.jpg,.xls,.xlsx,.txt\" hidden>\n      </v-row>\n      <v-sheet class=\"d-flex justify-start ml-4 pl-3 pr-3 pt-1 pb-1\" height=\"32\" width=\"564\" v-ripple outlined color=\"#F5F6F7FF\"  >\n        <v-icon  large class=\"ml-2\" :color=\"showIconColor(fileType)\"> {{ showIcon(fileType) }}</v-icon>\n        <v-spacer></v-spacer>\n\n        <v-dialog v-model=\"dialog\" max-width=\"400\">\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn text depressed  x-small v-bind=\"attrs\" v-on=\"on\" class=\"mr-6\" color=\"primary\">\n              删除\n            </v-btn>\n          </template>\n          <v-card>\n            <v-card-title align=\"center\">确认要删除吗?</v-card-title>\n            <v-card-text>敏感词删除后将从它的所有观看者列表中消失,确认要删除吗？</v-card-text>\n            <v-card-actions>\n              <v-btn color=\"blue darken-1\" text @click=\"dialog = false\">\n                取消\n              </v-btn>\n              <v-spacer></v-spacer>\n              <v-btn color=\"blue darken-1\" text @click=\"deleteSensitive\">\n                确认\n              </v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n    </v-sheet>\n    <div style=\"width: 564px; border:  1px solid #E4E8EBFF;border-radius: 4px;\" class=\"ml-4 mt-4\">\n      <v-virtual-scroll :items=\"replyText\" height=\"622\" item-height=\"20\" bench=\"1\">\n        <template v-slot:default=\"{ item,index}\">\n          <v-list-item :key=\"index\">\n            <span class=\"body-2 grey--text text--darken-4\">{{ item }}</span>\n          </v-list-item>\n        </template>\n      </v-virtual-scroll>\n      \n    </div>\n    \n  </v-card>\n</template>\n\n<script>\nimport {getSensitive, saveSensitive} from \"@/api/getData.js\"\nexport default {\n    name: \"sensitiveFilter\",\n\n\n  data() {\n    return {\n    //压缩文件夹zip,pdf,jpg,excel,doc,默认文件\n    icons:['mdi-folder-zip','mdi-file-pdf-box','mdi-file-jpg-box','mdi-file-excel','mdi-file-document','mdi-application','mdi-text-box-outline'],\n\n    //附件下载报告title\n    title: '附件下载报告',\n\n    //上传文件\n    upFiles: [],\n    replyText:[],\n    fileType:'txt',\n    dialog: false,\n    };\n\n  },\n\n  activated() {\n    this.getSensitiveList();\n  },\n\n  methods: {\n  //根据类型显示对应icon\n  //according to file type show corresponding icon\n  showIcon(type){\n    let that = this;\n    switch(type){\n      case 'zip':\n        return that.icons[0];\n      case 'pdf':\n        return that.icons[1];\n      case 'jpg':\n        return that.icons[2];\n      case 'xls':\n      case 'xlsx':\n        return that.icons[3];\n      case 'doc':\n      case 'docx':\n        return that.icons[4];\n      default:\n        return that.icons[6];\n  }\n},\n\n    //show icon color\n  showIconColor(type){\n    switch(type){\n      case 'zip':\n        return \"blue-grey\";\n      case 'pdf':\n        return \"red\";\n      case 'jpg':\n        return \"purple lighten-1\";\n      case 'xls':\n      case 'xlsx':\n        return \"light-green\";\n      case 'doc':\n      case 'docx':\n        return \"teal lighten-1\";\n      default:\n        return \"\";\n    }\n  },\n  \n  getSensitiveList(){\n    getSensitive({}).then(res => {\n        this.replyText = res.data;\n        console.log(this.replyText);\n      }).catch(res => {\n        console.log(res);\n      })\n  },  \n  //file upload\n  fileUpload(event) {\n    this.upFiles=[];\n    let file = event.target.files;\n    for (let i = 0; i < file.length; i++) {\n      //上传类型判断\n      let imgName = file[i].name;\n      let idx = imgName.lastIndexOf(\".\");\n      if (idx !== -1) {\n        let ext = imgName.substr(idx + 1).toUpperCase();\n        ext = ext.toLowerCase();\n        if (ext !== 'pdf' && ext !== 'doc' && ext !== 'txt' && ext !== 'docx' && ext !== 'jpg' && ext !== 'jpeg' && ext !== 'xls' && ext !== 'xlsx') {\n          console.log(\"文件类型错误\")\n        } else {\n          console.log(\"文件类型正确\")\n          this.fileType = ext;\n          console.log(ext);\n          this.upFiles.push(file[i]);\n        }\n      }\n    }\n    console.log(\"==========\")\n    console.log(file);\n    this.readFile(file[0]);\n    //call backend interface\n\n  },\n\n  //add attachment\n  addAppend() {\n    console.log(\"添加附件\");\n    this.$refs.uploadFile.dispatchEvent(new MouseEvent('click'))\n  },\n\n  //read upload file and display on page\n  readFile(file){\n    let reader=new FileReader();\n    let that =this;\n    reader.readAsText(file);\n    reader.onload=function()\n    {\n      that.replyText = reader.result\n      let replyArray = reader.result.split(',');\n      console.log(replyArray);\n      let words = {\n        words: replyArray,\n      }\n      saveSensitive(words).then(res => { \n          console.log(res); \n          that.getSensitiveList();\n      });\n    }\n  },\n\n  //get file size(b,kb,mb,gb)\n  change(limit){\n    let size = \"\";\n    if(limit < 0.1 * 1024){                            //小于0.1KB，则转化成B\n      size = limit.toFixed(2) + \"B\"\n    }else if(limit < 0.1 * 1024 * 1024){            //小于0.1MB，则转化成KB\n      size = (limit/1024).toFixed(2) + \"KB\"\n    }else if(limit < 0.1 * 1024 * 1024 * 1024){        //小于0.1GB，则转化成MB\n      size = (limit/(1024 * 1024)).toFixed(2) + \"MB\"\n    }else{                                            //其他转化成GB\n      size = (limit/(1024 * 1024 * 1024)).toFixed(2) + \"GB\"\n    }\n\n    let sizeStr = size + \"\";                        //转成字符串\n    let index = sizeStr.indexOf(\".\");                    //获取小数点处的索引\n    let dou = sizeStr.substr(index + 1 ,2)            //获取小数点后两位的值\n    if(dou == \"00\"){                                //判断后两位是否为00，如果是则删除00\n      return sizeStr.substring(0, index) + sizeStr.substr(index + 3, 2)\n    }\n    return size;\n},\n\n  //delete sensitive\n  deleteSensitive(){\n    console.log(\"delete sensitive\");\n    this.dialog=false;\n    this.replyText=\"\";\n    this.upFiles=[];\n  },\n\n  },\n  };\n</script>\n\n\n"]}]}