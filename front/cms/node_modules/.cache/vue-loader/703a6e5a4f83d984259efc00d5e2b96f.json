{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue","mtime":1639763210648},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFVzZXJJbmZvIH0gZnJvbSAiQC9hcGkvZ2V0RGF0YS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgbG9hZGluZ0Vycm9yOiBmYWxzZSwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nOiAoKSA9PiBpbXBvcnQoIi4vbG9naW5Mb2FkaW5nLnZ1ZSIpLAogICAgTG9naW5FcnJvcjogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9lcnJvci12aWV3LnZ1ZSIpLAogIH0sCiAgbW91bnRlZCgpIHsKICAgIGxldCBhdXRob3JpemF0aW9uID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICBjb25zb2xlLmxvZygiYXV0aG9yaXphdGlvbiA9PT09PiAiK0pTT04uc3RyaW5naWZ5KGF1dGhvcml6YXRpb24pKQogICAgY29uc29sZS5sb2coYXV0aG9yaXphdGlvbikKCiAgICBpZiAoYXV0aG9yaXphdGlvbiA9PSBudWxsIHx8IHR5cGVvZiBhdXRob3JpemF0aW9uID09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmxvZ2luU3RhdHVzKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ImFsbEFydGljbGUifSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5sb2FkaW5nRXJyb3IgPSB0cnVlOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLiRzdG9yZS5jb21taXQoInVzZXIvc2V0QXV0aG9yaXphdGlvbiIsSlNPTi5zdHJpbmdpZnkoYXV0aG9yaXphdGlvbikpOwogICAgZ2V0VXNlckluZm8oKQogICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coInVzZXJpbmZvPT09PT0+IiArIEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgIGlmIChyZXMgPT0gbnVsbCB8fCB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8IHJlcy5jb2RlICE9IDApIHsKICAgICAgICAgIHRoaXMubG9hZGluZ0Vycm9yID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyL3NldFVzZXIiLCByZXMuZGF0YSk7CiAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJ1c2VyL2dldEluZGV4UGFnZSJdCiAgICAgICAgICBpZihpbmRleCAhPSBudWxsICYmIHR5cGVvZiBpbmRleCAhPSB1bmRlZmluZWQpewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChpbmRleC5wYXRoKTsKICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmdFcnJvciA9IHRydWU7CiAgICAgIH0pCiAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgfSwKfTsK"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <loading v-if=\"loading\" />\n    <login-error v-if=\"loadingError\" />\n  </v-app>\n</template>\n\n<script>\nimport { getUserInfo } from \"@/api/getData.js\";\nexport default {\n  data() {\n    return {\n      loading: true,\n      loadingError: false,\n    };\n  },\n  components: {\n    Loading: () => import(\"./loginLoading.vue\"),\n    LoginError: () => import(\"@/components/base/error-view.vue\"),\n  },\n  mounted() {\n    let authorization = this.$route.query;\n    console.log(\"authorization ====> \"+JSON.stringify(authorization))\n    console.log(authorization)\n\n    if (authorization == null || typeof authorization == \"undefined\") {\n      if (this.$store.state.user.loginStatus) {\n        this.$router.push({name:\"allArticle\"});\n      } else {\n        this.loading = false;\n        this.loadingError = true;\n      }\n      return;\n    }\n\n    this.$store.commit(\"user/setAuthorization\",JSON.stringify(authorization));\n    getUserInfo()\n      .then((res) => {\n        console.log(\"userinfo=====>\" + JSON.stringify(res));\n        if (res == null || typeof res == \"undefined\" || res.code != 0) {\n          this.loadingError = true;\n        } else {\n          this.$store.commit(\"user/setUser\", res.data);\n          var index = this.$store.getters[\"user/getIndexPage\"]\n          if(index != null && typeof index != undefined){\n            this.$router.push(index.path);\n          }\n          \n        }\n      })\n      .catch(() => {\n        this.loadingError = true;\n      })\n      .finally(() => {\n        this.loading = false;\n      });\n  },\n};\n</script>\n"]}]}