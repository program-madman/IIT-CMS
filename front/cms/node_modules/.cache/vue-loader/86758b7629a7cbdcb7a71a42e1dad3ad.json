{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/publish.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/publish.vue","mtime":1640382236585},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgcHVibGlzaE1lc3NhZ2UsCiAgZ2V0RGVhbGVyTGlzdCwKICBnZXREZWFsZXJEZXBMaXN0LAogIGdldE9lbURlcExpc3QsCn0gZnJvbSAiQC9hcGkvZ2V0RGF0YS5qcyI7CmltcG9ydCAiQC91dGlscy90aW1lRm9ybWF0ZS5qcyI7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAiQC91dGlscy9ldmVudC1idXMiOwppbXBvcnQgeyBzaG93U25hY2tiYXIsIGNsb3NlU25hY2tiYXIgfSBmcm9tICJAL3V0aWxzL3NuYWNrYmFyLmpzIjsKaW1wb3J0IHsgVGhyb3R0bGUsIGRlZXBDbG9uZSB9IGZyb20gIkAvdXRpbHMvdG9vbHMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIG9wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIHZvdGVFbmFibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgZGVhbGVyOiB7CiAgICAgIHR5cGU6IFtPYmplY3QsIEFycmF5LCBTdHJpbmddLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgfSwKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHRpbWVQaWNrZXI6ICgpID0+IGltcG9ydCgiLi90aW1lUGlja2VyLnZ1ZSIpLAogICAgY29uZmlybTogKCkgPT4gaW1wb3J0KCIuL3B1Ymxpc2hDb25maXJtLnZ1ZSIpLAogICAgYWxlcnRUaW1lOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2FsZXJ0VGltZSIpLAogICAgbG9hZGluZ0FsZXJ0OiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2xvYWRpbmdBbGVydCIpLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogdGhpcy5vcGVuLAogICAgICBtc2dOdW1iZXI6IG51bGwsCiAgICAgIHJlbGVhc2VUaW1lOiAiIiwKICAgICAgZWZmZWN0aXZlVGltZTogIiIsCiAgICAgIGludmFsaWRUaW1lOiAiIiwKICAgICAgZmVlZGJhY2tUeXBlOiA0LAogICAgICB1cGxvYWRpbmc6IGZhbHNlLAogICAgICByZXBseVR5cGVzOiBbCiAgICAgICAgewogICAgICAgICAgdGV4dDogIuaXoOmcgOWbnuWkjSIsCiAgICAgICAgICB2YWx1ZTogNCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICLlt7Lor7vlm57miaciLAogICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAi5paH5a2X5Zue5aSNIiwKICAgICAgICAgIHZhbHVlOiAxLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIumZhOS7tiIsCiAgICAgICAgICB2YWx1ZTogMiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICLmipXnpagiLAogICAgICAgICAgdmFsdWU6IDMsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY2hfZGVsZWFyX2Rpc2FibGU6IGZhbHNlLAogICAgICBjaF9kZWxlYXI6IGZhbHNlLAogICAgICBjaF9hcmVhX3N1cHA6IFtdLAogICAgICBjaF9jb21fc3VwcDogW10sCiAgICAgIGNoX2RlbGVhcl9zZWxlY3Q6IFtdLAogICAgICBjaF9kZWxlYXJfZGVwbGlzdF9hbGw6IGZhbHNlLAogICAgICBjaF9kZWxlYXJfZGVwbGlzdDogW10sCiAgICAgIGNoX29lbTogZmFsc2UsCiAgICAgIGNoX29lbV9kZXBsaXN0OiBbXSwKICAgIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdERlYWxlckxpc3QoKTsKICAgIHRoaXMuaW5pdERlYWxlckRlcCgpOwogICAgdGhpcy5pbml0T2VtRGVwKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgcmVzZXRQdWJsaXNoVGltZSgpIHsKICAgICAgdGhpcy5yZWxlYXNlVGltZSA9ICIiOwogICAgfSwKCiAgICByZXNldFBvbGljeVRpbWUoKSB7CiAgICAgIHRoaXMuZWZmZWN0aXZlVGltZSA9ICIiOwogICAgICB0aGlzLmludmFsaWRUaW1lID0gIiI7CiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZURpYWxvZyIpOwogICAgICBjbG9zZVNuYWNrYmFyKCk7CiAgICB9LAogICAgaW5pdERlYWxlckxpc3QoKSB7CiAgICAgIGdldERlYWxlckxpc3QoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZyhKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSA9PSAidW5kZWZpbmVkIiB8fCBkYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBhcmVhU2V0ID0gbmV3IFNldCgpOwogICAgICAgICAgdmFyIGRlYWxlclR5cGVTZXQgPSBuZXcgU2V0KCk7CiAgICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QgPSBbXTsKICAgICAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbGV0IGFyZWEgPSBpdGVtLmFyZWE7CiAgICAgICAgICAgIGlmIChhcmVhICE9IG51bGwgJiYgdHlwZW9mIGFyZWEgIT0gdW5kZWZpbmVkICYmIGFyZWEgIT0gIiIpIHsKICAgICAgICAgICAgICBhcmVhU2V0LmFkZChhcmVhKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdHlwZSA9IGl0ZW0uZGVhbGVyVHlwZTsKICAgICAgICAgICAgaWYgKHR5cGUgIT0gbnVsbCAmJiB0eXBlb2YgdHlwZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBpZiAodHlwZSA9PSAwKSB0eXBlICs9IDM7CiAgICAgICAgICAgICAgZGVhbGVyVHlwZVNldC5hZGQodHlwZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCB0ZW1wID0gewogICAgICAgICAgICAgIGlkOiBpbmRleCwKICAgICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgICBkaXNhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICBjb21wYW55TmFtZTogaXRlbS5jb21wYW55TmFtZSwKICAgICAgICAgICAgICBjb21wYW55Q29kZTogaXRlbS5jb21wYW55Q29kZSwKICAgICAgICAgICAgICBjb21wYW55VHlwZTogaXRlbS5jb21wYW55VHlwZSwKICAgICAgICAgICAgICBkZWFsZXJUeXBlOiBpdGVtLmRlYWxlclR5cGUsCiAgICAgICAgICAgICAgYXJlYTogaXRlbS5hcmVhLAogICAgICAgICAgICAgIGFyZWFsYWI6IGl0ZW0uYXJlYSA9PSBudWxsID8gbnVsbCA6IGl0ZW0uYXJlYS5zdWJzdHJpbmcoMCwgMSksCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5wdXNoKHRlbXApOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3RfdmlldyA9IGRlZXBDbG9uZSh0aGlzLmNoX2RlbGVhcl9zZWxlY3QpOwoKICAgICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwID0gW107CiAgICAgICAgICBBcnJheS5mcm9tKGFyZWFTZXQpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGxldCB0ZW1wID0gewogICAgICAgICAgICAgIGlkOiBpbmRleCwKICAgICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgICBsYWJsZTogaXRlbSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHAucHVzaCh0ZW1wKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHRoaXMuY2hfY29tX3N1cHAgPSBbXTsKCiAgICAgICAgICBBcnJheS5mcm9tKGRlYWxlclR5cGVTZXQpCiAgICAgICAgICAgIC5zb3J0KCkKICAgICAgICAgICAgLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgICAgICBpZDogaW5kZXgsCiAgICAgICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxhYmxlOiB0aGlzLmdldERlYWxlclR5cGVEZXNjKGl0ZW0pLAogICAgICAgICAgICAgICAgdHlwZTogaXRlbSAlIDMsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLnB1c2godGVtcCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCk7CiAgICB9LAoKICAgIGluaXREZWFsZXJEZXAoKSB7CiAgICAgIGdldERlYWxlckRlcExpc3QoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSA9PSAidW5kZWZpbmVkIiB8fCBkYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QgPSBbXTsKICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgICAgICBpZDoga2V5LAogICAgICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlLAogICAgICAgICAgICAgIHZhbHVlOiBkYXRhW2tleV0sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCk7CiAgICB9LAogICAgaW5pdE9lbURlcCgpIHsKICAgICAgZ2V0T2VtRGVwTGlzdCgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKCFyZXMgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgaWYgKCFkYXRhIHx8IHR5cGVvZiBkYXRhID09ICJ1bmRlZmluZWQiIHx8IGRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuY2hfb2VtX2RlcGxpc3QgPSBbXTsKICAgICAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgICAgaWQ6IGluZGV4LAogICAgICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlLAogICAgICAgICAgICAgIGNvbXBhbnlOYW1lOiBpdGVtLmNvbXBhbnlOYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlDb2RlOiBpdGVtLmNvbXBhbnlDb2RlLAogICAgICAgICAgICAgIGNvbXBhbnlUeXBlOiBpdGVtLmNvbXBhbnlUeXBlLAogICAgICAgICAgICAgIGRlYWxlclR5cGU6IGl0ZW0uZGVhbGVyVHlwZSwKICAgICAgICAgICAgICBhcmVhOiBpdGVtLmFyZWEsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hfb2VtX2RlcGxpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy5jaF9vZW1fZGVwbGlzdCkpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCk7CiAgICB9LAogICAgZ2V0RGVhbGVyVHlwZURlc2ModHlwZSkgewogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICByZXR1cm4gIjRz5bqXIjsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXR1cm4gIuS6jOe6p+e9keeCuSI7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmV0dXJuICLni6znq4vllK7lkI4iOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gIuacquWIhuexuyI7CiAgICAgIH0KICAgIH0sCgogICAgLy/pgInmi6nlhajpg6gKICAgIHNlbGVjdEFsbERlbGVhcigpIHsKICAgICAgdmFyIGlzU2VsZWN0ZWQgPSB0aGlzLmNoX2RlbGVhcjsKICAgICAgdGhpcy5jaF9hcmVhX3N1cHAuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGl0ZW0uaXNDaGVjayA9IGlzU2VsZWN0ZWQ7CiAgICAgIH0pOwoKICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaXRlbS5pc0NoZWNrID0gaXNTZWxlY3RlZDsKICAgICAgfSk7CgogICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGl0ZW0uaXNDaGVjayA9IGlzU2VsZWN0ZWQ7CiAgICAgIH0pOwogICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QgPSBkZWVwQ2xvbmUodGhpcy5jaF9kZWxlYXJfc2VsZWN0KTsKICAgIH0sCiAgICBzZWxlY3RBbGxEZXBsaXN0KCkgewogICAgICB2YXIgaXNTZWxlY3RlZCA9IHRoaXMuY2hfZGVsZWFyX2RlcGxpc3RfYWxsOwogICAgICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpdGVtLmlzQ2hlY2sgPSBpc1NlbGVjdGVkOwogICAgICB9KTsKCiAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QgPSBkZWVwQ2xvbmUodGhpcy5jaF9kZWxlYXJfZGVwbGlzdCk7CiAgICB9LAogICAgc2VsZWN0QWxsT2VtKCkgewogICAgICB2YXIgaXNTZWxlY3RlZCA9IHRoaXMuY2hfb2VtOwogICAgICB0aGlzLmNoX29lbV9kZXBsaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpdGVtLmlzQ2hlY2sgPSBpc1NlbGVjdGVkOwogICAgICB9KTsKICAgIH0sCgogICAgb25BcmVhU2VsZWN0Q2hhbmdlKGl0ZW0pIHsKICAgICAgaWYgKCFpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXQpID0+IHsKICAgICAgICAgIGlmIChpdC5hcmVhID09IGl0ZW0ubGFibGUpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2V0RGVhbGVyVW5DaGVja2VkSWZOZWVkKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXIgPSB0cnVlOwogICAgICAgIGxldCBzZWxlY1R5cGUgPSBbXTsKICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpZiAoaXQuaXNDaGVjaykgewogICAgICAgICAgICBzZWxlY1R5cGUucHVzaChpdC50eXBlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoc2VsZWNUeXBlLmxlbmd0aCA9PSAwKSByZXR1cm47CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICB2YXIgdHlwZVNlbGVjdGVkID0gc2VsZWNUeXBlLmluZGV4T2YoaXQuZGVhbGVyVHlwZSkgPj0gMDsKICAgICAgICAgIGlmICh0eXBlU2VsZWN0ZWQgJiYgaXQuYXJlYSA9PSBpdGVtLmxhYmxlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25UeXBlU2VsZWN0Q2hhbmdlKGl0ZW0pIHsKICAgICAgaWYgKCFpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXQpID0+IHsKICAgICAgICAgIGlmIChpdC5kZWFsZXJUeXBlID09IGl0ZW0udHlwZSkgewogICAgICAgICAgICBpdC5pc0NoZWNrID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZXREZWFsZXJVbkNoZWNrZWRJZk5lZWQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNoX2RlbGVhciA9IHRydWU7CiAgICAgICAgbGV0IHNlbGVjdEFyZWEgPSBbXTsKICAgICAgICB0aGlzLmNoX2FyZWFfc3VwcC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaWYgKGl0LmlzQ2hlY2spIHsKICAgICAgICAgICAgc2VsZWN0QXJlYS5wdXNoKGl0LmxhYmxlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKHNlbGVjdEFyZWEubGVuZ3RoID09IDApIHJldHVybjsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXQpID0+IHsKICAgICAgICAgIHZhciBhcmVhU2VsZWN0ZWQgPSBzZWxlY3RBcmVhLmluZGV4T2YoaXQuYXJlYSkgPj0gMDsKICAgICAgICAgIGlmIChhcmVhU2VsZWN0ZWQgJiYgaXQuZGVhbGVyVHlwZSA9PSBpdGVtLnR5cGUpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkRlYWxlclNlbGVjdENoYW5nZShpdGVtKSB7CiAgICAgIGlmIChpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX2RlbGVhciA9IHRydWU7CiAgICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaWYgKGl0LnR5cGUgPT0gaXRlbS5kZWFsZXJUeXBlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpZiAoaXQubGFibGUgPT0gaXRlbS5hcmVhKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWPquWIt+aWsOW9k+WJjeadoeebruebuOWFswogICAgICAgIC8vIGlmKHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5maW5kSW5kZXgoKGl0KT0+IGl0LmlzQ2hlY2sgJiYgaXQuZGVhbGVyVHlwZSA9PSBpdGVtLmRlYWxlclR5cGUpIDwgMCkgewogICAgICAgIC8vICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKChpdCkgPT4gaXQudHlwZSA9PSBpdGVtLmRlYWxlclR5cGUgJiYgKGl0LmlzQ2hlY2sgPSBmYWxzZSkpCiAgICAgICAgLy8gICB0aGlzLnNldERlYWxlclVuQ2hlY2tlZElmTmVlZCgpOwogICAgICAgIC8vIH0KCiAgICAgICAgLy8gaWYodGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZpbmRJbmRleCgoaXQpID0+IGl0LmlzQ2hlY2sgJiYgaXQuYXJlYSA9PSBpdGVtLmFyZWEpPDApewogICAgICAgIC8vICAgdGhpcy5jaF9hcmVhX3N1cHAuZm9yRWFjaCgoaXQpID0+IGl0LmxhYmxlID09IGl0ZW0uYXJlYSAmJiAoaXQuaXNDaGVjayA9IGZhbHNlKSkKICAgICAgICAvLyAgIHRoaXMuc2V0RGVhbGVyVW5DaGVja2VkSWZOZWVkKCk7CiAgICAgICAgLy8gfQogICAgICAgIC8vIOWFqOmDqOWIt+aWsAogICAgICAgIGxldCBhcmVhU2V0ID0gbmV3IFNldCgpOwogICAgICAgIGxldCBkZWFsZXJUeXBlU2V0ID0gbmV3IFNldCgpOwogICAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaWYgKGl0LmlzQ2hlY2spIHsKICAgICAgICAgICAgYXJlYVNldC5hZGQoaXQuYXJlYSk7CiAgICAgICAgICAgIGRlYWxlclR5cGVTZXQuYWRkKGl0LmRlYWxlclR5cGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGxldCBhcmVhID0gQXJyYXkuZnJvbShhcmVhU2V0KTsKICAgICAgICBsZXQgZGVhbGVyVHlwZSA9IEFycmF5LmZyb20oZGVhbGVyVHlwZVNldCk7CiAgICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKAogICAgICAgICAgKGl0KSA9PiBkZWFsZXJUeXBlLmluZGV4T2YoaXQudHlwZSkgPCAwICYmIChpdC5pc0NoZWNrID0gZmFsc2UpCiAgICAgICAgKTsKICAgICAgICB0aGlzLmNoX2FyZWFfc3VwcC5mb3JFYWNoKAogICAgICAgICAgKGl0KSA9PiBhcmVhLmluZGV4T2YoaXQubGFibGUpIDwgMCAmJiAoaXQuaXNDaGVjayA9IGZhbHNlKQogICAgICAgICk7CiAgICAgICAgdGhpcy5zZXREZWFsZXJVbkNoZWNrZWRJZk5lZWQoKTsKICAgICAgfQogICAgfSwKICAgIHNldERlYWxlclVuQ2hlY2tlZElmTmVlZCgpIHsKICAgICAgdGhpcy5jaF9jb21fc3VwcC5maW5kSW5kZXgoKGl0KSA9PiBpdC5pc0NoZWNrKSA8IDAgJiYKICAgICAgICB0aGlzLmNoX2FyZWFfc3VwcC5maW5kSW5kZXgoKGl0KSA9PiBpdC5pc0NoZWNrKSA8IDAgJiYKICAgICAgICAodGhpcy5jaF9kZWxlYXIgPSBmYWxzZSk7CiAgICB9LAogICAgb25EZWFsZXJEZXBsaXN0Q2hhbmdlKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0uaXNDaGVjaykgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3RfYWxsID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmNoX2RlbGVhcl9kZXBsaXN0LmZpbmRJbmRleCgoaXQpID0+IGl0LmlzQ2hlY2spIDwgMCkgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3RfYWxsID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBvbk9lbVNlbGVjdENoYW5nZShpdGVtKSB7CiAgICAgIGlmIChpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX29lbSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgdGhpcy5jaF9vZW1fZGVwbGlzdC5maW5kSW5kZXgoKGl0KSA9PiBpdC5pc0NoZWNrID09IHRydWUpIDwgMAogICAgICApIHsKICAgICAgICB0aGlzLmNoX29lbSA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIHB1Ymxpc2g6IFRocm90dGxlKAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5wdWJsaXNoSW1wKCk7CiAgICAgIH0sCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICBzaG93U25hY2tiYXIoIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgICB9CiAgICApLAoKICAgIHB1Ymxpc2hJbXAoKSB7CiAgICAgIGlmICghL15bQS1aYS16MC05XSokLy50ZXN0KHRoaXMubXNnTnVtYmVyKSkgewogICAgICAgIHNob3dTbmFja2Jhcigi5paH56ug57yW5Y+36K+36L6T5YWlMjDkvY3mlbDlrZfkuI7lrZfmr43nu4TlkIjvvIjpgInloavvvIkiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGRlYWxlcnMgPSBbXTsKICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS5pc0NoZWNrKSB7CiAgICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgICAgY29tcGFueU5hbWU6IGl0ZW0uY29tcGFueU5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlDb2RlOiBpdGVtLmNvbXBhbnlDb2RlLAogICAgICAgICAgICBjb21wYW55VHlwZTogaXRlbS5jb21wYW55VHlwZSwKICAgICAgICAgICAgZGVhbGVyVHlwZTogaXRlbS5kZWFsZXJUeXBlLAogICAgICAgICAgICBhcmVhOiBpdGVtLmFyZWEsCiAgICAgICAgICB9OwogICAgICAgICAgZGVhbGVycy5wdXNoKHRlbXApOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBsZXQgZGVwID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCiAgICAgIGlmIChkZWFsZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgaGFzZGVwID0gZmFsc2U7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGVwbGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICBpZiAoaXRlbS5pc0NoZWNrKSB7CiAgICAgICAgICAgIGRlcFtpdGVtLmlkXSA9IGl0ZW0udmFsdWU7CiAgICAgICAgICAgIGhhc2RlcCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coZGVwKQogICAgICAgIGlmICghaGFzZGVwKSB7CiAgICAgICAgICBzaG93U25hY2tiYXIoIuivt+mAieaLqeWPkeW4g+iBjOS9jeWQjumHjeivlSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jaF9vZW1fZGVwbGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKGl0ZW0uaXNDaGVjaykgewogICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgIGNvbXBhbnlOYW1lOiBpdGVtLmNvbXBhbnlOYW1lLAogICAgICAgICAgICBjb21wYW55Q29kZTogaXRlbS5jb21wYW55Q29kZSwKICAgICAgICAgICAgY29tcGFueVR5cGU6IGl0ZW0uY29tcGFueVR5cGUsCiAgICAgICAgICAgIGRlYWxlclR5cGU6IGl0ZW0uZGVhbGVyVHlwZSwKICAgICAgICAgICAgYXJlYTogaXRlbS5hcmVhLAogICAgICAgICAgfTsKICAgICAgICAgIGRlYWxlcnMucHVzaCh0ZW1wKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoZGVhbGVycy5sZW5ndGggPT0gMCkgewogICAgICAgIHNob3dTbmFja2Jhcigi5pyq6YCJ5oup5Y+R5biD5a+56LGhLOivt+mAieaLqeWPkeW4g+WvueixoeWQjumHjeivlSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgcmVsZWFzZVRpbWUgPQogICAgICAgIHRoaXMucmVsZWFzZVRpbWUgPT0gIiIKICAgICAgICAgID8gbmV3IERhdGUoKS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW06c3MiKQogICAgICAgICAgOiB0aGlzLnJlbGVhc2VUaW1lOwoKICAgICAgbGV0IGludmFsaWRUaW1lID0gdGhpcy5pbnZhbGlkVGltZSA9PSAiIiA/IG51bGwgOiB0aGlzLmludmFsaWRUaW1lOwoKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgbXNnTnVtYmVyOiB0aGlzLm1zZ051bWJlciwKICAgICAgICBkZWFsZXJPYmpMaXN0OiBkZWFsZXJzLAogICAgICAgIHBvc2l0aW9uczogZGVwLAogICAgICAgIHJlbGVhc2VUaW1lOiByZWxlYXNlVGltZSwKICAgICAgICBpbnZhbGlkVGltZTogaW52YWxpZFRpbWUsCiAgICAgICAgZWZmZWN0aXZlVGltZTogdGhpcy5lZmZlY3RpdmVUaW1lLAogICAgICAgIGZlZWRiYWNrVHlwZTogdGhpcy5mZWVkYmFja1R5cGUsCiAgICAgICAgbXNnU3RhdHVzOiAxLAogICAgICB9OwogICAgICB0aGlzLiRyZWZzLmNvbmZpcm0KICAgICAgICAuY29uZmlybShkZWFsZXJzKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMudXBsb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIHB1Ymxpc2hNZXNzYWdlKGRhdGEpCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJwdWJsaXNoIG1lc3NhZ2U6IiArIEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJUaW1lCiAgICAgICAgICAgICAgICAgIC5hbGVydCgi5paH56ug5o+Q5Lqk5oiQ5Yqf77yM5bCG5Li65oKo6Lez6L2s5paH56ug6aaW6aG144CCIiwgMTApCiAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IEV2ZW50QnVzLiRlbWl0KCJwdWJsaXNoU3VjZXNzZnVsIikpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzaG93U25hY2tiYXIoIuWPkeW4g+Wksei0pSzor7fnqI3lkI7ph43or5UiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgc2hvd1NuYWNrYmFyKCLlj5HluIPlpLHotKUs6K+356iN5ZCO6YeN6K+VIik7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLnVwbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKT0+IChjb25zb2xlLmRlYnVnKCLlj5bmtogiKSkpOwogICAgfSwKICAgIGNhY3VsYXRlRGlyZWN0RmlsZURlbGVhcigpIHsKICAgICAgY29uc29sZS5kZWJ1ZygiZGVhbGVyID09PT09PT09PT0+IiArIEpTT04uc3RyaW5naWZ5KHRoaXMuZGVhbGVyKSk7CiAgICAgIGlmICh0aGlzLmNoX2RlbGVhcl9zZWxlY3QubGVuZ3RoID09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZGVhbGVyLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGlzYWJsZSA9IGZhbHNlOwogICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpdC5kaXNhYmxlID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHAgPSBkZWVwQ2xvbmUodGhpcy5jaF9hcmVhX3N1cHApOwoKICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpdC5kaXNhYmxlID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jaF9jb21fc3VwcCA9IGRlZXBDbG9uZSh0aGlzLmNoX2NvbV9zdXBwKTsKCiAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpdC5kaXNhYmxlID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGlzYWJsZSA9IHRydWU7CiAgICAgICAgdGhpcy5jaF9kZWxlYXIgPSB0cnVlOwogICAgICAgIHRoaXMuZGVhbGVyLmZvckVhY2goKGNvZGUpID0+IHsKICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5maW5kSW5kZXgoCiAgICAgICAgICAgIChkZWFsZXIpID0+IGRlYWxlci5jb21wYW55Q29kZSA9PT0gY29kZQogICAgICAgICAgKTsKICAgICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKICAgICAgICAgIHZhciBjb20gPSB0aGlzLmNoX2RlbGVhcl9zZWxlY3RbaW5kZXhdOwogICAgICAgICAgY29tLmRpc2FibGUgPSB0cnVlOwogICAgICAgICAgY29tLmlzQ2hlY2sgPSB0cnVlOwoKICAgICAgICAgIHZhciBhcmVhSW5kZXggPSB0aGlzLmNoX2FyZWFfc3VwcC5maW5kSW5kZXgoCiAgICAgICAgICAgIChpdCkgPT4gY29tLmFyZWEgPT0gaXQubGFibGUKICAgICAgICAgICk7CiAgICAgICAgICBpZiAoYXJlYUluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHBbYXJlYUluZGV4XS5kaXNhYmxlID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwW2FyZWFJbmRleF0uaXNDaGVjayA9IHRydWU7CiAgICAgICAgICB2YXIgdHlwZUluZGV4ID0gdGhpcy5jaF9jb21fc3VwcC5maW5kSW5kZXgoCiAgICAgICAgICAgIChpdCkgPT4gY29tLmRlYWxlclR5cGUgPT0gaXQudHlwZQogICAgICAgICAgKTsKICAgICAgICAgIGlmICh0eXBlSW5kZXggPCAwKSByZXR1cm47CiAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwW3R5cGVJbmRleF0uZGlzYWJsZSA9IHRydWU7CiAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwW3R5cGVJbmRleF0uaXNDaGVjayA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgb3BlbigpIHsKICAgICAgY29uc29sZS5sb2coIj09PT09PT09PT09PiBvbiBvcGVuIGNoYW5nZSIgKyB0aGlzLm9wZW4pOwogICAgICB0aGlzLmRpYWxvZyA9IHRoaXMub3BlbjsKICAgICAgaWYgKHRoaXMub3BlbikgewogICAgICAgIHRoaXMuY2FjdWxhdGVEaXJlY3RGaWxlRGVsZWFyKCk7CiAgICAgIH0KICAgIH0sCiAgICB2b3RlRW5hYmxlKCkgewogICAgICBpZiAodGhpcy52b3RlRW5hYmxlKSB7CiAgICAgICAgdGhpcy5mZWVkYmFja1R5cGUgPSAzOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmVlZGJhY2tUeXBlID0gNDsKICAgICAgfQogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBlZmZlY3RpdmVUaW1lTWF4KCkgewogICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5pbnZhbGlkVGltZSk7CiAgICB9LAogICAgaW52YWxpZFRpbWVNaW4oKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKHRoaXMuZWZmZWN0aXZlVGltZSkpOwogICAgfSwKICB9LAp9Owo="},null]}