{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/index.vue","mtime":1639499424013},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgc2F2ZU1lc3NhZ2UsCiAgZ2V0QXJ0aWNsZURldGFpbCwKICBzYXZlVm90ZSwKICB1cGxvYWRGaWxlLAogIGRlYWxlckNvZGVWYWxpZCwKfSBmcm9tICJAL2FwaS9nZXREYXRhLmpzIjsKaW1wb3J0IHsgYWVzRW5jcnlwdCxhZXNEZWNyeXB0ICB9IGZyb20gIkAvdXRpbHMvZW5jcnlwdGlvbi5qcyI7CmltcG9ydCB7IGhpZ2hMaWdodEFsbFRleHQgfSBmcm9tICJAL3V0aWxzL2FydGljbGVVdGlscy5qcyI7CmltcG9ydCB7IERlYm91bmNlLCBUaHJvdHRsZSwgZGVlcENsb25lIH0gZnJvbSAiQC91dGlscy90b29scy5qcyI7CmltcG9ydCB7IHNob3dTbmFja2JhciwgY2xvc2VTbmFja2JhciB9IGZyb20gIkAvdXRpbHMvc25hY2tiYXIuanMiOwppbXBvcnQgeyBpc051bGwgfSBmcm9tICJAL3V0aWxzL3N0cmluZ1V0aWxzLmpzIjsKaW1wb3J0IHsgb2Zmc2V0TW9udGhUaW1lIH0gZnJvbSAiQC91dGlscy90aW1lRm9ybWF0ZS5qcyI7CmltcG9ydCB7CiAgY2hlY2tVcGxvYWRGaWxlVHlwZSwKICByZWFkRmlsZVNpemVVbml0LAogIGdldERpc3RyaWJ1dG9yTnVtYmVyQnlGaWxlTmFtZSwKfSBmcm9tICJAL3V0aWxzL2ZpbGVzVXRpbHMuanMiOwpjb25zdCB2b3RlRGVmYXVsdCA9IHsKICBpZDogbnVsbCwKICBlbmFibGU6IGZhbHNlLAogIHRvcGljOiAiIiwKICB2b3RlVHlwZTogZmFsc2UsCiAgdm90ZU9wdGlvbnM6IFt7fSwge31dLAogIGVuZFRpbWU6IG9mZnNldE1vbnRoVGltZSgxKS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW06c3MiKSwKfTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogbnVsbCwKICAgICAgdGl0bGU6ICIiLAogICAgICBjb250ZW50OiAiIiwKICAgICAgdGl0bGVFcnJvck1lc3NhZ2U6ICIiLAoKICAgICAgbWF4VGltZTogb2Zmc2V0TW9udGhUaW1lKDEpLAogICAgICB2b3RlOiBkZWVwQ2xvbmUodm90ZURlZmF1bHQpLAogICAgICB2b3RlVGVtcDogZGVlcENsb25lKHZvdGVEZWZhdWx0KSwKICAgICAgdm90ZURpYWxvZzogZmFsc2UsCiAgICAgIHVwbG9hZEZpbGVOb3JtYWw6IFtdLAogICAgICB1cGxvYWRGaWxlRGlyZWN0OiBbXSwKICAgICAgZGVsZWFyTGlzdDogW10sCiAgICAgIHByZXZpZXc6IGZhbHNlLAogICAgICBwdWJsaXNoOiBmYWxzZSwKICAgICAgbmVlZFNhdmU6IGZhbHNlLAogICAgICBhdXRvU2F2aW5nOiBmYWxzZSwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBhcHBFZGl0b3I6ICgpID0+IGltcG9ydCgiLi9lZGl0b3IudnVlIiksCiAgICB0aXRsZUVkaXRvcjogKCkgPT4gaW1wb3J0KCIuL3RpdGxlLnZ1ZSIpLAogICAgdm90ZTogKCkgPT4gaW1wb3J0KCIuL3ZvdGUiKSwKICAgIHZvdGVPcHRpb246ICgpID0+IGltcG9ydCgiLi92b3RlT3B0aW9uLnZ1ZSIpLAogICAgZmlsZUl0ZW06ICgpID0+IGltcG9ydCgiLi9maWxlT3B0aW9uLnZ1ZSIpLAogICAgdGltZVBpY2tlcjogKCkgPT4gaW1wb3J0KCIuL3RpbWVQaWNrZXIudnVlIiksCiAgICBwcmV2aWV3OiAoKSA9PiBpbXBvcnQoIi4vcHJldmlldy52dWUiKSwKICAgIHB1Ymxpc2g6ICgpID0+IGltcG9ydCgiLi9wdWJsaXNoLnZ1ZSIpLAogICAgY29uZmlybTogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9jb25mb3JtLnZ1ZSIpLAogIH0sCiAgLy8g6Lev55Sx5pu05paw5aSE55CGCiAgYmVmb3JlUm91dGVVcGRhdGUodG8sIGZyb20sIG5leHQpIHsKICAgIGlmICh0aGlzLm5lZWRTYXZlKSB7CiAgICAgIHRoaXMuJHJlZnMuY29uZmlybQogICAgICAgIC5jb25maXJtKAogICAgICAgICAgIuaCqOW9k+WJjeacieS/ruaUueeahOS/oeaBr+acquS/neWtmO+8jOemu+W8gOW9k+WJjemhtemdouaCqOi+k+WFpeeahOS/oeaBr+WwhuS4jeS8muiiq+S/neWtmOOAgiIKICAgICAgICApCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgbmV4dCh0cnVlKTsKICAgICAgICAgIHRoaXMucmVFZGl0SWZOZWVkKHRvLnF1ZXJ5LmlkKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiBuZXh0KGZhbHNlKSk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KHRydWUpOwoKICAgICAgaWYgKHRoaXMucmVFZGl0SWZOZWVkKHRvLnF1ZXJ5LmlkKSkgcmV0dXJuOwogICAgICB0aGlzLnNhdmVBc05ld01lc3NhZ2UodG8ucGFyYW1zKTsKICAgIH0KICB9LAoKICAvL+i3r+eUseemu+W8gOWkhOeQhgogIGJlZm9yZVJvdXRlTGVhdmUodG8sIGZyb20sIG5leHQpIHsKICAgIHRoaXMuY2xvc2VTbmFjaygpOwogICAgaWYgKHRoaXMubmVlZFNhdmUpIHsKICAgICAgdGhpcy4kcmVmcy5jb25maXJtCiAgICAgICAgLmNvbmZpcm0oCiAgICAgICAgICAi5oKo5b2T5YmN5pyJ5L+u5pS555qE5L+h5oGv5pyq5L+d5a2Y77yM56a75byA5b2T5YmN6aG16Z2i5oKo6L6T5YWl55qE5L+h5oGv5bCG5LiN5Lya6KKr5L+d5a2Y44CCIgogICAgICAgICkKICAgICAgICAudGhlbigoKSA9PiBuZXh0KHRydWUpKQogICAgICAgIC5jYXRjaCgoKSA9PiBuZXh0KGZhbHNlKSk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KHRydWUpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICghdGhpcy5yZUVkaXRJZk5lZWQodGhpcy4kcm91dGUucXVlcnkuaWQpKSB7CiAgICAgIHRoaXMuc2F2ZUFzTmV3TWVzc2FnZSh0aGlzLiRyb3V0ZS5wYXJhbXMpOwogICAgfQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImJlZm9yZXVubG9hZCIsIHRoaXMuYmVmb3JldW5sb2FkSGFuZGxlcik7CiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIiwgdGhpcy5iZWZvcmV1bmxvYWRIYW5kbGVyKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBiZWZvcmV1bmxvYWRIYW5kbGVyKGUpIHsKICAgICAgaWYgKGUpIHsKICAgICAgICBlLnJldHVyblZhbHVlID0gIuWFs+mXreaPkOekuiI7CiAgICAgIH0KICAgICAgcmV0dXJuICLlhbPpl63mj5DnpLoiOwogICAgfSwKICAgIC8v5Y+m5a2Y5Li65Yib5bu65paw5raI5oGvCiAgICBzYXZlQXNOZXdNZXNzYWdlKHBhcmFtcykgewogICAgICBjb25zb2xlLmRlYnVnKCJwdWJsaWM9PT09PT0+IiArIHBhcmFtcyk7CiAgICAgIGlmIChwYXJhbXMgPT0gbnVsbCB8fCB0eXBlb2YgcGFyYW1zID09ICJ1bmRlZmluZWQiKSByZXR1cm47CiAgICAgIGxldCBpZCA9IHBhcmFtcy5pZDsKICAgICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgPT0gInVuZGVmaW5lZCIgfHwgaXNOYU4oaWQpKSByZXR1cm47CgogICAgICB0aGlzLmlkID0gbnVsbDsKICAgICAgdGhpcy5yZXN0b3JlTWVzc2FnZShpZCwgdHJ1ZSk7CiAgICB9LAogICAgLy/ojYnnqL/ph43mlrDnvJbovpEKICAgIHJlRWRpdElmTmVlZChpZCkgewogICAgICBpZiAoIWlkIHx8IHR5cGVvZiBpZCA9PSAidW5kZWZpbmVkIikgcmV0dXJuIGZhbHNlOwoKICAgICAgaWQgPSBOdW1iZXIoYWVzRGVjcnlwdChpZCkpOwogICAgICBpZiAoaWQgPT0gbnVsbCB8fCBpc05hTihpZCkgfHwgdGhpcy5pZCA9PSBpZCkgcmV0dXJuIGZhbHNlOwogICAgICB0aGlzLmlkID0gaWQ7CiAgICAgIHRoaXMucmVzdG9yZU1lc3NhZ2UoaWQpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICAvL+mHjeiuvua2iOaBr+WGheWuuQogICAgcmVzdG9yZU1lc3NhZ2UoaWQsIGlzTmV3ID0gZmFsc2UpIHsKICAgICAgdGhpcy5jbGVhckNvbnRlbnQoKTsKICAgICAgLy/or7fmsYLlkI7lj7Dojrflj5bmtojmga/lhoXlrrkKICAgICAgZ2V0QXJ0aWNsZURldGFpbChpZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzID09IG51bGwgfHwgdHlwZW9mIHJlcyA9PSB1bmRlZmluZWQpIHJldHVybjsKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLnRpdGxlID0gZGF0YS50aXRsZTsKICAgICAgICAgIHRoaXMuY29udGVudCA9IGRhdGEuY29udGVudDsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZGF0YS52b3RlSW5mb0RUTyAhPSBudWxsICYmCiAgICAgICAgICAgIHR5cGVvZiBkYXRhLnZvdGVJbmZvRFRPICE9IHVuZGVmaW5lZCAmJgogICAgICAgICAgICBkYXRhLnZvdGVJbmZvRFRPLm9wdGlvbnMubGVuZ3RoID49IDIKICAgICAgICAgICkgewogICAgICAgICAgICBsZXQgdm90ZSA9IHsKICAgICAgICAgICAgICBpZDogaXNOZXcgPyBudWxsIDogZGF0YS52b3RlSW5mb0RUTy52b3RlSWQsCiAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlLAogICAgICAgICAgICAgIHRvcGljOiBkYXRhLnZvdGVJbmZvRFRPLnRvcGljLAogICAgICAgICAgICAgIHZvdGVPcHRpb25zOiBkYXRhLnZvdGVJbmZvRFRPLm9wdGlvbnMubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogaXRlbS5vcHRpb25OYW1lIH07CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdm90ZVR5cGU6IGZhbHNlLAogICAgICAgICAgICAgIGVuZFRpbWU6IG9mZnNldE1vbnRoVGltZSgxKS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW06c3MiKSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy52b3RlVGVtcCA9IGRlZXBDbG9uZSh2b3RlKTsKCiAgICAgICAgICAgIGlmIChpc05ldykgewogICAgICAgICAgICAgIHRoaXMudm90ZVNhdmUodHJ1ZSk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMudm90ZSA9IGRlZXBDbG9uZSh2b3RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICgKICAgICAgICAgICAgIWRhdGEuYXR0YWNobWVudHMgfHwKICAgICAgICAgICAgdHlwZW9mIGRhdGEuYXR0YWNobWVudHMgPT0gInVuZGVmaW5lZCIgfHwKICAgICAgICAgICAgZGF0YS5hdHRhY2htZW50cy5sZW5ndGggPiAwCiAgICAgICAgICApIHsKICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygiYXR0YWNobWVudHM6IiArIEpTT04uc3RyaW5naWZ5KGRhdGEuYXR0YWNobWVudHMpKTsKICAgICAgICAgICAgZGF0YS5hdHRhY2htZW50cy5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gaXRlbS5hdHRhY2htZW50TmFtZTsKICAgICAgICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgICAgICAgIHJlczogdHJ1ZSwKICAgICAgICAgICAgICAgIHRleHQ6IGZpbGVOYW1lLAogICAgICAgICAgICAgICAgZmlsZVR5cGU6IGNoZWNrVXBsb2FkRmlsZVR5cGUoZmlsZU5hbWUpLAogICAgICAgICAgICAgICAgcGF0aDogaXRlbS51cmwsCiAgICAgICAgICAgICAgICBwcm9ncmVzczogMTAwLAogICAgICAgICAgICAgICAgb3JpZW50YXRpb246IGl0ZW0ub3JpZW50YXRpb24sCiAgICAgICAgICAgICAgICB1cGxvYWRTaXplOiBpdGVtLmF0dGFjaG1lbnRTaXplLAogICAgICAgICAgICAgICAgZmlsZVNpemU6IHJlYWRGaWxlU2l6ZVVuaXQoaXRlbS5hdHRhY2htZW50U2l6ZSksCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBpZiAoaXRlbS5vcmllbnRhdGlvbiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwucHVzaCh0ZW1wKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRGaWxlRGlyZWN0LnB1c2godGVtcCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgpOwogICAgfSwKICAgIC8v5riF56m65raI5oGv5YaF5a65CiAgICBjbGVhckNvbnRlbnQoKSB7CiAgICAgIHRoaXMudGl0bGUgPSAiIjsKICAgICAgdGhpcy5jb250ZW50ID0gIiI7CiAgICAgIHRoaXMudm90ZSA9IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCk7CiAgICAgIHRoaXMudm90ZVRlbXAgPSBkZWVwQ2xvbmUodm90ZURlZmF1bHQpOwogICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwgPSBbXTsKICAgICAgdGhpcy51cGxvYWRGaWxlRGlyZWN0ID0gW107CiAgICB9LAogICAgLy8gKi0tLS0tLS0tLS0tLS0tLS0tLS3mipXnpajmk43kvZwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogICAgLy/lj5bmtojkv53lrZgKICAgIGNhbmNsZVZvdGVFZGl0KCkgewogICAgICB0aGlzLnZvdGVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy52b3RlVGVtcCA9IGRlZXBDbG9uZSh0aGlzLnZvdGUpOwogICAgfSwKCiAgICAvL+ehruiupOS/neWtmOaKleelqAogICAgdm90ZVNhdmU6IFRocm90dGxlKAogICAgICBmdW5jdGlvbiAoaXNTYXZlQVMgPSBmYWxzZSkgewogICAgICAgIGlmICghaXNTYXZlQVMgJiYgIXRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSByZXR1cm47CgogICAgICAgIGxldCB0ZW1wID0gdGhpcy52b3RlVGVtcDsKICAgICAgICB0ZW1wLmVuYWJsZSA9IHRydWU7CiAgICAgICAgdGVtcC52b3RlT3B0aW9ucyA9IHRlbXAudm90ZU9wdGlvbnMuZmlsdGVyKAogICAgICAgICAgKHQpID0+IHQudmFsdWUgIT0gbnVsbCAmJiB0LnZhbHVlICE9ICIiCiAgICAgICAgKTsKCiAgICAgICAgbGV0IHVwbG9hZCA9IHt9OwogICAgICAgIHVwbG9hZC5pZCA9IHRlbXAuaWQ7CiAgICAgICAgdXBsb2FkLnRvcGljID0gdGVtcC50b3BpYzsKICAgICAgICB1cGxvYWQudm90ZVR5cGUgPSB0ZW1wLnZvdGVUeXBlID8gMSA6IDA7CiAgICAgICAgdXBsb2FkLnZvdGVPcHRpb25zID0gdGVtcC52b3RlT3B0aW9ucy5tYXAoKGl0ZW0pID0+IGl0ZW0udmFsdWUpOwogICAgICAgIHVwbG9hZC5lbmRUaW1lID0gdGVtcC5lbmRUaW1lOwoKICAgICAgICBzYXZlVm90ZSh1cGxvYWQpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoInNhdmUgdm90ZSA9PT4iICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy52b3RlRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgY29uc29sZS5kZWJ1Zygic2F2ZSBpZCIgKyByZXMuZGF0YS52b3RlSWQpOwogICAgICAgICAgICAgIHRlbXAuaWQgPSByZXMuZGF0YS52b3RlSWQ7CiAgICAgICAgICAgICAgdGhpcy52b3RlID0gZGVlcENsb25lKHRlbXApOwogICAgICAgICAgICAgIHRoaXMudm90ZVRlbXAgPSBkZWVwQ2xvbmUodGVtcCk7CiAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTYXZlU3RhdHVzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICBpZiAoaXNTYXZlQVMpIHsKICAgICAgICAgICAgICB0aGlzLm9uVm90ZURlbGV0ZSgpOwogICAgICAgICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmipXnpajlj6blrZjkuLrlpLHotKUiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnNob3dTbmFjaygi5re75Yqg5oqV56Wo5aSx6LSlIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9LAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgICB9LAogICAgICAzMDAwCiAgICApLAogICAgLy/mt7vliqDmipXnpajpgInpobkKICAgIGFkZEl0ZW0oKSB7CiAgICAgIHRoaXMudm90ZVRlbXAudm90ZU9wdGlvbnMucHVzaCh7IHZhbHVlOiBudWxsIH0pOwogICAgfSwKICAgIC8v5Yig6Zmk5oqV56Wo6YCJ6aG5CiAgICBkZWxldGVJdGVtOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgLy8gIG5vdCBhbGxvdyB0byBkZWxldGUgdGhlIGZpcnN0CiAgICAgIGlmIChpbmRleCA+IDEpIHsKICAgICAgICB0aGlzLnZvdGVUZW1wLnZvdGVPcHRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0sCiAgICAvL+WIoOmZpOaKleelqAogICAgb25Wb3RlRGVsZXRlKCkgewogICAgICB0aGlzLnZvdGVUZW1wID0gZGVlcENsb25lKHZvdGVEZWZhdWx0KTsKICAgICAgdGhpcy52b3RlID0gZGVlcENsb25lKHZvdGVEZWZhdWx0KTsKICAgICAgdGhpcy5jaGFuZ2VTYXZlU3RhdHVzKCk7CiAgICB9LAoKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLemZhOS7tuS4iuS8oOaTjeS9nC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCiAgICB1cGxvYWRGaWxlTigpIHsKICAgICAgLy90aGlzLiRyZWZzLnVwbG9hZEZpbGVOLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoImNsaWNrIikpOwogICAgICB0aGlzLiRyZWZzLnVwbG9hZEZpbGVOLmNsaWNrKCk7CiAgICB9LAogICAgdXBsb2FkRmlsZUQoKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkRmlsZUQuY2xpY2soKTsKICAgIH0sCgogICAgb25EZWxldGVGaWxlKGluZGV4LCBpc0RpcmVjdEZpbGUpIHsKICAgICAgaWYgKGlzRGlyZWN0RmlsZSkgewogICAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBsb2FkRmlsZU5vcm1hbC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICB9LAoKICAgIGZpbGVVcGxvYWQoZXZlbnQsIGRpcmVjdCkgewogICAgICBsZXQgdXBGaWxlcyA9IGRpcmVjdCA/IHRoaXMudXBsb2FkRmlsZURpcmVjdCA6IHRoaXMudXBsb2FkRmlsZU5vcm1hbDsKICAgICAgbGV0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXM7CgogICAgICBpZiAoIWRpcmVjdCAmJiBmaWxlLmxlbmd0aCArIHRoaXMudXBsb2FkRmlsZU5vcm1hbC5sZW5ndGggPiAzKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuavj+asoeacgOWkmuWPquiDveS4iuS8oDPkuKrmlofku7YiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGl0ZW0gPSBmaWxlW2ldOwogICAgICAgIGl0ZW0uZGlyZWN0ID0gZGlyZWN0OwoKICAgICAgICBpZiAoaXRlbS5zaXplIC8xMDI0IC8xMDI0ID49IDIwKSB7CiAgICAgICAgICB0aGlzLnNob3dTbmFjaygi5oKo5pyJ5paH5Lu25LiK5Lyg5aSx6LSlLOmZhOS7tuacgOWkp+mZkOWItjIwTSIpOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIC8v5LiK5Lyg5paH5Lu25Y676YeNCiAgICAgICAgaWYgKHVwRmlsZXMuZmluZEluZGV4KCh0KSA9PiB0LnRleHQgPT0gaXRlbS5uYW1lKSA+PSAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8v5LiK5Lyg57G75Z6L5Yik5patCiAgICAgICAgbGV0IGV4dCA9IGNoZWNrVXBsb2FkRmlsZVR5cGUoaXRlbS5uYW1lKTsKICAgICAgICBpZiAoZXh0ID09IG51bGwpIGNvbnRpbnVlOwoKICAgICAgICBsZXQgdGVtcCA9IHt9OwogICAgICAgIHRlbXAudGV4dCA9IGl0ZW0ubmFtZTsKICAgICAgICB0ZW1wLmZpbGVUeXBlID0gZXh0OwogICAgICAgIHRlbXAucmVzID0gZmFsc2U7CiAgICAgICAgdGVtcC5maWxlU2l6ZSA9IHJlYWRGaWxlU2l6ZVVuaXQoaXRlbS5zaXplKTsKICAgICAgICB0ZW1wLnVwbG9hZFNpemUgPSBpdGVtLnNpemU7CiAgICAgICAgaWYgKGRpcmVjdCkgewogICAgICAgICAgdGVtcC5vcmllbnRhdGlvbiA9IGdldERpc3RyaWJ1dG9yTnVtYmVyQnlGaWxlTmFtZShpdGVtLm5hbWUpOwogICAgICAgICAgaWYgKAogICAgICAgICAgICB0ZW1wLm9yaWVudGF0aW9uID09IG51bGwgfHwKICAgICAgICAgICAgdHlwZW9mIHRlbXAub3JpZW50YXRpb24gPT0gInVuZGVmaW5lZCIgfHwKICAgICAgICAgICAgdGVtcC5vcmllbnRhdGlvbiA9PSAiIgogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRlbXAuZXJyb3IgPSAi5paH5Lu25ZCN5LiN56ym5ZCI6KaB5rGCIjsKICAgICAgICAgICAgdXBGaWxlcy5wdXNoKHRlbXApOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdXBGaWxlcy5wdXNoKHRlbXApOwoKICAgICAgICBpZiAoZGlyZWN0KSB7CiAgICAgICAgICB0aGlzLnVwbG9hZERpcmVjdEltcChpdGVtLCB0ZW1wKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy51cGxvYWROb3JtYWxJbXAoaXRlbSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy/kuIrkvKDmma7pgJrpmYTku7YKICAgIHVwbG9hZE5vcm1hbEltcChpdGVtKSB7CiAgICAgIHVwbG9hZEZpbGUoaXRlbSwgKHByb2dyZXNzLCBmaWxlTmFtZSkgPT4gewogICAgICAgIHZhciBpbmRleCA9IHRoaXMudXBsb2FkRmlsZU5vcm1hbC5maW5kSW5kZXgoKHQpID0+IHQudGV4dCA9PSBmaWxlTmFtZSk7CiAgICAgICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgIHRoaXMudXBsb2FkRmlsZU5vcm1hbFtpbmRleF0ucHJvZ3Jlc3MgPSBwcm9ncmVzczsKCiAgICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsID0gSlNPTi5wYXJzZSgKICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMudXBsb2FkRmlsZU5vcm1hbCkKICAgICAgICApOwogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMudXBsb2FkRmlsZU5vcm1hbC5maW5kSW5kZXgoCiAgICAgICAgICAgICh0KSA9PiB0LnRleHQgPT0gaXRlbS5uYW1lCiAgICAgICAgICApOwogICAgICAgICAgbGV0IHVwZGF0ZSA9IHRoaXMudXBsb2FkRmlsZU5vcm1hbFtpbmRleF07CiAgICAgICAgICBpZiAoIXJlcyB8fCB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8IHJlcy5jb2RlICE9IDApIHsKICAgICAgICAgICAgdXBkYXRlW2luZGV4XS5lcnJvciA9ICLkuIrkvKDlpLHotKUiOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdXBkYXRlLnBhdGggPSByZXMuZGF0YS51cmw7CiAgICAgICAgICAgIHVwZGF0ZS5yZXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMudXBsb2FkRmlsZU5vcm1hbC5maW5kSW5kZXgoCiAgICAgICAgICAgICh0KSA9PiB0LnRleHQgPT0gaXRlbS5uYW1lCiAgICAgICAgICApOwogICAgICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsW2luZGV4XS5lcnJvciA9ICLkuIrkvKDlpLHotKUiOwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoCiAgICAgICAgICAoKSA9PgogICAgICAgICAgICAodGhpcy51cGxvYWRGaWxlTm9ybWFsID0gSlNPTi5wYXJzZSgKICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVOb3JtYWwpCiAgICAgICAgICAgICkpCiAgICAgICAgKTsKICAgIH0sCiAgICAvL+S4iuS8oOWumuWQkemZhOS7tgogICAgdXBsb2FkRGlyZWN0SW1wKGl0ZW0sIHRlbXApIHsKICAgICAgZGVhbGVyQ29kZVZhbGlkKHRlbXAub3JpZW50YXRpb24pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKCFyZXMgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHRlbXAuZXJyb3IgPSAi5paH5Lu25ZCN5LiN56ym5ZCI6KaB5rGCIjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMudXBsb2FkRmlsZURpcmVjdC5maW5kSW5kZXgoCiAgICAgICAgICAgICAgKHQpID0+IHQudGV4dCA9PSBpdGVtLm5hbWUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuOwoKICAgICAgICAgICAgdXBsb2FkRmlsZShpdGVtLCAocHJvZ3Jlc3MsIGZpbGVOYW1lKSA9PiB7CiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRGaWxlRGlyZWN0LmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICh0KSA9PiB0LnRleHQgPT0gZmlsZU5hbWUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdLnByb2dyZXNzID0gcHJvZ3Jlc3M7CgogICAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVEaXJlY3QpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KAogICAgICAgICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGxldCB1cGRhdGUgPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdOwogICAgICAgICAgICAgICAgaWYgKCFyZXMgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZVtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZS5wYXRoID0gcmVzLmRhdGEudXJsOwogICAgICAgICAgICAgICAgICB1cGRhdGUucmVzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KAogICAgICAgICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdFtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5maW5hbGx5KAogICAgICAgICAgICAgICAgKCkgPT4KICAgICAgICAgICAgICAgICAgKHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KQogICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRGaWxlRGlyZWN0LmZpbmRJbmRleCgKICAgICAgICAgICAgKHQpID0+IHQudGV4dCA9PSBpdGVtLm5hbWUKICAgICAgICAgICk7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdLmVycm9yID0gIuaWh+S7tuWQjeS4jeespuWQiOimgeaxgiI7CiAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVEaXJlY3QpKTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KAogICAgICAgICAgKCkgPT4KICAgICAgICAgICAgKHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KQogICAgICAgICAgICApKQogICAgICAgICk7CiAgICB9LAoKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLeS/neWtmOiNieeov+aTjeS9nC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgc2F2ZUFydGljbGU6IFRocm90dGxlKAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zYXZlQXJ0aWNsZUltcCgpOwogICAgICB9LAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgICB9CiAgICApLAogICAgYXV0b1NhdmU6IERlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMubmVlZFNhdmUpIHsKICAgICAgICB0aGlzLmF1dG9TYXZpbmcgPSB0cnVlOwogICAgICAgIHRoaXMuc2F2ZUFydGljbGVJbXAoKTsKICAgICAgfQogICAgfSwgMTAwMDApLAoKICAgIHNhdmVBcnRpY2xlSW1wKCkgewogICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uKCkpIHsKICAgICAgICB0aGlzLmF1dG9TYXZpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGF0dGFjaG1lbnRMaXN0cyA9IFtdOwogICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGxldCB0ZW1wID0ge307CiAgICAgICAgdGVtcC5wYXRoID0gaXRlbS5wYXRoOwogICAgICAgIHRlbXAuYXR0YWNobWVudFNpemUgPSBpdGVtLnVwbG9hZFNpemU7CiAgICAgICAgYXR0YWNobWVudExpc3RzLnB1c2godGVtcCk7CiAgICAgIH0pOwogICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGxldCB0ZW1wID0ge307CiAgICAgICAgdGVtcC5wYXRoID0gaXRlbS5wYXRoOwogICAgICAgIHRlbXAub3JpZW50YXRpb24gPSBpdGVtLm9yaWVudGF0aW9uOwogICAgICAgIHRlbXAuYXR0YWNobWVudFNpemUgPSBpdGVtLnVwbG9hZFNpemU7CiAgICAgICAgYXR0YWNobWVudExpc3RzLnB1c2godGVtcCk7CiAgICAgIH0pOwogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBpZDogdGhpcy5pZCwKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsCiAgICAgICAgdm90ZUlkOiB0aGlzLnZvdGUuaWQsCiAgICAgICAgYXR0YWNobWVudExpc3Q6IGF0dGFjaG1lbnRMaXN0cywKICAgICAgfTsKCiAgICAgIHNhdmVNZXNzYWdlKGRhdGEpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMubmVlZFNhdmUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zaG93U25hY2sodGhpcy5hdXRvU2F2aW5nID8gIuiHquWKqOS/neWtmOaIkOWKnyIgOiAi5L+d5a2Y5oiQ5YqfIik7CgogICAgICAgICAgICBpZiAodGhpcy5pZCAhPSByZXMuZGF0YSkgewogICAgICAgICAgICAgIHRoaXMuaWQgPSByZXMuZGF0YTsKCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICAgICAgcXVlcnk6IHsgaWQ6IGFlc0VuY3J5cHQodGhpcy5pZCsiIikgfSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHRoaXMuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSA9PSBudWxsIHx8IHR5cGVvZiBlcnJvci5yZXNwb25zZSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgdGhpcy5zaG93U25hY2soIuS/neWtmOWksei0pSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgcmVzID0gZXJyb3IucmVzcG9uc2U7CiAgICAgICAgICBpZiAocmVzLmRhdGEgPT0gbnVsbCB8fCB0eXBlb2YgcmVzLmRhdGEgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHRoaXMuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZGF0YS5jb2RlID09IG51bGwgfHwKICAgICAgICAgICAgdHlwZW9mIGRhdGEuY29kZSA9PSAidW5kZWZpbmVkIiB8fAogICAgICAgICAgICBkYXRhLmNvZGUgIT0gNAogICAgICAgICAgKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5hdXRvU2F2aW5nKSB0aGlzLnNob3dTbmFjaygi5L+d5a2Y5aSx6LSlIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgc2Vuc2l0aXZlV29yZHMgPSBkYXRhLmRhdGE7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHNlbnNpdGl2ZVdvcmRzID09IG51bGwgfHwKICAgICAgICAgICAgdHlwZW9mIHNlbnNpdGl2ZVdvcmRzID09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgICAgIHNlbnNpdGl2ZVdvcmRzLmxlbmd0aCA9PSAwCiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHRoaXMuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHRoaXMuYXV0b1NhdmluZykgcmV0dXJuOwogICAgICAgICAgICB0aGlzLnNob3dTbmFjaygi5oKo5o+Q5Lqk55qE5YaF5a655Lit5pyJ5pWP5oSf6K+N77yM6K+36L+b6KGM5L+u5pS55ZCO6YeN5paw5o+Q5LqkIik7CiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoImVycm9yIiArIEpTT04uc3RyaW5naWZ5KHNlbnNpdGl2ZVdvcmRzKSk7CiAgICAgICAgICAgIGxldCB0aXRsZUVycm9yID0gW107CiAgICAgICAgICAgIHNlbnNpdGl2ZVdvcmRzLmZvckVhY2goKHdvcmQpID0+IHsKICAgICAgICAgICAgICBpZiAodGhpcy50aXRsZS5pbmRleE9mKHdvcmQpID49IDApIHsKICAgICAgICAgICAgICAgIHRpdGxlRXJyb3IucHVzaCh3b3JkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gaGlnaExpZ2h0QWxsVGV4dCh0aGlzLmNvbnRlbnQsIHdvcmQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKHRpdGxlRXJyb3IubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIHRoaXMudGl0bGVFcnJvck1lc3NhZ2UgPSAi5YyF5ZCr5pWP5oSf6K+NOiI7CiAgICAgICAgICAgICAgdGl0bGVFcnJvci5mb3JFYWNoKCh3b3JkKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlRXJyb3JNZXNzYWdlICs9IHdvcmQgKyAiICI7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+ICh0aGlzLmF1dG9TYXZpbmcgPSBmYWxzZSkpOwogICAgfSwKICAgIGNhY3VsYXRlRGVsZWFyTGlzdCgpIHsKICAgICAgdGhpcy5kZWxlYXJMaXN0ID0gW107CiAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMudXBsb2FkRmlsZURpcmVjdCkpOwogICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIGl0ZW0ucmVzICYmCiAgICAgICAgICAoaXRlbS5lcnJvciA9PSBudWxsIHx8IHR5cGVvZiBpdGVtLmVycm9yID09ICJ1bmRlZmluZWQiKQogICAgICAgICkgewogICAgICAgICAgdGhpcy5kZWxlYXJMaXN0LnB1c2goaXRlbS5vcmllbnRhdGlvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5kZWxlYXJMaXN0KTsKICAgIH0sCgogICAgcHVibGlzaEFydGljbGUoKSB7CiAgICAgIGlmICh0aGlzLm5lZWRTYXZlKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuaCqOacieS/ruaUueacquS/neWtmO+8jOivt+S/neWtmOWQjuWGjei/m+ihjOWPkeW4g+OAgiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uKCkpIHJldHVybjsKICAgICAgdGhpcy5wdWJsaXNoID0gdHJ1ZTsKICAgIH0sCgogICAgcHJlY29uZGl0aW9uKCkgewogICAgICBsZXQgZXJyb3IgPSBudWxsOwogICAgICBpZiAoaXNOdWxsKHRoaXMudGl0bGUpKSB7CiAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHsKICAgICAgICAgIGVycm9yID0gdGhpcy50aXRsZUVycm9yTWVzc2FnZSA9ICLmoIfpopjkuI3og73kuLrnqboiOwogICAgICAgICAgdGhpcy5zaG93U25hY2soZXJyb3IpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmIChpc051bGwodGhpcy5jb250ZW50KSkgewogICAgICAgIGlmICghdGhpcy5hdXRvU2F2aW5nKSB0aGlzLnNob3dTbmFjaygi5q2j5paH5YaF5a655LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdC5maW5kSW5kZXgoKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS5lcnJvciAhPSBudWxsKSB7CiAgICAgICAgICBlcnJvciA9IGl0ZW0uZXJyb3I7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGl0ZW0ucmVzID09IGZhbHNlKSB7CiAgICAgICAgICBlcnJvciA9ICLor7fnrYnlvoXmlofku7bkuIrkvKDlrozmiJAiOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGVycm9yICE9IG51bGwgJiYgIXRoaXMuYXV0b1NhdmluZykgewogICAgICAgIHRoaXMuc2hvd1NuYWNrKGVycm9yKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS5lcnJvciAhPSBudWxsKSB7CiAgICAgICAgICBlcnJvciA9IGl0ZW0uZXJyb3I7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGl0ZW0ucmVzID09IGZhbHNlKSB7CiAgICAgICAgICBlcnJvciA9ICLor7fnrYnlvoXmlofku7bkuIrkvKDlrozmiJAiOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGVycm9yICE9IG51bGwgJiYgIXRoaXMuYXV0b1NhdmluZykgewogICAgICAgIHRoaXMuc2hvd1NuYWNrKGVycm9yKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgc2hvd1NuYWNrKG1lc3NhZ2UpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMucHJldmlldyB8fAogICAgICAgIHRoaXMucHVibGlzaCB8fAogICAgICAgIHRoaXMuJHJvdXRlLnBhdGggIT0gIi9wdWJsaXNoQXJ0aWNsZSIKICAgICAgKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHNob3dTbmFja2JhcihtZXNzYWdlKTsKICAgIH0sCiAgICBjbG9zZVNuYWNrKCkgewogICAgICBjbG9zZVNuYWNrYmFyKCk7CiAgICB9LAoKICAgIGNoYW5nZVNhdmVTdGF0dXMoKSB7CiAgICAgIHRoaXMubmVlZFNhdmUgPSB0cnVlOwogICAgICB0aGlzLmF1dG9TYXZlKCk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGNvbnRlbnQoKSB7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKICAgIHRpdGxlKCkgewogICAgICB0aGlzLnRpdGxlRXJyb3JNZXNzYWdlID0gIiI7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKICAgIHVwbG9hZEZpbGVEaXJlY3QoKSB7CiAgICAgIHRoaXMuY2FjdWxhdGVEZWxlYXJMaXN0KCk7CiAgICB9LAogIH0sCn07Cg=="},null]}