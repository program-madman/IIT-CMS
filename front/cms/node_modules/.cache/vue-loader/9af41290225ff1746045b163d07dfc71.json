{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/login.vue","mtime":1638103240531},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFVzZXJJbmZvIH0gZnJvbSAiQC9hcGkvZ2V0RGF0YS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgbG9hZGluZ0Vycm9yOiBmYWxzZSwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nOiAoKSA9PiBpbXBvcnQoIi4vbG9naW5Mb2FkaW5nLnZ1ZSIpLAogICAgTG9naW5FcnJvcjogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9lcnJvci12aWV3LnZ1ZSIpLAogIH0sCiAgbW91bnRlZCgpIHsKICAgIGxldCB0b2tlbiA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuOwoKICAgIGlmICh0b2tlbiA9PSBudWxsIHx8IHR5cGVvZiB0b2tlbiA9PSAidW5kZWZpbmVkIikgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudXNlci5sb2dpblN0YXR1cykgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYWxsQXJ0aWNsZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMubG9hZGluZ0Vycm9yID0gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyL3NldEF1dGhvcml6YXRpb24iLCB0b2tlbik7CiAgICBnZXRVc2VySW5mbygpCiAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zb2xlLmRlYnVnKCJ1c2VyaW5mbz09PT09PiIgKyBKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgICAgICBpZiAocmVzID09IG51bGwgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmdFcnJvciA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXNlci9zZXRVc2VyIiwgcmVzLmRhdGEpOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hbGxBcnRpY2xlIik7CiAgICAgICAgfQogICAgICB9KQogICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZ0Vycm9yID0gdHJ1ZTsKICAgICAgfSkKICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICB9LAp9Owo="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <loading v-if=\"loading\" />\n    <login-error v-if=\"loadingError\" />\n  </v-app>\n</template>\n\n<script>\nimport { getUserInfo } from \"@/api/getData.js\";\nexport default {\n  data() {\n    return {\n      loading: true,\n      loadingError: false,\n    };\n  },\n  components: {\n    Loading: () => import(\"./loginLoading.vue\"),\n    LoginError: () => import(\"@/components/base/error-view.vue\"),\n  },\n  mounted() {\n    let token = this.$route.query.token;\n\n    if (token == null || typeof token == \"undefined\") {\n      if (this.$store.state.user.loginStatus) {\n        this.$router.push(\"/allArticle\");\n      } else {\n        this.loading = false;\n        this.loadingError = true;\n      }\n      return;\n    }\n\n    this.$store.commit(\"user/setAuthorization\", token);\n    getUserInfo()\n      .then((res) => {\n        console.debug(\"userinfo=====>\" + JSON.stringify(res));\n        if (res == null || typeof res == \"undefined\" || res.code != 0) {\n          this.loadingError = true;\n        } else {\n          this.$store.commit(\"user/setUser\", res.data);\n          this.$router.push(\"/allArticle\");\n        }\n      })\n      .catch(() => {\n        this.loadingError = true;\n      })\n      .finally(() => {\n        this.loading = false;\n      });\n  },\n};\n</script>\n"]}]}