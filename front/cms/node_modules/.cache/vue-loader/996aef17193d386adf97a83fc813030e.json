{"remainingRequest":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/views/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/views/login.vue","mtime":1689751051730},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFVzZXJJbmZvIH0gZnJvbSAiQC9hcGkvZ2V0RGF0YS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlclNlbGVjdFBvc2l0aW9uOnt9LAogICAgICBjYXJyeW92ZXJQb3NpdGlvbjpbXSwKICAgICAgZGlhbG9nOmZhbHNlLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBsb2FkaW5nRXJyb3I6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmc6ICgpID0+IGltcG9ydCgiLi9sb2dpbkxvYWRpbmcudnVlIiksCiAgICBMb2dpbkVycm9yOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2Vycm9yLXZpZXcudnVlIiksCiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IGF1dGhvcml6YXRpb24gPSB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgIGNvbnNvbGUubG9nKCJhdXRob3JpemF0aW9uID09PT0+ICIrSlNPTi5zdHJpbmdpZnkoYXV0aG9yaXphdGlvbikpCiAgICBjb25zb2xlLmxvZyhhdXRob3JpemF0aW9uKQoKICAgIHRoaXMudG9JbmRleFBhZ2UoKTsKICAgIC8vIHJldHVybjsKCiAgICAvLyBpZiAoYXV0aG9yaXphdGlvbiA9PSBudWxsIHx8IHR5cGVvZiBhdXRob3JpemF0aW9uID09ICJ1bmRlZmluZWQiKSB7CiAgICAvLyAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmxvZ2luU3RhdHVzKSB7CiAgICAvLyAgICAgdGhpcy50b0luZGV4UGFnZSgpOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgLy8gICAgIHRoaXMubG9hZGluZ0Vycm9yID0gdHJ1ZTsKICAgIC8vICAgfQogICAgLy8gICByZXR1cm47CiAgICAvLyB9CgogICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCJ1c2VyL3NldEF1dGhvcml6YXRpb24iLEpTT04uc3RyaW5naWZ5KGF1dGhvcml6YXRpb24pKTsKICAgIC8vIGdldFVzZXJJbmZvKCkKICAgIC8vICAgLnRoZW4oKHJlcykgPT4gewogICAgLy8gICAgIGNvbnNvbGUubG9nKCJ1c2VyaW5mbz09PT09PiIgKyBKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgIC8vICAgICBpZiAocmVzID09IG51bGwgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAvLyAgICAgICBjb25zb2xlLmxvZygiIGNvZGUgbXliYXkgbnVsbCAiK3Jlcy5jb2RlKQogICAgLy8gICAgICAgdGhpcy5sb2FkaW5nRXJyb3IgPSB0cnVlOwogICAgLy8gICAgIH0gZWxzZSBpZihyZXMuZGF0YS5wb3NpdGlvbkxpc3QgPT09IG51bGwgfHwgdHlwZW9mIHJlcy5kYXRhLnBvc2l0aW9uTGlzdCA9PT0gInVuZGVmaW5lZCIgfHwgcmVzLmRhdGEucG9zaXRpb25MaXN0Lmxlbmd0aCA9PT0gMCkgeyAKICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCJ1c2VyIHBvc2l0aW9uIGlzIG51bGwgPT09ID4iK0pTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnVzZXJJbmZvLnBvc2l0aW9uTGlzdCkpCiAgICAvLyAgICAgICB0aGlzLmxvYWRpbmdFcnJvciA9IHRydWU7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIGNvbnNvbGUubG9nKCI9PT0gZW50ZXIgbWFpbiBwYWdlID09PSIpCiAgICAvLyAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVzZXIvc2V0VXNlciIsIHJlcy5kYXRhKTsgIAogICAgLy8gICAgICAgbGV0IHBvc2l0aW9uID0gcmVzLmRhdGEucG9zaXRpb25MaXN0OwogICAgLy8gICAgICAgY29uc29sZS5sb2coInVzZXIgcG9zaXRpb25zID09PT4gIitKU09OLnN0cmluZ2lmeShwb3NpdGlvbikpCiAgICAvLyAgICAgICBpZihwb3NpdGlvbi5sZW5ndGggPT09IDEpIHsKICAgIC8vICAgICAgICAgY29uc29sZS5sb2coIj09PSB1c2VyIGhhcyBvbmxlIG9uZSBwb3NpdGlvbiA9PT0iKQogICAgLy8gICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlOwogICAgLy8gICAgICAgICB0aGlzLnVzZXJTZWxlY3RQb3NpdGlvbiA9IHBvc2l0aW9uWzBdLmNvZGU7CiAgICAvLyAgICAgICAgIHRoaXMub25TZWxlY3RQb3NpdGlvbigpOyAgICAgCiAgICAvLyAgICAgICB9ZWxzZSB7CiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCI9PT0gdXNlciBoYXMgbWFueSBwb3NpdGlvbiA9PT0gIikKICAgIC8vICAgICAgICAgdGhpcy5jYXJyeW92ZXJQb3NpdGlvbiA9IHBvc2l0aW9uOwogICAgLy8gICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWU7CiAgICAvLyAgICAgICB9IAogICAgLy8gICAgIH0KICAgIC8vICAgfSkKICAgIC8vICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgY29uc29sZS5sb2coIiBvbiBlcnJvciAiK0pTT04uc3RyaW5naWZ5KGUpKQogICAgLy8gICAgIHRoaXMubG9hZGluZ0Vycm9yID0gdHJ1ZTsKICAgIC8vICAgfSkKICAgIC8vICAgLmZpbmFsbHkoKCkgPT4gewogICAgLy8gICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgLy8gICB9KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBvblNlbGVjdFBvc2l0aW9uKCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXNlci9zZXRQb3NpdGlvbiIsIHRoaXMudXNlclNlbGVjdFBvc2l0aW9uKTsKICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlOwogICAgICAgIHRoaXMudG9JbmRleFBhZ2UoKTsKICAgIH0sCiAgICB0b0luZGV4UGFnZSgpewogICAgICB2YXIgaW5kZXggPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJ1c2VyL2dldEluZGV4UGFnZSJdCiAgICAgIGlmKGluZGV4ICE9IG51bGwgJiYgdHlwZW9mIGluZGV4ICE9IHVuZGVmaW5lZCl7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChpbmRleC5wYXRoKTsKICAgICAgfSAKICAgIH0KICB9LAoKfTsK"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <loading v-if=\"loading\" />\n    <login-error v-if=\"loadingError\" />\n    <template>\n      <v-row justify=\"space-around\">\n        <v-col cols=\"auto\">\n          <v-dialog\n            persistent\n            scrollable\n            v-model=\"dialog\"\n            transition=\"dialog-bottom-transition\"\n            max-width=\"600\"\n          >\n            <template >\n              <v-card>\n                <v-toolbar\n                  color=\"primary\"\n                  dark\n                >请选择您登录MyMessage的角色</v-toolbar>\n                <v-card-text>\n                  <v-radio-group v-model=\"userSelectPosition\">\n                      <v-radio\n                        class=\"mt-0\"\n                        v-for=\"(item,index) in carryoverPosition\"\n                        :key=\"index\"\n                        :value=\"item.code\"\n                      >\n                      <template v-slot:label>\n                        <v-col>\n                        <strong class=\"primary--text\">{{`${item.jobName}`}}</strong>\n                        <v-divider class=\"mt-1\"/>  \n                        </v-col>\n                    </template>   \n                                  \n                      </v-radio>  \n                    </v-radio-group>\n                </v-card-text>\n                \n              <div style=\"margin-top: 24px; height: 60px;margin-bottom:15px\">\n                <v-btn\n                style=\"margin-left: 190px;\"\n                :disabled=\"JSON.stringify(userSelectPosition) === '{}'\"\n                  depressed color=\"#1867C0\"  \n                  class=\"white--text\"\n                  min-width=\"205px\"\n                  height=\"36px\"\n                  @click=\"onSelectPosition\"\n                >\n                  确认\n                </v-btn>\n            </div>     \n              </v-card>\n            </template>\n          </v-dialog>\n        </v-col>\n      </v-row>\n    </template>\n</v-app>\n</template>\n\n<script>\nimport { getUserInfo } from \"@/api/getData.js\";\nexport default {\n  data() {\n    return {\n      userSelectPosition:{},\n      carryoverPosition:[],\n      dialog:false,\n      loading: true,\n      loadingError: false,\n    };\n  },\n  components: {\n    Loading: () => import(\"./loginLoading.vue\"),\n    LoginError: () => import(\"@/components/base/error-view.vue\"),\n  },\n  mounted() {\n    let authorization = this.$route.query;\n    console.log(\"authorization ====> \"+JSON.stringify(authorization))\n    console.log(authorization)\n\n    this.toIndexPage();\n    // return;\n\n    // if (authorization == null || typeof authorization == \"undefined\") {\n    //   if (this.$store.state.user.loginStatus) {\n    //     this.toIndexPage();\n    //   } else {\n    //     this.loading = false;\n    //     this.loadingError = true;\n    //   }\n    //   return;\n    // }\n\n    // this.$store.commit(\"user/setAuthorization\",JSON.stringify(authorization));\n    // getUserInfo()\n    //   .then((res) => {\n    //     console.log(\"userinfo=====>\" + JSON.stringify(res));\n    //     if (res == null || typeof res == \"undefined\" || res.code != 0) {\n    //       console.log(\" code mybay null \"+res.code)\n    //       this.loadingError = true;\n    //     } else if(res.data.positionList === null || typeof res.data.positionList === \"undefined\" || res.data.positionList.length === 0) { \n    //       console.log(\"user position is null === >\"+JSON.stringify(res.data.userInfo.positionList))\n    //       this.loadingError = true;\n    //     } else {\n    //       console.log(\"=== enter main page ===\")\n    //       this.$store.commit(\"user/setUser\", res.data);  \n    //       let position = res.data.positionList;\n    //       console.log(\"user positions ===> \"+JSON.stringify(position))\n    //       if(position.length === 1) {\n    //         console.log(\"=== user has onle one position ===\")\n    //         this.dialog = false;\n    //         this.userSelectPosition = position[0].code;\n    //         this.onSelectPosition();     \n    //       }else {\n    //         console.log(\"=== user has many position === \")\n    //         this.carryoverPosition = position;\n    //         this.dialog = true;\n    //       } \n    //     }\n    //   })\n    //   .catch((e) => {\n    //     console.log(\" on error \"+JSON.stringify(e))\n    //     this.loadingError = true;\n    //   })\n    //   .finally(() => {\n    //     this.loading = false;\n    //   });\n  },\n\n  methods: {\n    onSelectPosition() {\n        this.$store.commit(\"user/setPosition\", this.userSelectPosition);\n        this.dialog = false;\n        this.toIndexPage();\n    },\n    toIndexPage(){\n      var index = this.$store.getters[\"user/getIndexPage\"]\n      if(index != null && typeof index != undefined){\n          this.$router.push(index.path);\n      } \n    }\n  },\n\n};\n</script>\n"]}]}