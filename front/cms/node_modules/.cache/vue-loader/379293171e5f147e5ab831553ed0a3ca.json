{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/timePicker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/timePicker.vue","mtime":1640181455869},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBtb2RlbDogewogICAgcHJvcDogInRpbWUiLAogICAgZXZlbnQ6ICJjaGFuZ2UiLAogIH0sCiAgcHJvcHM6IHsKICAgIHRpbWU6IHsKICAgICAgdHlwZTogW1N0cmluZywgT2JqZWN0XSwKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogICAgbWluVGltZTogewogICAgICB0eXBlOiBbRGF0ZSwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogICAgbWF4VGltZTogewogICAgICB0eXBlOiBbRGF0ZSwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dUaW1lUGlja2VyOiBmYWxzZSwKICAgICAgc2hvd0RhdGVQaWNrZXI6IGZhbHNlLAogICAgICBzZWxlY3REYXRlOiAiIiwKICAgICAgc2VsZWN0VGltZTogIjAwOjAwOjAwIiwKICAgICAgbWF4VGltZVJ1bGU6IG51bGwsCiAgICAgIG1pblRpbWVSdWxlOiBudWxsLAogICAgfTsKICB9LAogIHdhdGNoOiB7fSwKCiAgbWV0aG9kczogewogICAgc2V0VGltZSgpIHsKICAgICAgbGV0IHRpbWUgPSB0aGlzLnNlbGVjdERhdGUgKyAiICIgKyB0aGlzLnNlbGVjdFRpbWU7CiAgICAgIGlmICh0aGlzLnNlbGVjdFRpbWUubGVuZ3RoID4gMCAmJiB0aGlzLnNlbGVjdFRpbWUubGVuZ3RoIDwgNikgewogICAgICAgIHRpbWUgKz0gIjowMCI7CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlIiwgdGltZSk7CiAgICB9LAoKICAgIHNldFRpbWVSdWxlKCkgewogICAgICBpZiAodGhpcy5pc1ZhbGlkRGF0ZSh0aGlzLm1pblRpbWUpKSB7CiAgICAgICAgaWYgKG5ldyBEYXRlKHRoaXMuc2VsZWN0RGF0ZSkuZ2V0VGltZSgpIDwgdGhpcy5taW5UaW1lLmdldFRpbWUoKSkgewogICAgICAgICAgdGhpcy5taW5UaW1lUnVsZSA9IHRoaXMubWluVGltZS5mb3JtYXQoImhoOm1tIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubWF4VGltZVJ1bGUgPSBudWxsOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbWludmFsID0gbmV3IERhdGUodGhpcy5taW5UaW1lKTsKICAgICAgICBpZiAodGhpcy5pc1ZhbGlkRGF0ZShtaW52YWwpKSB7CiAgICAgICAgICBpZiAobmV3IERhdGUodGhpcy5zZWxlY3REYXRlKS5nZXRUaW1lKCkgPCBtaW52YWwuZ2V0VGltZSgpKyA4ICogNjAgKiA2MCAqIDEwMDApIHsKICAgICAgICAgICAgdGhpcy5taW5UaW1lUnVsZSA9IG1pbnZhbC5mb3JtYXQoImhoOm1tIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm1heFRpbWVSdWxlID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlzVmFsaWREYXRlKHRoaXMubWF4VGltZSkpIHsKICAgICAgICBpZiAobmV3IERhdGUodGhpcy5zZWxlY3REYXRlKS5nZXRUaW1lKCkgPiB0aGlzLm1heFRpbWUuZ2V0VGltZSgpKSB7CiAgICAgICAgICB0aGlzLm1heFRpbWVSdWxlID0gdGhpcy5tYXhUaW1lLmZvcm1hdCgiaGg6bW0iKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tYXhUaW1lUnVsZSA9IG51bGw7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBtYXh2YWwgPSBuZXcgRGF0ZSh0aGlzLm1heFRpbWUpOwogICAgICAgIGlmICh0aGlzLmlzVmFsaWREYXRlKG1heHZhbCkpIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgbmV3IERhdGUodGhpcy5zZWxlY3REYXRlKS5nZXRUaW1lKCkgPgogICAgICAgICAgICBtYXh2YWwuZ2V0VGltZSgpIC0gMTYgKiA2MCAqIDYwICogMTAwMAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMubWF4VGltZVJ1bGUgPSBtYXh2YWwuZm9ybWF0KCJoaDptbSIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5tYXhUaW1lUnVsZSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaXNWYWxpZERhdGUoZGF0ZSkgewogICAgICByZXR1cm4gZGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKGRhdGUuZ2V0VGltZSgpKTsKICAgIH0sCiAgICBhbGxvd2VkX2RhdGVzKHZhbCkgewogICAgICB2YXIgcmVzID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMuaXNWYWxpZERhdGUodGhpcy5taW5UaW1lKSkgewogICAgICAgIHJlcyA9CiAgICAgICAgICBuZXcgRGF0ZSh2YWwpLmdldFRpbWUoKSA+CiAgICAgICAgICB0aGlzLm1pblRpbWUuZ2V0VGltZSgpIC0gMTYgKiA2MCAqIDYwICogMTAwMDsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbWluID0gbmV3IERhdGUodGhpcy5taW5UaW1lKTsKICAgICAgICBpZiAodGhpcy5pc1ZhbGlkRGF0ZShtaW4pKSB7CiAgICAgICAgICByZXMgPSBuZXcgRGF0ZSh2YWwpLmdldFRpbWUoKSA+IG1pbi5nZXRUaW1lKCkgLSAxNiAqIDYwICogNjAgKiAxMDAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuaXNWYWxpZERhdGUodGhpcy5tYXhUaW1lKSkgewogICAgICAgIGNvbnNvbGUubG9nKG5ldyBEYXRlKHZhbCkuZ2V0VGltZSgpIC0gdGhpcy5tYXhUaW1lLmdldFRpbWUoKSk7CiAgICAgICAgcmVzID0gcmVzICYmIG5ldyBEYXRlKHZhbCkuZ2V0VGltZSgpIDwgdGhpcy5tYXhUaW1lLmdldFRpbWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbWF4ID0gbmV3IERhdGUodGhpcy5tYXhUaW1lKTsKICAgICAgICBpZiAodGhpcy5pc1ZhbGlkRGF0ZShtYXgpKSB7CiAgICAgICAgICByZXMgPQogICAgICAgICAgICByZXMgJiYgbmV3IERhdGUodmFsKS5nZXRUaW1lKCkgPCBtYXguZ2V0VGltZSgpICsgOCAqIDYwICogNjAgKiAxMDAwOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["timePicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"timePicker.vue","sourceRoot":"src/views/page/publishArticle","sourcesContent":["<template>\n  <v-menu\n    ref=\"menu1\"\n    :close-on-content-click=\"false\"\n    transition=\"scale-transition\"\n    offset-y\n    v-model=\"showDatePicker\"\n    min-width=\"auto\"\n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n      <div v-bind=\"attrs\" v-on=\"on\" style=\"display: inline-block\">\n        <slot></slot>\n      </div>\n    </template>\n\n    <v-date-picker\n      v-model=\"selectDate\"\n      :persistent=\"true\"\n      scrollable\n      no-title\n      :allowed-dates=\"allowed_dates\"\n      v-if=\"showDatePicker && !showTimePicker\"\n      @change=\"\n        showTimePicker = true;\n        setTimeRule();\n        setTime();\n      \"\n    >\n      <v-spacer></v-spacer>\n    </v-date-picker>\n    <v-time-picker\n      format=\"24hr\"\n      no-title\n      :persistent=\"true\"\n      v-model=\"selectTime\"\n      v-if=\"showTimePicker\"\n      :max=\"maxTimeRule\"\n      :min=\"minTimeRule\"\n      click:hour=\"setTime()\"\n      @change=\"\n        showTimePicker = false;\n        showDatePicker = false;\n        setTime();\n      \"\n    ></v-time-picker>\n  </v-menu>\n</template>\n<script>\nexport default {\n  model: {\n    prop: \"time\",\n    event: \"change\",\n  },\n  props: {\n    time: {\n      type: [String, Object],\n      default: \"\",\n    },\n    minTime: {\n      type: [Date, String],\n      default: \"\",\n    },\n    maxTime: {\n      type: [Date, String],\n      default: \"\",\n    },\n  },\n  data() {\n    return {\n      showTimePicker: false,\n      showDatePicker: false,\n      selectDate: \"\",\n      selectTime: \"00:00:00\",\n      maxTimeRule: null,\n      minTimeRule: null,\n    };\n  },\n  watch: {},\n\n  methods: {\n    setTime() {\n      let time = this.selectDate + \" \" + this.selectTime;\n      if (this.selectTime.length > 0 && this.selectTime.length < 6) {\n        time += \":00\";\n      }\n      this.$emit(\"change\", time);\n    },\n\n    setTimeRule() {\n      if (this.isValidDate(this.minTime)) {\n        if (new Date(this.selectDate).getTime() < this.minTime.getTime()) {\n          this.minTimeRule = this.minTime.format(\"hh:mm\");\n        } else {\n          this.maxTimeRule = null;\n        }\n      } else {\n        var minval = new Date(this.minTime);\n        if (this.isValidDate(minval)) {\n          if (new Date(this.selectDate).getTime() < minval.getTime()+ 8 * 60 * 60 * 1000) {\n            this.minTimeRule = minval.format(\"hh:mm\");\n          } else {\n            this.maxTimeRule = null;\n          }\n        }\n      }\n\n      if (this.isValidDate(this.maxTime)) {\n        if (new Date(this.selectDate).getTime() > this.maxTime.getTime()) {\n          this.maxTimeRule = this.maxTime.format(\"hh:mm\");\n        } else {\n          this.maxTimeRule = null;\n        }\n      } else {\n        var maxval = new Date(this.maxTime);\n        if (this.isValidDate(maxval)) {\n          if (\n            new Date(this.selectDate).getTime() >\n            maxval.getTime() - 16 * 60 * 60 * 1000\n          ) {\n            this.maxTimeRule = maxval.format(\"hh:mm\");\n          } else {\n            this.maxTimeRule = null;\n          }\n        }\n      }\n    },\n    isValidDate(date) {\n      return date instanceof Date && !isNaN(date.getTime());\n    },\n    allowed_dates(val) {\n      var res = true;\n      if (this.isValidDate(this.minTime)) {\n        res =\n          new Date(val).getTime() >\n          this.minTime.getTime() - 16 * 60 * 60 * 1000;\n      } else {\n        var min = new Date(this.minTime);\n        if (this.isValidDate(min)) {\n          res = new Date(val).getTime() > min.getTime() - 16 * 60 * 60 * 1000;\n        }\n      }\n\n      if (this.isValidDate(this.maxTime)) {\n        console.log(new Date(val).getTime() - this.maxTime.getTime());\n        res = res && new Date(val).getTime() < this.maxTime.getTime();\n      } else {\n        var max = new Date(this.maxTime);\n        if (this.isValidDate(max)) {\n          res =\n            res && new Date(val).getTime() < max.getTime() + 8 * 60 * 60 * 1000;\n        }\n      }\n      return res;\n    },\n  },\n};\n</script>"]}]}