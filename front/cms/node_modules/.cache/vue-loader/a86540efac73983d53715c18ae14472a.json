{"remainingRequest":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/views/page/allArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/views/page/allArticle.vue","mtime":1690361559635},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAiQC9hc3NldHMvY3NzL2FydGljbGUuY3NzIjsKaW1wb3J0IHsgIHJlbW92ZUNvbGxlY3Rpb24sZ2V0QWxsQXJ0aWNsZSB9IGZyb20gIkAvYXBpL2dldERhdGEuanMiOwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIkAvdXRpbHMvZXZlbnQtYnVzIjsKaW1wb3J0IHsKICBnZXRNc2dTdGF0dXNEZXNjLAogIGhpZ2hMaWdodFRleHQsCiAgZ2V0TXNnU3RhdHVzSW1nLAogIGZvcm1hdEh0bWwsCn0gZnJvbSAiQC91dGlscy9hcnRpY2xlVXRpbHMuanMiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGFlc0VuY3J5cHQgfSBmcm9tICJAL3V0aWxzL2VuY3J5cHRpb24uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgc2VhcmNoQmFyOiAoKSA9PiBpbXBvcnQoIi4vYXJ0aWNsZUxpc3Qvc2VhcmNoQmFyLnZ1ZSIpLAogICAgcGFnZUxvYWRlcjogKCkgPT4gaW1wb3J0KCIuL2FydGljbGVMaXN0L3BhZ2VMb2FkZXIudnVlIiksCiAgICBsb2FkaW5nOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2xvYWRpbmcudnVlIiksCiAgICBlbXB0eVZpZXc6ICgpID0+IGltcG9ydCgiQC9jb21wb25lbnRzL2Jhc2UvZW1wdHktdmlldy52dWUiKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhOiBudWxsLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbG9hZGluZ3ZpZXc6IHRydWUsCiAgICAgIGVtcHR5Vmlld1Nob3c6IGZhbHNlLAogICAgICBkZXBhcnRtZW50czogWyJBbGwiXSwKICAgICAgYm9yZGVyU3RhdHVzOiAiYm9yZGVyLWxlZnQ6M3B4IHNvbGlkICMxODY3QzAgIWltcG9ydGFudDsiLAogICAgICBpdGVtczogW10sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoewogICAgICBoYXNFZGl0UGVybWlzc2lvbjogInVzZXIvaGFzRWRpdFBlcm1pc3Npb24iLAogICAgfSksCiAgfSwKCiAgbWV0aG9kczogewoKICAgIG9uU2VhcmNoKGRhdGEpIHsKICAgICAgaWYgKHRoaXMubG9hZGluZyA9PSB0cnVlKSByZXR1cm47CiAgICAgIHRoaXMuaXRlbXMgPSBbXTsKICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgdGhpcy5zZWFyY2hBcnRpY2xlcyh0aGlzLmRhdGEpOwogICAgICB0aGlzLmVtcHR5Vmlld1Nob3cgPSBmYWxzZTsKICAgICAgdGhpcy5sb2FkaW5ndmlldyA9IHRydWU7CiAgICB9LAoKCgogICAgb25SZXNldChkYXRhKSB7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcgPT0gdHJ1ZSkgcmV0dXJuOwogICAgICB0aGlzLm9uU2VhcmNoKGRhdGEpOwogICAgfSwKCiAgICBvbkxvYWRNb3JlKCkgewogICAgICBpZiAodGhpcy5sb2FkaW5nID09IHRydWUpIHJldHVybjsKICAgICAgdGhpcy5zZWFyY2hBcnRpY2xlcyh0aGlzLmRhdGEpOwogICAgfSwKICAgIHNlYXJjaEFydGljbGVzKGRhdGEpIHsKICAgICAgCiAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0QWxsQXJ0aWNsZShkYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMgPT0gbnVsbCB8fCB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8IHJlcy5jb2RlID09IG51bGwgfHwgCiAgICAgICAgICAgICAgdHlwZW9mIHJlcy5jb2RlID09ICJ1bmRlZmluZWQiIHx8IHJlcy5kYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd0VtcHR5Vmlld0lmTmVlZGVkKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGlmICh0aGlzLmRhdGEucGFnZU51bSA9PSAxKSB7CiAgICAgICAgICAvLyAgIGxldCBkZXBhcnRtZW50cyA9IFsi5YWo6YOoIl07CiAgICAgICAgICAvLyAgIHRoaXMuZGVwYXJ0bWVudHMgPSBkZXBhcnRtZW50cy5jb25jYXQocmVzLmRhdGEuZGVwYXJ0bWVudHMpOwogICAgICAgICAgLy8gfQoKICAgICAgICAgIHRoaXMuZGF0YS5wYWdlTnVtKys7CiAgICAgICAgICBsZXQgYVRlbXAgPSBbXTsKCiAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgIGxldCBkVGVtcCA9IHt9OwogICAgICAgICAgICBkVGVtcFsiaWQiXSA9IGl0ZW0uYXJ0aWNsZUlkOwogICAgICAgICAgICBkVGVtcFsidGl0bGUiXSA9IGZvcm1hdEh0bWwoaXRlbS50aXRsZSk7CiAgICAgICAgICAgIGRUZW1wWyJpbnRybyJdID0gZm9ybWF0SHRtbChpdGVtLmNvbnRlbnQpOwogICAgICAgICAgICBkVGVtcFsibGFzdFVwZGF0ZVRpbWUiXSA9IGl0ZW0udXBkYXRlVGltZTsKICAgICAgICAgICAgZFRlbXBbImRlcHRtZW50Il0gPSAiQ29tcHV0ZXIgU2NpZW5jZSIKCiAgICAgICAgICAgIC8v5paH56ug54q25oCBOjA66I2J56i/IDE65bey5Y+R5biDICA0OuW3suWkseaViAogICAgICAgICAgICBkVGVtcFsiYXJ0aWNsZVR5cGUiXSA9IGdldE1zZ1N0YXR1c0Rlc2MoMSk7CiAgICAgICAgICAgIGRUZW1wWyJhcnRpY2xlVHlwZUltZyJdID0gZ2V0TXNnU3RhdHVzSW1nKDEpOwogICAgICAgICAgICAvL+mZhOS7tuaVsOmHjwogICAgICAgICAgICBkVGVtcFsiYXR0YWNobWVudENvdW50Il0gPSAzOwogICAgICAgICAgICAvL+mYheivu+aVsOmHjwogICAgICAgICAgICBkVGVtcFsicmVhZE51bSJdID0gMjsKICAgICAgICAgICAgLy/mlofku7bnvJblj7cKICAgICAgICAgICAgZFRlbXBbImFydGljbGVObyJdID0gIk5ld3MiOwogICAgICAgICAgICAvL+aYr+WQpuW3suivuwogICAgICAgICAgICBkVGVtcFsicmVhZFN0YXR1cyJdID0gZmFsc2U7CiAgICAgICAgICAgIC8v5pS26JeP54q25oCBCiAgICAgICAgICAgIGRUZW1wWyJmYXZvcml0ZSJdID0gZmFsc2U7CiAgICAgICAgICAgIC8v54K56LWe5pWwCiAgICAgICAgICAgIGRUZW1wWyJsaWtlIl0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMjAwMCAtIDEwKSkgKyAxMAogICAgICAgICAgICAvL+aUtuiXj+aTjeS9nOmAieaLqeeKtuaAgeWvhOWtmAogICAgICAgICAgICBkVGVtcFsiZmF2b3JpdGVTZWxlY3QiXSA9IG51bGw7CiAgICAgICAgICAgIGFUZW1wLnB1c2goZFRlbXApOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5jb25jYXQoYVRlbXApOwogICAgICAgICAgY29uc29sZS5kZWJ1ZygiYWRkIGxpc3QiICsgYVRlbXApOwogICAgICAgICAgaGlnaExpZ2h0VGV4dCh0aGlzLml0ZW1zLCB0aGlzLmRhdGEuc2VhcmNoQ29udGVudCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIHRoaXMuc2hvd0VtcHR5Vmlld0lmTmVlZGVkKCk7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgiYXJ0aWNsZUxpc3RDb21wbGV0ZSIsICJpbml0Iik7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMubG9hZGluZ3ZpZXcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzaG93RW1wdHlWaWV3SWZOZWVkZWQoKSB7CiAgICAgIGlmICh0aGlzLmRhdGE9PW51bGwgfHwgdGhpcy5kYXRhLnBhZ2VOdW0gPT0gMSkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuZW1wdHlWaWV3U2hvdyA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgLy/ot7Povazor6bmg4XpobUKICAgIHRvRGV0YWlsKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL2FydGNsZURldGFpbCIsCiAgICAgICAgcXVlcnk6IHsgaWQ6IGFlc0VuY3J5cHQoaWQgKyAiIikgfSwKICAgICAgfSk7CiAgICB9LAogIAogICAgLy/mlofnq6DmlLbol48KICAgIGNvbGxlY3QoaXRlbSkgewogICAgICBpdGVtLmZhdm9yaXRlID0gIWl0ZW0uZmF2b3JpdGUKICAgIC8vICAgLy/pgInmi6nmlLbol4/nmoTmlofnq6DnmoTmjIfpkogKICAgIC8vICAgbGV0IGl0ZW0gPSB0aGlzLml0ZW1zW2luZGV4XTsKICAgIC8vICAgbGV0IHR5cGUgPSBOdW1iZXIoaXRlbS5mYXZvcml0ZVNlbGVjdCk7CiAgICAvLyAgIGxldCBwYXJhbXMgPSB7CiAgICAvLyAgICAgbXNnSWQ6IE51bWJlcihpdGVtLmlkKSwKICAgIC8vICAgICBhcmNoaXZlSWQ6IHR5cGUsCiAgICAvLyAgIH07CiAgICAvLyAgIGNvbnNvbGUuZGVidWcoIuaUtuiXj+exu+Weiz09PT09PT0+IiArIHR5cGUpOwogICAgLy8gICBpdGVtLmZhdm9yaXRlU2VsZWN0ID0gbnVsbDsKCiAgICAvLyAgIGNvbGxlY3Rpb25PcGVyYXRpb24ocGFyYW1zKQogICAgLy8gICAgIC50aGVuKChyZXMpID0+IHsKICAgIC8vICAgICAgIGNvbnNvbGUuZGVidWcoIuS/ruaUueaWh+eroOexu+WeiyIgKyByZXMpOwogICAgLy8gICAgICAgdGhpcy5pdGVtc1tpbmRleF0uZmF2b3JpdGUgPSB0eXBlOwogICAgLy8gICAgIH0pCiAgICAvLyAgICAgLmNhdGNoKCkKICAgIC8vICAgICAuZmluYWxseSgoKSA9PiAodGhpcy5pdGVtc1tpbmRleF0uZGxvZyA9IGZhbHNlKSk7CiAgICB9LAogIH0sCiAgCiAgLy/mlofnq6DmlLbol48KICByZW1vdmVGYXZvdXJpdGUoaXRlbSkgewogICAgLy/pgInmi6nmlLbol4/nmoTmlofnq6DnmoTmjIfpkogKICAgIC8vIHRoaXMuaXRlbXMuc3BsaWNlKDAsIDEpCiAgICAvL2xldCBpdGVtID0gdGhpcy5pdGVtc1tpbmRleF07CiAgICBsZXQgZGF0YSA9IHsKICAgICAgbXNnSWQ6IGl0ZW0uaWQsCiAgICAgIGFyY2hpdmVJZDogaXRlbS5mYXZvcml0ZSwKICAgIH07CiAgICByZW1vdmVDb2xsZWN0aW9uKGRhdGEpCiAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zb2xlLmRlYnVnKHJlcyk7CiAgICAgICAgaWYocmVzICYmIHJlcy5jb2RlID09MCkgewogICAgICAgICAgaXRlbS5mYXZvcml0ZSA9IDA7CiAgICAgICAgICB0aGlzLml0ZW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLml0ZW1zKSkKICAgICAgICB9CiAgICAgICAgLy8gdmFyIGkgPSB0aGlzLml0ZW1zLmluZGV4T2YoaXRlbSk7CiAgICAgICAgLy8gaWYgKGkgPj0gMCkgewogICAgICAgIC8vICAgdGhpcy5pdGVtcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgLy8gfQogICAgICB9KQogICAgICAuY2F0Y2goKTsKICAgIC8v6YCJ5oup55qE5paH5Lu25aS5CiAgfSwKCiAgLy/ov4fmu6TmloflrZcKICBmaWx0ZXJzOiB7CiAgICBsZW5naHRoKHRleHQsIGxlbmd0aCwgc3VmZml4ID0gIi4uLiIpIHsKICAgICAgaWYgKCF0ZXh0KSByZXR1cm47CiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA8PSBsZW5ndGgpIHsKICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgfQogICAgICBsZXQgaGlnaHRMaWdodEVsZSA9ICc8Zm9udCBjb2xvcj0icmVkIj4nOwogICAgICBpZiAodGV4dC5pbmRleE9mKGhpZ2h0TGlnaHRFbGUpID49IDApIHsKICAgICAgICBsZW5ndGggKz0gMjU7CiAgICAgIH0KCiAgICAgIHJldHVybiAodGV4dCArICIiKS5zdWJzdHJpbmcoMCwgbGVuZ3RoKSArIHN1ZmZpeDsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["allArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"allArticle.vue","sourceRoot":"src/views/page","sourcesContent":["<template>\n  <v-container fluid>\n    <v-row no-gutters pa-0 ma-0>\n      <v-col sm=\"12\">\n        <search-bar @onSearch=\"onSearch\" @onReset=\"onReset\" :departments=\"departments\" />\n        <loading v-if=\"loadingview\" />\n        <empty-view v-if=\"emptyViewShow\" />\n        <v-row align=\"center\" dense class=\"pa-0 ma-0\">\n          <v-col v-for=\"(item, i) in items\" :key=\"i\" cols=\"12\">\n            <div\n              @click.prevent=\"toDetail(item.id)\"\n              :style=\"item.readStatus ==0 ? borderStatus : ''\"\n              class=\"card pt-4\"\n            >\n              <span class=\"article-time-text ma-0 pa-0 ml-4\">\n                {{ item.lastUpdateTime }}\n              </span>\n\n              <div class=\"pa-0 ma-0 ml-4 mt-2\">\n                <p\n                  class=\"article-title-text mt-0 pa-0\"\n                  :style=\"item.readStatus ==0 ? 'color:#1867C0' : ''\"\n                  v-html=\"$options.filters.lenghth(item.title, 120)\"\n                ></p>\n                <p\n                  class=\"article-intro-text pa-0 pt-1 html-content\"\n                  v-html=\"$options.filters.lenghth(item.intro, 90)\"\n                ></p>\n                <div\n                  v-if=\"item.attachmentCount || item.articleNo\"\n                  class=\"article-report-text mt-2 mr-3 ml-0 pa-0\"\n                >\n                  <span v-if=\"item.attachmentCount\" class=\"mr-6\"\n                    >Attachments({{ item.attachmentCount }})</span\n                  >\n                  <span v-if=\"item.articleNo\"\n                    >Category:{{ item.articleNo }}</span\n                  >\n                </div>\n              </div>\n              \n              <div class=\"mt-2 mb-1 ml-4 pa-0 pb-3 caption\">\n                  <template> \n                      <button\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      class=\"article-operator-text\"\n                      @click.stop=\"collect(item)\"\n                    >\n                      <v-icon class=\"article-operator-icon\">\n                        {{\n                          item.favorite > 0 ? \"mdi-star\" : \"mdi-star-outline\"\n                        }}\n                      </v-icon>\n                      {{ item.favorite > 0 ? \"favorite\" : \"favorite\" }}\n                    </button>\n\n                <button\n                  class=\"article-operator-text ml-4\">\n                  <v-icon class=\"article-operator-icon\">\n                    mdi-thumb-up\n                  </v-icon>\n                  {{item.like}}\n                </button>\n\n                  </template> \n              </div>\n            </div>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n    <page-loader @onLoadMore=\"onLoadMore\" />\n  </v-container>\n</template>\n\n<script>\nimport \"@/assets/css/article.css\";\nimport {  removeCollection,getAllArticle } from \"@/api/getData.js\";\nimport { EventBus } from \"@/utils/event-bus\";\nimport {\n  getMsgStatusDesc,\n  highLightText,\n  getMsgStatusImg,\n  formatHtml,\n} from \"@/utils/articleUtils.js\";\nimport { mapGetters } from \"vuex\";\nimport { aesEncrypt } from \"@/utils/encryption.js\";\nexport default {\n  components: {\n    searchBar: () => import(\"./articleList/searchBar.vue\"),\n    pageLoader: () => import(\"./articleList/pageLoader.vue\"),\n    loading: () => import(\"@/components/base/loading.vue\"),\n    emptyView: () => import(\"@/components/base/empty-view.vue\"),\n  },\n  data() {\n    return {\n      data: null,\n      loading: false,\n      loadingview: true,\n      emptyViewShow: false,\n      departments: [\"All\"],\n      borderStatus: \"border-left:3px solid #1867C0 !important;\",\n      items: [],\n    };\n  },\n  computed: {\n    ...mapGetters({\n      hasEditPermission: \"user/hasEditPermission\",\n    }),\n  },\n\n  methods: {\n\n    onSearch(data) {\n      if (this.loading == true) return;\n      this.items = [];\n      this.data = data;\n      this.searchArticles(this.data);\n      this.emptyViewShow = false;\n      this.loadingview = true;\n    },\n\n\n\n    onReset(data) {\n      if (this.loading == true) return;\n      this.onSearch(data);\n    },\n\n    onLoadMore() {\n      if (this.loading == true) return;\n      this.searchArticles(this.data);\n    },\n    searchArticles(data) {\n      \n       console.log(data);\n      this.loading = true;\n      getAllArticle(data)\n        .then((res) => {\n          if (res == null || typeof res == \"undefined\" || res.code == null || \n              typeof res.code == \"undefined\" || res.data.length == 0) {\n            this.showEmptyViewIfNeeded();\n            return;\n          }\n          // if (this.data.pageNum == 1) {\n          //   let departments = [\"全部\"];\n          //   this.departments = departments.concat(res.data.departments);\n          // }\n\n          this.data.pageNum++;\n          let aTemp = [];\n\n          res.data.forEach((item) => {\n            let dTemp = {};\n            dTemp[\"id\"] = item.articleId;\n            dTemp[\"title\"] = formatHtml(item.title);\n            dTemp[\"intro\"] = formatHtml(item.content);\n            dTemp[\"lastUpdateTime\"] = item.updateTime;\n            dTemp[\"deptment\"] = \"Computer Science\"\n\n            //文章状态:0:草稿 1:已发布  4:已失效\n            dTemp[\"articleType\"] = getMsgStatusDesc(1);\n            dTemp[\"articleTypeImg\"] = getMsgStatusImg(1);\n            //附件数量\n            dTemp[\"attachmentCount\"] = 3;\n            //阅读数量\n            dTemp[\"readNum\"] = 2;\n            //文件编号\n            dTemp[\"articleNo\"] = \"News\";\n            //是否已读\n            dTemp[\"readStatus\"] = false;\n            //收藏状态\n            dTemp[\"favorite\"] = false;\n            //点赞数\n            dTemp[\"like\"] = Math.floor(Math.random() * (2000 - 10)) + 10\n            //收藏操作选择状态寄存\n            dTemp[\"favoriteSelect\"] = null;\n            aTemp.push(dTemp);\n          });\n          this.items = this.items.concat(aTemp);\n          console.debug(\"add list\" + aTemp);\n          highLightText(this.items, this.data.searchContent);\n        })\n        .catch((res) => {\n          console.log(res);\n          this.showEmptyViewIfNeeded();\n        })\n        .finally(() => {\n          EventBus.$emit(\"articleListComplete\", \"init\");\n          this.loading = false;\n          this.loadingview = false;\n        });\n    },\n    showEmptyViewIfNeeded() {\n      if (this.data==null || this.data.pageNum == 1) {\n        this.loading = false;\n        this.emptyViewShow = true;\n      }\n    },\n\n    //跳转详情页\n    toDetail(id) {\n      this.$router.push({\n        path: \"/artcleDetail\",\n        query: { id: aesEncrypt(id + \"\") },\n      });\n    },\n  \n    //文章收藏\n    collect(item) {\n      item.favorite = !item.favorite\n    //   //选择收藏的文章的指针\n    //   let item = this.items[index];\n    //   let type = Number(item.favoriteSelect);\n    //   let params = {\n    //     msgId: Number(item.id),\n    //     archiveId: type,\n    //   };\n    //   console.debug(\"收藏类型=======>\" + type);\n    //   item.favoriteSelect = null;\n\n    //   collectionOperation(params)\n    //     .then((res) => {\n    //       console.debug(\"修改文章类型\" + res);\n    //       this.items[index].favorite = type;\n    //     })\n    //     .catch()\n    //     .finally(() => (this.items[index].dlog = false));\n    },\n  },\n  \n  //文章收藏\n  removeFavourite(item) {\n    //选择收藏的文章的指针\n    // this.items.splice(0, 1)\n    //let item = this.items[index];\n    let data = {\n      msgId: item.id,\n      archiveId: item.favorite,\n    };\n    removeCollection(data)\n      .then((res) => {\n        console.debug(res);\n        if(res && res.code ==0) {\n          item.favorite = 0;\n          this.items = JSON.parse(JSON.stringify(this.items))\n        }\n        // var i = this.items.indexOf(item);\n        // if (i >= 0) {\n        //   this.items.splice(i, 1);\n        // }\n      })\n      .catch();\n    //选择的文件夹\n  },\n\n  //过滤文字\n  filters: {\n    lenghth(text, length, suffix = \"...\") {\n      if (!text) return;\n      if (text.length <= length) {\n        return text;\n      }\n      let hightLightEle = '<font color=\"red\">';\n      if (text.indexOf(hightLightEle) >= 0) {\n        length += 25;\n      }\n\n      return (text + \"\").substring(0, length) + suffix;\n    },\n  },\n};\n</script>\n<style>\n.html-content p {\n  margin-bottom: 0px;\n}\n</style>"]}]}