{"remainingRequest":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/views/page/articleList/archiveList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/views/page/articleList/archiveList.vue","mtime":1640860161657},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAiQC9hc3NldHMvY3NzL2FydGljbGUuY3NzIjsKaW1wb3J0IHsKICBnZXRBcnRpY2xlQnlBcmNoaXZlQ2F0ZWdvcnksCiAgcmVtb3ZlQ29sbGVjdGlvbiwKfSBmcm9tICJAL2FwaS9nZXREYXRhLmpzIjsKaW1wb3J0IHsKICBnZXRNc2dTdGF0dXNEZXNjLAogIGhpZ2hMaWdodFRleHQsCiAgZ2V0TXNnU3RhdHVzSW1nLAogIGZvcm1hdEh0bWwsCn0gZnJvbSAiQC91dGlscy9hcnRpY2xlVXRpbHMuanMiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGFlc0VuY3J5cHQgfSBmcm9tICJAL3V0aWxzL2VuY3J5cHRpb24uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGFyY2hpdmVJZDogTnVtYmVyLAogIH0sCgogIGNvbXBvbmVudHM6IHsKICAgIHNlYXJjaEJhcjogKCkgPT4gaW1wb3J0KCIuL3NlYXJjaEJhci52dWUiKSwKICAgIHBhZ2VMb2FkZXI6ICgpID0+IGltcG9ydCgiLi9wYWdlTG9hZGVyLnZ1ZSIpLAogICAgbG9hZGluZzogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9sb2FkaW5nLnZ1ZSIpLAogICAgZW1wdHlWaWV3OiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2VtcHR5LXZpZXcudnVlIiksCiAgICAKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgLy8g5oqKIGB0aGlzLmRvbmVDb3VudGAg5pig5bCE5Li6IGB0aGlzLiRzdG9yZS5nZXR0ZXJzLmRvbmVUb2Rvc0NvdW50YAogICAgICBoYXNFZGl0UGVybWlzc2lvbjogInVzZXIvaGFzRWRpdFBlcm1pc3Npb24iLAogICAgfSksCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nOnRydWUsCiAgICAgIGFsbG93U2F2ZUFzOmZhbHNlLAogICAgICBkYXRhOiBudWxsLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbG9hZGluZ3ZpZXc6IHRydWUsCiAgICAgIGVtcHR5Vmlld1Nob3c6IGZhbHNlLAogICAgICBkZXBhcnRtZW50czogWyLlhajpg6giXSwKICAgICAgYm9yZGVyU3RhdHVzOiAiYm9yZGVyLWxlZnQ6M3B4IHNvbGlkICMxODY3QzAgIWltcG9ydGFudDsiLAogICAgICBpdGVtczogW10sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25TZWFyY2goZGF0YSkgewogICAgICBpZiAodGhpcy5sb2FkaW5nID09IHRydWUpIHJldHVybjsKICAgICAgdGhpcy5pdGVtcyA9IFtdOwogICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICB0aGlzLmRhdGEuYXJjaGl2ZUlkID0gdGhpcy5hcmNoaXZlSWQ7CiAgICAgIHRoaXMubG9hZGluZ3ZpZXcgPSB0cnVlOwogICAgICB0aGlzLmVtcHR5Vmlld1Nob3cgPSBmYWxzZTsKICAgICAgdGhpcy5zZWFyY2hBcnRpY2xlcyh0aGlzLmRhdGEpOwogICAgfSwKICAgIG9uUmVzZXQoZGF0YSkgewogICAgICBpZiAodGhpcy5sb2FkaW5nID09IHRydWUpIHJldHVybjsKICAgICAgdGhpcy5vblNlYXJjaChkYXRhKTsKICAgIH0sCgogICAgb25Mb2FkTW9yZSgpIHsKICAgICAgaWYgKHRoaXMubG9hZGluZyA9PSB0cnVlKSByZXR1cm47CiAgICAgIHRoaXMuc2VhcmNoQXJ0aWNsZXModGhpcy5kYXRhKTsKICAgIH0sCiAgICBzZWFyY2hBcnRpY2xlcyhkYXRhKSB7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcgPT0gdHJ1ZSkgcmV0dXJuOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBnZXRBcnRpY2xlQnlBcmNoaXZlQ2F0ZWdvcnkoZGF0YSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmRlYnVnKHJlcyk7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHJlcyA9PSBudWxsIHx8CiAgICAgICAgICAgIHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwKICAgICAgICAgICAgcmVzLmNvZGUgPT0gbnVsbCB8fAogICAgICAgICAgICB0eXBlb2YgcmVzLmNvZGUgPT0gInVuZGVmaW5lZCIgfHwKICAgICAgICAgICAgcmVzLmNvZGUgIT0gMCB8fAogICAgICAgICAgICByZXMuZGF0YS5tZXNzYWdlTGlzdC5sZW5ndGggPT0gMAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd0VtcHR5Vmlld0lmTmVlZGVkKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5kYXRhLnBhZ2VOdW0gPT0gMSkgewogICAgICAgICAgICBsZXQgZGVwYXJ0bWVudHMgPSBbIuWFqOmDqCJdOwogICAgICAgICAgICB0aGlzLmRlcGFydG1lbnRzID0gZGVwYXJ0bWVudHMuY29uY2F0KHJlcy5kYXRhLmRlcGFydG1lbnRzKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmRhdGEucGFnZU51bSsrOwogICAgICAgICAgbGV0IGFUZW1wID0gW107CiAgICAgICAgICByZXMuZGF0YS5tZXNzYWdlTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgIGxldCBkVGVtcCA9IHt9OwogICAgICAgICAgICBkVGVtcFsiaWQiXSA9IGl0ZW0uaWQ7CiAgICAgICAgICAgIGRUZW1wWyJ0aXRsZSJdID0gZm9ybWF0SHRtbChpdGVtLnRpdGxlKTsKICAgICAgICAgICAgZFRlbXBbImludHJvIl0gPSBmb3JtYXRIdG1sKGl0ZW0uY29udGVudCk7CiAgICAgICAgICAgIGRUZW1wWyJsYXN0VXBkYXRlVGltZSJdID0gaXRlbS5yZWxlYXNlVGltZTsKICAgICAgICAgICAgZFRlbXBbImRlcHRtZW50Il0gPSBpdGVtLmNyZWF0b3JDb21wYW55bmFtZTsKCiAgICAgICAgICAgIC8v5paH56ug54q25oCBOjA66I2J56i/IDE65bey5Y+R5biDICA0OuW3suWkseaViAogICAgICAgICAgICBkVGVtcFsiYXJ0aWNsZVR5cGUiXSA9IGdldE1zZ1N0YXR1c0Rlc2MoaXRlbS5tc2dTdGF0dXMpOwogICAgICAgICAgICBkVGVtcFsiYXJ0aWNsZVR5cGVJbWciXSA9IGdldE1zZ1N0YXR1c0ltZyhpdGVtLm1zZ1N0YXR1cyk7CiAgICAgICAgICAgIC8v6ZmE5Lu25pWw6YePCiAgICAgICAgICAgIGRUZW1wWyJhdHRhY2htZW50Q291bnQiXSA9IGl0ZW0uYXR0YWNobWVudENvdW50OwogICAgICAgICAgICAvL+mYheivu+aVsOmHjwogICAgICAgICAgICBkVGVtcFsicmVhZE51bSJdID0gaXRlbS5yZWFkQ291bnQ7CiAgICAgICAgICAgIC8v5paH5Lu257yW5Y+3CiAgICAgICAgICAgIGRUZW1wWyJhcnRpY2xlTm8iXSA9IGl0ZW0ubXNnTnVtYmVyOwogICAgICAgICAgICAvL+aYr+WQpuW3suivuwogICAgICAgICAgICBkVGVtcFsicmVhZFN0YXR1cyJdID0gaXRlbS5yZWFkU3RhdHVzOwogICAgICAgICAgICAvL+aUtuiXj+eKtuaAgQogICAgICAgICAgICBkVGVtcFsiZmF2b3JpdGUiXSA9IGl0ZW0uYXJjaGl2ZVN0YXR1czsKICAgICAgICAgICAgYVRlbXAucHVzaChkVGVtcCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLmNvbmNhdChhVGVtcCk7CiAgICAgICAgICBoaWdoTGlnaHRUZXh0KHRoaXMuaXRlbXMsIHRoaXMuZGF0YS5zZWFyY2hDb250ZW50KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgdGhpcy5zaG93RW1wdHlWaWV3SWZOZWVkZWQoKTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5sb2FkaW5ndmlldyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIHNob3dFbXB0eVZpZXdJZk5lZWRlZCgpIHsKICAgICAgaWYgKHRoaXMuZGF0YS5wYWdlTnVtID09IDEpIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLmVtcHR5Vmlld1Nob3cgPSB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIC8v6Lez6L2s6K+m5oOF6aG1CiAgICB0b0RldGFpbChpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9hcnRjbGVEZXRhaWwiLAogICAgICAgIHF1ZXJ5OiB7IGlkOiBhZXNFbmNyeXB0KGlkICsgIiIpIH0sCiAgICAgIH0pOwogICAgfSwKICAgIC8v6Lez6L2s5Y+R5biD5paH56ugCiAgICBzYXZlQXMoaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJwdWJsaXNoQXJ0aWNsZSIsCiAgICAgICAgcGFyYW1zOiB7IGlkOiBpZCB9LAogICAgICB9KTsKICAgIH0sCgogICAgLy/mlofnq6DmlLbol48KICAgIGNvbGxlY3QoaW5kZXgpIHsKICAgICAgLy/pgInmi6nmlLbol4/nmoTmlofnq6DnmoTmjIfpkogKICAgICAgLy8gdGhpcy5pdGVtcy5zcGxpY2UoMCwgMSkKICAgICAgbGV0IGl0ZW0gPSB0aGlzLml0ZW1zW2luZGV4XTsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgbXNnSWQ6IGl0ZW0uaWQsCiAgICAgICAgYXJjaGl2ZUlkOiB0aGlzLmFyY2hpdmVJZCwKICAgICAgfTsKICAgICAgcmVtb3ZlQ29sbGVjdGlvbihkYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUuZGVidWcocmVzKTsKICAgICAgICAgIHZhciBpID0gdGhpcy5pdGVtcy5pbmRleE9mKGl0ZW0pOwogICAgICAgICAgaWYgKGkgPj0gMCkgewogICAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZShpLCAxKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgpOwogICAgICAvL+mAieaLqeeahOaWh+S7tuWkuQogICAgfSwKCiAgICAvL+aSpOWbnuaWh+eroAogICAgd2l0aGRyYXcoaW5kZXgpIHsKICAgICAgLy/pgInmi6nmlLbol4/nmoTmlofnq6DnmoTmjIfpkogKICAgICAgY29uc29sZS5sb2coaW5kZXgpOwogICAgICAvL+mAieaLqeeahOaWh+S7tuWkuQogICAgICB0aGlzLml0ZW1zW2luZGV4XS5kbG9nMiA9IGZhbHNlOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnRlbXBJdGVtc1tpbmRleF0pOwogICAgfSwKICB9LAogIC8v6L+H5ruk5paH5a2XCiAgZmlsdGVyczogewogICAgbGVuZ2h0aCh0ZXh0LCBsZW5ndGgsIHN1ZmZpeCA9ICIuLi4iKSB7CiAgICAgIGlmICghdGV4dCkgcmV0dXJuOwogICAgICBpZiAodGV4dC5sZW5ndGggPD0gbGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgIH0KICAgICAgbGV0IGhpZ2h0TGlnaHRFbGUgPSAnPGZvbnQgY29sb3I9InJlZCI+JzsKICAgICAgaWYgKHRleHQuaW5kZXhPZihoaWdodExpZ2h0RWxlKSA+PSAwKSB7CiAgICAgICAgbGVuZ3RoICs9IDI1OwogICAgICB9CgogICAgICByZXR1cm4gKHRleHQgKyAiIikuc3Vic3RyaW5nKDAsIGxlbmd0aCkgKyBzdWZmaXg7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["archiveList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"archiveList.vue","sourceRoot":"src/views/page/articleList","sourcesContent":["<template>\n  <v-container fluid>\n\n    <v-row no-gutters pa-0 ma-0>\n      <v-col sm=\"12\">\n        <search-bar\n          @onSearch=\"onSearch\"\n          @onReset=\"onReset\"\n          :departments=\"departments\"\n        />\n        \n        <loading v-if=\"loadingview \" />\n        <empty-view v-if=\"emptyViewShow\" />\n        \n\n        <v-row align=\"center\" dense class=\"pa-0 ma-0\">\n          <v-col v-for=\"(item, i) in items\" :key=\"i\" cols=\"12\">\n            <div\n              @click.prevent=\"toDetail(item.id)\"\n              :style=\"item.readStatus ==0 ? borderStatus : ''\"\n              class=\"card pt-4\"\n            >\n              <div class=\"mt-0 mb-0 ml-4 pa-0\" style=\"display: flex\">\n                <span class=\"deptment\">{{ item.deptment }}</span>\n                <v-spacer></v-spacer>\n                <v-img\n                  max-height=\"20\"\n                  max-width=\"57\"\n                  :src=\"item.articleTypeImg\"\n                >\n                  <template>\n                    <v-row\n                      class=\"fill-height ma-0\"\n                      align=\"center\"\n                      justify=\"center\"\n                    >\n                      <span class=\"article-type-text\">{{\n                        item.articleType\n                      }}</span>\n                    </v-row>\n                  </template>\n                </v-img>\n              </div>\n              <span class=\"article-time-text ma-0 pa-0 ml-4\">\n                {{ item.lastUpdateTime }}\n              </span>\n\n              <div style=\"margin: 0; padding: 0\" class=\"ml-4 mt-2\">\n                <p\n                  class=\"article-title-text mt-0 pa-0\"\n                  :style=\"item.readStatus ==0 ? 'color:#1867C0' : ''\"\n                  v-html=\"$options.filters.lenghth(item.title, 50)\"\n                ></p>\n                <p\n                  class=\"article-intro-text pa-0 pt-1 html-content\"\n                  v-html=\"$options.filters.lenghth(item.intro, 90)\"\n                ></p>\n                <div\n                  v-if=\"item.attachmentCount || item.articleNo\"\n                  class=\"article-report-text mt-2 mr-3 ml-0 pa-0\"\n                >\n                  <span v-if=\"item.attachmentCount\" class=\"mr-6\"\n                    >附件({{ item.attachmentCount }})</span\n                  >\n                  <span v-if=\"item.articleNo\"\n                    >文章编号:{{ item.articleNo }}</span\n                  >\n                </div>\n              </div>\n              <div class=\"mt-2 mb-1 ml-4 pa-0 pb-3 caption\">\n                <button\n                  v-if=\"hasEditPermission\"\n                  class=\"article-operator-text mr-2\"\n                  @click.stop=\"saveAs(item.id)\"\n                >\n                  <v-icon class=\"article-operator-icon\">\n                    mdi-file-plus-outline\n                  </v-icon>\n                  另存为\n                </button>\n                <button\n                  class=\"article-operator-text\"\n                  @click.stop=\"collect(i)\"\n                >\n                  <v-icon class=\"article-operator-icon\"> mdi-star </v-icon>\n                  取消收藏\n                </button>\n              </div>\n            </div>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n    <page-loader @onLoadMore=\"onLoadMore\" />\n  </v-container>\n</template>\n\n<script>\nimport \"@/assets/css/article.css\";\nimport {\n  getArticleByArchiveCategory,\n  removeCollection,\n} from \"@/api/getData.js\";\nimport {\n  getMsgStatusDesc,\n  highLightText,\n  getMsgStatusImg,\n  formatHtml,\n} from \"@/utils/articleUtils.js\";\nimport { mapGetters } from \"vuex\";\nimport { aesEncrypt } from \"@/utils/encryption.js\";\nexport default {\n  props: {\n    archiveId: Number,\n  },\n\n  components: {\n    searchBar: () => import(\"./searchBar.vue\"),\n    pageLoader: () => import(\"./pageLoader.vue\"),\n    loading: () => import(\"@/components/base/loading.vue\"),\n    emptyView: () => import(\"@/components/base/empty-view.vue\"),\n    \n  },\n  computed: {\n    ...mapGetters({\n      // 把 `this.doneCount` 映射为 `this.$store.getters.doneTodosCount`\n      hasEditPermission: \"user/hasEditPermission\",\n    }),\n  },\n  data() {\n    return {\n      dialog:true,\n      allowSaveAs:false,\n      data: null,\n      loading: false,\n      loadingview: true,\n      emptyViewShow: false,\n      departments: [\"全部\"],\n      borderStatus: \"border-left:3px solid #1867C0 !important;\",\n      items: [],\n    };\n  },\n  methods: {\n    onSearch(data) {\n      if (this.loading == true) return;\n      this.items = [];\n      this.data = data;\n      this.data.archiveId = this.archiveId;\n      this.loadingview = true;\n      this.emptyViewShow = false;\n      this.searchArticles(this.data);\n    },\n    onReset(data) {\n      if (this.loading == true) return;\n      this.onSearch(data);\n    },\n\n    onLoadMore() {\n      if (this.loading == true) return;\n      this.searchArticles(this.data);\n    },\n    searchArticles(data) {\n      if (this.loading == true) return;\n      this.loading = true;\n      getArticleByArchiveCategory(data)\n        .then((res) => {\n          console.debug(res);\n          if (\n            res == null ||\n            typeof res == \"undefined\" ||\n            res.code == null ||\n            typeof res.code == \"undefined\" ||\n            res.code != 0 ||\n            res.data.messageList.length == 0\n          ) {\n            this.showEmptyViewIfNeeded();\n            return;\n          }\n\n          if (this.data.pageNum == 1) {\n            let departments = [\"全部\"];\n            this.departments = departments.concat(res.data.departments);\n          }\n\n          this.data.pageNum++;\n          let aTemp = [];\n          res.data.messageList.forEach((item) => {\n            let dTemp = {};\n            dTemp[\"id\"] = item.id;\n            dTemp[\"title\"] = formatHtml(item.title);\n            dTemp[\"intro\"] = formatHtml(item.content);\n            dTemp[\"lastUpdateTime\"] = item.releaseTime;\n            dTemp[\"deptment\"] = item.creatorCompanyname;\n\n            //文章状态:0:草稿 1:已发布  4:已失效\n            dTemp[\"articleType\"] = getMsgStatusDesc(item.msgStatus);\n            dTemp[\"articleTypeImg\"] = getMsgStatusImg(item.msgStatus);\n            //附件数量\n            dTemp[\"attachmentCount\"] = item.attachmentCount;\n            //阅读数量\n            dTemp[\"readNum\"] = item.readCount;\n            //文件编号\n            dTemp[\"articleNo\"] = item.msgNumber;\n            //是否已读\n            dTemp[\"readStatus\"] = item.readStatus;\n            //收藏状态\n            dTemp[\"favorite\"] = item.archiveStatus;\n            aTemp.push(dTemp);\n          });\n          this.items = this.items.concat(aTemp);\n          highLightText(this.items, this.data.searchContent);\n        })\n        .catch((res) => {\n          console.log(res);\n          this.showEmptyViewIfNeeded();\n        })\n        .finally(() => {\n          this.loading = false;\n          this.loadingview = false;\n        });\n    },\n    showEmptyViewIfNeeded() {\n      if (this.data.pageNum == 1) {\n        this.loading = false;\n        this.emptyViewShow = true;\n      }\n    },\n\n    //跳转详情页\n    toDetail(id) {\n      this.$router.push({\n        path: \"/artcleDetail\",\n        query: { id: aesEncrypt(id + \"\") },\n      });\n    },\n    //跳转发布文章\n    saveAs(id) {\n      this.$router.push({\n        name: \"publishArticle\",\n        params: { id: id },\n      });\n    },\n\n    //文章收藏\n    collect(index) {\n      //选择收藏的文章的指针\n      // this.items.splice(0, 1)\n      let item = this.items[index];\n      let data = {\n        msgId: item.id,\n        archiveId: this.archiveId,\n      };\n      removeCollection(data)\n        .then((res) => {\n          console.debug(res);\n          var i = this.items.indexOf(item);\n          if (i >= 0) {\n            this.items.splice(i, 1);\n          }\n        })\n        .catch();\n      //选择的文件夹\n    },\n\n    //撤回文章\n    withdraw(index) {\n      //选择收藏的文章的指针\n      console.log(index);\n      //选择的文件夹\n      this.items[index].dlog2 = false;\n      console.log(this.tempItems[index]);\n    },\n  },\n  //过滤文字\n  filters: {\n    lenghth(text, length, suffix = \"...\") {\n      if (!text) return;\n      if (text.length <= length) {\n        return text;\n      }\n      let hightLightEle = '<font color=\"red\">';\n      if (text.indexOf(hightLightEle) >= 0) {\n        length += 25;\n      }\n\n      return (text + \"\").substring(0, length) + suffix;\n    },\n  },\n};\n</script>\n<style scoped>\n.un-read-line {\n  color: #1867c0ff;\n  font-family: PingFang SC;\n  font-weight: regular;\n  font-size: 18px;\n  line-height: 24px;\n  letter-spacing: 0px;\n  text-align: left;\n}\n</style>\n<style>\n.html-content p {\n  margin-bottom: 0px;\n}\n</style>"]}]}