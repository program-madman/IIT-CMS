{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/publish.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/publish.vue","mtime":1639763210654},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgcHVibGlzaE1lc3NhZ2UsCiAgZ2V0RGVhbGVyTGlzdCwKICBnZXREZWFsZXJEZXBMaXN0LAogIGdldE9lbURlcExpc3QsCn0gZnJvbSAiQC9hcGkvZ2V0RGF0YS5qcyI7CmltcG9ydCAiQC91dGlscy90aW1lRm9ybWF0ZS5qcyI7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAiQC91dGlscy9ldmVudC1idXMiOwppbXBvcnQgeyBzaG93U25hY2tiYXIsIGNsb3NlU25hY2tiYXIgfSBmcm9tICJAL3V0aWxzL3NuYWNrYmFyLmpzIjsKaW1wb3J0IHsgVGhyb3R0bGUsIGRlZXBDbG9uZSB9IGZyb20gIkAvdXRpbHMvdG9vbHMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIG9wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIHZvdGVFbmFibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgZGVhbGVyOiB7CiAgICAgIHR5cGU6IFtPYmplY3QsIEFycmF5LCBTdHJpbmddLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgfSwKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHRpbWVQaWNrZXI6ICgpID0+IGltcG9ydCgiLi90aW1lUGlja2VyLnZ1ZSIpLAogICAgYWxlcnRUaW1lOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2FsZXJ0VGltZSIpLAogICAgbG9hZGluZ0FsZXJ0OiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2xvYWRpbmdBbGVydCIpLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogdGhpcy5vcGVuLAogICAgICBtc2dOdW1iZXI6IG51bGwsCiAgICAgIHJlbGVhc2VUaW1lOiAiIiwKICAgICAgZWZmZWN0aXZlVGltZTogIiIsCiAgICAgIGludmFsaWRUaW1lOiAiIiwKICAgICAgZmVlZGJhY2tUeXBlOiA0LAogICAgICB1cGxvYWRpbmc6IGZhbHNlLAogICAgICByZXBseVR5cGVzOiBbCiAgICAgICAgewogICAgICAgICAgdGV4dDogIuaXoOmcgOWbnuWkjSIsCiAgICAgICAgICB2YWx1ZTogNCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICLlt7Lor7vlm57miaciLAogICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAi5paH5a2X5Zue5aSNIiwKICAgICAgICAgIHZhbHVlOiAxLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIumZhOS7tiIsCiAgICAgICAgICB2YWx1ZTogMiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICLmipXnpagiLAogICAgICAgICAgdmFsdWU6IDMsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY2hfZGVsZWFyX2Rpc2FibGU6IGZhbHNlLAogICAgICBjaF9kZWxlYXI6IGZhbHNlLAogICAgICBjaF9vZW06IGZhbHNlLAogICAgICBjaF9kZWxlYXJfZGVwbGlzdF9zaG93OiBmYWxzZSwKICAgICAgY2hfYXJlYV9zdXBwOiBbXSwKICAgICAgY2hfY29tX3N1cHA6IFtdLAogICAgICBjaF9kZWxlYXJfc2VsZWN0OiBbXSwKICAgICAgY2hfZGVsZWFyX3NlbGVjdF92aWV3OiBbXSwKICAgICAgY2hfZGVsZWFyX2RlcGxpc3Q6IFtdLAogICAgICBjaF9kZWxlYXJfZGVwbGlzdF92aWV3OiBbXSwKICAgICAgY2hfb2VtX2RlcGxpc3Q6IFtdLAogICAgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0RGVhbGVyTGlzdCgpOwogICAgdGhpcy5pbml0RGVhbGVyRGVwKCk7CiAgICB0aGlzLmluaXRPZW1EZXAoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2VEaWFsb2ciKTsKICAgICAgY2xvc2VTbmFja2JhcigpOwogICAgfSwKICAgIGluaXREZWFsZXJMaXN0KCkgewogICAgICBnZXREZWFsZXJMaXN0KCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICBpZiAoIXJlcyB8fCB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8IHJlcy5jb2RlICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICBpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgPT0gInVuZGVmaW5lZCIgfHwgZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgYXJlYVNldCA9IG5ldyBTZXQoKTsKICAgICAgICAgIHZhciBkZWFsZXJUeXBlU2V0ID0gbmV3IFNldCgpOwogICAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0ID0gW107CiAgICAgICAgICBkYXRhLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGxldCBhcmVhID0gaXRlbS5hcmVhOwogICAgICAgICAgICBpZiAoYXJlYSAhPSBudWxsICYmIHR5cGVvZiBhcmVhICE9IHVuZGVmaW5lZCAmJiBhcmVhICE9ICIiKSB7CiAgICAgICAgICAgICAgYXJlYVNldC5hZGQoYXJlYSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHR5cGUgPSBpdGVtLmRlYWxlclR5cGU7CiAgICAgICAgICAgIGlmICh0eXBlICE9IG51bGwgJiYgdHlwZW9mIHR5cGUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gMCkgdHlwZSArPSAzOwogICAgICAgICAgICAgIGRlYWxlclR5cGVTZXQuYWRkKHR5cGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgICAgICBpZDogaW5kZXgsCiAgICAgICAgICAgICAgaXNDaGVjazogZmFsc2UsCiAgICAgICAgICAgICAgaXNWaXNpYmxlOiB0cnVlLAogICAgICAgICAgICAgIGRpc2FibGU6IGZhbHNlLAogICAgICAgICAgICAgIGNvbXBhbnlOYW1lOiBpdGVtLmNvbXBhbnlOYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlDb2RlOiBpdGVtLmNvbXBhbnlDb2RlLAogICAgICAgICAgICAgIGNvbXBhbnlUeXBlOiBpdGVtLmNvbXBhbnlUeXBlLAogICAgICAgICAgICAgIGRlYWxlclR5cGU6IGl0ZW0uZGVhbGVyVHlwZSwKICAgICAgICAgICAgICBhcmVhOiBpdGVtLmFyZWEsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5wdXNoKHRlbXApOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3RfdmlldyA9IGRlZXBDbG9uZSh0aGlzLmNoX2RlbGVhcl9zZWxlY3QpOwoKICAgICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwID0gW107CiAgICAgICAgICBBcnJheS5mcm9tKGFyZWFTZXQpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGxldCB0ZW1wID0gewogICAgICAgICAgICAgIGlkOiBpbmRleCwKICAgICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgICBsYWJsZTogaXRlbSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHAucHVzaCh0ZW1wKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHRoaXMuY2hfY29tX3N1cHAgPSBbXTsKCiAgICAgICAgICBBcnJheS5mcm9tKGRlYWxlclR5cGVTZXQpCiAgICAgICAgICAgIC5zb3J0KCkKICAgICAgICAgICAgLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgICAgICBpZDogaW5kZXgsCiAgICAgICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxhYmxlOiB0aGlzLmdldERlYWxlclR5cGVEZXNjKGl0ZW0pLAogICAgICAgICAgICAgICAgdHlwZTogaXRlbSAlIDMsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLnB1c2godGVtcCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCk7CiAgICB9LAoKICAgIGluaXREZWFsZXJEZXAoKSB7CiAgICAgIGdldERlYWxlckRlcExpc3QoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSA9PSAidW5kZWZpbmVkIiB8fCBkYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QgPSBbXTsKICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgICAgICBpZDoga2V5LAogICAgICAgICAgICAgIGlzQ2hlY2s6IHRydWUsCiAgICAgICAgICAgICAgdmFsdWU6IGRhdGFba2V5XSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGVwbGlzdC5wdXNoKHRlbXApOwogICAgICAgICAgfSk7CiAgICAgICAgICAvL1RPRE865Y+v6IO95L+u5pS56YOo6Zeo5YiX6KGo5Lik6KGM5pi+56S6CiAgICAgICAgICAvLyB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAvLyAgIGxldCB0ZW1wID0ge307CiAgICAgICAgICAvLyAgIGlmIChpbmRleCAlIDIgPT0gMCkgewogICAgICAgICAgLy8gICAgIHRlbXBbMF0gPSBpdGVtOwogICAgICAgICAgLy8gICB9IGVsc2UgewogICAgICAgICAgLy8gICAgIHRlbXBbMV0gPSBpdGVtOwogICAgICAgICAgLy8gICB9CiAgICAgICAgICAvLyAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3Rfdmlldy5wdXNoKHRlbXApOwogICAgICAgICAgLy8gfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKTsKICAgIH0sCiAgICBpbml0T2VtRGVwKCkgewogICAgICBnZXRPZW1EZXBMaXN0KCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAoIXJlcyB8fCB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8IHJlcy5jb2RlICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICBpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgPT0gInVuZGVmaW5lZCIgfHwgZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5jaF9vZW1fZGVwbGlzdCA9IFtdOwogICAgICAgICAgZGF0YS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgICAgICBpZDogaW5kZXgsCiAgICAgICAgICAgICAgaXNDaGVjazogZmFsc2UsCiAgICAgICAgICAgICAgY29tcGFueU5hbWU6IGl0ZW0uY29tcGFueU5hbWUsCiAgICAgICAgICAgICAgY29tcGFueUNvZGU6IGl0ZW0uY29tcGFueUNvZGUsCiAgICAgICAgICAgICAgY29tcGFueVR5cGU6IGl0ZW0uY29tcGFueVR5cGUsCiAgICAgICAgICAgICAgZGVhbGVyVHlwZTogaXRlbS5kZWFsZXJUeXBlLAogICAgICAgICAgICAgIGFyZWE6IGl0ZW0uYXJlYSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jaF9vZW1fZGVwbGlzdC5wdXNoKHRlbXApOwogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLmNoX29lbV9kZXBsaXN0KSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKTsKICAgIH0sCiAgICBnZXREZWFsZXJUeXBlRGVzYyh0eXBlKSB7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIHJldHVybiAiNHPlupciOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHJldHVybiAi5LqM57qn572R54K5IjsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXR1cm4gIueLrOeri+WUruWQjiI7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAi5pyq5YiG57G7IjsKICAgICAgfQogICAgfSwKCiAgICAvL+mAieaLqeWFqOmDqAogICAgc2VsZWN0QWxsRGVsZWFyKCkgewogICAgICB2YXIgaXNTZWxlY3RlZCA9IHRoaXMuY2hfZGVsZWFyOwogICAgICB0aGlzLmNoX2FyZWFfc3VwcC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaXRlbS5pc0NoZWNrID0gaXNTZWxlY3RlZDsKICAgICAgfSk7CgogICAgICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpdGVtLmlzQ2hlY2sgPSBpc1NlbGVjdGVkOwogICAgICB9KTsKCiAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaXRlbS5pc0NoZWNrID0gaXNTZWxlY3RlZDsKICAgICAgICBpdGVtLmlzVmlzaWJsZSA9IGlzU2VsZWN0ZWQ7CiAgICAgIH0pOwogICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3RfdmlldyA9IGRlZXBDbG9uZSh0aGlzLmNoX2RlbGVhcl9zZWxlY3QpOwogICAgICBpZiAoaXNTZWxlY3RlZCkgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgaXRlbS5pc0NoZWNrID0gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0ID0gZGVlcENsb25lKHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QpOwogICAgICAgIC8vVE9ETzrlj6/og73kv67mlLnpg6jpl6jliJfooajkuKTooYzmmL7npLoKICAgICAgICAvLyB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0X3ZpZXcgPSBbXTsKICAgICAgICAvLyB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgLy8gICBsZXQgdGVtcCA9IHt9OwogICAgICAgIC8vICAgaWYgKGluZGV4ICUgMiA9PSAwKSB7CiAgICAgICAgLy8gICAgIHRlbXBbMF0gPSBpdGVtOwogICAgICAgIC8vICAgfSBlbHNlIHsKICAgICAgICAvLyAgICAgdGVtcFsxXSA9IGl0ZW07CiAgICAgICAgLy8gICB9CiAgICAgICAgLy8gICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0X3ZpZXcucHVzaCh0ZW1wKTsKICAgICAgICAvLyB9KTsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0X3Nob3cgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0QWxsT2VtKCkgewogICAgICB2YXIgaXNTZWxlY3RlZCA9IHRoaXMuY2hfb2VtOwogICAgICB0aGlzLmNoX29lbV9kZXBsaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpdGVtLmlzQ2hlY2sgPSBpc1NlbGVjdGVkOwogICAgICB9KTsKICAgIH0sCgogICAgb25BcmVhU2VsZWN0Q2hhbmdlKGl0ZW0pIHsKICAgICAgaWYgKCFpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXQpID0+IHsKICAgICAgICAgIGlmIChpdC5hcmVhID09IGl0ZW0ubGFibGUpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IGZhbHNlOwogICAgICAgICAgICBpdC5pc1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAodGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZpbmRJbmRleCgoaXQpID0+IGl0LmlzQ2hlY2sgPT0gdHJ1ZSkgPj0gMCkgewogICAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGVwbGlzdF9zaG93ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGVwbGlzdF9zaG93ID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGxldCBzZWxlY1R5cGUgPSBbXTsKICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpZiAoaXQuaXNDaGVjaykgewogICAgICAgICAgICBzZWxlY1R5cGUucHVzaChpdC50eXBlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoc2VsZWNUeXBlLmxlbmd0aCA9PSAwKSByZXR1cm47CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICB2YXIgdHlwZVNlbGVjdGVkID0gc2VsZWNUeXBlLmluZGV4T2YoaXQuZGVhbGVyVHlwZSkgPj0gMDsKICAgICAgICAgIGlmICh0eXBlU2VsZWN0ZWQgJiYgaXQuYXJlYSA9PSBpdGVtLmxhYmxlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgICBpdC5pc1Zpc2libGUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3Rfc2hvdyA9IHRydWU7CiAgICAgIH0KICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0X3ZpZXcgPSB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZmlsdGVyKAogICAgICAgIChpdCkgPT4gaXQuaXNWaXNpYmxlID09IHRydWUKICAgICAgKTsKICAgICAgY29uc29sZS5kZWJ1ZyhKU09OLnN0cmluZ2lmeSh0aGlzLmNoX2RlbGVhcl9zZWxlY3QpKTsKICAgIH0sCiAgICBvblR5cGVTZWxlY3RDaGFuZ2UoaXRlbSkgewogICAgICBpZiAoIWl0ZW0uaXNDaGVjaykgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaWYgKGl0LmRlYWxlclR5cGUgPT0gaXRlbS50eXBlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSBmYWxzZTsKICAgICAgICAgICAgaXQuaXNWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGl0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmICh0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZmluZEluZGV4KChpdCkgPT4gaXQuaXNDaGVjaykgPj0gMCkgewogICAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGVwbGlzdF9zaG93ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGVwbGlzdF9zaG93ID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGxldCBzZWxlY3RBcmVhID0gW107CiAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHAuZm9yRWFjaCgoaXQpID0+IHsKICAgICAgICAgIGlmIChpdC5pc0NoZWNrKSB7CiAgICAgICAgICAgIHNlbGVjdEFyZWEucHVzaChpdC5sYWJsZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmIChzZWxlY3RBcmVhLmxlbmd0aCA9PSAwKSByZXR1cm47CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICB2YXIgYXJlYVNlbGVjdGVkID0gc2VsZWN0QXJlYS5pbmRleE9mKGl0LmFyZWEpID49IDA7CiAgICAgICAgICBpZiAoYXJlYVNlbGVjdGVkICYmIGl0LmRlYWxlclR5cGUgPT0gaXRlbS50eXBlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgICBpdC5pc1Zpc2libGUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3Rfc2hvdyA9IHRydWU7CiAgICAgIH0KICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0X3ZpZXcgPSB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZmlsdGVyKAogICAgICAgIChpdCkgPT4gaXQuaXNWaXNpYmxlID09IHRydWUKICAgICAgKTsKICAgICAgY29uc29sZS5kZWJ1ZyhKU09OLnN0cmluZ2lmeSh0aGlzLmNoX2RlbGVhcl9zZWxlY3QpKTsKICAgIH0sCiAgICBvbkRlYWxlclNlbGVjdENoYW5nZShpdGVtKSB7CiAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdFtpdGVtLmlkXSA9IGRlZXBDbG9uZShpdGVtKTsKICAgICAgY29uc29sZS5kZWJ1ZyhKU09OLnN0cmluZ2lmeSh0aGlzLmNoX2RlbGVhcl9zZWxlY3QpKTsKICAgIH0sCgogICAgcHVibGlzaDogVGhyb3R0bGUoCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnB1Ymxpc2hJbXAoKTsKICAgICAgfSwKICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHNob3dTbmFja2Jhcigi5oKo5o+Q5Lqk55qE5aSq6aKR57mB5LqG77yM56iN562J5LiA5Lya6K+V6K+V5ZCnIik7CiAgICAgIH0KICAgICksCgogICAgcHVibGlzaEltcCgpIHsKICAgICAgaWYgKCEvXltBLVphLXowLTldKiQvLnRlc3QodGhpcy5tc2dOdW1iZXIpKSB7CiAgICAgICAgc2hvd1NuYWNrYmFyKCLmlofnq6DnvJblj7for7fovpPlhaUyMOS9jeaVsOWtl+S4juWtl+avjee7hOWQiO+8iOmAieWhq++8iSIpCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxldCBkZWFsZXJzID0gW107CiAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKGl0ZW0uaXNDaGVjaykgewogICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgIGNvbXBhbnlOYW1lOiBpdGVtLmNvbXBhbnlOYW1lLAogICAgICAgICAgICBjb21wYW55Q29kZTogaXRlbS5jb21wYW55Q29kZSwKICAgICAgICAgICAgY29tcGFueVR5cGU6IGl0ZW0uY29tcGFueVR5cGUsCiAgICAgICAgICAgIGRlYWxlclR5cGU6IGl0ZW0uZGVhbGVyVHlwZSwKICAgICAgICAgICAgYXJlYTogaXRlbS5hcmVhLAogICAgICAgICAgfTsKICAgICAgICAgIGRlYWxlcnMucHVzaCh0ZW1wKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgbGV0IGRlcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogICAgICBpZiAoZGVhbGVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGVwbGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICBpZiAoaXRlbS5pc0NoZWNrKSB7CiAgICAgICAgICAgIGRlcFtpdGVtLmlkXSA9IGl0ZW0udmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2hfb2VtX2RlcGxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGlmIChpdGVtLmlzQ2hlY2spIHsKICAgICAgICAgIGxldCB0ZW1wID0gewogICAgICAgICAgICBjb21wYW55TmFtZTogaXRlbS5jb21wYW55TmFtZSwKICAgICAgICAgICAgY29tcGFueUNvZGU6IGl0ZW0uY29tcGFueUNvZGUsCiAgICAgICAgICAgIGNvbXBhbnlUeXBlOiBpdGVtLmNvbXBhbnlUeXBlLAogICAgICAgICAgICBkZWFsZXJUeXBlOiBpdGVtLmRlYWxlclR5cGUsCiAgICAgICAgICAgIGFyZWE6IGl0ZW0uYXJlYSwKICAgICAgICAgIH07CiAgICAgICAgICBkZWFsZXJzLnB1c2godGVtcCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGRlYWxlcnMubGVuZ3RoID09IDApIHsKICAgICAgICBzaG93U25hY2tiYXIoIuacqumAieaLqeWPkeW4g+WvueixoSzor7fpgInmi6nlj5HluIPlr7nosaHlkI7ph43or5UiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IHJlbGVhc2VUaW1lID0KICAgICAgICB0aGlzLnJlbGVhc2VUaW1lID09ICIiCiAgICAgICAgICA/IG5ldyBEYXRlKCkuZm9ybWF0KCJ5eXl5LU1NLWRkIGhoOm1tOnNzIikKICAgICAgICAgIDogdGhpcy5yZWxlYXNlVGltZTsKCiAgICAgIGxldCBpbnZhbGlkVGltZSA9IHRoaXMuaW52YWxpZFRpbWUgPT0gIiIgPyBudWxsIDogdGhpcy5pbnZhbGlkVGltZTsKCiAgICAgIGxldCBkYXRhID0gewogICAgICAgIGlkOiB0aGlzLmlkLAogICAgICAgIG1zZ051bWJlcjogdGhpcy5tc2dOdW1iZXIsCiAgICAgICAgZGVhbGVyT2JqTGlzdDogZGVhbGVycywKICAgICAgICBwb3NpdGlvbnM6IGRlcCwKICAgICAgICByZWxlYXNlVGltZTogcmVsZWFzZVRpbWUsCiAgICAgICAgaW52YWxpZFRpbWU6IGludmFsaWRUaW1lLAogICAgICAgIGVmZmVjdGl2ZVRpbWU6IHRoaXMuZWZmZWN0aXZlVGltZSwKICAgICAgICBmZWVkYmFja1R5cGU6IHRoaXMuZmVlZGJhY2tUeXBlLAogICAgICAgIG1zZ1N0YXR1czogMSwKICAgICAgfTsKICAgICAgdGhpcy51cGxvYWRpbmcgPSB0cnVlOwogICAgICBwdWJsaXNoTWVzc2FnZShkYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUuZGVidWcoInB1Ymxpc2ggbWVzc2FnZToiICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJUaW1lCiAgICAgICAgICAgICAgLmFsZXJ0KCLmlofnq6Dmj5DkuqTmiJDlip/vvIzlsIbkuLrmgqjot7Povazmlofnq6DpppbpobXjgIIiLCAxMCkKICAgICAgICAgICAgICAudGhlbigoKSA9PiBFdmVudEJ1cy4kZW1pdCgicHVibGlzaFN1Y2Vzc2Z1bCIpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNob3dTbmFja2Jhcigi5Y+R5biD5aSx6LSlLOivt+eojeWQjumHjeivlSIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHNob3dTbmFja2Jhcigi5Y+R5biD5aSx6LSlLOivt+eojeWQjumHjeivlSIpOwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy51cGxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjYWN1bGF0ZURpcmVjdEZpbGVEZWxlYXIoKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoImRlYWxlciA9PT09PT09PT09PiIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmRlYWxlcikpOwogICAgICBpZiAodGhpcy5jaF9kZWxlYXJfc2VsZWN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmRlYWxlci5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2Rpc2FibGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmNoX2FyZWFfc3VwcC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaXQuZGlzYWJsZSA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwID0gZGVlcENsb25lKHRoaXMuY2hfYXJlYV9zdXBwKTsKCiAgICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaXQuZGlzYWJsZSA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hfY29tX3N1cHAgPSBkZWVwQ2xvbmUodGhpcy5jaF9jb21fc3VwcCk7CgogICAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaXQuZGlzYWJsZSA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2Rpc2FibGUgPSB0cnVlOwogICAgICAgIHRoaXMuY2hfZGVsZWFyID0gdHJ1ZTsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0X3Nob3cgPSB0cnVlOwogICAgICAgIHRoaXMuZGVhbGVyLmZvckVhY2goKGNvZGUpID0+IHsKICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5maW5kSW5kZXgoCiAgICAgICAgICAgIChkZWFsZXIpID0+IGRlYWxlci5jb21wYW55Q29kZSA9PT0gY29kZQogICAgICAgICAgKTsKICAgICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKICAgICAgICAgIHZhciBjb20gPSB0aGlzLmNoX2RlbGVhcl9zZWxlY3RbaW5kZXhdOwogICAgICAgICAgY29tLmRpc2FibGUgPSB0cnVlOwogICAgICAgICAgY29tLmlzQ2hlY2sgPSB0cnVlOwoKICAgICAgICAgIHZhciBhcmVhSW5kZXggPSB0aGlzLmNoX2FyZWFfc3VwcC5maW5kSW5kZXgoCiAgICAgICAgICAgIChpdCkgPT4gY29tLmFyZWEgPT0gaXQubGFibGUKICAgICAgICAgICk7CiAgICAgICAgICBpZiAoYXJlYUluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHBbYXJlYUluZGV4XS5kaXNhYmxlID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwW2FyZWFJbmRleF0uaXNDaGVjayA9IHRydWU7CiAgICAgICAgICB2YXIgdHlwZUluZGV4ID0gdGhpcy5jaF9jb21fc3VwcC5maW5kSW5kZXgoCiAgICAgICAgICAgIChpdCkgPT4gY29tLmRlYWxlclR5cGUgPT0gaXQudHlwZQogICAgICAgICAgKTsKICAgICAgICAgIGlmICh0eXBlSW5kZXggPCAwKSByZXR1cm47CiAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwW3R5cGVJbmRleF0uZGlzYWJsZSA9IHRydWU7CiAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwW3R5cGVJbmRleF0uaXNDaGVjayA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0X3ZpZXcgPSB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZmlsdGVyKAogICAgICAgIChpdCkgPT4gaXQuaXNWaXNpYmxlID09IHRydWUKICAgICAgKTsKICAgICAgY29uc29sZS5kZWJ1ZyhKU09OLnN0cmluZ2lmeSh0aGlzLmNoX2RlbGVhcl9zZWxlY3RfdmlldykpOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBvcGVuKCkgewogICAgICB0aGlzLmRpYWxvZyA9IHRoaXMub3BlbjsKICAgICAgaWYgKHRoaXMub3BlbikgewogICAgICAgIHRoaXMuY2FjdWxhdGVEaXJlY3RGaWxlRGVsZWFyKCk7CiAgICAgIH0KICAgIH0sCiAgICB2b3RlRW5hYmxlKCkgewogICAgICBpZiAodGhpcy52b3RlRW5hYmxlKSB7CiAgICAgICAgdGhpcy5mZWVkYmFja1R5cGUgPSAzOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmVlZGJhY2tUeXBlID0gNDsKICAgICAgfQogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBlZmZlY3RpdmVUaW1lTWF4KCkgewogICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5pbnZhbGlkVGltZSk7CiAgICB9LAogICAgaW52YWxpZFRpbWVNaW4oKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKHRoaXMuZWZmZWN0aXZlVGltZSkpOwogICAgfSwKICB9LAp9Owo="},null]}