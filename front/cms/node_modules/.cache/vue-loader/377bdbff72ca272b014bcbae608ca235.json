{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/index.vue","mtime":1641464435140},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgc2F2ZU1lc3NhZ2UsCiAgZ2V0QXJ0aWNsZURldGFpbCwKICBzYXZlVm90ZSwKICB1cGxvYWRGaWxlLAogIGRlYWxlckNvZGVWYWxpZCwKfSBmcm9tICJAL2FwaS9nZXREYXRhLmpzIjsKaW1wb3J0IHsgYWVzRW5jcnlwdCwgYWVzRGVjcnlwdCB9IGZyb20gIkAvdXRpbHMvZW5jcnlwdGlvbi5qcyI7CmltcG9ydCB7IGhpZ2hMaWdodEFsbFRleHQgfSBmcm9tICJAL3V0aWxzL2FydGljbGVVdGlscy5qcyI7CmltcG9ydCB7IERlYm91bmNlLCBUaHJvdHRsZSwgZGVlcENsb25lIH0gZnJvbSAiQC91dGlscy90b29scy5qcyI7CmltcG9ydCB7IHNob3dTbmFja2JhciwgY2xvc2VTbmFja2JhciB9IGZyb20gIkAvdXRpbHMvc25hY2tiYXIuanMiOwppbXBvcnQgeyBpc051bGwgfSBmcm9tICJAL3V0aWxzL3N0cmluZ1V0aWxzLmpzIjsKaW1wb3J0IHsgb2Zmc2V0TW9udGhUaW1lIH0gZnJvbSAiQC91dGlscy90aW1lRm9ybWF0ZS5qcyI7CmltcG9ydCB7CiAgY2hlY2tVcGxvYWRGaWxlVHlwZSwKICByZWFkRmlsZVNpemVVbml0LAogIGdldERpc3RyaWJ1dG9yTnVtYmVyQnlGaWxlTmFtZSwKfSBmcm9tICJAL3V0aWxzL2ZpbGVzVXRpbHMuanMiOwpjb25zdCB2b3RlRGVmYXVsdCA9IHsKICBpZDogbnVsbCwKICBlbmFibGU6IGZhbHNlLAogIHRvcGljOiAiIiwKICB2b3RlVHlwZTogZmFsc2UsCiAgdm90ZU9wdGlvbnM6IFt7fSwge31dLAogIGVuZFRpbWU6IG9mZnNldE1vbnRoVGltZSgxKS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW06c3MiKSwKfTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogbnVsbCwKICAgICAgdGl0bGU6ICIiLAogICAgICBjb250ZW50OiAiIiwKICAgICAgdGl0bGVFcnJvck1lc3NhZ2U6ICIiLAogICAgICBpbnB1dEZpbGVBY2NlcHQ6CiAgICAgICAgLy/ljovnvKkKICAgICAgICAiYXBwbGljYXRpb24veC1yYXItY29tcHJlc3NlZCwiICsKICAgICAgICAiYXBwbGljYXRpb24vemlwLCIgKwogICAgICAgICJhcHBsaWNhdGlvbi94LTd6LWNvbXByZXNzZWQsIisKICAgICAgICAvL+WmguaenDd6IOWOi+e8qeWMheivhuWIq+S4jeWHuuadpe+8jOWQjue8gOWQjeWPr+iDveaYrwogICAgICAgICIuMDAxLC4wMDIsLjAwMywuMDA0LC4wMDUsLjAwNiwuMDA3LC4wMDgsLjAwOSwuMDEwLCIrCiAgICAgICAgIi4wMSwuMDIsLjAzLC4wNCwuMDUsLjA2LC4wNywuMDgsLjA5LC4xMCwiKwogICAgICAgICIuMSwuMiwuMywuNCwuNSwuNiwuNywuOCwuOSwiKwogICAgICAgIC8vcGRmCiAgICAgICAgImFwcGxpY2F0aW9uL3BkZiwiICsKICAgICAgICAvL3R4dAogICAgICAgICJ0ZXh0L3BsYWluLCIgKwogICAgICAgIC8vanBnCiAgICAgICAgImltYWdlL2pwZWcsIiArCiAgICAgICAgLy9wbmcKICAgICAgICAiaW1hZ2UvcG5nLCIgKwogICAgICAgIC8vbXA0CiAgICAgICAgInZpZGVvL21wNCwiICsKICAgICAgICAvL3dtdgogICAgICAgICJ2aWRlby94LW1zLXdtdiwiKwogICAgICAgIC8veHBzCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5tcy14cHNkb2N1bWVudCwiKwogICAgICAgIC8vd29yZAogICAgICAgIC8vICIuZG9jLC5kb2N4IisKICAgICAgICAiYXBwbGljYXRpb24vbXN3b3JkLCIgKwogICAgICAgICJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCwiICsKICAgICAgICAiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwudGVtcGxhdGUsIiArCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5tcy13b3JkLmRvY3VtZW50Lm1hY3JvRW5hYmxlZC4xMiwiICsKICAgICAgICAiYXBwbGljYXRpb24vdm5kLm1zLXdvcmQudGVtcGxhdGUubWFjcm9FbmFibGVkLjEyLCIgKwogICAgICAgIC8vZXhjZWwKICAgICAgICAiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLCIgKwogICAgICAgICJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCwiICsKICAgICAgICAiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwudGVtcGxhdGUsIiArCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zaGVldC5tYWNyb0VuYWJsZWQuMTIsIiArCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC50ZW1wbGF0ZS5tYWNyb0VuYWJsZWQuMTIsIiArCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5hZGRpbi5tYWNyb0VuYWJsZWQuMTIsIiArCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zaGVldC5iaW5hcnkubWFjcm9FbmFibGVkLjEyLCIgKwogICAgICAgICJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuc2hlZXQubWFjcm9lbmFibGVkLjEyLCIrCiAgICAgICAgLy9wcHQKICAgICAgICAiYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnQsIiArCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb24sIiArCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC50ZW1wbGF0ZSwiICsKICAgICAgICAiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnByZXNlbnRhdGlvbm1sLnNsaWRlc2hvdywiICsKICAgICAgICAiYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnQuYWRkaW4ubWFjcm9FbmFibGVkLjEyLCIgKwogICAgICAgICJhcHBsaWNhdGlvbi92bmQubXMtcG93ZXJwb2ludC5wcmVzZW50YXRpb24ubWFjcm9FbmFibGVkLjEyLCIgKwogICAgICAgICJhcHBsaWNhdGlvbi92bmQubXMtcG93ZXJwb2ludC50ZW1wbGF0ZS5tYWNyb0VuYWJsZWQuMTIsIiArCiAgICAgICAgImFwcGxpY2F0aW9uL3ZuZC5tcy1wb3dlcnBvaW50LnNsaWRlc2hvdy5tYWNyb0VuYWJsZWQuMTIiLAogICAgICAgIAogICAgICBtYXhUaW1lOiBvZmZzZXRNb250aFRpbWUoMSksCiAgICAgIHZvdGU6IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCksCiAgICAgIHZvdGVUZW1wOiBkZWVwQ2xvbmUodm90ZURlZmF1bHQpLAogICAgICB2b3RlRGlhbG9nOiBmYWxzZSwKICAgICAgdXBsb2FkRmlsZU5vcm1hbDogW10sCiAgICAgIHVwbG9hZEZpbGVEaXJlY3Q6IFtdLAogICAgICBkZWxlYXJMaXN0OiBbXSwKICAgICAgcHJldmlldzogZmFsc2UsCiAgICAgIHB1Ymxpc2g6IGZhbHNlLAogICAgICBuZWVkU2F2ZTogZmFsc2UsCiAgICAgIGF1dG9TYXZpbmc6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGFwcEVkaXRvcjogKCkgPT4gaW1wb3J0KCIuL2VkaXRvci52dWUiKSwKICAgIHRpdGxlRWRpdG9yOiAoKSA9PiBpbXBvcnQoIi4vdGl0bGUudnVlIiksCiAgICB2b3RlOiAoKSA9PiBpbXBvcnQoIi4vdm90ZSIpLAogICAgdm90ZU9wdGlvbjogKCkgPT4gaW1wb3J0KCIuL3ZvdGVPcHRpb24udnVlIiksCiAgICBmaWxlSXRlbTogKCkgPT4gaW1wb3J0KCIuL2ZpbGVPcHRpb24udnVlIiksCiAgICB0aW1lUGlja2VyOiAoKSA9PiBpbXBvcnQoIi4vdGltZVBpY2tlci52dWUiKSwKICAgIHByZXZpZXc6ICgpID0+IGltcG9ydCgiLi9wcmV2aWV3LnZ1ZSIpLAogICAgcHVibGlzaDogKCkgPT4gaW1wb3J0KCIuL3B1Ymxpc2gudnVlIiksCiAgICBjb25maXJtOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2NvbmZvcm0udnVlIiksCiAgfSwKICAvLyDot6/nlLHmm7TmlrDlpITnkIYKICBiZWZvcmVSb3V0ZVVwZGF0ZSh0bywgZnJvbSwgbmV4dCkgewogICAgaWYgKHRoaXMubmVlZFNhdmUpIHsKICAgICAgdGhpcy4kcmVmcy5jb25maXJtCiAgICAgICAgLmNvbmZpcm0oCiAgICAgICAgICAi5oKo5b2T5YmN5pyJ5L+u5pS555qE5L+h5oGv5pyq5L+d5a2Y77yM56a75byA5b2T5YmN6aG16Z2i5oKo6L6T5YWl55qE5L+h5oGv5bCG5LiN5Lya6KKr5L+d5a2Y44CCIgogICAgICAgICkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBuZXh0KHRydWUpOwogICAgICAgICAgdGhpcy5yZUVkaXRJZk5lZWQodG8ucXVlcnkuaWQpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IG5leHQoZmFsc2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQodHJ1ZSk7CgogICAgICBpZiAodGhpcy5yZUVkaXRJZk5lZWQodG8ucXVlcnkuaWQpKSByZXR1cm47CiAgICAgIHRoaXMuc2F2ZUFzTmV3TWVzc2FnZSh0by5wYXJhbXMpOwogICAgfQogIH0sCgogIC8v6Lev55Sx56a75byA5aSE55CGCiAgYmVmb3JlUm91dGVMZWF2ZSh0bywgZnJvbSwgbmV4dCkgewogICAgdGhpcy5jbG9zZVNuYWNrKCk7CiAgICBpZiAodGhpcy5uZWVkU2F2ZSkgewogICAgICB0aGlzLiRyZWZzLmNvbmZpcm0KICAgICAgICAuY29uZmlybSgKICAgICAgICAgICLmgqjlvZPliY3mnInkv67mlLnnmoTkv6Hmga/mnKrkv53lrZjvvIznprvlvIDlvZPliY3pobXpnaLmgqjovpPlhaXnmoTkv6Hmga/lsIbkuI3kvJrooqvkv53lrZjjgIIiCiAgICAgICAgKQogICAgICAgIC50aGVuKCgpID0+IG5leHQodHJ1ZSkpCiAgICAgICAgLmNhdGNoKCgpID0+IG5leHQoZmFsc2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQodHJ1ZSk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKCF0aGlzLnJlRWRpdElmTmVlZCh0aGlzLiRyb3V0ZS5xdWVyeS5pZCkpIHsKICAgICAgdGhpcy5zYXZlQXNOZXdNZXNzYWdlKHRoaXMuJHJvdXRlLnBhcmFtcyk7CiAgICB9CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIiwgdGhpcy5iZWZvcmV1bmxvYWRIYW5kbGVyKTsKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJiZWZvcmV1bmxvYWQiLCB0aGlzLmJlZm9yZXVubG9hZEhhbmRsZXIpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGJlZm9yZXVubG9hZEhhbmRsZXIoZSkgewogICAgICBpZiAoZSkgewogICAgICAgIGUucmV0dXJuVmFsdWUgPSAi5YWz6Zet5o+Q56S6IjsKICAgICAgfQogICAgICByZXR1cm4gIuWFs+mXreaPkOekuiI7CiAgICB9LAogICAgcmVzZXRVcGxvYWRlck4oKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkRmlsZU4udmFsdWUgPSAiIjsKICAgIH0sCgogICAgcmVzZXRVcGxvYWRlckQoKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkRmlsZUQudmFsdWUgPSAiIjsKICAgIH0sCiAgICAvL+WPpuWtmOS4uuWIm+W7uuaWsOa2iOaBrwogICAgc2F2ZUFzTmV3TWVzc2FnZShwYXJhbXMpIHsKICAgICAgY29uc29sZS5kZWJ1ZygicHVibGljPT09PT09PiIgKyBwYXJhbXMpOwogICAgICBpZiAocGFyYW1zID09IG51bGwgfHwgdHlwZW9mIHBhcmFtcyA9PSAidW5kZWZpbmVkIikgcmV0dXJuOwogICAgICBsZXQgaWQgPSBwYXJhbXMuaWQ7CiAgICAgIGlmICghaWQgfHwgdHlwZW9mIGlkID09ICJ1bmRlZmluZWQiIHx8IGlzTmFOKGlkKSkgcmV0dXJuOwoKICAgICAgdGhpcy5pZCA9IG51bGw7CiAgICAgIHRoaXMucmVzdG9yZU1lc3NhZ2UoaWQsIHRydWUpOwogICAgfSwKICAgIC8v6I2J56i/6YeN5paw57yW6L6RCiAgICByZUVkaXRJZk5lZWQoaWQpIHsKICAgICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgPT0gInVuZGVmaW5lZCIpIHJldHVybiBmYWxzZTsKCiAgICAgIGlkID0gTnVtYmVyKGFlc0RlY3J5cHQoaWQpKTsKICAgICAgaWYgKGlkID09IG51bGwgfHwgaXNOYU4oaWQpIHx8IHRoaXMuaWQgPT0gaWQpIHJldHVybiBmYWxzZTsKICAgICAgdGhpcy5pZCA9IGlkOwogICAgICB0aGlzLnJlc3RvcmVNZXNzYWdlKGlkKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLy/ph43orr7mtojmga/lhoXlrrkKICAgIHJlc3RvcmVNZXNzYWdlKGlkLCBpc05ldyA9IGZhbHNlKSB7CiAgICAgIHRoaXMuY2xlYXJDb250ZW50KCk7CiAgICAgIC8v6K+35rGC5ZCO5Y+w6I635Y+W5raI5oGv5YaF5a65CiAgICAgIGdldEFydGljbGVEZXRhaWwoaWQpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcyA9PSBudWxsIHx8IHR5cGVvZiByZXMgPT0gdW5kZWZpbmVkKSByZXR1cm47CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy50aXRsZSA9IGRhdGEudGl0bGU7CiAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBkYXRhLmNvbnRlbnQ7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGRhdGEudm90ZUluZm9EVE8gIT0gbnVsbCAmJgogICAgICAgICAgICB0eXBlb2YgZGF0YS52b3RlSW5mb0RUTyAhPSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgZGF0YS52b3RlSW5mb0RUTy5vcHRpb25zLmxlbmd0aCA+PSAyCiAgICAgICAgICApIHsKICAgICAgICAgICAgbGV0IHZvdGUgPSB7CiAgICAgICAgICAgICAgaWQ6IGlzTmV3ID8gbnVsbCA6IGRhdGEudm90ZUluZm9EVE8udm90ZUlkLAogICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICB0b3BpYzogZGF0YS52b3RlSW5mb0RUTy50b3BpYywKICAgICAgICAgICAgICB2b3RlT3B0aW9uczogZGF0YS52b3RlSW5mb0RUTy5vcHRpb25zLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGl0ZW0ub3B0aW9uTmFtZSB9OwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHZvdGVUeXBlOiBmYWxzZSwKICAgICAgICAgICAgICBlbmRUaW1lOiBvZmZzZXRNb250aFRpbWUoMSkuZm9ybWF0KCJ5eXl5LU1NLWRkIGhoOm1tOnNzIiksCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMudm90ZVRlbXAgPSBkZWVwQ2xvbmUodm90ZSk7CgogICAgICAgICAgICBpZiAoaXNOZXcpIHsKICAgICAgICAgICAgICB0aGlzLnZvdGVTYXZlKHRydWUpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnZvdGUgPSBkZWVwQ2xvbmUodm90ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICFkYXRhLmF0dGFjaG1lbnRzIHx8CiAgICAgICAgICAgIHR5cGVvZiBkYXRhLmF0dGFjaG1lbnRzID09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgICAgIGRhdGEuYXR0YWNobWVudHMubGVuZ3RoID4gMAogICAgICAgICAgKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoImF0dGFjaG1lbnRzOiIgKyBKU09OLnN0cmluZ2lmeShkYXRhLmF0dGFjaG1lbnRzKSk7CiAgICAgICAgICAgIGRhdGEuYXR0YWNobWVudHMuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9IGl0ZW0uYXR0YWNobWVudE5hbWU7CiAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgICAgICByZXM6IHRydWUsCiAgICAgICAgICAgICAgICB0ZXh0OiBmaWxlTmFtZSwKICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBjaGVja1VwbG9hZEZpbGVUeXBlKGZpbGVOYW1lKSwKICAgICAgICAgICAgICAgIHBhdGg6IGl0ZW0udXJsLAogICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDEwMCwKICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBpdGVtLm9yaWVudGF0aW9uLAogICAgICAgICAgICAgICAgdXBsb2FkU2l6ZTogaXRlbS5hdHRhY2htZW50U2l6ZSwKICAgICAgICAgICAgICAgIGZpbGVTaXplOiByZWFkRmlsZVNpemVVbml0KGl0ZW0uYXR0YWNobWVudFNpemUpLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgaWYgKGl0ZW0ub3JpZW50YXRpb24gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsLnB1c2godGVtcCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdC5wdXNoKHRlbXApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKTsKICAgIH0sCiAgICAvL+a4heepuua2iOaBr+WGheWuuQogICAgY2xlYXJDb250ZW50KCkgewogICAgICB0aGlzLnRpdGxlID0gIiI7CiAgICAgIHRoaXMuY29udGVudCA9ICIiOwogICAgICB0aGlzLnZvdGUgPSBkZWVwQ2xvbmUodm90ZURlZmF1bHQpOwogICAgICB0aGlzLnZvdGVUZW1wID0gZGVlcENsb25lKHZvdGVEZWZhdWx0KTsKICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsID0gW107CiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IFtdOwogICAgfSwKICAgIC8vICotLS0tLS0tLS0tLS0tLS0tLS0t5oqV56Wo5pON5L2cLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KICAgIC8v5Y+W5raI5L+d5a2YCiAgICBjYW5jbGVWb3RlRWRpdCgpIHsKICAgICAgdGhpcy52b3RlRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMudm90ZVRlbXAgPSBkZWVwQ2xvbmUodGhpcy52b3RlKTsKICAgIH0sCgogICAgLy/noa7orqTkv53lrZjmipXnpagKICAgIHZvdGVTYXZlOiBUaHJvdHRsZSgKICAgICAgZnVuY3Rpb24gKGlzU2F2ZUFTID0gZmFsc2UpIHsKICAgICAgICBpZiAoIWlzU2F2ZUFTICYmICF0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgcmV0dXJuOwoKICAgICAgICBsZXQgdGVtcCA9IHRoaXMudm90ZVRlbXA7CiAgICAgICAgdGVtcC5lbmFibGUgPSB0cnVlOwogICAgICAgIHRlbXAudm90ZU9wdGlvbnMgPSB0ZW1wLnZvdGVPcHRpb25zLmZpbHRlcigKICAgICAgICAgICh0KSA9PiB0LnZhbHVlICE9IG51bGwgJiYgdC52YWx1ZSAhPSAiIgogICAgICAgICk7CgogICAgICAgIGxldCB1cGxvYWQgPSB7fTsKICAgICAgICB1cGxvYWQuaWQgPSB0ZW1wLmlkOwogICAgICAgIHVwbG9hZC50b3BpYyA9IHRlbXAudG9waWM7CiAgICAgICAgdXBsb2FkLnZvdGVUeXBlID0gdGVtcC52b3RlVHlwZSA/IDEgOiAwOwogICAgICAgIHVwbG9hZC52b3RlT3B0aW9ucyA9IHRlbXAudm90ZU9wdGlvbnMubWFwKChpdGVtKSA9PiBpdGVtLnZhbHVlKTsKICAgICAgICB1cGxvYWQuZW5kVGltZSA9IHRlbXAuZW5kVGltZTsKCiAgICAgICAgc2F2ZVZvdGUodXBsb2FkKQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJzYXZlIHZvdGUgPT0+IiArIEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMCkgewogICAgICAgICAgICAgIHRoaXMudm90ZURpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoInNhdmUgaWQiICsgcmVzLmRhdGEudm90ZUlkKTsKICAgICAgICAgICAgICB0ZW1wLmlkID0gcmVzLmRhdGEudm90ZUlkOwogICAgICAgICAgICAgIHRoaXMudm90ZSA9IGRlZXBDbG9uZSh0ZW1wKTsKICAgICAgICAgICAgICB0aGlzLnZvdGVUZW1wID0gZGVlcENsb25lKHRlbXApOwogICAgICAgICAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgaWYgKGlzU2F2ZUFTKSB7CiAgICAgICAgICAgICAgdGhpcy5vblZvdGVEZWxldGUoKTsKICAgICAgICAgICAgICB0aGlzLnNob3dTbmFjaygi5oqV56Wo5Y+m5a2Y5Li65aSx6LSlIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5zaG93U25hY2soIua3u+WKoOaKleelqOWksei0pSIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmgqjmj5DkuqTnmoTlpKrpopHnuYHkuobvvIznqI3nrYnkuIDkvJror5Xor5XlkKciKTsKICAgICAgfSwKICAgICAgMzAwMAogICAgKSwKICAgIC8v5re75Yqg5oqV56Wo6YCJ6aG5CiAgICBhZGRJdGVtKCkgewogICAgICB0aGlzLnZvdGVUZW1wLnZvdGVPcHRpb25zLnB1c2goeyB2YWx1ZTogbnVsbCB9KTsKICAgIH0sCiAgICAvL+WIoOmZpOaKleelqOmAiemhuQogICAgZGVsZXRlSXRlbTogZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgIC8vICBub3QgYWxsb3cgdG8gZGVsZXRlIHRoZSBmaXJzdAogICAgICBpZiAoaW5kZXggPiAxKSB7CiAgICAgICAgdGhpcy52b3RlVGVtcC52b3RlT3B0aW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICB9LAogICAgLy/liKDpmaTmipXnpagKICAgIG9uVm90ZURlbGV0ZSgpIHsKICAgICAgdGhpcy52b3RlVGVtcCA9IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCk7CiAgICAgIHRoaXMudm90ZSA9IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCk7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS3pmYTku7bkuIrkvKDmk43kvZwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogICAgdXBsb2FkRmlsZU4oKSB7CiAgICAgIC8vdGhpcy4kcmVmcy51cGxvYWRGaWxlTi5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCJjbGljayIpKTsKICAgICAgdGhpcy4kcmVmcy51cGxvYWRGaWxlTi5jbGljaygpOwogICAgfSwKICAgIHVwbG9hZEZpbGVEKCkgewogICAgICB0aGlzLiRyZWZzLnVwbG9hZEZpbGVELmNsaWNrKCk7CiAgICB9LAoKICAgIG9uRGVsZXRlRmlsZShpbmRleCwgaXNEaXJlY3RGaWxlKSB7CiAgICAgIGlmIChpc0RpcmVjdEZpbGUpIHsKICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfSwKCiAgICBmaWxlVXBsb2FkKGV2ZW50LCBkaXJlY3QpIHsKICAgICAgbGV0IHVwRmlsZXMgPSBkaXJlY3QgPyB0aGlzLnVwbG9hZEZpbGVEaXJlY3QgOiB0aGlzLnVwbG9hZEZpbGVOb3JtYWw7CiAgICAgIGxldCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzOwoKICAgICAgaWYgKCFkaXJlY3QgJiYgZmlsZS5sZW5ndGggKyB0aGlzLnVwbG9hZEZpbGVOb3JtYWwubGVuZ3RoID4gNikgewogICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmr4/mrKHmnIDlpJrlj6rog73kuIrkvKA25Liq5paH5Lu2Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZS5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBpdGVtID0gZmlsZVtpXTsKICAgICAgICBpdGVtLmRpcmVjdCA9IGRpcmVjdDsKICAgICAgICBjb25zb2xlLmxvZyhmaWxlW2ldKTsKICAgICAgICBpZiAoaXRlbS5zaXplIC8gMTAyNCAvIDEwMjQgPj0gMjApIHsKICAgICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmgqjmnInmlofku7bkuIrkvKDlpLHotKUs6ZmE5Lu25pyA5aSn6ZmQ5Yi2MjBNIik7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgLy/kuIrkvKDmlofku7bljrvph40KICAgICAgICBpZiAodXBGaWxlcy5maW5kSW5kZXgoKHQpID0+IHQudGV4dCA9PSBpdGVtLm5hbWUpID49IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgLy/kuIrkvKDnsbvlnovliKTmlq0KICAgICAgICBsZXQgZXh0ID0gY2hlY2tVcGxvYWRGaWxlVHlwZShpdGVtLm5hbWUpOwogICAgICAgIGlmIChleHQgPT0gbnVsbCkgewogICAgICAgICAgdGhpcy5zaG93U25hY2soIuaCqOS4iuS8oOeahOaWh+S7tuagvOW8j+S4jeaUr+aMgSIpOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBsZXQgdGVtcCA9IHt9OwogICAgICAgIHRlbXAudGV4dCA9IGl0ZW0ubmFtZTsKICAgICAgICB0ZW1wLmZpbGVUeXBlID0gZXh0OwogICAgICAgIHRlbXAucmVzID0gZmFsc2U7CiAgICAgICAgdGVtcC5maWxlU2l6ZSA9IHJlYWRGaWxlU2l6ZVVuaXQoaXRlbS5zaXplKTsKICAgICAgICB0ZW1wLnVwbG9hZFNpemUgPSBpdGVtLnNpemU7CiAgICAgICAgaWYgKGRpcmVjdCkgewogICAgICAgICAgdGVtcC5vcmllbnRhdGlvbiA9IGdldERpc3RyaWJ1dG9yTnVtYmVyQnlGaWxlTmFtZShpdGVtLm5hbWUpOwogICAgICAgICAgY29uc29sZS5sb2coIj09PT09PT09PiIgKyB0ZW1wLm9yaWVudGF0aW9uKTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgdGVtcC5vcmllbnRhdGlvbiA9PSBudWxsIHx8CiAgICAgICAgICAgIHR5cGVvZiB0ZW1wLm9yaWVudGF0aW9uID09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgICAgIHRlbXAub3JpZW50YXRpb24gPT0gIiIKICAgICAgICAgICkgewogICAgICAgICAgICB0ZW1wLmVycm9yID0gIuaWh+S7tuWQjeS4jeespuWQiOimgeaxgiI7CiAgICAgICAgICAgIHVwRmlsZXMucHVzaCh0ZW1wKTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHVwRmlsZXMucHVzaCh0ZW1wKTsKCiAgICAgICAgaWYgKGRpcmVjdCkgewogICAgICAgICAgdGhpcy51cGxvYWREaXJlY3RJbXAoaXRlbSwgdGVtcCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXBsb2FkTm9ybWFsSW1wKGl0ZW0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8v5LiK5Lyg5pmu6YCa6ZmE5Lu2CiAgICB1cGxvYWROb3JtYWxJbXAoaXRlbSkgewogICAgICB1cGxvYWRGaWxlKGl0ZW0sIChwcm9ncmVzcywgZmlsZU5hbWUpID0+IHsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuZmluZEluZGV4KCh0KSA9PiB0LnRleHQgPT0gZmlsZU5hbWUpOwogICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKICAgICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWxbaW5kZXhdLnByb2dyZXNzID0gcHJvZ3Jlc3M7CgogICAgICAgIHRoaXMudXBsb2FkRmlsZU5vcm1hbCA9IEpTT04ucGFyc2UoCiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVOb3JtYWwpCiAgICAgICAgKTsKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuZmluZEluZGV4KAogICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgKTsKICAgICAgICAgIGxldCB1cGRhdGUgPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWxbaW5kZXhdOwogICAgICAgICAgaWYgKCFyZXMgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHVwZGF0ZVtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVwZGF0ZS5wYXRoID0gcmVzLmRhdGEudXJsOwogICAgICAgICAgICB1cGRhdGUucmVzID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuZmluZEluZGV4KAogICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgKTsKICAgICAgICAgIHRoaXMudXBsb2FkRmlsZU5vcm1hbFtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KAogICAgICAgICAgKCkgPT4KICAgICAgICAgICAgKHRoaXMudXBsb2FkRmlsZU5vcm1hbCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlTm9ybWFsKQogICAgICAgICAgICApKQogICAgICAgICk7CiAgICB9LAogICAgLy/kuIrkvKDlrprlkJHpmYTku7YKICAgIHVwbG9hZERpcmVjdEltcChpdGVtLCB0ZW1wKSB7CiAgICAgIGRlYWxlckNvZGVWYWxpZCh0ZW1wLm9yaWVudGF0aW9uKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCB8fCAhcmVzLmRhdGEpIHsKICAgICAgICAgICAgaWYocmVzLmNvZGU9PTQyKXsKICAgICAgICAgICAgICB0ZW1wLmVycm9yID0gIuacquaJvuWIsOe7j+mUgOWVhiI7CiAgICAgICAgICAgIH1lbHNlIGlmKHJlcy5jb2RlPT00Myl7CiAgICAgICAgICAgICAgdGVtcC5lcnJvciA9ICLmsqHmnInmnYPpmZDlkJHmraTljLrln5/lj5HpgIHmlofnq6AiOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICB0ZW1wLmVycm9yID0gIuaWh+S7tuWQjeS4jeespuWQiOimgeaxgiI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMudXBsb2FkRmlsZURpcmVjdC5maW5kSW5kZXgoCiAgICAgICAgICAgICAgKHQpID0+IHQudGV4dCA9PSBpdGVtLm5hbWUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuOwoKICAgICAgICAgICAgdXBsb2FkRmlsZShpdGVtLCAocHJvZ3Jlc3MsIGZpbGVOYW1lKSA9PiB7CiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRGaWxlRGlyZWN0LmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICh0KSA9PiB0LnRleHQgPT0gZmlsZU5hbWUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdLnByb2dyZXNzID0gcHJvZ3Jlc3M7CgogICAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVEaXJlY3QpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KAogICAgICAgICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGxldCB1cGRhdGUgPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdOwogICAgICAgICAgICAgICAgaWYgKCFyZXMgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZVtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZS5wYXRoID0gcmVzLmRhdGEudXJsOwogICAgICAgICAgICAgICAgICB1cGRhdGUucmVzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KAogICAgICAgICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdFtpbmRleF0uZXJyb3IgPSAi5LiK5Lyg5aSx6LSlIjsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5maW5hbGx5KAogICAgICAgICAgICAgICAgKCkgPT4KICAgICAgICAgICAgICAgICAgKHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KQogICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRGaWxlRGlyZWN0LmZpbmRJbmRleCgKICAgICAgICAgICAgKHQpID0+IHQudGV4dCA9PSBpdGVtLm5hbWUKICAgICAgICAgICk7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdLmVycm9yID0gIuaWh+S7tuWQjeS4jeespuWQiOimgeaxgiI7CiAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVEaXJlY3QpKTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KAogICAgICAgICAgKCkgPT4KICAgICAgICAgICAgKHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KQogICAgICAgICAgICApKQogICAgICAgICk7CiAgICB9LAoKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLeS/neWtmOiNieeov+aTjeS9nC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgc2F2ZUFydGljbGU6IFRocm90dGxlKAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zYXZlQXJ0aWNsZUltcCgpOwogICAgICB9LAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgICB9CiAgICApLAogICAgYXV0b1NhdmU6IERlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMubmVlZFNhdmUpIHsKICAgICAgICB0aGlzLmF1dG9TYXZpbmcgPSB0cnVlOwogICAgICAgIHRoaXMuc2F2ZUFydGljbGVJbXAoKTsKICAgICAgfQogICAgfSwgMTAwMDApLAoKICAgIHNhdmVBcnRpY2xlSW1wKCkgewogICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uKCkpIHsKICAgICAgICB0aGlzLmF1dG9TYXZpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGF0dGFjaG1lbnRMaXN0cyA9IFtdOwogICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGxldCB0ZW1wID0ge307CiAgICAgICAgdGVtcC5wYXRoID0gaXRlbS5wYXRoOwogICAgICAgIHRlbXAuYXR0YWNobWVudFNpemUgPSBpdGVtLnVwbG9hZFNpemU7CiAgICAgICAgYXR0YWNobWVudExpc3RzLnB1c2godGVtcCk7CiAgICAgIH0pOwogICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGxldCB0ZW1wID0ge307CiAgICAgICAgdGVtcC5wYXRoID0gaXRlbS5wYXRoOwogICAgICAgIHRlbXAub3JpZW50YXRpb24gPSBpdGVtLm9yaWVudGF0aW9uOwogICAgICAgIHRlbXAuYXR0YWNobWVudFNpemUgPSBpdGVtLnVwbG9hZFNpemU7CiAgICAgICAgYXR0YWNobWVudExpc3RzLnB1c2godGVtcCk7CiAgICAgIH0pOwogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBpZDogdGhpcy5pZCwKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsCiAgICAgICAgdm90ZUlkOiB0aGlzLnZvdGUuaWQsCiAgICAgICAgYXR0YWNobWVudExpc3Q6IGF0dGFjaG1lbnRMaXN0cywKICAgICAgfTsKCiAgICAgIHNhdmVNZXNzYWdlKGRhdGEpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMubmVlZFNhdmUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zaG93U25hY2sodGhpcy5hdXRvU2F2aW5nID8gIuiHquWKqOS/neWtmOaIkOWKnyIgOiAi5L+d5a2Y5oiQ5YqfIik7CgogICAgICAgICAgICBpZiAodGhpcy5pZCAhPSByZXMuZGF0YSkgewogICAgICAgICAgICAgIHRoaXMuaWQgPSByZXMuZGF0YTsKCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICAgICAgcXVlcnk6IHsgaWQ6IGFlc0VuY3J5cHQodGhpcy5pZCArICIiKSB9LAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgdGhpcy5zaG93U25hY2soIuS/neWtmOWksei0pSIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlID09IG51bGwgfHwgdHlwZW9mIGVycm9yLnJlc3BvbnNlID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5hdXRvU2F2aW5nKSB0aGlzLnNob3dTbmFjaygi5L+d5a2Y5aSx6LSlIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGxldCByZXMgPSBlcnJvci5yZXNwb25zZTsKICAgICAgICAgIGlmIChyZXMuZGF0YSA9PSBudWxsIHx8IHR5cGVvZiByZXMuZGF0YSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgdGhpcy5zaG93U25hY2soIuS/neWtmOWksei0pSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBkYXRhLmNvZGUgPT0gbnVsbCB8fAogICAgICAgICAgICB0eXBlb2YgZGF0YS5jb2RlID09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgICAgIGRhdGEuY29kZSAhPSA0CiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHRoaXMuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCBzZW5zaXRpdmVXb3JkcyA9IGRhdGEuZGF0YTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgc2Vuc2l0aXZlV29yZHMgPT0gbnVsbCB8fAogICAgICAgICAgICB0eXBlb2Ygc2Vuc2l0aXZlV29yZHMgPT0gInVuZGVmaW5lZCIgfHwKICAgICAgICAgICAgc2Vuc2l0aXZlV29yZHMubGVuZ3RoID09IDAKICAgICAgICAgICkgewogICAgICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgdGhpcy5zaG93U25hY2soIuS/neWtmOWksei0pSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodGhpcy5hdXRvU2F2aW5nKSByZXR1cm47CiAgICAgICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmgqjmj5DkuqTnmoTlhoXlrrnkuK3mnInmlY/mhJ/or43vvIzor7fov5vooYzkv67mlLnlkI7ph43mlrDmj5DkuqQiKTsKICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygiZXJyb3IiICsgSlNPTi5zdHJpbmdpZnkoc2Vuc2l0aXZlV29yZHMpKTsKICAgICAgICAgICAgbGV0IHRpdGxlRXJyb3IgPSBbXTsKICAgICAgICAgICAgc2Vuc2l0aXZlV29yZHMuZm9yRWFjaCgod29yZCkgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLnRpdGxlLmluZGV4T2Yod29yZCkgPj0gMCkgewogICAgICAgICAgICAgICAgdGl0bGVFcnJvci5wdXNoKHdvcmQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBoaWdoTGlnaHRBbGxUZXh0KHRoaXMuY29udGVudCwgd29yZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAodGl0bGVFcnJvci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgdGhpcy50aXRsZUVycm9yTWVzc2FnZSA9ICLljIXlkKvmlY/mhJ/or406IjsKICAgICAgICAgICAgICB0aXRsZUVycm9yLmZvckVhY2goKHdvcmQpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudGl0bGVFcnJvck1lc3NhZ2UgKz0gd29yZCArICIgIjsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gKHRoaXMuYXV0b1NhdmluZyA9IGZhbHNlKSk7CiAgICB9LAogICAgY2FjdWxhdGVEZWxlYXJMaXN0KCkgewogICAgICB0aGlzLmRlbGVhckxpc3QgPSBbXTsKICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KSk7CiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKAogICAgICAgICAgaXRlbS5yZXMgJiYKICAgICAgICAgIChpdGVtLmVycm9yID09IG51bGwgfHwgdHlwZW9mIGl0ZW0uZXJyb3IgPT0gInVuZGVmaW5lZCIpCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLmRlbGVhckxpc3QucHVzaChpdGVtLm9yaWVudGF0aW9uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmRlbGVhckxpc3QpOwogICAgfSwKICAgIG9wZW5QcmV2aWV3KCkgewogICAgICBpZiAodGhpcy5uZWVkU2F2ZSkgewogICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmgqjmnInkv67mlLnmnKrkv53lrZjvvIzor7fkv53lrZjlkI7lho3ov5vooYzpooTop4jjgIIiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5wcmV2aWV3ID0gdGhpcy5wcmVjb25kaXRpb24oKTsKICAgIH0sCgogICAgcHVibGlzaEFydGljbGUoKSB7CiAgICAgIGlmICh0aGlzLm5lZWRTYXZlKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuaCqOacieS/ruaUueacquS/neWtmO+8jOivt+S/neWtmOWQjuWGjei/m+ihjOWPkeW4g+OAgiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnB1Ymxpc2ggPSB0aGlzLnByZWNvbmRpdGlvbigpOwogICAgfSwKCiAgICBwcmVjb25kaXRpb24oKSB7CiAgICAgIGxldCBlcnJvciA9IG51bGw7CiAgICAgIGlmIChpc051bGwodGhpcy50aXRsZSkpIHsKICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgewogICAgICAgICAgZXJyb3IgPSB0aGlzLnRpdGxlRXJyb3JNZXNzYWdlID0gIuagh+mimOS4jeiDveS4uuepuiI7CiAgICAgICAgICB0aGlzLnNob3dTbmFjayhlcnJvcik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKGlzTnVsbCh0aGlzLmNvbnRlbnQpKSB7CiAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHRoaXMuc2hvd1NuYWNrKCLmraPmloflhoXlrrnkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdW1MZXR0ZXIoKS5udW0gPiA1MDAwKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuato+aWh+WGheWuueS4jeiDvei2hei/hzUwMDDlrZciKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdC5maW5kSW5kZXgoKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS5lcnJvciAhPSBudWxsKSB7CiAgICAgICAgICBlcnJvciA9IGl0ZW0uZXJyb3I7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGl0ZW0ucmVzID09IGZhbHNlKSB7CiAgICAgICAgICBlcnJvciA9ICLor7fnrYnlvoXmlofku7bkuIrkvKDlrozmiJAiOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGVycm9yICE9IG51bGwgJiYgIXRoaXMuYXV0b1NhdmluZykgewogICAgICAgIHRoaXMuc2hvd1NuYWNrKGVycm9yKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS5lcnJvciAhPSBudWxsKSB7CiAgICAgICAgICBlcnJvciA9IGl0ZW0uZXJyb3I7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGl0ZW0ucmVzID09IGZhbHNlKSB7CiAgICAgICAgICBlcnJvciA9ICLor7fnrYnlvoXmlofku7bkuIrkvKDlrozmiJAiOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGVycm9yICE9IG51bGwgJiYgIXRoaXMuYXV0b1NhdmluZykgewogICAgICAgIHRoaXMuc2hvd1NuYWNrKGVycm9yKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgc3VtTGV0dGVyKCkgewogICAgICB2YXIgaHRtbCA9IHRoaXMuY29udGVudDsKICAgICAgdmFyIHJlMSA9IG5ldyBSZWdFeHAoIjwuKz8+IiwgImciKTsKICAgICAgdmFyIHR4dCA9IGh0bWwucmVwbGFjZShyZTEsICIiKTsKICAgICAgdHh0ID0gdHh0LnJlcGxhY2UoL1xuL2csICIiKTsKICAgICAgdHh0ID0gdHh0LnJlcGxhY2UoLyZuYnNwOy9nLCAiICIpOwogICAgICB2YXIgbnVtID0gdHh0Lmxlbmd0aDsKICAgICAgcmV0dXJuIHsgdHh0OiB0eHQsIG51bTogbnVtIH07CiAgICB9LAogICAgc2hvd1NuYWNrKG1lc3NhZ2UpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMucHJldmlldyB8fAogICAgICAgIHRoaXMucHVibGlzaCB8fAogICAgICAgIHRoaXMuJHJvdXRlLnBhdGggIT0gIi9wdWJsaXNoQXJ0aWNsZSIKICAgICAgKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHNob3dTbmFja2JhcihtZXNzYWdlKTsKICAgIH0sCiAgICBjbG9zZVNuYWNrKCkgewogICAgICBjbG9zZVNuYWNrYmFyKCk7CiAgICB9LAoKICAgIGNoYW5nZVNhdmVTdGF0dXMoKSB7CiAgICAgIHRoaXMubmVlZFNhdmUgPSB0cnVlOwogICAgICB0aGlzLmF1dG9TYXZlKCk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGNvbnRlbnQoKSB7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKICAgIHRpdGxlKCkgewogICAgICB0aGlzLnRpdGxlRXJyb3JNZXNzYWdlID0gIiI7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKICAgIHVwbG9hZEZpbGVEaXJlY3QoKSB7CiAgICAgIHRoaXMuY2FjdWxhdGVEZWxlYXJMaXN0KCk7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKICAgIHVwbG9hZEZpbGVOb3JtYWwoKSB7CiAgICAgIHRoaXMuY2hhbmdlU2F2ZVN0YXR1cygpOwogICAgfSwKICB9LAp9Owo="},null]}