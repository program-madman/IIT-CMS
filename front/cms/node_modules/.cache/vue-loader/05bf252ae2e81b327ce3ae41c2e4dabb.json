{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/articleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/articleDetail.vue","mtime":1641464435139},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcHBlbmRWaWV3IGZyb20gJ0AvY29tcG9uZW50cy9hcHBlbmRWaWV3LnZ1ZScKaW1wb3J0IFJlcG9ydFZpZXcgZnJvbSAnQC9jb21wb25lbnRzL3N0YXRpc3RpY2FsUmVwb3J0Vmlldy52dWUnCmltcG9ydCBSYW5nZVZpZXcgZnJvbSAnQC9jb21wb25lbnRzL3Zpc2lhYmxlUmFuZ2VWaWV3LnZ1ZScKaW1wb3J0IHZvdGVSZXN1bHRWaWV3IGZyb20gJy4vcHVibGlzaEFydGljbGUvdm90ZVJlc3VsdC52dWUnCmltcG9ydCB7aXNOdWxsfSBmcm9tICJAL3V0aWxzL2NvbW1vbi5qcyI7CmltcG9ydCB7IHNob3dTbmFja2JhciB9IGZyb20gIkAvdXRpbHMvc25hY2tiYXIuanMiOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IFRocm90dGxlIH0gZnJvbSAiQC91dGlscy90b29scy5qcyI7CmltcG9ydCB7IGdldEFydGljbGVEZXRhaWwsIApnZXRBcnRpY2xlTG9nLCAKdXBsb2FkRmlsZSwgCmdldERldGFpbEFwcGVuZCwgCmdldEFydGljbGVSZXBvcnRBdXRob3IsCmdldEFydGljbGVSZXBvcnRWaWV3ZXIsCmdldERldGFpbFRvUmVwb3J0LApnZXRBbGxEb3dubG9hZFVybEluQURWaWV3LAptZXNzYWdlUmVhZH0gZnJvbSAiQC9hcGkvZ2V0RGF0YS5qcyIKaW1wb3J0IHsgZ2V0TXNnU3RhdHVzRGVzY30gZnJvbSAiQC91dGlscy9hcnRpY2xlVXRpbHMuanMiCmltcG9ydCB7ZG93bmxvYWRGaWxlQnlVcmx9IGZyb20gIkAvdXRpbHMvZG93bmxvYWQuanMiCmltcG9ydCB7ICAgICAgICAKICAgIGNoZWNrVXBsb2FkRmlsZVR5cGUsCiAgICByZWFkRmlsZVNpemVVbml0LAp9IGZyb20gIkAvdXRpbHMvZmlsZXNVdGlscy5qcyI7CmltcG9ydCB7IGFlc0RlY3J5cHQgIH0gZnJvbSAiQC91dGlscy9lbmNyeXB0aW9uLmpzIjsKCgpleHBvcnQgZGVmYXVsdCB7CiAgICAKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBBcHBlbmRWaWV3LAogICAgICAgIFJlcG9ydFZpZXcsCiAgICAgICAgUmFuZ2VWaWV3LAogICAgICAgIHZvdGVSZXN1bHRWaWV3LAogICAgICAgIGZpbGVJdGVtOiAoKSA9PiBpbXBvcnQoIi4vcHVibGlzaEFydGljbGUvZmlsZU9wdGlvbi52dWUiKSwKICAgICAgICBjb25maXJtOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2NvbmZvcm0udnVlIiksCiAgICAgICAgcGFnZUxvYWRlcjogKCkgPT4gaW1wb3J0KCIuL2FydGljbGVMaXN0L3BhZ2VMb2FkZXIudnVlIiksCiAgICB9LAogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBsb2FkTW9yZTpmYWxzZSwKICAgICAgICBjdXJyZW50UGFnZToxLAogICAgICAgIGNhdXRpb246ZmFsc2UsCiAgICAgICAgY2F1dGlvblRleHQ6IuWbnuWkjea2iOaBr+Wksei0pe+8jOivt+eojeWQjuWGjeivlSIsCiAgICAgICAgY2F1dGlvblRpbWVvdXQ6MTUwMCwKICAgICAgICBiYWNrRGF0YToge30sCiAgICAgICAgYXBwZW5kQmFja0RhdGE6IHt9LAogICAgICAgIGNoYW5nSGlzdG9yeTogW10sCiAgICAgICAgLy/mlofmnKzlm57lpI0KICAgICAgICB0ZXh0UmVwbHk6W10sCiAgICAgICAgLy/pmYTku7blm57lpI0KICAgICAgICBhdHRhY2htZW50UmVwbHk6W10sCiAgICAgICAgCiAgICAgICAgdGV4dFJ1bGU6IHsKICAgICAgICAgICAgbWVzc2FnZTogJycsCiAgICAgICAgICAgIHJ1bGVzOiBbdiA9PiB2Lmxlbmd0aCA8PSAyNSB8fCAnTWF4IDI1IGNoYXJhY3RlcnMnXSwKICAgICAgICB9LAogICAgICAgIC8v5piv5ZCm5pivYWRtaW7nlKjmiLcKICAgICAgICBpc0FkbWluOiBmYWxzZSwKICAgICAgICAvL+WFs+mXrWRpYWxvZwogICAgICAgIGNsb3NlRGlhbG9nX3JlcG9ydDogZmFsc2UsCiAgICAgICAgY2xvc2VEaWFsb2dfc2VlOiBmYWxzZSwKICAgICAgICAvL+W9k+WJjemAieS4reeahGRpYWxvZyDpu5jorqQwIOacqumAieaLqWRpYWxvZywgMS7lj6/op4HojIPlm7TvvIwyLue7n+iuoeaKpeWRigogICAgICAgIG5vd0RpYWxvZzogMCwKICAgICAgICAvL+aWh+eroOeKtuaAgQogICAgICAgIG1zZ1RleHQ6ICcnLAogICAgICAgIC8v6YCJ5oup55qE5oqV56WoaXRlbQogICAgICAgIHJhZGlvR3JvdXA6IDAsCiAgICAgICAgLy/mma7pgJrpmYTku7YKICAgICAgICBmZWViYWNrQmFja1R5cGU6LTEsICAgICAgICAgICAgCiAgICAgICAgY29tbW9uRmlsZXM6IFtdLAogICAgICAgIC8v5a6a5ZCR6ZmE5Lu2CiAgICAgICAgZGlyZWN0aW9uYWxGaWxlczogW10sCiAgICAgICAgLy/mipXnpajmjInpkq7nirbmgIEKICAgICAgICB2b3RlRGlzYWJsZTp0cnVlLAogICAgICAgIC8v5oqV56Wo57uT5p6cCiAgICAgICAgdm90ZXM6IFtdLAogICAgICAgIC8v5Zue5aSN5YaF5a65CiAgICAgICAgcmVwb3J0Q290ZW50OiIiLAogICAgICAgIC8v5paH56ugaWQKICAgICAgICBtc2dJZDogJycsCiAgICAgICAgLy/mmK/lkKbku47miJHnmoTlj5HluIPov5vlhaXnmoQKICAgICAgICBpc015UHVibGlzaDpmYWxzZSwKICAgICAgICAvL+iOt+WPlueahOWbnuWkjeS/oeaBryzlhYjotYvpu5jorqTlgLzjgILpmLLmraLmuLLmn5Plh7rplJkKICAgICAgICByZXBvcnRzOnt9LAogICAgICAgIC8v5Zue5aSN6ZmE5Lu2CiAgICAgICAgdXBsb2FkRmlsZU5vcm1hbDpbXSwKICAgICAgICAvL+WumuaXtuWZqAogICAgICAgIHRpbWVvdXQ6bnVsbCwKICAgICAgICBpc0NvbW1vbkZpbGVzRG93bmxvYWRMb2FkaW5nOmZhbHNlLAogICAgICAgIGlzRGlyZWN0aW9uYWxGaWxlc0Rvd25sb2FkTG9hZGluZzpmYWxzZSwKICAgIH0pLAoKICAgIHdhdGNoOnsKICAgICAgICByYWRpb0dyb3VwOmZ1bmN0aW9uKG9sZFZhbCxuZXdWYWwpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3JhZGlvR3JvdXAtLS0nK25ld1ZhbCsiIG9sZFZhbDoiK29sZFZhbCsiICBjdXJyZW50OiIrdGhpcy5yYWRpb0dyb3VwKTsKICAgICAgICAgICAgLy/mnKrpgInmi6nmipXnpajpgInpobkKICAgICAgICAgICAgaWYodGhpcy5yYWRpb0dyb3VwPT0wKXsKICAgICAgICAgICAgICAgIHRoaXMudm90ZURpc2FibGUgPSB0cnVlOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMudm90ZURpc2FibGUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBiZWZvcmVSb3V0ZVVwZGF0ZSh0byxmcm9tLG5leHQpIHsKICAgICAgICBuZXh0KCk7CiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7CiAgICB9LAogICAgCiAgICAvL2tlZXBBbGl2ZeeUn+WRveWRqOacnyDlpJrmrKHmiafooYwgYWN0aXZhdGVkIOWPquaJp+ihjOS4gOasoW1vdW50ZWQKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5pbml0aWFsaXplKCkKICAgIH0sCiAgICBiZWZvcmVEZXN0cm95KCkgewogICAgICAgIHRoaXMubm93RGlhbG9nID0gMDsKICAgIH0sCiAgICBkZWFjdGl2YXRlZCgpewogICAgICAgIHRoaXMudGltZW91dC5jbGVhckltbWVkaWF0ZSgpOwogICAgfSwKICAgIGRlc3Ryb3llZCgpIHsKICAgICAgICAvLyDplIDmr4Hkuovku7YKICAgICAgICAvLyB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxUb1RvcCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIG9uTG9hZE1vcmUoKSB7CiAgICAgICAgICBpZiAodGhpcy5sb2FkTW9yZSA9PSB0cnVlIHx8ICF0aGlzLmlzTXlQdWJsaXNoKSByZXR1cm47CiAgICAgICAgICB0aGlzLmxvYWRNb3JlID0gdHJ1ZTsKICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICBtc2dJZDogdGhpcy5tc2dJZCwKICAgICAgICAgICAgICAgIHBhZ2VOdW06Kyt0aGlzLmN1cnJlbnRQYWdlLAogICAgICAgICAgICB9CiAgICAgICAgIHRoaXMuZ2V0UmVwb3J0cyhkYXRhKQogICAgICAgIH0sCgogICAgICAgIHJlc2V0KCkgewogICAgICAgICAgICB0aGlzLmxvYWRNb3JlID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZT0xCiAgICAgICAgICAgIHRoaXMuY2F1dGlvbgogICAgICAgICAgICB0aGlzLmJhY2tEYXRhPXt9CiAgICAgICAgICAgIHRoaXMuYXBwZW5kQmFja0RhdGEgPSB7fQogICAgICAgICAgICB0aGlzLmNoYW5nSGlzdG9yeSA9IFtdCiAgICAgICAgICAgIHRoaXMudGV4dFJlcGx5ID0gW10KICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50UmVwbHk9W10KICAgICAgICAgICAgdGhpcy5pc0FkbWluID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2dfcmVwb3J0ID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZ19zZWUgPSBmYWxzZQogICAgICAgICAgICB0aGlzLm5vd0RpYWxvZyA9IDAKICAgICAgICAgICAgdGhpcy5tc2dUZXh0PScnCiAgICAgICAgICAgIHRoaXMucmFkaW9Hcm91cD0wCiAgICAgICAgICAgIHRoaXMuZmVlYmFja0JhY2tUeXBlPS0xICAgICAgIAogICAgICAgICAgICB0aGlzLmNvbW1vbkZpbGVzPSBbXQogICAgICAgICAgICB0aGlzLmRpcmVjdGlvbmFsRmlsZXM9W10KICAgICAgICAgICAgdGhpcy52b3RlRGlzYWJsZSA9IHRydWUKICAgICAgICAgICAgdGhpcy52b3Rlcz1bXQogICAgICAgICAgICB0aGlzLnJlcG9ydENvdGVudD0iIgogICAgICAgICAgICB0aGlzLm1zZ0lkPSAnJwogICAgICAgICAgICB0aGlzLmlzTXlQdWJsaXNoPWZhbHNlCiAgICAgICAgICAgIHRoaXMuIHJlcG9ydHM9e30KICAgICAgICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsPVtdCiAgICAgICAgICAgIHRoaXMudGltZW91dD1udWxsCiAgICAgICAgICAgIHRoaXMuaXNDb21tb25GaWxlc0Rvd25sb2FkTG9hZGluZz1mYWxzZQogICAgICAgICAgICB0aGlzLmlzRGlyZWN0aW9uYWxGaWxlc0Rvd25sb2FkTG9hZGluZz1mYWxzZQogICAgICAgIH0sCgogICAgICAgIGluaXRpYWxpemUoKXsKICAgICAgICAgICAgY29uc29sZS5sb2coIltbW1tbW1tbID09PiIrSlNPTi5zdHJpbmdpZnkoc3RvcmUuc3RhdGUudXNlci5hdXRob3JpemF0aW9uKSkKICAgICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgICAgICAvL+eQhuiuuuS4iu+8jOaYr+imgeWNleeLrOWIpOaWreaYr+WQpkFkbWlu55qE77yM5L2G5piv55uu5YmN55yL5LiK5Y67YWRtaW7ov5vlhaXmn6XnnIvnmoTog73lipvlkozkvZzogIXkuIDoh7QKICAgICAgICAgICAgLy/kuqflk4Hov5nkuYjor7TnmoTvvIzkvYbmmK/lj6/og73kvJrlrZjmiY3pm7fljLou5q+U5aaC5p+l55yL5bey6K+75oql5ZGK77yM5bm25Y+R6YCB5o+Q6YaSLi4uIEFkbWlu55yf55qE5Y+v5Lul6L+Z5LmI5YGa5ZCX77yfIOW5tuS4lOOAguWQjuerr+aYr+WQpui/m+ihjOS6humqjOivge+8nwogICAgICAgICAgICAvL+WNleeLrOWIpOaWreS8muabtOWlveS4gOS6m++8jOS9huaYr+mAu+i+keS8muWkjeadguS4gOS6m+OAgiDnm67liY3pobnnm67ml7bpl7TmnInpmZDvvIzlpoLmnpzkvaDnnIvliLDov5nmrrXku6PnoIHjgILlubbkuJTmnInml7bpl7TvvIzlupTor6Xkv67lpI3ov5nkuKrpl67popgKICAgICAgICAgICAgbGV0IHVzZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2Uoc3RvcmUuc3RhdGUudXNlci5hdXRob3JpemF0aW9uKSkpCiAgICAgICAgICAgIHRoaXMuaXNBZG1pbiA9IHVzZXIuSkIgPT09ICJDTVMuQURNSU4iIHx8IHVzZXIuSkIgPT09ICJDTVMuQURNSU4iIHx8IHVzZXIuamIgPT09ICJjbXMuYWRtaW4iIHx8IHVzZXIuamIgPT09ICJDTVMuQURNSU4iOwogICAgICAgICAgIC8vdGhpcy5pc015UHVibGlzaCA9IHVzZXIuSkIgPT09ICJBRE1JTiIKICAgICAgICAgICAgdGhpcy5pc015UHVibGlzaCA9ICB0aGlzLmlzQWRtaW4gPyB0cnVlOnRoaXMuJHJvdXRlLnF1ZXJ5LmlzTXlQdWJsaXNoOwogICAgICAgICAgICB0aGlzLm1zZ0lkID0gYWVzRGVjcnlwdCh0aGlzLiRyb3V0ZS5xdWVyeS5pZCk7CiAgICAgICAgICAgIC8v6aG26YOo5Zue5rua5LqL5Lu255uR5ZCsCiAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbFRvVG9wKQogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgIAogICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMudGltZU91dFJlcG9ydCwxMDAwMCk7CiAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgbXNnSWQ6IHRoaXMubXNnSWQsCiAgICAgICAgICAgICAgICBwYWdlTnVtOnRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy/ojrflj5bmlofnq6Dor6bmg4UKICAgICAgICAgICAgdGhpcy5nZXREZXRhaWxzKHRoaXMubXNnSWQpCiAgICAgICAgICAgIC8v6I635Y+W5Zue5aSN5L+h5oGvCiAgICAgICAgICAgIHRoaXMuZ2V0UmVwb3J0cyhkYXRhKTsgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIC8v6I635Y+W5paH56ug6ZmE5Lu2CiAgICAgICAgICAgIGdldERldGFpbEFwcGVuZChkYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiPj4+Pj4+Pj4+Pj7ojrflj5bmlofnq6DpmYTku7Y+Pj4+Pj4+Pj4+Pj4+Pj4iKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgICAgICAgdGhhdC5hcHBlbmRCYWNrRGF0YSA9IHJlczsKICAgICAgICAgICAgICAgIHRoYXQuZGlyZWN0aW9uYWxGaWxlcyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgdGhhdC5jb21tb25GaWxlcyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgaWYodGhhdC5hcHBlbmRCYWNrRGF0YSAmJiB0aGF0LmFwcGVuZEJhY2tEYXRhLmRhdGEubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aTx0aGF0LmFwcGVuZEJhY2tEYXRhLmRhdGEubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50RmlsZSA9IHRoYXQuYXBwZW5kQmFja0RhdGEuZGF0YVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoYXQuaXNNeVB1Ymxpc2gpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZpbGUuZG93bmxvYWRlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsZS5jb3VudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudEZpbGUub3JpZW50YXRpb24pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5kaXJlY3Rpb25hbEZpbGVzLnB1c2goY3VycmVudEZpbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY29tbW9uRmlsZXMucHVzaChjdXJyZW50RmlsZSk7IAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImNvbW1vbkZpbGVzOiIrSlNPTi5zdHJpbmdpZnkodGhpcy5jb21tb25GaWxlcykpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8v6I635Y+W5paH56ug5Y+Y5pu05Y6G5Y+yCiAgICAgICAgZ2V0QXJ0aWNsZUxvZygpIHsKICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgICBnZXRBcnRpY2xlTG9nKHRoaXMubXNnSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCI+Pj4+Pj4+Pj4+PuiOt+WPluaWh+eroOWPmOabtOWOhuWPsj4+Pj4+Pj4+Pj4+Pj4+PiIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICAgICAgICB0aGF0LmFydGljbGVDaGFuZ2VEYXRhID0gcmVzOwogICAgICAgICAgICAgICAgdGhhdC5hcnRpY2xlQ2hhbmdlRGF0YS5kYXRhLmxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICBpdGVtLm9wZXJhdGVUeXBlID0gZ2V0TXNnU3RhdHVzRGVzYyhpdGVtLm9wZXJhdGVUeXBlKQogICAgICAgICAgICAgICAgICAgIHRoYXQuY2hhbmdIaXN0b3J5LnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5jaGFuZ0hpc3RvcnkucHVzaCh7IGRpdmlkZXI6IHRydWUgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMudG9DaGFuZ2VMb2coKTsKICAgICAgICAgICAgICAgICAgICB9LCA4MDApOwogICAgICAgICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgIHRvQ2hhbmdlTG9nKCkgeyAKICAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgcXVlcnkgPSB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgICAgICAgICAgY29uc29sZS5sb2coIj09PT09PT09PT09PnRvIGxvZyBwYXJhbXMgIitKU09OLnN0cmluZ2lmeShxdWVyeSkpOwogICAgICAgICAgICBpZiAocXVlcnkgPT0gbnVsbCB8fCB0eXBlb2YgcXVlcnkgPT0gInVuZGVmaW5lZCIpIHJldHVybjsKICAgICAgICAgICAgbGV0IG5lZWRUb0xvZyA9IHF1ZXJ5LnBhcmFtOwogICAgICAgICAgICBjb25zb2xlLmxvZygiPT09PT09PT09PT0+dG8gbG9nIG5lZWQgdG8gbG9nICIrbmVlZFRvTG9nKTsKICAgICAgICAgICAgaWYgKCFuZWVkVG9Mb2cgfHwgdHlwZW9mIG5lZWRUb0xvZyA9PSAidW5kZWZpbmVkIikgcmV0dXJuOwogICAgICAgICAgICAKICAgICAgICAgICAgdGhpcy4kcmVmcy5jaGFuZ2Vsb2cuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgLy/mmK/lkKbmmL7npLrmlofnq6DlhoXlrrkKICAgICAgICBuZWVkU2hvd0NvbnRlbnQoKSB7CiAgICAgICAgLy92LWlmPSJiYWNrRGF0YS5kYXRhICYmIWlzTXlQdWJsaXNoICYmIHJlcG9ydHMgJiYgcmVwb3J0cy5kYXRhICYmIHJlcG9ydHMuZGF0YS5mZWVkQmFja1R5cGUgPT09IDAgJiYgYmFja0RhdGEuZGF0YS5mZWVkYmFja1N0YXR1cyAhPT0gMSIKICAgICAgICAgICAgLy/mmK/lt7Lor7vlm57miafnmoTmtojmga8KICAgICAgICAgICAgaWYodGhpcy5iYWNrRGF0YS5kYXRhICYmIXRoaXMuaXNNeVB1Ymxpc2ggJiYgdGhpcy5yZXBvcnRzICYmIHRoaXMucmVwb3J0cy5kYXRhICYmIHRoaXMucmVwb3J0cy5kYXRhLmZlZWRCYWNrVHlwZSA9PT0gMCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLmJhY2tEYXRhLmRhdGEuZmVlZGJhY2tTdGF0dXMgIT09IDEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IAogICAgICAgIH0sCiAgICAgICAgCiAgICAgICAgLyoqCiAgICAgICAgICog5piv5ZCm5pi+56S66ZmE5Lu25LiL6L29CiAgICAgICAgICovCiAgICAgICAgbmVlZFNob3dEb3dubG9hZEZpbGUoKXsKCiAgICAgICAgICAgIGxldCBmZWVkYmFja1N0YXR1cyA9IHRoaXMuYmFja0RhdGEgJiYgdGhpcy5iYWNrRGF0YS5kYXRhICYmIHRoaXMuYmFja0RhdGEuZGF0YS5mZWVkYmFja1N0YXR1cyA9PT0gMTsKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJuZWVkU2hvd0Rvd25sb2FkRmlsZToiK2ZlZWRiYWNrU3RhdHVzKyIgZmVlYmFja0JhY2tUeXBlOiIrdGhpcy5mZWViYWNrQmFja1R5cGUpOwoKICAgICAgICAgICAgLy/lpoLmnpzmmK/lt7Lor7vlm57miafnsbvlnovvvIzlubbkuJTmnKrlm57lpI0KICAgICAgICAgICAgaWYoIXRoaXMuaXNNeVB1Ymxpc2gmJnRoaXMuZmVlYmFja0JhY2tUeXBlPT0wJiYgIWZlZWRiYWNrU3RhdHVzICl7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBuZWVkU2hvd0NvbW1lbnRzKCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgbGV0IGhhc0NvbW1lbnRzID0gdGhpcy5yZXBvcnRzICYmIHRoaXMucmVwb3J0cy5kYXRhICYmIHRoaXMuYmFja0RhdGEuZGF0YSAmJiAKICAgICAgICAgICAgKCh0aGlzLnRleHRSZXBseSAmJiB0aGlzLnRleHRSZXBseS5sZW5ndGggPiAwICl8fAogICAgICAgICAgICAodGhpcy5hdHRhY2htZW50UmVwbHkgJiYgdGhpcy5hdHRhY2htZW50UmVwbHkubGVuZ3RoID4gMCkpCgogICAgICAgICAgIGlmKGhhc0NvbW1lbnRzKSB7CiAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTXlQdWJsaXNoID8gdHJ1ZSA6IHRoaXMuYmFja0RhdGEuZGF0YS5mZWVkYmFja1N0YXR1cyA9PT0gMQogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICByZXBvcnREaWFsb2coKSB7CiAgICAgICAgICAgIHRoaXMubm93RGlhbG9nID0gMTsKICAgICAgICB9LAogICAgICAgIHNlZURpYWxvZygpIHsKICAgICAgICAgICAgdGhpcy5ub3dEaWFsb2cgPSAyOwogICAgICAgIH0sCiAgICAgICAgLy/lhbPpl61kaWFsb2cKICAgICAgICBjbG9zZVBhcmVudChjaGlsZFN0YXRlKSB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coIi0tLS0tLS0tLS0tIiArIHRoaXMubm93RGlhbG9nKTsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygiLS0tLS0tLS0tLS0iICsgY2hpbGRTdGF0ZSk7CiAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgc3dpdGNoICh0aGlzLm5vd0RpYWxvZykgewogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIHRoYXQuY2xvc2VEaWFsb2dfcmVwb3J0ID0gY2hpbGRTdGF0ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICB0aGF0LmNsb3NlRGlhbG9nX3NlZSA9IGNoaWxkU3RhdGU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvL+WxleekuuaXl+W4nOiDjOaZr+WbvueJhwogICAgICAgIHNob3dJbWFnKHN0YXR1cykgewogICAgICAgICAgICBsZXQgaW1nc3JjOwogICAgICAgICAgICBzd2l0Y2ggKHN0YXR1cykgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGltZ3NyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL2RhaWZhYnUucG5nJyk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgaW1nc3JjID0gcmVxdWlyZSgnQC9hc3NldHMveWlmYWJ1LnBuZycpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIGltZ3NyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL3lpY2hleGlhby5wbmcnKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICBpbWdzcmMgPSByZXF1aXJlKCdAL2Fzc2V0cy95aXNoaXhpYW8ucG5nJyk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBpbWdzcmM7CiAgICAgICAgfSwKICAgICAgICAvL+iOt+WPluaWh+eroOS/oeaBrwogICAgICAgIGdldERldGFpbHMobXNnSWQpewogICAgICAgICAgICAvL+iOt+WPluaWh+eroOivpuaDhQogICAgICAgICAgICBnZXRBcnRpY2xlRGV0YWlsKG1zZ0lkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiPj4+Pj4+Pj4+Pj7ojrflj5bmlofnq6Dor6bmg4U+Pj4+Pj4+Pj4+Pj4+Pj4iKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgICAgICAgdGhpcy5iYWNrRGF0YSA9IHJlczsKICAgICAgICAgICAgICAgIHRoaXMubXNnVGV4dCA9IGdldE1zZ1N0YXR1c0Rlc2ModGhpcy5iYWNrRGF0YS5kYXRhLm1zZ1N0YXR1cyk7CiAgICAgICAgICAgICAgICB0aGlzLmZlZWJhY2tCYWNrVHlwZSA9ICB0aGlzLmJhY2tEYXRhLmRhdGEuZmVlZGJhY2tUeXBlIDsKICAgICAgICAgICAgICAgIC8v6I635Y+W5paH56ug6K6w5b2VCiAgICAgICAgICAgICAgICB0aGlzLmdldEFydGljbGVMb2coKTsKCiAgICAgICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGdldFJlcG9ydHMoZGF0YSkgewogICAgICAgICAgICB0aGlzLmxvYWRNb3JlID0gdHJ1ZTsKICAgICAgICAgICAgaWYodGhpcy5pc015UHVibGlzaCkgewogICAgICAgICAgICAgICAgdGhpcy5nZXRBdXRob3JSZXBvcnRzKGRhdGEpCiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0Vmlld2VyUmVwb3J0cyhkYXRhKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvL+iOt+WPluWbnuWkjeS/oeaBryzlhajpg6jnmoTvvIxhZG1pbiDlkowgYXV0aG9y6KeG6KeSCiAgICAgICAgZ2V0QXV0aG9yUmVwb3J0cyhkYXRhKXsKICAgICAgICAgICAgZ2V0QXJ0aWNsZVJlcG9ydEF1dGhvcihkYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiPj4+Pj4+Pj4+Pj7ojrflj5blm57lpI3kv6Hmga8gYXV0aG9yIG9yIGFkbWluID4+Pj4+Pj4+Pj4+Pj4+PiIpOwogICAgICAgICAgICAgICAgdGhpcy5vbkdldFJlcG9ydFJlc3VsdChyZXMpCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlID0gZmFsc2U7CiAgICAgICAgICAgIH0pLmNhdGNoKHRoaXMubG9hZE1vcmUgPSBmYWxzZSk7CiAgICAgICAgfSwKICAgICAgICAvL+iOt+WPluWbnuWkjeS/oeaBr++8jHZpZXdlcuinhuinkgogICAgICAgIGdldFZpZXdlclJlcG9ydHMobXNnSWQpewogICAgICAgICAgICBnZXRBcnRpY2xlUmVwb3J0Vmlld2VyKG1zZ0lkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiPj4+Pj4+Pj4+Pj7ojrflj5blm57lpI3kv6Hmga8gdmlld2VyPj4+Pj4+Pj4+Pj4+Pj4+Iik7CiAgICAgICAgICAgICAgICB0aGlzLm9uR2V0UmVwb3J0UmVzdWx0KHJlcykKICAgICAgICAgICAgICAgIHRoaXMubG9hZE1vcmUgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAKICAgICAgICBvbkdldFJlcG9ydFJlc3VsdChyZXN1bHQpIHsKICAgICAgICAgICAgdGhpcy5yZXBvcnRzID0gcmVzdWx0OwogICAgICAgICAgICBpZihpc051bGwocmVzdWx0KSB8fCByZXN1bHQuY29kZSAhPSAwIHx8IGlzTnVsbChyZXN1bHQuZGF0YSkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoIWlzTnVsbChyZXN1bHQuZGF0YS5jb250ZW50cykgJiYgcmVzdWx0LmRhdGEuY29udGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy50ZXh0UmVwbHkgPSB0aGlzLnRleHRSZXBseS5jb25jYXQocmVzdWx0LmRhdGEuY29udGVudHMpICAKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoIWlzTnVsbChyZXN1bHQuZGF0YS5hdHRhY2htZW50cykgJiYgcmVzdWx0LmRhdGEuYXR0YWNobWVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50UmVwbHkgPSB0aGlzLmF0dGFjaG1lbnRSZXBseS5jb25jYXQocmVzdWx0LmRhdGEuYXR0YWNobWVudHMpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHRoaXMucmVwb3J0cyAmJiB0aGlzLnJlcG9ydHMuZGF0YSAmJiB0aGlzLnJlcG9ydHMuZGF0YS52b3RlSW5mbyl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnJlcG9ydHMuZGF0YS52b3RlSW5mby5vcHRpb25JZD09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJhZGlvR3JvdXAgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMucmFkaW9Hcm91cCA9IHRoaXMucmVwb3J0cy5kYXRhLnZvdGVJbmZvLm9wdGlvbklkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGRvd25sb2FkQ29tbW9uRmlsZXMoKXsKICAgICAgICAgICAgLy8gbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgICAvL2xldCBmaWxlbmFtZSA9IHRoaXMuYmFja0RhdGEuZGF0YS50aXRsZSArICIt5pmu6YCa6ZmE5Lu2LnppcCI7CiAgICAgICAgICAgIHRoaXMuaXNDb21tb25GaWxlc0Rvd25sb2FkTG9hZGluZyA9IHRydWU7IAoKICAgICAgICAgICAgZ2V0QWxsRG93bmxvYWRVcmxJbkFEVmlldyh0aGlzLm1zZ0lkLDApCiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7IAogICAgICAgICAgICAgICAgICAgIGlmKCFpc051bGwocmVzKSAmJiByZXMuY29kZSA9PT0gMCAmJiAhaXNOdWxsKHJlcy5kYXRhKSAmJiByZXMuZGF0YSAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRGaWxlQnlVcmwocmVzLmRhdGEpICAgCiAgICAgICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzaG93U25hY2tiYXIoJ+S4i+i9veWksei0pe+8jOivt+eojeWAmemHjeivlScpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHNob3dTbmFja2Jhcign5LiL6L295aSx6LSl77yM6K+356iN5YCZ6YeN6K+VJyk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb21tb25GaWxlc0Rvd25sb2FkTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSk7ICAgIAogICAgICAgIH0sCiAgICAgICAgZG93bmxvYWREaXJlY3Rpb25hbEZpbGVzKCl7CiAgICAgICAgICAgIC8vIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgICAgLy9sZXQgZmlsZW5hbWUgPSB0aGlzLmJhY2tEYXRhLmRhdGEudGl0bGUgKyAiLeWumuWQkemZhOS7ti56aXAiOwogICAgICAgICAgICB0aGlzLmlzRGlyZWN0aW9uYWxGaWxlc0Rvd25sb2FkTG9hZGluZyA9IHRydWU7IAoKICAgICAgICAgICAgZ2V0QWxsRG93bmxvYWRVcmxJbkFEVmlldyh0aGlzLm1zZ0lkLDEpCgogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4geyAKICAgICAgICAgICAgICAgICAgICAgaWYoIWlzTnVsbChyZXMpICYmIHJlcy5jb2RlID09PSAwICYmICFpc051bGwocmVzLmRhdGEpICYmIHJlcy5kYXRhICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEZpbGVCeVVybChyZXMuZGF0YSkgICAKICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTbmFja2Jhcign5LiL6L295aSx6LSl77yM6K+356iN5YCZ6YeN6K+VJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2hvd1NuYWNrYmFyKCfkuIvovb3lpLHotKXvvIzor7fnqI3lgJnph43or5UnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RpcmVjdGlvbmFsRmlsZXNEb3dubG9hZExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sICAgICAgICAgICAgCiAgICAgICAgLy/lm57lpI3lhoXlrrkKICAgICAgICB0b1JlcG9ydENvbnRlbnQ6VGhyb3R0bGUoCiAgICAgICAgICAgIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAvL+S6jOasoeehruiupAogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5jb25maXJtCiAgICAgICAgICAgICAgICAuY29uZmlybSgKICAgICAgICAgICAgICAgICAgICAi5Y+q6IO95Zue5aSN5LiA5qyh77yM5LiN6IO95pu05pS577yM56Gu6K6k5Zue5aSN5ZCXPyIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRvUmVwb3J0KDEsdGhpcy5yZXBvcnRDb3RlbnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7ICAgCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBzaG93U25hY2tiYXIoIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgICAgICAgICB9ICAgICAgICAgICAgICAgIAogICAgICAgICksCiAgICAgICAgLy/lt7Lor7vlm57miacKICAgICAgICB0b1JlcG9ydFJlY2VpcHQoKXsKICAgICAgICAgICAgdGhpcy50b1JlcG9ydCgwLCIiKTsKICAgICAgICB9LAogICAgICAgIC8v5Zue5aSN6ZmE5Lu2CiAgICAgICAgdG9SZXBvcnRGaWxlKCl7ICAgICAgICAgICAgICAKICAgICAgICAgICAgLy/kuozmrKHnoa7orqQKICAgICAgICAgICAgdGhpcy4kcmVmcy5jb25maXJtCiAgICAgICAgICAgIC5jb25maXJtKAogICAgICAgICAgICAgICAgIuWPquiDveWbnuWkjeS4gOasoe+8jOS4jeiDveabtOaUue+8jOehruiupOWbnuWkjeWQlz8iCiAgICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRSZXBvcnQoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKCgpID0+IHt9KTsgICAgICAgICAgICAgICAgCiAgICAgICAgfSwKCiAgICAgICAgc3VibWl0UmVwb3J0KCl7CiAgICAgICAgICAgIGxldCBhdHRhY2htZW50TGlzdCA9IFtdOwogICAgICAgICAgICBmb3IobGV0IGk9MDtpPHRoaXMudXBsb2FkRmlsZU5vcm1hbC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgIGxldCBhdHRhY2htZW50ID0ge307CiAgICAgICAgICAgICAgICBhdHRhY2htZW50LnBhdGggPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWxbaV0ucGF0aDsKICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQuYXR0YWNobWVudFNpemUgPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWxbaV0uZmlsZVNpemU7CiAgICAgICAgICAgICAgICBhdHRhY2htZW50TGlzdC5wdXNoKGF0dGFjaG1lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzYXZlIGF0dGFjaG1lbnQ6IiArIEpTT04uc3RyaW5naWZ5KGF0dGFjaG1lbnRMaXN0KSk7CiAgICAgICAgICAgIHRoaXMudG9SZXBvcnQoMiwiIixhdHRhY2htZW50TGlzdCk7CiAgICAgICAgICAgIC8vIGxldCBkYXRhID0gewogICAgICAgICAgICAvLyAgICAgbXNnSWQ6IHRoaXMubXNnSWQsCiAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgLy90aGlzLmdldFJlcG9ydHMoZGF0YSk7CiAgICAgICAgICAgIC8vdGhpcy5nZXREZXRhaWxzKHRoaXMubXNnSWQpCiAgICAgICAgfSwKICAgIAogICAgICAgIG9uRGVsZXRlRmlsZShpbmRleCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygib25kZWxldGUgZmlsZToiK2luZGV4KTsKICAgICAgICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgfSwKICAgICAgICB1cGxvYWRGaWxlTigpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coInVwbG9hZEZpbGVOIik7CiAgICAgICAgICAgIGlmKHRoaXMudXBsb2FkRmlsZU5vcm1hbC5sZW5ndGg9PTEpewogICAgICAgICAgICAgICAgc2hvd1NuYWNrYmFyKCLmr4/mrKHmnIDlpJrlj6rog73kuIrkvKAx5Liq5paH5Lu2Iik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kcmVmcy51cGxvYWRGaWxlTi5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCJjbGljayIpKTsKICAgICAgICB9LAogICAgICAgIGZpbGVVcGxvYWQoZXZlbnQpIHsKICAgICAgICAgICAgbGV0IHVwRmlsZXMgPSB0aGlzLnVwbG9hZEZpbGVOb3JtYWw7CiAgICAgICAgICAgIGxldCBzZWxlY3RlZEZpbGVzID0gZXZlbnQudGFyZ2V0LmZpbGVzOwoKICAgICAgICAgICAgIGlmIChzZWxlY3RlZEZpbGVzLmxlbmd0aCA+MSkgewogICAgICAgICAgICAgICAgc2hvd1NuYWNrYmFyKCLmr4/mrKHmnIDlpJrlj6rog73kuIrkvKAx5Liq5paH5Lu2Iik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkRmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBpdGVtID0gc2VsZWN0ZWRGaWxlc1tpXTsKCiAgICAgICAgICAgICAgICBpZiAoaXRlbS5zaXplIC8xMDI0IC8xMDI0ID49IDEpIHsKICAgICAgICAgICAgICAgICAgICBzaG93U25hY2tiYXIoIuaCqOacieaWh+S7tuS4iuS8oOWksei0pSzpmYTku7bmnIDlpKfpmZDliLYxTSIpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy/kuIrkvKDmlofku7bljrvph40KICAgICAgICAgICAgICAgIGlmICh1cEZpbGVzLmZpbmRJbmRleCgodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy/kuIrkvKDnsbvlnovliKTmlq0KICAgICAgICAgICAgICAgIGxldCBleHQgPSBjaGVja1VwbG9hZEZpbGVUeXBlKGl0ZW0ubmFtZSk7CiAgICAgICAgICAgICAgICBpZiAoZXh0ID09IG51bGwpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7fTsKICAgICAgICAgICAgICAgIHRlbXAudGV4dCA9IGl0ZW0ubmFtZTsKICAgICAgICAgICAgICAgIHRlbXAuZmlsZVR5cGUgPSBleHQ7CiAgICAgICAgICAgICAgICB0ZW1wLmZpbGVTaXplID0gcmVhZEZpbGVTaXplVW5pdChpdGVtLnNpemUpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGVtcCk7CiAgICAgICAgICAgICAgICAvL+a3u+WKoOS4iuS8oOaWh+S7tuWIl+ihqAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB1cEZpbGVzLnB1c2godGVtcCk7CiAgICAgICAgICAgICAgICAvL+S4iuS8oOacjeWKoeWZqAogICAgICAgICAgICAgICAgdXBsb2FkRmlsZShpdGVtLCAocHJvZ3Jlc3MsIGZpbGVOYW1lKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsCiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigodCkgPT4gdC50ZXh0ID09IGZpbGVOYW1lKQogICAgICAgICAgICAgICAgICAgIC5tYXAoKHVwZGF0ZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHJvZ3Jlc3MgPSBwcm9ncmVzczsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwgPSBKU09OLnBhcnNlKAogICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVOb3JtYWwpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ1cGxvYWQiICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/mm7TmlrDkuIrkvKDkv6Hmga8KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGVzID0gdGhpcy51cGxvYWRGaWxlTm9ybWFsOwogICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXMKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigodCkgPT4gKHQudGV4dD09cmVzLmRhdGEuYXR0YWNobWVudE5hbWUpKQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKCh1cGRhdGUpID0+ICh1cGRhdGUucGF0aCA9IHJlcy5kYXRhLnVybCkpOyAgCgogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidXBsb2FkIGZpbGUgbWVzc2FnZTI6IiArIEpTT04uc3RyaW5naWZ5KGZpbGVzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgICByZXNldFVwbG9hZGVyKCl7CiAgICAgICAgICAgIHRoaXMuJHJlZnMudXBsb2FkRmlsZU4udmFsdWU9IiI7CiAgICAgICAgfSwKICAgICAgICBnb1ZvdGVDb25maXJtKCl7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuY29uZmlybQogICAgICAgICAgICAuY29uZmlybSgKICAgICAgICAgICAgICAgICLlj6rog73lm57lpI3kuIDmrKHvvIzkuI3og73mm7TmlLnvvIznoa7orqTlm57lpI3lkJc/IgogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuZ29Wb3RlKCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7ICAKICAgICAgICB9LAogICAgICAgIC8v5Y675oqV56WoCiAgICAgICAgZ29Wb3RlKCl7ICAKICAgICAgICAgICAgLy90aGlzLnRvUmVwb3J0KDMsIiIsdGhpcy5yYWRpb0dyb3VwKTsKICAgICAgICAgICAgbGV0IHJlcG9ydERhdGFzID0gewogICAgICAgICAgICAgICAgbXNnSWQ6IHRoaXMubXNnSWQsCiAgICAgICAgICAgICAgICBmZWVkYmFja1R5cGU6IDMsCiAgICAgICAgICAgICAgICB2b3RlSWQ6IHRoaXMuYmFja0RhdGEuZGF0YS52b3RlSW5mb0RUTy52b3RlSWQsCiAgICAgICAgICAgICAgICB2b3RlT3B0aW9uSWQ6dGhpcy5yYWRpb0dyb3VwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVwb3J0RGF0YXMpKQogICAgICAgICAgICBnZXREZXRhaWxUb1JlcG9ydChyZXBvcnREYXRhcykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuaKleelqOWujOaIkCIpIAogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsgCiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBtc2dJZDogdGhpcy5tc2dJZCwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVwb3J0cyhkYXRhKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGV0YWlscyh0aGlzLm1zZ0lkKTsKICAgICAgICAgICAgfSkuY2F0Y2goKHJlcyk9PnsKICAgICAgICAgICAgICAgIGlmKHJlcyE9bnVsbCYmcmVzLmRhdGEuY29kZT09IjkiKXsKICAgICAgICAgICAgICAgICAgICBzaG93U25hY2tiYXIoIuaKleelqOW3suaIquatoiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8v5Zue5aSN5L+h5oGvCiAgICAgICAgdG9SZXBvcnQoZmVlZGJhY2tUeXBlLGNvbnRlbnQsYXR0YWNobWVudExpc3QpewogICAgICAgICAgICBsZXQgcmVwb3J0RGF0YXMgPSB7CiAgICAgICAgICAgICAgICBtc2dJZDogdGhpcy5tc2dJZCwKICAgICAgICAgICAgICAgIGZlZWRiYWNrVHlwZTogZmVlZGJhY2tUeXBlLAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGNvbnRlbnQpewogICAgICAgICAgICAgICAgcmVwb3J0RGF0YXMuY29udGVudCA9IGNvbnRlbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoYXR0YWNobWVudExpc3QpewogICAgICAgICAgICAgICAgcmVwb3J0RGF0YXMuYXR0YWNobWVudExpc3QgPSBhdHRhY2htZW50TGlzdDsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShyZXBvcnREYXRhcykpCiAgICAgICAgICAgIGdldERldGFpbFRvUmVwb3J0KHJlcG9ydERhdGFzKS50aGVuKHJlcyA9PiB7IAogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsgCiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBtc2dJZDogdGhpcy5tc2dJZCwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVwb3J0cyhkYXRhKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGV0YWlscyh0aGlzLm1zZ0lkKTsKICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiLS0tLS0tLS0tLS0tPj09PT09IisgSlNPTi5zdHJpbmdpZnkoZS5yZXNwb25zZSkpCiAgICAgICAgICAgICAgICB0aGlzLmNhdXRpb25UZXh0ID0gIuWbnuWkjea2iOaBr+Wksei0pe+8jOivt+eojeWQjuWGjeivlSIKICAgICAgICAgICAgICAgIGxldCByZXNwID0gZS5yZXNwb25zZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAocmVzcCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzcCA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIj4+Pj4+IHJlc3BvbnNlIGlzIG51bGwgPDw8PDw8PDwiKQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2F1dGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXNwLmRhdGEgPT09IG51bGwgfHwgdHlwZW9mIHJlc3AuZGF0YSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiPj4+Pj4gZGF0YSBpcyBudWxsIDw8PDw8PDw8IikKICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwLmRhdGE7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT09IG51bGwgfHwgdHlwZW9mIGRhdGEuY29kZSA9PT0gInVuZGVmaW5lZCIgfHwgZGF0YS5jb2RlICE9PSA0KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIj4+Pj4+IGVycm9yIDw8PDw8PDw8IikKICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZXQgc2Vuc2l0aXZlV29yZHMgPSBkYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoc2Vuc2l0aXZlV29yZHMgPT09IG51bGwgfHx0eXBlb2Ygc2Vuc2l0aXZlV29yZHMgPT09ICJ1bmRlZmluZWQiIHx8IHNlbnNpdGl2ZVdvcmRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCI+Pj4+PiBzZW5zaXRpdmUgV29yZHMgYXJlIG51bGwgPDw8PDw8PDwiKQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2F1dGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmNvbmZpcm0uY29uZmlybSgi5oKo5Zue5aSN55qE5YaF5a655YyF5ZCr5pWP5oSf6K+N77yM6K+35Y675o6J6L+Z5Lqb5pWP5oSf6K+NOiIgK0pTT04uc3RyaW5naWZ5KHNlbnNpdGl2ZVdvcmRzKQogICAgICAgICAgICAgICAgICAgICkuY2F0Y2goKTsgIAogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHRvTWVzc2FnZVJlYWQoKXsKICAgICAgICAgICAgbGV0IHJlcXVlc3REYXRhcyA9IHsKICAgICAgICAgICAgICAgIGlkOiB0aGlzLm1zZ0lkLAogICAgICAgICAgICB9CiAgICAgICAgICAgIG1lc3NhZ2VSZWFkKHJlcXVlc3REYXRhcykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsgCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvL+WAkuiuoeaXtu+8jOWwhuaWh+eroOeKtuaAgeWPmOS4uuW3suivuwogICAgICAgIHRpbWVPdXRSZXBvcnQoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlgJLorqHml7bnu5PmnZ/vvIzmiornirbmgIHnva7kuLrlt7Lor7siKTsKICAgICAgICAgICAgdGhpcy50b01lc3NhZ2VSZWFkKCk7CiAgICAgICAgfQogICAgICAgIAogICAgfSwKfQo="},null]}