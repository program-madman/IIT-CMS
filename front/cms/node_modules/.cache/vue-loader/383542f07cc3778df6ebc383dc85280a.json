{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/myWithdraw.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/myWithdraw.vue","mtime":1640181455867},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAiQC9hc3NldHMvY3NzL2FydGljbGUuY3NzIjsKaW1wb3J0IHsgZ2V0QXJ0aWNsZUJ5U3RhdHVzQ2F0ZWdvcnkgfSBmcm9tICJAL2FwaS9nZXREYXRhLmpzIjsKaW1wb3J0IHsgaGlnaExpZ2h0VGV4dCwgZm9ybWF0SHRtbCB9IGZyb20gIkAvdXRpbHMvYXJ0aWNsZVV0aWxzLmpzIjsKaW1wb3J0IHsgYWVzRW5jcnlwdCB9IGZyb20gIkAvdXRpbHMvZW5jcnlwdGlvbi5qcyI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHNlYXJjaEJhcjogKCkgPT4gaW1wb3J0KCIuL2FydGljbGVMaXN0L3NlYXJjaEJhci52dWUiKSwKICAgIHBhZ2VMb2FkZXI6ICgpID0+IGltcG9ydCgiLi9hcnRpY2xlTGlzdC9wYWdlTG9hZGVyLnZ1ZSIpLAogICAgbG9hZGluZzogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9sb2FkaW5nLnZ1ZSIpLAogICAgZW1wdHlWaWV3OiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2VtcHR5LXZpZXcudnVlIiksCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogbnVsbCwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGxvYWRpbmd2aWV3OiB0cnVlLAogICAgICBlbXB0eVZpZXdTaG93OiBmYWxzZSwKICAgICAgZGVwYXJ0bWVudHM6IFsi5YWo6YOoIl0sCiAgICAgIGJvcmRlclN0YXR1czogImJvcmRlci1sZWZ0OjNweCBzb2xpZCAjMTg2N0MwICFpbXBvcnRhbnQ7IiwKICAgICAgaXRlbXM6IFtdLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgaGFzRWRpdFBlcm1pc3Npb246ICJ1c2VyL2hhc0VkaXRQZXJtaXNzaW9uIiwKICAgIH0pLAogIH0sCiAgbWV0aG9kczogewogICAgb25TZWFyY2goZGF0YSkgewogICAgICBpZiAodGhpcy5sb2FkaW5nID09IHRydWUpIHJldHVybjsKICAgICAgdGhpcy5pdGVtcyA9IFtdOwogICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICB0aGlzLmRhdGEubXNnU3RhdHVzID0gMjsKICAgICAgdGhpcy5sb2FkaW5ndmlldyA9IHRydWU7CiAgICAgIHRoaXMuZW1wdHlWaWV3U2hvdyA9IGZhbHNlOwogICAgICB0aGlzLnNlYXJjaEFydGljbGVzKHRoaXMuZGF0YSk7CiAgICB9LAogICAgb25SZXNldChkYXRhKSB7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcgPT0gdHJ1ZSkgcmV0dXJuOwogICAgICB0aGlzLm9uU2VhcmNoKGRhdGEpOwogICAgfSwKCiAgICBvbkxvYWRNb3JlKCkgewogICAgICBpZiAodGhpcy5sb2FkaW5nID09IHRydWUpIHJldHVybjsKICAgICAgdGhpcy5zZWFyY2hBcnRpY2xlcyh0aGlzLmRhdGEpOwogICAgfSwKICAgIHNlYXJjaEFydGljbGVzKGRhdGEpIHsKICAgICAgaWYgKHRoaXMubG9hZGluZyA9PSB0cnVlKSByZXR1cm47CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGdldEFydGljbGVCeVN0YXR1c0NhdGVnb3J5KGRhdGEpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICByZXMgPT0gbnVsbCB8fAogICAgICAgICAgICB0eXBlb2YgcmVzID09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgICAgIHJlcy5jb2RlID09IG51bGwgfHwKICAgICAgICAgICAgdHlwZW9mIHJlcy5jb2RlID09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgICAgIHJlcy5jb2RlICE9IDAgfHwKICAgICAgICAgICAgcmVzLmRhdGEubWVzc2FnZUxpc3QubGVuZ3RoID09IDAKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLnNob3dFbXB0eVZpZXdJZk5lZWRlZCgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMuZGF0YS5wYWdlTnVtID09IDEpIHsKICAgICAgICAgICAgbGV0IGRlcGFydG1lbnRzID0gWyLlhajpg6giXTsKICAgICAgICAgICAgdGhpcy5kZXBhcnRtZW50cyA9IGRlcGFydG1lbnRzLmNvbmNhdChyZXMuZGF0YS5kZXBhcnRtZW50cyk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5kYXRhLnBhZ2VOdW0rKzsKICAgICAgICAgIGxldCBhVGVtcCA9IFtdOwogICAgICAgICAgcmVzLmRhdGEubWVzc2FnZUxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICBsZXQgZFRlbXAgPSB7fTsKICAgICAgICAgICAgZFRlbXBbImlkIl0gPSBpdGVtLmlkOwogICAgICAgICAgICBkVGVtcFsidGl0bGUiXSA9IGZvcm1hdEh0bWwoaXRlbS50aXRsZSk7CiAgICAgICAgICAgIGRUZW1wWyJpbnRybyJdID0gZm9ybWF0SHRtbChpdGVtLmNvbnRlbnQpOwogICAgICAgICAgICAvL+mDqOmXqAogICAgICAgICAgICBkVGVtcFsiZGVwdG1lbnQiXSA9IGl0ZW0uY3JlYXRvckNvbXBhbnluYW1lOwogICAgICAgICAgICAvL+abtOaWsOaXtumXtAogICAgICAgICAgICBkVGVtcFsibGFzdFVwZGF0ZVRpbWUiXSA9IGl0ZW0ubGFzdFVwZGF0ZVRpbWU7CiAgICAgICAgICAgIC8v6ZmE5Lu25pWw6YePCiAgICAgICAgICAgIGRUZW1wWyJhdHRhY2htZW50Q291bnQiXSA9IGl0ZW0uYXR0YWNobWVudENvdW50OwogICAgICAgICAgICAvL+WbnuWkjeaVsAogICAgICAgICAgICBkVGVtcFsicmVwbHlOdW0iXSA9ICFpdGVtLmZlZWRiYWNrQ291bnQgPyAwIDogaXRlbS5mZWVkYmFja0NvdW50OwogICAgICAgICAgICAvL+mYheivu+aVsAogICAgICAgICAgICBkVGVtcFsicmVhZE51bSJdID0gIWl0ZW0ucmVhZEF1ZGllbmNlQ291bnQKICAgICAgICAgICAgICA/IDAKICAgICAgICAgICAgICA6IGl0ZW0ucmVhZEF1ZGllbmNlQ291bnQ7CiAgICAgICAgICAgIC8v5paH5Lu257yW5Y+3CiAgICAgICAgICAgIGRUZW1wWyJhcnRpY2xlTm8iXSA9IGl0ZW0ubXNnTnVtYmVyOwoKICAgICAgICAgICAgYVRlbXAucHVzaChkVGVtcCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLmNvbmNhdChhVGVtcCk7CiAgICAgICAgICBoaWdoTGlnaHRUZXh0KHRoaXMuaXRlbXMsIHRoaXMuZGF0YS5zZWFyY2hDb250ZW50KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgdGhpcy5zaG93RW1wdHlWaWV3SWZOZWVkZWQoKTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5sb2FkaW5ndmlldyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIHNob3dFbXB0eVZpZXdJZk5lZWRlZCgpIHsKICAgICAgaWYgKHRoaXMuZGF0YT09bnVsbCB8fCB0aGlzLmRhdGEucGFnZU51bSA9PSAxKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5lbXB0eVZpZXdTaG93ID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICAvL+i3s+i9rOivpuaDhemhtQogICAgdG9EZXRhaWwoaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvYXJ0Y2xlRGV0YWlsIiwKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IGFlc0VuY3J5cHQoaWQgKyAiIiksCiAgICAgICAgICBpc015UHVibGlzaDogdHJ1ZSwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgICAvL+i3s+i9rOWPpuWtmOS4uuWPkeW4g+aWh+eroAogICAgc2F2ZUFzKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAicHVibGlzaEFydGljbGUiLAogICAgICAgIHBhcmFtczogeyBpZDogaWQgfSwKICAgICAgfSk7CiAgICB9LAogIH0sCiAgLy/ov4fmu6TmloflrZcKICBmaWx0ZXJzOiB7CiAgICBsZW5naHRoKHRleHQsIGxlbmd0aCwgc3VmZml4ID0gIi4uLiIpIHsKICAgICAgaWYgKCF0ZXh0KSByZXR1cm47CiAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxbXj5dKz4vZywgIiIpOwogICAgICBpZiAodGV4dC5sZW5ndGggPD0gbGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgIH0KICAgICAgcmV0dXJuICh0ZXh0ICsgIiIpLnJlcGxhY2UoL1xuL2csICI8YnIvPiIpLnN1YnN0cmluZygwLCBsZW5ndGgpICsgc3VmZml4OwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["myWithdraw.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myWithdraw.vue","sourceRoot":"src/views/page","sourcesContent":["<template>\n  <v-container fluid>\n    <v-row no-gutters pa-0 ma-0>\n      <v-col sm=\"12\">\n        <search-bar\n          @onSearch=\"onSearch\"\n          @onReset=\"onReset\"\n          :departments=\"departments\"\n        />\n        <loading v-if=\"loadingview\" />\n        <empty-view v-if=\"emptyViewShow\" />\n        <v-row align=\"center\" dense class=\"pa-0 ma-0\">\n          <v-col v-for=\"(item, i) in items\" :key=\"i\" cols=\"12\">\n            <div @click=\"toDetail(item.id)\" class=\"card pt-4\">\n              <div class=\"mt-0 mb-0 ml-4 pa-0\" style=\"display: flex\">\n                <span class=\"deptment\">{{ item.deptment }}</span>\n              </div>\n              <span class=\"article-time-text ma-0 pa-0 ml-4\">\n                {{ item.lastUpdateTime }}\n              </span>\n\n              <div class=\"pa-0 ma-0 ml-4 mt-2\">\n                <p\n                  class=\"article-title-text mt-0 pa-0\"\n                  :style=\"item.readStatus ? 'color:#1867C0' : ''\"\n                  v-html=\"$options.filters.lenghth(item.title, 50)\"\n                ></p>\n                <p\n                  class=\"article-intro-text pa-0 pt-1 html-content\"\n                  v-html=\"$options.filters.lenghth(item.intro, 90)\"\n                ></p>\n                <div class=\"article-report-text mt-2 mr-3 ml-0 pa-0\">\n                  <span v-if=\"item.attachmentCount\" class=\"mr-6\"\n                    >附件({{ item.attachmentCount }})</span\n                  >\n                  <span class=\"mr-6\">阅读量({{ item.readNum }})</span>\n                  <span class=\"mr-6\">回复({{ item.replyNum }})</span>\n                  <span v-if=\"item.articleNo\" class=\"mr-6\"\n                    >文章编号:{{ item.articleNo }}</span\n                  >\n                </div>\n              </div>\n\n              <div class=\"mt-2 mb-1 ml-4 pa-0 pb-3 caption\">\n                <button\n                  class=\"article-operator-text\"\n                  v-if=\"hasEditPermission\"\n                  @click.stop=\"saveAs(item.id)\"\n                >\n                  <v-icon class=\"article-operator-icon\">\n                    mdi-file-plus-outline\n                  </v-icon>\n                  另存为\n                </button>\n              </div>\n            </div>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n    <page-loader @onLoadMore=\"onLoadMore\" />\n  </v-container>\n</template>\n\n<script>\nimport \"@/assets/css/article.css\";\nimport { getArticleByStatusCategory } from \"@/api/getData.js\";\nimport { highLightText, formatHtml } from \"@/utils/articleUtils.js\";\nimport { aesEncrypt } from \"@/utils/encryption.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  components: {\n    searchBar: () => import(\"./articleList/searchBar.vue\"),\n    pageLoader: () => import(\"./articleList/pageLoader.vue\"),\n    loading: () => import(\"@/components/base/loading.vue\"),\n    emptyView: () => import(\"@/components/base/empty-view.vue\"),\n  },\n  data() {\n    return {\n      data: null,\n      loading: false,\n      loadingview: true,\n      emptyViewShow: false,\n      departments: [\"全部\"],\n      borderStatus: \"border-left:3px solid #1867C0 !important;\",\n      items: [],\n    };\n  },\n  computed: {\n    ...mapGetters({\n      hasEditPermission: \"user/hasEditPermission\",\n    }),\n  },\n  methods: {\n    onSearch(data) {\n      if (this.loading == true) return;\n      this.items = [];\n      this.data = data;\n      this.data.msgStatus = 2;\n      this.loadingview = true;\n      this.emptyViewShow = false;\n      this.searchArticles(this.data);\n    },\n    onReset(data) {\n      if (this.loading == true) return;\n      this.onSearch(data);\n    },\n\n    onLoadMore() {\n      if (this.loading == true) return;\n      this.searchArticles(this.data);\n    },\n    searchArticles(data) {\n      if (this.loading == true) return;\n      this.loading = true;\n      getArticleByStatusCategory(data)\n        .then((res) => {\n          if (\n            res == null ||\n            typeof res == \"undefined\" ||\n            res.code == null ||\n            typeof res.code == \"undefined\" ||\n            res.code != 0 ||\n            res.data.messageList.length == 0\n          ) {\n            this.showEmptyViewIfNeeded();\n            return;\n          }\n\n          if (this.data.pageNum == 1) {\n            let departments = [\"全部\"];\n            this.departments = departments.concat(res.data.departments);\n          }\n\n          this.data.pageNum++;\n          let aTemp = [];\n          res.data.messageList.forEach((item) => {\n            let dTemp = {};\n            dTemp[\"id\"] = item.id;\n            dTemp[\"title\"] = formatHtml(item.title);\n            dTemp[\"intro\"] = formatHtml(item.content);\n            //部门\n            dTemp[\"deptment\"] = item.creatorCompanyname;\n            //更新时间\n            dTemp[\"lastUpdateTime\"] = item.lastUpdateTime;\n            //附件数量\n            dTemp[\"attachmentCount\"] = item.attachmentCount;\n            //回复数\n            dTemp[\"replyNum\"] = !item.feedbackCount ? 0 : item.feedbackCount;\n            //阅读数\n            dTemp[\"readNum\"] = !item.readAudienceCount\n              ? 0\n              : item.readAudienceCount;\n            //文件编号\n            dTemp[\"articleNo\"] = item.msgNumber;\n\n            aTemp.push(dTemp);\n          });\n          this.items = this.items.concat(aTemp);\n          highLightText(this.items, this.data.searchContent);\n        })\n        .catch((res) => {\n          console.log(res);\n          this.showEmptyViewIfNeeded();\n        })\n        .finally(() => {\n          this.loading = false;\n          this.loadingview = false;\n        });\n    },\n    showEmptyViewIfNeeded() {\n      if (this.data==null || this.data.pageNum == 1) {\n        this.loading = false;\n        this.emptyViewShow = true;\n      }\n    },\n\n    //跳转详情页\n    toDetail(id) {\n      this.$router.push({\n        path: \"/artcleDetail\",\n        query: {\n          id: aesEncrypt(id + \"\"),\n          isMyPublish: true,\n        },\n      });\n    },\n    //跳转另存为发布文章\n    saveAs(id) {\n      this.$router.push({\n        name: \"publishArticle\",\n        params: { id: id },\n      });\n    },\n  },\n  //过滤文字\n  filters: {\n    lenghth(text, length, suffix = \"...\") {\n      if (!text) return;\n      text = text.replace(/<[^>]+>/g, \"\");\n      if (text.length <= length) {\n        return text;\n      }\n      return (text + \"\").replace(/\\n/g, \"<br/>\").substring(0, length) + suffix;\n    },\n  },\n};\n</script>\n<style>\n.html-content p {\n  margin-bottom: 0px;\n}\n</style>"]}]}