{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/components/dashboard/View.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/components/dashboard/View.vue","mtime":1641641123781},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIkAvdXRpbHMvZXZlbnQtYnVzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEYXNoYm9hcmRDb3JlVmlldyIsCiAgY29tcG9uZW50czogewogICAgSWZyYW1lUm91dGVyVmlldzogKCkgPT4gaW1wb3J0KCJAL2NvbXBvbmVudHMvYmFzZS9pZnJhbWUtcm91dGVyLXZpZXciKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJMaXN0OiBbXSwKICAgICAgdGFic1ZpZXc6IHRydWUsCiAgICAgIHRyZWU6IHRydWUsCiAgICAgIGRhdGFDb3VudDogdGhpcy4kc3RvcmUuc3RhdGUuY291bnQsCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSh0bykgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgdmFyIHRlbWEgPSB0aGlzLnRhYkxpc3Quc29tZSgodmFsLCBpbmRleCkgPT4gewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXEKCiAgICAgICAgaWYgKAogICAgICAgICAgdmFsLnBhdGggPT0gdG8ucGF0aCB8fAogICAgICAgICAgKHR5cGVvZiB0by5tZXRhLmdyb3VwICE9ICJ1bmRlZmluZWQiICYmIHZhbC5ncm91cCA9PSB0by5tZXRhLmdyb3VwKQogICAgICAgICkgewogICAgICAgICAgdGhpcy50YWJMaXN0LnNwbGljZShpbmRleCwgMSwgewogICAgICAgICAgICBuYW1lOiB0by5uYW1lLAogICAgICAgICAgICBwYXRoOiB0by5wYXRoLAogICAgICAgICAgICB0aXRsZTogdG8ubmFtZSwKICAgICAgICAgICAgZ3JvdXA6IHRvLm1ldGEuZ3JvdXAsCiAgICAgICAgICAgIHF1ZXJ5OiB0by5xdWVyeSwKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXEKICAgICAgaWYgKHRlbWEgPT0gZmFsc2UpIHsKICAgICAgICB0aGlzLnRhYkxpc3QucHVzaCh7CiAgICAgICAgICBuYW1lOiB0by5uYW1lLAogICAgICAgICAgcGF0aDogdG8ucGF0aCwKICAgICAgICAgIHRpdGxlOiB0by5uYW1lLAogICAgICAgICAgZ3JvdXA6IHRvLm1ldGEuZ3JvdXAsCiAgICAgICAgICBpZnJhbWU6IHRvLmlmcmFtZUNvbXBvbmVudCwKICAgICAgICAgIHF1ZXJ5OiB0by5xdWVyeSwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9LAoKICBtb3VudGVkKCkgewoKICAgICBFdmVudEJ1cy4kb24oImNsb3NlVGFiIiwgKG5hbWUpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygiY2xvc2VUYWI6IituYW1lKTsKICAgICAgICB0aGlzLmNsb3NlVGFiQnlOYW1lKG5hbWUpCiAgICB9KSwKCiAgICBFdmVudEJ1cy4kb24oInB1Ymxpc2hTdWNlc3NmdWwiLCAoKSA9PiB7CiAgICAgIHZhciBpbmRleCA9IHRoaXMudGFiTGlzdC5maW5kSW5kZXgoKHQpID0+IHsKICAgICAgICByZXR1cm4gdC5wYXRoID09ICIvcHVibGlzaEFydGljbGUiOwogICAgICB9KTsKICAgICAgaWYgKGluZGV4ID49IDApIHsKICAgICAgICB0aGlzLnRhYkxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICB2YXIgaW5kZXhQYWdlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sidXNlci9nZXRJbmRleFBhZ2UiXTsKICAgICAgICBpZiAoaW5kZXhQYWdlICE9IG51bGwgJiYgdHlwZW9mIGluZGV4UGFnZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIiArIGluZGV4UGFnZS5wYXRoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMudGFiTGlzdC5wdXNoKHsKICAgICAgbmFtZTogdGhpcy4kcm91dGUubmFtZSwKICAgICAgcGF0aDogdGhpcy4kcm91dGUucGF0aCwKICAgICAgdGl0bGU6IHRoaXMuJHJvdXRlLm5hbWUsCiAgICAgIGdyb3VwOiB0aGlzLiRyb3V0ZS5tZXRhLmdyb3VwLAogICAgICBxdWVyeTogdGhpcy4kcm91dGUucXVlcnksCiAgICB9KTsKCiAgICB0aGlzLnRhYnNWaWV3ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGFic1ZpZXciKSB8fCB0cnVlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlVGFiKGluZGV4KSB7ICAKICAgICAgICBjb25zb2xlLmxvZygiY2xvc2VUYWI6IitpbmRleCk7ICAgICAgICAKICAgICAgICB0aGlzLnRhYkxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy50YWJMaXN0W3RoaXMudGFiTGlzdC5sZW5ndGggLSAxXTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IHRhcmdldC5wYXRoLCBxdWVyeTogdGFyZ2V0LnF1ZXJ5IH0pOwogICAgfSwKCiAgICBvblRhYmxlSWNvbkNsaWNrKGluZGV4KXsgICAKICAgICAgY29uc29sZS5sb2coIm9uVGFibGVJY29uQ2xpY2s6IitpbmRleCk7ICAgICAgCgogICAgICBpZigicHVibGlzaEFydGljbGUiPT10aGlzLnRhYkxpc3RbaW5kZXhdLm5hbWUpewogICAgICAgICAgY29uc29sZS5sb2coImNsb3NlIHB1Ymxpc2hBcnRpY2xlIik7CiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgid2FudENsb3NlUHVibGljYXJ0aWNsZSIpCiAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy5jbG9zZVRhYihpbmRleCk7CiAgICAgIH0gICAgCiAgICB9LAoKICAgIGNsb3NlVGFiQnlOYW1lKG5hbWUpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy50YWJMaXN0LmZpbmRJbmRleCgodCkgPT4gewogICAgICAgIHJldHVybiB0Lm5hbWUgPT0gbmFtZTsKICAgICAgfSk7CiAgICAgIGlmKGluZGV4Pj0wKXsKICAgICAgICB0aGlzLmNsb3NlVGFiKGluZGV4KTsKICAgICAgfQogICAgfSwKCiAgfSwKfTsK"},{"version":3,"sources":["View.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"View.vue","sourceRoot":"src/components/dashboard","sourcesContent":["<template>\n  <v-main>\n    <v-expand-transition>\n      <v-tabs\n        v-show=\"tabsView && tabList.length\"\n        style=\"position: sticky; top: 64px; z-index: 5\"\n        class=\"tabs\"\n        show-arrows\n      >\n        <v-tab\n          v-for=\"(item, i) in tabList\"\n          :key=\"item.name\"\n          :name=\"i\"\n          :to=\"{ path: item.path, query: item.query }\"\n          style=\"text-transform: none\"\n        >\n          <p>{{ $t(item.title) }}</p>\n          <v-icon\n            v-if=\"tabList.length != 1\"\n            size=\"12\"\n            class=\"ml-4 closetab\"\n            @click.stop.prevent=\"onTableIconClick(i)\"\n            @contextmenu.stop.prevent=\"\"\n          >\n            mdi-close\n          </v-icon>\n        </v-tab>\n      </v-tabs>\n    </v-expand-transition>\n\n    <iframe-router-view />\n  </v-main>\n</template>\n\n<script>\n// eslint-disable-next-line no-unused-vars\nimport { mapState } from \"vuex\";\nimport { EventBus } from \"@/utils/event-bus\";\nexport default {\n  name: \"DashboardCoreView\",\n  components: {\n    IframeRouterView: () => import(\"@/components/base/iframe-router-view\"),\n  },\n  data() {\n    return {\n      tabList: [],\n      tabsView: true,\n      tree: true,\n      dataCount: this.$store.state.count,\n    };\n  },\n  watch: {\n    $route(to) {\n      // eslint-disable-next-line no-unused-vars\n      var tema = this.tabList.some((val, index) => {\n        // eslint-disable-next-line eqeqeq\n\n        if (\n          val.path == to.path ||\n          (typeof to.meta.group != \"undefined\" && val.group == to.meta.group)\n        ) {\n          this.tabList.splice(index, 1, {\n            name: to.name,\n            path: to.path,\n            title: to.name,\n            group: to.meta.group,\n            query: to.query,\n          });\n          return true;\n        }\n      });\n\n      // eslint-disable-next-line eqeqeq\n      if (tema == false) {\n        this.tabList.push({\n          name: to.name,\n          path: to.path,\n          title: to.name,\n          group: to.meta.group,\n          iframe: to.iframeComponent,\n          query: to.query,\n        });\n      }\n    },\n  },\n\n  mounted() {\n\n     EventBus.$on(\"closeTab\", (name) => {\n        console.log(\"closeTab:\"+name);\n        this.closeTabByName(name)\n    }),\n\n    EventBus.$on(\"publishSucessful\", () => {\n      var index = this.tabList.findIndex((t) => {\n        return t.path == \"/publishArticle\";\n      });\n      if (index >= 0) {\n        this.tabList.splice(index, 1);\n        var indexPage = this.$store.getters[\"user/getIndexPage\"];\n        if (indexPage != null && typeof indexPage != undefined) {\n          this.$router.push(\"/\" + indexPage.path);\n        }\n        return;\n      }\n    });\n    this.tabList.push({\n      name: this.$route.name,\n      path: this.$route.path,\n      title: this.$route.name,\n      group: this.$route.meta.group,\n      query: this.$route.query,\n    });\n\n    this.tabsView = JSON.parse(localStorage.getItem(\"tabsView\") || true);\n  },\n  methods: {\n    closeTab(index) {  \n        console.log(\"closeTab:\"+index);        \n        this.tabList.splice(index, 1);\n        let target = this.tabList[this.tabList.length - 1];\n        this.$router.push({ path: target.path, query: target.query });\n    },\n\n    onTableIconClick(index){   \n      console.log(\"onTableIconClick:\"+index);      \n\n      if(\"publishArticle\"==this.tabList[index].name){\n          console.log(\"close publishArticle\");\n          EventBus.$emit(\"wantClosePublicarticle\")\n      }else{\n          this.closeTab(index);\n      }    \n    },\n\n    closeTabByName(name) {\n      var index = this.tabList.findIndex((t) => {\n        return t.name == name;\n      });\n      if(index>=0){\n        this.closeTab(index);\n      }\n    },\n\n  },\n};\n</script>\n<style>\n.tabs.theme--light.v-tabs > .v-tabs-bar {\n  background-color: #f5f6f7ff !important;\n  box-shadow: inset 0px -1px 0px 0px #e4e8ebff;\n}\n.tabs .v-tabs-bar {\n  border-radius: inherit;\n  height: 34px;\n}\n.tabs .v-tabs-slider-wrapper {\n  display: none;\n}\n\n.tabs.theme--light .v-tab {\n  border-radius: 4px 4px 0px 0px;\n  padding: 0 8px;\n  margin: 7px 0 0 8px;\n  background: #f5f6f7ff;\n  border: 1px solid #e4e8ebff;\n  box-shadow: inset -1px -1px 0px 0px #e4e8ebff;\n  height: 28px;\n}\n\n.tabs.theme--light .v-tab--active {\n  border-radius: 4px 4px 0px 0px;\n  background: #ffffffff;\n  border: 1px solid #e4e8ebff;\n  border-bottom: 0;\n  box-shadow: inset 0px -1px 0px 0px #e4e8ebff;\n}\n\n.v-tab p {\n  margin: 0;\n  font-family: PingFang SC;\n  font-weight: regular;\n  font-size: 12px;\n  letter-spacing: 0px;\n  max-width: 60px;\n  height: 100%;\n  line-height: 28px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 1;\n  white-space: nowrap;\n}\n\n.v-tab--active .v-icon.v-icon.closetab {\n  display: inline-flex;\n}\n\n.v-icon.v-icon.closetab {\n  display: none;\n}\n</style>\n"]}]}