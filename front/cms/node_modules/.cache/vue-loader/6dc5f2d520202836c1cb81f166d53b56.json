{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/publish.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/views/page/publishArticle/publish.vue","mtime":1640382236585},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgcHVibGlzaE1lc3NhZ2UsCiAgZ2V0RGVhbGVyTGlzdCwKICBnZXREZWFsZXJEZXBMaXN0LAogIGdldE9lbURlcExpc3QsCn0gZnJvbSAiQC9hcGkvZ2V0RGF0YS5qcyI7CmltcG9ydCAiQC91dGlscy90aW1lRm9ybWF0ZS5qcyI7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAiQC91dGlscy9ldmVudC1idXMiOwppbXBvcnQgeyBzaG93U25hY2tiYXIsIGNsb3NlU25hY2tiYXIgfSBmcm9tICJAL3V0aWxzL3NuYWNrYmFyLmpzIjsKaW1wb3J0IHsgVGhyb3R0bGUsIGRlZXBDbG9uZSB9IGZyb20gIkAvdXRpbHMvdG9vbHMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIG9wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIHZvdGVFbmFibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgZGVhbGVyOiB7CiAgICAgIHR5cGU6IFtPYmplY3QsIEFycmF5LCBTdHJpbmddLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgfSwKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHRpbWVQaWNrZXI6ICgpID0+IGltcG9ydCgiLi90aW1lUGlja2VyLnZ1ZSIpLAogICAgY29uZmlybTogKCkgPT4gaW1wb3J0KCIuL3B1Ymxpc2hDb25maXJtLnZ1ZSIpLAogICAgYWxlcnRUaW1lOiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2FsZXJ0VGltZSIpLAogICAgbG9hZGluZ0FsZXJ0OiAoKSA9PiBpbXBvcnQoIkAvY29tcG9uZW50cy9iYXNlL2xvYWRpbmdBbGVydCIpLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogdGhpcy5vcGVuLAogICAgICBtc2dOdW1iZXI6IG51bGwsCiAgICAgIHJlbGVhc2VUaW1lOiAiIiwKICAgICAgZWZmZWN0aXZlVGltZTogIiIsCiAgICAgIGludmFsaWRUaW1lOiAiIiwKICAgICAgZmVlZGJhY2tUeXBlOiA0LAogICAgICB1cGxvYWRpbmc6IGZhbHNlLAogICAgICByZXBseVR5cGVzOiBbCiAgICAgICAgewogICAgICAgICAgdGV4dDogIuaXoOmcgOWbnuWkjSIsCiAgICAgICAgICB2YWx1ZTogNCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICLlt7Lor7vlm57miaciLAogICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAi5paH5a2X5Zue5aSNIiwKICAgICAgICAgIHZhbHVlOiAxLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIumZhOS7tiIsCiAgICAgICAgICB2YWx1ZTogMiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICLmipXnpagiLAogICAgICAgICAgdmFsdWU6IDMsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY2hfZGVsZWFyX2Rpc2FibGU6IGZhbHNlLAogICAgICBjaF9kZWxlYXI6IGZhbHNlLAogICAgICBjaF9hcmVhX3N1cHA6IFtdLAogICAgICBjaF9jb21fc3VwcDogW10sCiAgICAgIGNoX2RlbGVhcl9zZWxlY3Q6IFtdLAogICAgICBjaF9kZWxlYXJfZGVwbGlzdF9hbGw6IGZhbHNlLAogICAgICBjaF9kZWxlYXJfZGVwbGlzdDogW10sCiAgICAgIGNoX29lbTogZmFsc2UsCiAgICAgIGNoX29lbV9kZXBsaXN0OiBbXSwKICAgIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdERlYWxlckxpc3QoKTsKICAgIHRoaXMuaW5pdERlYWxlckRlcCgpOwogICAgdGhpcy5pbml0T2VtRGVwKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgcmVzZXRQdWJsaXNoVGltZSgpIHsKICAgICAgdGhpcy5yZWxlYXNlVGltZSA9ICIiOwogICAgfSwKCiAgICByZXNldFBvbGljeVRpbWUoKSB7CiAgICAgIHRoaXMuZWZmZWN0aXZlVGltZSA9ICIiOwogICAgICB0aGlzLmludmFsaWRUaW1lID0gIiI7CiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZURpYWxvZyIpOwogICAgICBjbG9zZVNuYWNrYmFyKCk7CiAgICB9LAogICAgaW5pdERlYWxlckxpc3QoKSB7CiAgICAgIGdldERlYWxlckxpc3QoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZyhKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSA9PSAidW5kZWZpbmVkIiB8fCBkYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBhcmVhU2V0ID0gbmV3IFNldCgpOwogICAgICAgICAgdmFyIGRlYWxlclR5cGVTZXQgPSBuZXcgU2V0KCk7CiAgICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QgPSBbXTsKICAgICAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbGV0IGFyZWEgPSBpdGVtLmFyZWE7CiAgICAgICAgICAgIGlmIChhcmVhICE9IG51bGwgJiYgdHlwZW9mIGFyZWEgIT0gdW5kZWZpbmVkICYmIGFyZWEgIT0gIiIpIHsKICAgICAgICAgICAgICBhcmVhU2V0LmFkZChhcmVhKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdHlwZSA9IGl0ZW0uZGVhbGVyVHlwZTsKICAgICAgICAgICAgaWYgKHR5cGUgIT0gbnVsbCAmJiB0eXBlb2YgdHlwZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBpZiAodHlwZSA9PSAwKSB0eXBlICs9IDM7CiAgICAgICAgICAgICAgZGVhbGVyVHlwZVNldC5hZGQodHlwZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCB0ZW1wID0gewogICAgICAgICAgICAgIGlkOiBpbmRleCwKICAgICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgICBkaXNhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICBjb21wYW55TmFtZTogaXRlbS5jb21wYW55TmFtZSwKICAgICAgICAgICAgICBjb21wYW55Q29kZTogaXRlbS5jb21wYW55Q29kZSwKICAgICAgICAgICAgICBjb21wYW55VHlwZTogaXRlbS5jb21wYW55VHlwZSwKICAgICAgICAgICAgICBkZWFsZXJUeXBlOiBpdGVtLmRlYWxlclR5cGUsCiAgICAgICAgICAgICAgYXJlYTogaXRlbS5hcmVhLAogICAgICAgICAgICAgIGFyZWFsYWI6IGl0ZW0uYXJlYSA9PSBudWxsID8gbnVsbCA6IGl0ZW0uYXJlYS5zdWJzdHJpbmcoMCwgMSksCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5wdXNoKHRlbXApOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3RfdmlldyA9IGRlZXBDbG9uZSh0aGlzLmNoX2RlbGVhcl9zZWxlY3QpOwoKICAgICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwID0gW107CiAgICAgICAgICBBcnJheS5mcm9tKGFyZWFTZXQpLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGxldCB0ZW1wID0gewogICAgICAgICAgICAgIGlkOiBpbmRleCwKICAgICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgICBsYWJsZTogaXRlbSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHAucHVzaCh0ZW1wKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHRoaXMuY2hfY29tX3N1cHAgPSBbXTsKCiAgICAgICAgICBBcnJheS5mcm9tKGRlYWxlclR5cGVTZXQpCiAgICAgICAgICAgIC5zb3J0KCkKICAgICAgICAgICAgLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgICAgICBpZDogaW5kZXgsCiAgICAgICAgICAgICAgICBpc0NoZWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxhYmxlOiB0aGlzLmdldERlYWxlclR5cGVEZXNjKGl0ZW0pLAogICAgICAgICAgICAgICAgdHlwZTogaXRlbSAlIDMsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLnB1c2godGVtcCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCk7CiAgICB9LAoKICAgIGluaXREZWFsZXJEZXAoKSB7CiAgICAgIGdldERlYWxlckRlcExpc3QoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSA9PSAidW5kZWZpbmVkIiB8fCBkYXRhLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QgPSBbXTsKICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgICAgICBpZDoga2V5LAogICAgICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlLAogICAgICAgICAgICAgIHZhbHVlOiBkYXRhW2tleV0sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCk7CiAgICB9LAogICAgaW5pdE9lbURlcCgpIHsKICAgICAgZ2V0T2VtRGVwTGlzdCgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKCFyZXMgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgaWYgKCFkYXRhIHx8IHR5cGVvZiBkYXRhID09ICJ1bmRlZmluZWQiIHx8IGRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuY2hfb2VtX2RlcGxpc3QgPSBbXTsKICAgICAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgICAgaWQ6IGluZGV4LAogICAgICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlLAogICAgICAgICAgICAgIGNvbXBhbnlOYW1lOiBpdGVtLmNvbXBhbnlOYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlDb2RlOiBpdGVtLmNvbXBhbnlDb2RlLAogICAgICAgICAgICAgIGNvbXBhbnlUeXBlOiBpdGVtLmNvbXBhbnlUeXBlLAogICAgICAgICAgICAgIGRlYWxlclR5cGU6IGl0ZW0uZGVhbGVyVHlwZSwKICAgICAgICAgICAgICBhcmVhOiBpdGVtLmFyZWEsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hfb2VtX2RlcGxpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy5jaF9vZW1fZGVwbGlzdCkpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCk7CiAgICB9LAogICAgZ2V0RGVhbGVyVHlwZURlc2ModHlwZSkgewogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICByZXR1cm4gIjRz5bqXIjsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICByZXR1cm4gIuS6jOe6p+e9keeCuSI7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmV0dXJuICLni6znq4vllK7lkI4iOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gIuacquWIhuexuyI7CiAgICAgIH0KICAgIH0sCgogICAgLy/pgInmi6nlhajpg6gKICAgIHNlbGVjdEFsbERlbGVhcigpIHsKICAgICAgdmFyIGlzU2VsZWN0ZWQgPSB0aGlzLmNoX2RlbGVhcjsKICAgICAgdGhpcy5jaF9hcmVhX3N1cHAuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGl0ZW0uaXNDaGVjayA9IGlzU2VsZWN0ZWQ7CiAgICAgIH0pOwoKICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaXRlbS5pc0NoZWNrID0gaXNTZWxlY3RlZDsKICAgICAgfSk7CgogICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGl0ZW0uaXNDaGVjayA9IGlzU2VsZWN0ZWQ7CiAgICAgIH0pOwogICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QgPSBkZWVwQ2xvbmUodGhpcy5jaF9kZWxlYXJfc2VsZWN0KTsKICAgIH0sCiAgICBzZWxlY3RBbGxEZXBsaXN0KCkgewogICAgICB2YXIgaXNTZWxlY3RlZCA9IHRoaXMuY2hfZGVsZWFyX2RlcGxpc3RfYWxsOwogICAgICB0aGlzLmNoX2RlbGVhcl9kZXBsaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpdGVtLmlzQ2hlY2sgPSBpc1NlbGVjdGVkOwogICAgICB9KTsKCiAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3QgPSBkZWVwQ2xvbmUodGhpcy5jaF9kZWxlYXJfZGVwbGlzdCk7CiAgICB9LAogICAgc2VsZWN0QWxsT2VtKCkgewogICAgICB2YXIgaXNTZWxlY3RlZCA9IHRoaXMuY2hfb2VtOwogICAgICB0aGlzLmNoX29lbV9kZXBsaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpdGVtLmlzQ2hlY2sgPSBpc1NlbGVjdGVkOwogICAgICB9KTsKICAgIH0sCgogICAgb25BcmVhU2VsZWN0Q2hhbmdlKGl0ZW0pIHsKICAgICAgaWYgKCFpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXQpID0+IHsKICAgICAgICAgIGlmIChpdC5hcmVhID09IGl0ZW0ubGFibGUpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2V0RGVhbGVyVW5DaGVja2VkSWZOZWVkKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXIgPSB0cnVlOwogICAgICAgIGxldCBzZWxlY1R5cGUgPSBbXTsKICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpZiAoaXQuaXNDaGVjaykgewogICAgICAgICAgICBzZWxlY1R5cGUucHVzaChpdC50eXBlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoc2VsZWNUeXBlLmxlbmd0aCA9PSAwKSByZXR1cm47CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICB2YXIgdHlwZVNlbGVjdGVkID0gc2VsZWNUeXBlLmluZGV4T2YoaXQuZGVhbGVyVHlwZSkgPj0gMDsKICAgICAgICAgIGlmICh0eXBlU2VsZWN0ZWQgJiYgaXQuYXJlYSA9PSBpdGVtLmxhYmxlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25UeXBlU2VsZWN0Q2hhbmdlKGl0ZW0pIHsKICAgICAgaWYgKCFpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXQpID0+IHsKICAgICAgICAgIGlmIChpdC5kZWFsZXJUeXBlID09IGl0ZW0udHlwZSkgewogICAgICAgICAgICBpdC5pc0NoZWNrID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZXREZWFsZXJVbkNoZWNrZWRJZk5lZWQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNoX2RlbGVhciA9IHRydWU7CiAgICAgICAgbGV0IHNlbGVjdEFyZWEgPSBbXTsKICAgICAgICB0aGlzLmNoX2FyZWFfc3VwcC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaWYgKGl0LmlzQ2hlY2spIHsKICAgICAgICAgICAgc2VsZWN0QXJlYS5wdXNoKGl0LmxhYmxlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKHNlbGVjdEFyZWEubGVuZ3RoID09IDApIHJldHVybjsKICAgICAgICB0aGlzLmNoX2RlbGVhcl9zZWxlY3QuZm9yRWFjaCgoaXQpID0+IHsKICAgICAgICAgIHZhciBhcmVhU2VsZWN0ZWQgPSBzZWxlY3RBcmVhLmluZGV4T2YoaXQuYXJlYSkgPj0gMDsKICAgICAgICAgIGlmIChhcmVhU2VsZWN0ZWQgJiYgaXQuZGVhbGVyVHlwZSA9PSBpdGVtLnR5cGUpIHsKICAgICAgICAgICAgaXQuaXNDaGVjayA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkRlYWxlclNlbGVjdENoYW5nZShpdGVtKSB7CiAgICAgIGlmIChpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX2RlbGVhciA9IHRydWU7CiAgICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaWYgKGl0LnR5cGUgPT0gaXRlbS5kZWFsZXJUeXBlKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpZiAoaXQubGFibGUgPT0gaXRlbS5hcmVhKSB7CiAgICAgICAgICAgIGl0LmlzQ2hlY2sgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWPquWIt+aWsOW9k+WJjeadoeebruebuOWFswogICAgICAgIC8vIGlmKHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5maW5kSW5kZXgoKGl0KT0+IGl0LmlzQ2hlY2sgJiYgaXQuZGVhbGVyVHlwZSA9PSBpdGVtLmRlYWxlclR5cGUpIDwgMCkgewogICAgICAgIC8vICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKChpdCkgPT4gaXQudHlwZSA9PSBpdGVtLmRlYWxlclR5cGUgJiYgKGl0LmlzQ2hlY2sgPSBmYWxzZSkpCiAgICAgICAgLy8gICB0aGlzLnNldERlYWxlclVuQ2hlY2tlZElmTmVlZCgpOwogICAgICAgIC8vIH0KCiAgICAgICAgLy8gaWYodGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZpbmRJbmRleCgoaXQpID0+IGl0LmlzQ2hlY2sgJiYgaXQuYXJlYSA9PSBpdGVtLmFyZWEpPDApewogICAgICAgIC8vICAgdGhpcy5jaF9hcmVhX3N1cHAuZm9yRWFjaCgoaXQpID0+IGl0LmxhYmxlID09IGl0ZW0uYXJlYSAmJiAoaXQuaXNDaGVjayA9IGZhbHNlKSkKICAgICAgICAvLyAgIHRoaXMuc2V0RGVhbGVyVW5DaGVja2VkSWZOZWVkKCk7CiAgICAgICAgLy8gfQogICAgICAgIC8vIOWFqOmDqOWIt+aWsAogICAgICAgIGxldCBhcmVhU2V0ID0gbmV3IFNldCgpOwogICAgICAgIGxldCBkZWFsZXJUeXBlU2V0ID0gbmV3IFNldCgpOwogICAgICAgIHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5mb3JFYWNoKChpdCkgPT4gewogICAgICAgICAgaWYgKGl0LmlzQ2hlY2spIHsKICAgICAgICAgICAgYXJlYVNldC5hZGQoaXQuYXJlYSk7CiAgICAgICAgICAgIGRlYWxlclR5cGVTZXQuYWRkKGl0LmRlYWxlclR5cGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGxldCBhcmVhID0gQXJyYXkuZnJvbShhcmVhU2V0KTsKICAgICAgICBsZXQgZGVhbGVyVHlwZSA9IEFycmF5LmZyb20oZGVhbGVyVHlwZVNldCk7CiAgICAgICAgdGhpcy5jaF9jb21fc3VwcC5mb3JFYWNoKAogICAgICAgICAgKGl0KSA9PiBkZWFsZXJUeXBlLmluZGV4T2YoaXQudHlwZSkgPCAwICYmIChpdC5pc0NoZWNrID0gZmFsc2UpCiAgICAgICAgKTsKICAgICAgICB0aGlzLmNoX2FyZWFfc3VwcC5mb3JFYWNoKAogICAgICAgICAgKGl0KSA9PiBhcmVhLmluZGV4T2YoaXQubGFibGUpIDwgMCAmJiAoaXQuaXNDaGVjayA9IGZhbHNlKQogICAgICAgICk7CiAgICAgICAgdGhpcy5zZXREZWFsZXJVbkNoZWNrZWRJZk5lZWQoKTsKICAgICAgfQogICAgfSwKICAgIHNldERlYWxlclVuQ2hlY2tlZElmTmVlZCgpIHsKICAgICAgdGhpcy5jaF9jb21fc3VwcC5maW5kSW5kZXgoKGl0KSA9PiBpdC5pc0NoZWNrKSA8IDAgJiYKICAgICAgICB0aGlzLmNoX2FyZWFfc3VwcC5maW5kSW5kZXgoKGl0KSA9PiBpdC5pc0NoZWNrKSA8IDAgJiYKICAgICAgICAodGhpcy5jaF9kZWxlYXIgPSBmYWxzZSk7CiAgICB9LAogICAgb25EZWFsZXJEZXBsaXN0Q2hhbmdlKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0uaXNDaGVjaykgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3RfYWxsID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmNoX2RlbGVhcl9kZXBsaXN0LmZpbmRJbmRleCgoaXQpID0+IGl0LmlzQ2hlY2spIDwgMCkgewogICAgICAgIHRoaXMuY2hfZGVsZWFyX2RlcGxpc3RfYWxsID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBvbk9lbVNlbGVjdENoYW5nZShpdGVtKSB7CiAgICAgIGlmIChpdGVtLmlzQ2hlY2spIHsKICAgICAgICB0aGlzLmNoX29lbSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgdGhpcy5jaF9vZW1fZGVwbGlzdC5maW5kSW5kZXgoKGl0KSA9PiBpdC5pc0NoZWNrID09IHRydWUpIDwgMAogICAgICApIHsKICAgICAgICB0aGlzLmNoX29lbSA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIHB1Ymxpc2g6IFRocm90dGxlKAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5wdWJsaXNoSW1wKCk7CiAgICAgIH0sCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICBzaG93U25hY2tiYXIoIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgICB9CiAgICApLAoKICAgIHB1Ymxpc2hJbXAoKSB7CiAgICAgIGlmICghL15bQS1aYS16MC05XSokLy50ZXN0KHRoaXMubXNnTnVtYmVyKSkgewogICAgICAgIHNob3dTbmFja2Jhcigi5paH56ug57yW5Y+36K+36L6T5YWlMjDkvY3mlbDlrZfkuI7lrZfmr43nu4TlkIjvvIjpgInloavvvIkiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGRlYWxlcnMgPSBbXTsKICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS5pc0NoZWNrKSB7CiAgICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgICAgY29tcGFueU5hbWU6IGl0ZW0uY29tcGFueU5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlDb2RlOiBpdGVtLmNvbXBhbnlDb2RlLAogICAgICAgICAgICBjb21wYW55VHlwZTogaXRlbS5jb21wYW55VHlwZSwKICAgICAgICAgICAgZGVhbGVyVHlwZTogaXRlbS5kZWFsZXJUeXBlLAogICAgICAgICAgICBhcmVhOiBpdGVtLmFyZWEsCiAgICAgICAgICB9OwogICAgICAgICAgZGVhbGVycy5wdXNoKHRlbXApOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBsZXQgZGVwID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCiAgICAgIGlmIChkZWFsZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgaGFzZGVwID0gZmFsc2U7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGVwbGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICBpZiAoaXRlbS5pc0NoZWNrKSB7CiAgICAgICAgICAgIGRlcFtpdGVtLmlkXSA9IGl0ZW0udmFsdWU7CiAgICAgICAgICAgIGhhc2RlcCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coZGVwKQogICAgICAgIGlmICghaGFzZGVwKSB7CiAgICAgICAgICBzaG93U25hY2tiYXIoIuivt+mAieaLqeWPkeW4g+iBjOS9jeWQjumHjeivlSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jaF9vZW1fZGVwbGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKGl0ZW0uaXNDaGVjaykgewogICAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICAgIGNvbXBhbnlOYW1lOiBpdGVtLmNvbXBhbnlOYW1lLAogICAgICAgICAgICBjb21wYW55Q29kZTogaXRlbS5jb21wYW55Q29kZSwKICAgICAgICAgICAgY29tcGFueVR5cGU6IGl0ZW0uY29tcGFueVR5cGUsCiAgICAgICAgICAgIGRlYWxlclR5cGU6IGl0ZW0uZGVhbGVyVHlwZSwKICAgICAgICAgICAgYXJlYTogaXRlbS5hcmVhLAogICAgICAgICAgfTsKICAgICAgICAgIGRlYWxlcnMucHVzaCh0ZW1wKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoZGVhbGVycy5sZW5ndGggPT0gMCkgewogICAgICAgIHNob3dTbmFja2Jhcigi5pyq6YCJ5oup5Y+R5biD5a+56LGhLOivt+mAieaLqeWPkeW4g+WvueixoeWQjumHjeivlSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgcmVsZWFzZVRpbWUgPQogICAgICAgIHRoaXMucmVsZWFzZVRpbWUgPT0gIiIKICAgICAgICAgID8gbmV3IERhdGUoKS5mb3JtYXQoInl5eXktTU0tZGQgaGg6bW06c3MiKQogICAgICAgICAgOiB0aGlzLnJlbGVhc2VUaW1lOwoKICAgICAgbGV0IGludmFsaWRUaW1lID0gdGhpcy5pbnZhbGlkVGltZSA9PSAiIiA/IG51bGwgOiB0aGlzLmludmFsaWRUaW1lOwoKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgbXNnTnVtYmVyOiB0aGlzLm1zZ051bWJlciwKICAgICAgICBkZWFsZXJPYmpMaXN0OiBkZWFsZXJzLAogICAgICAgIHBvc2l0aW9uczogZGVwLAogICAgICAgIHJlbGVhc2VUaW1lOiByZWxlYXNlVGltZSwKICAgICAgICBpbnZhbGlkVGltZTogaW52YWxpZFRpbWUsCiAgICAgICAgZWZmZWN0aXZlVGltZTogdGhpcy5lZmZlY3RpdmVUaW1lLAogICAgICAgIGZlZWRiYWNrVHlwZTogdGhpcy5mZWVkYmFja1R5cGUsCiAgICAgICAgbXNnU3RhdHVzOiAxLAogICAgICB9OwogICAgICB0aGlzLiRyZWZzLmNvbmZpcm0KICAgICAgICAuY29uZmlybShkZWFsZXJzKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMudXBsb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIHB1Ymxpc2hNZXNzYWdlKGRhdGEpCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJwdWJsaXNoIG1lc3NhZ2U6IiArIEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJUaW1lCiAgICAgICAgICAgICAgICAgIC5hbGVydCgi5paH56ug5o+Q5Lqk5oiQ5Yqf77yM5bCG5Li65oKo6Lez6L2s5paH56ug6aaW6aG144CCIiwgMTApCiAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IEV2ZW50QnVzLiRlbWl0KCJwdWJsaXNoU3VjZXNzZnVsIikpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzaG93U25hY2tiYXIoIuWPkeW4g+Wksei0pSzor7fnqI3lkI7ph43or5UiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgc2hvd1NuYWNrYmFyKCLlj5HluIPlpLHotKUs6K+356iN5ZCO6YeN6K+VIik7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLnVwbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKT0+IChjb25zb2xlLmRlYnVnKCLlj5bmtogiKSkpOwogICAgfSwKICAgIGNhY3VsYXRlRGlyZWN0RmlsZURlbGVhcigpIHsKICAgICAgY29uc29sZS5kZWJ1ZygiZGVhbGVyID09PT09PT09PT0+IiArIEpTT04uc3RyaW5naWZ5KHRoaXMuZGVhbGVyKSk7CiAgICAgIGlmICh0aGlzLmNoX2RlbGVhcl9zZWxlY3QubGVuZ3RoID09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZGVhbGVyLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGlzYWJsZSA9IGZhbHNlOwogICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpdC5kaXNhYmxlID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHAgPSBkZWVwQ2xvbmUodGhpcy5jaF9hcmVhX3N1cHApOwoKICAgICAgICB0aGlzLmNoX2NvbV9zdXBwLmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpdC5kaXNhYmxlID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jaF9jb21fc3VwcCA9IGRlZXBDbG9uZSh0aGlzLmNoX2NvbV9zdXBwKTsKCiAgICAgICAgdGhpcy5jaF9kZWxlYXJfc2VsZWN0LmZvckVhY2goKGl0KSA9PiB7CiAgICAgICAgICBpdC5kaXNhYmxlID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaF9kZWxlYXJfZGlzYWJsZSA9IHRydWU7CiAgICAgICAgdGhpcy5jaF9kZWxlYXIgPSB0cnVlOwogICAgICAgIHRoaXMuZGVhbGVyLmZvckVhY2goKGNvZGUpID0+IHsKICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuY2hfZGVsZWFyX3NlbGVjdC5maW5kSW5kZXgoCiAgICAgICAgICAgIChkZWFsZXIpID0+IGRlYWxlci5jb21wYW55Q29kZSA9PT0gY29kZQogICAgICAgICAgKTsKICAgICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKICAgICAgICAgIHZhciBjb20gPSB0aGlzLmNoX2RlbGVhcl9zZWxlY3RbaW5kZXhdOwogICAgICAgICAgY29tLmRpc2FibGUgPSB0cnVlOwogICAgICAgICAgY29tLmlzQ2hlY2sgPSB0cnVlOwoKICAgICAgICAgIHZhciBhcmVhSW5kZXggPSB0aGlzLmNoX2FyZWFfc3VwcC5maW5kSW5kZXgoCiAgICAgICAgICAgIChpdCkgPT4gY29tLmFyZWEgPT0gaXQubGFibGUKICAgICAgICAgICk7CiAgICAgICAgICBpZiAoYXJlYUluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgICAgdGhpcy5jaF9hcmVhX3N1cHBbYXJlYUluZGV4XS5kaXNhYmxlID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuY2hfYXJlYV9zdXBwW2FyZWFJbmRleF0uaXNDaGVjayA9IHRydWU7CiAgICAgICAgICB2YXIgdHlwZUluZGV4ID0gdGhpcy5jaF9jb21fc3VwcC5maW5kSW5kZXgoCiAgICAgICAgICAgIChpdCkgPT4gY29tLmRlYWxlclR5cGUgPT0gaXQudHlwZQogICAgICAgICAgKTsKICAgICAgICAgIGlmICh0eXBlSW5kZXggPCAwKSByZXR1cm47CiAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwW3R5cGVJbmRleF0uZGlzYWJsZSA9IHRydWU7CiAgICAgICAgICB0aGlzLmNoX2NvbV9zdXBwW3R5cGVJbmRleF0uaXNDaGVjayA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgb3BlbigpIHsKICAgICAgY29uc29sZS5sb2coIj09PT09PT09PT09PiBvbiBvcGVuIGNoYW5nZSIgKyB0aGlzLm9wZW4pOwogICAgICB0aGlzLmRpYWxvZyA9IHRoaXMub3BlbjsKICAgICAgaWYgKHRoaXMub3BlbikgewogICAgICAgIHRoaXMuY2FjdWxhdGVEaXJlY3RGaWxlRGVsZWFyKCk7CiAgICAgIH0KICAgIH0sCiAgICB2b3RlRW5hYmxlKCkgewogICAgICBpZiAodGhpcy52b3RlRW5hYmxlKSB7CiAgICAgICAgdGhpcy5mZWVkYmFja1R5cGUgPSAzOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmVlZGJhY2tUeXBlID0gNDsKICAgICAgfQogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBlZmZlY3RpdmVUaW1lTWF4KCkgewogICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5pbnZhbGlkVGltZSk7CiAgICB9LAogICAgaW52YWxpZFRpbWVNaW4oKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKHRoaXMuZWZmZWN0aXZlVGltZSkpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["publish.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"publish.vue","sourceRoot":"src/views/page/publishArticle","sourcesContent":["<template>\n  <v-row justify=\"center\">\n    <v-dialog\n      :persistent=\"true\"\n      v-model=\"dialog\"\n      v-bind=\"$attrs\"\n      v-on=\"$listeners\"\n      fullscreen\n      hide-overlay\n      transition=\"dialog-bottom-transition\"\n    >\n      <v-card>\n        <v-toolbar dark color=\"primary\">\n          <v-btn icon dark @click=\"close\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n          <v-toolbar-title>发布文章</v-toolbar-title>\n        </v-toolbar>\n        <div class=\"pl-10 pr-10\">\n          <span class=\"label_text mt-4\">文章编号</span>\n          <v-text-field\n            placeholder=\"请输入20位数字与字母组合（选填）\"\n            hide-details=\"auto\"\n            single-line\n            maxlength=\"20\"\n            style=\"width: 574px\"\n            v-model=\"msgNumber\"\n            outlined\n            :rules=\"[\n              (v) =>\n                /^[A-Za-z0-9]*$/.test(v) || '请输入20位数字与字母组合（选填）',\n            ]\"\n            class=\"title mt-4\"\n          />\n          <span class=\"label_text mt-6\"\n            >发布对象 <span style=\"color: red\"> * </span></span\n          >\n          <span\n            class=\"label_text mt-2\"\n            style=\"color: red\"\n            v-if=\"ch_delear_select.length <= 0 && ch_oem_deplist.length <= 0\"\n            >您没有可选的发布对象，请联系管理员</span\n          >\n          <v-sheet\n            class=\"mt-4 pa-0\"\n            rounded\n            outlined\n            v-if=\"ch_delear_select.length > 0\"\n            min-width=\"1320\"\n          >\n            <div\n              class=\"d-flex flex-row\"\n              style=\"\n                background-color: #f5f6f7;\n                height: 40px;\n                border-bottom: 1px solid #e4e8eb;\n              \"\n            >\n              <v-checkbox\n                v-model=\"ch_delear\"\n                :disabled=\"ch_delear_disable\"\n                label=\"发送给经销商\"\n                hide-details=\"false\"\n                class=\"pl-4\"\n                style=\"width: 55%; min-height: 28px; height: 28px\"\n                @change=\"selectAllDelear()\"\n                dense\n              >\n              </v-checkbox>\n              <div style=\"width: 1px; height: 100%; background: #e4e8eb\"></div>\n              <v-checkbox\n                v-model=\"ch_delear_deplist_all\"\n                label=\"职位\"\n                hide-details=\"false\"\n                class=\"pl-4\"\n                style=\"width: 45%\"\n                @change=\"selectAllDeplist()\"\n                dense\n              >\n              </v-checkbox>\n            </div>\n            <div class=\"d-flex flex-row pa-0\">\n              <div style=\"height: 446px; width: 15%\">\n                <div style=\"border-bottom: 1px solid #e4e8eb\">\n                  <v-virtual-scroll\n                    :items=\"ch_area_supp\"\n                    height=\"222\"\n                    item-height=\"30\"\n                    bench=\"1\"\n                    class=\"pa-0 ma-0\"\n                  >\n                    <template v-slot:default=\"{ item, index }\">\n                      <v-list-item\n                        :key=\"index\"\n                        style=\"min-height: 28px; height: 30px\"\n                      >\n                        <v-checkbox\n                          class=\"mt-0\"\n                          v-model=\"item.isCheck\"\n                          :label=\"item.lable\"\n                          :disabled=\"item.disable\"\n                          hide-details=\"false\"\n                          @change=\"onAreaSelectChange(item)\"\n                          dense\n                        >\n                        </v-checkbox>\n                      </v-list-item>\n                    </template>\n                  </v-virtual-scroll>\n                </div>\n                <div>\n                  <v-virtual-scroll\n                    :items=\"ch_com_supp\"\n                    height=\"224\"\n                    item-height=\"30\"\n                    bench=\"1\"\n                    class=\"pa-0 ma-0\"\n                  >\n                    <template v-slot:default=\"{ item, index }\">\n                      <v-list-item\n                        :key=\"index\"\n                        style=\"min-height: 28px; height: 30px\"\n                      >\n                        <v-checkbox\n                          class=\"mt-0\"\n                          v-model=\"item.isCheck\"\n                          :label=\"item.lable\"\n                          :disabled=\"item.disable\"\n                          hide-details=\"false\"\n                          @change=\"onTypeSelectChange(item)\"\n                          dense\n                        >\n                        </v-checkbox>\n                      </v-list-item>\n                    </template>\n                  </v-virtual-scroll>\n                </div>\n              </div>\n              <div\n                class=\"pa-0 ma-0\"\n                style=\"\n                  height: 446px;\n                  width: 40%;\n                  border-left: 1px solid #e4e8eb;\n                  border-right: 1px solid #e4e8eb;\n                \"\n              >\n                <v-virtual-scroll\n                  :items=\"ch_delear_select\"\n                  height=\"446\"\n                  item-height=\"30\"\n                  bench=\"1\"\n                  class=\"pa-0 ma-0\"\n                >\n                  <template v-slot:default=\"{ item, index }\">\n                    <v-list-item\n                      :key=\"index\"\n                      style=\"min-height: 28px; height: 30px\"\n                    >\n                      <v-checkbox\n                        class=\"mt-0\"\n                        v-model=\"item.isCheck\"\n                        :label=\"item.companyName\"\n                        :disabled=\"item.disable\"\n                        hide-details=\"false\"\n                        @change=\"onDealerSelectChange(item)\"\n                        dense\n                      ></v-checkbox>\n                      <v-spacer></v-spacer>\n                      <div class=\"dealer-lab\" v-if=\"item.arealab\">\n                        {{ item.arealab }}\n                      </div>\n                    </v-list-item>\n                  </template>\n                </v-virtual-scroll>\n              </div>\n              <v-row\n                no-gutters\n                align-content=\"start\"\n                class=\"pa-0 ma-0\"\n                style=\"height: 446px; width: 45%; overflow: scroll\"\n              >\n                <v-checkbox\n                  v-for=\"(item, hindex) in ch_delear_deplist\"\n                  :key=\"hindex\"\n                  v-model=\"item.isCheck\"\n                  :label=\"item.value\"\n                  hide-details=\"false\"\n                  :disabled=\"item.isable\"\n                  @change=\"onDealerDeplistChange(item)\"\n                  dense\n                  style=\"width: 197px; min-height: 28px; height: 30px\"\n                  class=\"pl-4 mt-0\"\n                ></v-checkbox>\n              </v-row>\n            </div>\n          </v-sheet>\n          <v-sheet\n            class=\"mt-4 pa-0\"\n            rounded\n            outlined\n            v-if=\"ch_oem_deplist.length > 0\"\n          >\n            <div\n              class=\"d-flex flex-row pl-4\"\n              style=\"background-color: #f5f6f7; height: 40px; width: 100%\"\n            >\n              <v-checkbox\n                v-model=\"ch_oem\"\n                label=\"发送给大众内部\"\n                hide-details=\"false\"\n                @change=\"selectAllOem()\"\n                dense\n              >\n              </v-checkbox>\n            </div>\n\n            <v-row\n              align-content=\"start\"\n              no-gutters\n              class=\"pa-0 ma-0\"\n              style=\"height: 164px; overflow: scroll\"\n            >\n              <v-checkbox\n                v-for=\"(item, hindex) in ch_oem_deplist\"\n                :key=\"hindex\"\n                v-model=\"item.isCheck\"\n                :label=\"item.companyName\"\n                hide-details=\"false\"\n                dense\n                style=\"width: 333px; min-height: 28px; height: 30px\"\n                class=\"pl-4\"\n                @change=\"onOemSelectChange(item)\"\n              ></v-checkbox>\n            </v-row>\n          </v-sheet>\n\n          <span class=\"label_text mt-6\">回复方式</span>\n          <v-row class=\"ma-0\" style=\"padding-top: 4px; padding-bottom: 2px\">\n            <v-radio-group v-model=\"feedbackType\" class=\"mt-2\" row>\n              <v-radio\n                v-for=\"(item, raindex) in replyTypes\"\n                :key=\"raindex\"\n                :ripple=\"false\"\n                :label=\"item.text\"\n                :value=\"item.value\"\n                :disabled=\"voteEnable ? item.value != 3 : item.value == 3\"\n                on-icon=\"mdi-check-circle\"\n                class=\"replay-radio caption\"\n              ></v-radio>\n            </v-radio-group>\n          </v-row>\n          <v-row class=\"mb-0\">\n          <span  class=\"label_text ml-4\">发布时间</span> \n          <a  class=\"label_text ml-7\" @click=\"resetPublishTime\">重置</a>\n          </v-row>\n          <time-picker v-model=\"releaseTime\" :minTime=\"new Date()\">\n            <v-text-field\n              placeholder=\"不选择即为立即发布\"\n              hide-details=\"auto\"\n              single-line\n              maxlength=\"40\"\n              required\n              outlined\n              v-model=\"releaseTime\"\n              append-icon=\"mdi-menu-down\"\n              class=\"title time_input mt-4\"\n              readonly\n            />\n          </time-picker>\n          <v-row class=\"mb-0\">\n          <span class=\"label_text mt-8 ml-4\">政策有效期</span>\n          <a  class=\"label_text ml-4 mt-8\" @click=\"resetPolicyTime\">重置</a>\n          </v-row>\n          <time-picker\n            v-model=\"effectiveTime\"\n            :maxTime=\"invalidTime\"\n            style=\"display: inline-block\"\n          >\n            <v-text-field\n              placeholder=\"不选择即为发布时间\"\n              hide-details=\"auto\"\n              single-line\n              maxlength=\"40\"\n              style=\"display: inline-block\"\n              required\n              outlined\n              v-model=\"effectiveTime\"\n              append-icon=\"mdi-menu-down\"\n              class=\"title time_input mt-4\"\n              readonly\n            />\n          </time-picker>\n          <span class=\"label_text mt-6 ml-2 mr-2\" style=\"display: inline-block\"\n            >--</span\n          >\n          <time-picker\n            v-model=\"invalidTime\"\n            :minTime=\"effectiveTime\"\n            style=\"display: inline-block\"\n          >\n            <v-text-field\n              placeholder=\"不选择即为永久有效\"\n              hide-details=\"auto\"\n              single-line\n              maxlength=\"40\"\n              required\n              outlined\n              v-model=\"invalidTime\"\n              append-icon=\"mdi-menu-down\"\n              class=\"title time_input mt-4\"\n              readonly\n            />\n          </time-picker>\n          <div style=\"height: 128px; display: block\"></div>\n        </div>\n      </v-card>\n      <v-footer fixed padless style=\"height: 64px; background: #f5f6f7ff\">\n        <v-spacer></v-spacer>\n        <v-btn\n          class=\"mr-6\"\n          min-width=\"105px\"\n          outlined\n          depressed\n          dark\n          color=\"#1867C0FF\"\n          @click=\"close\"\n        >\n          返回编辑文章\n        </v-btn>\n        <v-btn\n          class=\"mr-8\"\n          min-width=\"105px\"\n          depressed\n          dark\n          color=\"blue\"\n          @click=\"publish\"\n        >\n          确认发布\n        </v-btn>\n      </v-footer>\n      <confirm ref=\"confirm\" />\n      <alert-time ref=\"alerTime\" />\n      <loading-alert :open=\"uploading\" value=\"发布中，请稍等...\" />\n    </v-dialog>\n  </v-row>\n</template>\n<script>\nimport {\n  publishMessage,\n  getDealerList,\n  getDealerDepList,\n  getOemDepList,\n} from \"@/api/getData.js\";\nimport \"@/utils/timeFormate.js\";\nimport { EventBus } from \"@/utils/event-bus\";\nimport { showSnackbar, closeSnackbar } from \"@/utils/snackbar.js\";\nimport { Throttle, deepClone } from \"@/utils/tools.js\";\nexport default {\n  props: {\n    open: {\n      type: Boolean,\n      default: false,\n    },\n    id: {\n      type: Number,\n      default: null,\n    },\n    voteEnable: {\n      type: Boolean,\n      default: false,\n    },\n    dealer: {\n      type: [Object, Array, String],\n      default: function () {\n        return [];\n      },\n    },\n  },\n  components: {\n    timePicker: () => import(\"./timePicker.vue\"),\n    confirm: () => import(\"./publishConfirm.vue\"),\n    alertTime: () => import(\"@/components/base/alertTime\"),\n    loadingAlert: () => import(\"@/components/base/loadingAlert\"),\n  },\n  data() {\n    return {\n      dialog: this.open,\n      msgNumber: null,\n      releaseTime: \"\",\n      effectiveTime: \"\",\n      invalidTime: \"\",\n      feedbackType: 4,\n      uploading: false,\n      replyTypes: [\n        {\n          text: \"无需回复\",\n          value: 4,\n        },\n        {\n          text: \"已读回执\",\n          value: 0,\n        },\n        {\n          text: \"文字回复\",\n          value: 1,\n        },\n        {\n          text: \"附件\",\n          value: 2,\n        },\n        {\n          text: \"投票\",\n          value: 3,\n        },\n      ],\n      ch_delear_disable: false,\n      ch_delear: false,\n      ch_area_supp: [],\n      ch_com_supp: [],\n      ch_delear_select: [],\n      ch_delear_deplist_all: false,\n      ch_delear_deplist: [],\n      ch_oem: false,\n      ch_oem_deplist: [],\n    };\n  },\n\n  mounted() {\n    this.initDealerList();\n    this.initDealerDep();\n    this.initOemDep();\n  },\n\n  methods: {\n    resetPublishTime() {\n      this.releaseTime = \"\";\n    },\n\n    resetPolicyTime() {\n      this.effectiveTime = \"\";\n      this.invalidTime = \"\";\n    },\n\n    close() {\n      this.$emit(\"closeDialog\");\n      closeSnackbar();\n    },\n    initDealerList() {\n      getDealerList()\n        .then((res) => {\n          //console.debug(JSON.stringify(res));\n          if (!res || typeof res == \"undefined\" || res.code != 0) {\n            return;\n          }\n\n          let data = res.data;\n          if (!data || typeof data == \"undefined\" || data.length == 0) {\n            return;\n          }\n          var areaSet = new Set();\n          var dealerTypeSet = new Set();\n          this.ch_delear_select = [];\n          data.forEach((item, index) => {\n            let area = item.area;\n            if (area != null && typeof area != undefined && area != \"\") {\n              areaSet.add(area);\n            }\n            let type = item.dealerType;\n            if (type != null && typeof type != undefined) {\n              if (type == 0) type += 3;\n              dealerTypeSet.add(type);\n            }\n\n            let temp = {\n              id: index,\n              isCheck: false,\n              disable: false,\n              companyName: item.companyName,\n              companyCode: item.companyCode,\n              companyType: item.companyType,\n              dealerType: item.dealerType,\n              area: item.area,\n              arealab: item.area == null ? null : item.area.substring(0, 1),\n            };\n            this.ch_delear_select.push(temp);\n          });\n          this.ch_delear_select_view = deepClone(this.ch_delear_select);\n\n          this.ch_area_supp = [];\n          Array.from(areaSet).forEach((item, index) => {\n            let temp = {\n              id: index,\n              isCheck: false,\n              lable: item,\n            };\n            this.ch_area_supp.push(temp);\n          });\n\n          this.ch_com_supp = [];\n\n          Array.from(dealerTypeSet)\n            .sort()\n            .forEach((item, index) => {\n              let temp = {\n                id: index,\n                isCheck: false,\n                lable: this.getDealerTypeDesc(item),\n                type: item % 3,\n              };\n              this.ch_com_supp.push(temp);\n            });\n        })\n        .catch();\n    },\n\n    initDealerDep() {\n      getDealerDepList()\n        .then((res) => {\n          if (!res || typeof res == \"undefined\" || res.code != 0) {\n            return;\n          }\n\n          let data = res.data;\n          if (!data || typeof data == \"undefined\" || data.length == 0) {\n            return;\n          }\n          this.ch_delear_deplist = [];\n          Object.keys(data).forEach((key) => {\n            let temp = {\n              id: key,\n              isCheck: false,\n              value: data[key],\n            };\n            this.ch_delear_deplist.push(temp);\n          });\n        })\n        .catch();\n    },\n    initOemDep() {\n      getOemDepList()\n        .then((res) => {\n          if (!res || typeof res == \"undefined\" || res.code != 0) {\n            return;\n          }\n\n          let data = res.data;\n          if (!data || typeof data == \"undefined\" || data.length == 0) {\n            return;\n          }\n\n          this.ch_oem_deplist = [];\n          data.forEach((item, index) => {\n            let temp = {\n              id: index,\n              isCheck: false,\n              companyName: item.companyName,\n              companyCode: item.companyCode,\n              companyType: item.companyType,\n              dealerType: item.dealerType,\n              area: item.area,\n            };\n            this.ch_oem_deplist.push(temp);\n          });\n          console.log(JSON.stringify(this.ch_oem_deplist));\n        })\n        .catch();\n    },\n    getDealerTypeDesc(type) {\n      switch (type) {\n        case 1:\n          return \"4s店\";\n        case 2:\n          return \"二级网点\";\n        case 3:\n          return \"独立售后\";\n        default:\n          return \"未分类\";\n      }\n    },\n\n    //选择全部\n    selectAllDelear() {\n      var isSelected = this.ch_delear;\n      this.ch_area_supp.forEach((item) => {\n        item.isCheck = isSelected;\n      });\n\n      this.ch_com_supp.forEach((item) => {\n        item.isCheck = isSelected;\n      });\n\n      this.ch_delear_select.forEach((item) => {\n        item.isCheck = isSelected;\n      });\n      this.ch_delear_select = deepClone(this.ch_delear_select);\n    },\n    selectAllDeplist() {\n      var isSelected = this.ch_delear_deplist_all;\n      this.ch_delear_deplist.forEach((item) => {\n        item.isCheck = isSelected;\n      });\n\n      this.ch_delear_deplist = deepClone(this.ch_delear_deplist);\n    },\n    selectAllOem() {\n      var isSelected = this.ch_oem;\n      this.ch_oem_deplist.forEach((item) => {\n        item.isCheck = isSelected;\n      });\n    },\n\n    onAreaSelectChange(item) {\n      if (!item.isCheck) {\n        this.ch_delear_select.forEach((it) => {\n          if (it.area == item.lable) {\n            it.isCheck = false;\n          }\n        });\n        this.setDealerUnCheckedIfNeed();\n      } else {\n        this.ch_delear = true;\n        let selecType = [];\n        this.ch_com_supp.forEach((it) => {\n          if (it.isCheck) {\n            selecType.push(it.type);\n          }\n        });\n        if (selecType.length == 0) return;\n        this.ch_delear_select.forEach((it) => {\n          var typeSelected = selecType.indexOf(it.dealerType) >= 0;\n          if (typeSelected && it.area == item.lable) {\n            it.isCheck = true;\n          }\n        });\n      }\n    },\n    onTypeSelectChange(item) {\n      if (!item.isCheck) {\n        this.ch_delear_select.forEach((it) => {\n          if (it.dealerType == item.type) {\n            it.isCheck = false;\n          }\n        });\n        this.setDealerUnCheckedIfNeed();\n      } else {\n        this.ch_delear = true;\n        let selectArea = [];\n        this.ch_area_supp.forEach((it) => {\n          if (it.isCheck) {\n            selectArea.push(it.lable);\n          }\n        });\n\n        if (selectArea.length == 0) return;\n        this.ch_delear_select.forEach((it) => {\n          var areaSelected = selectArea.indexOf(it.area) >= 0;\n          if (areaSelected && it.dealerType == item.type) {\n            it.isCheck = true;\n          }\n        });\n      }\n    },\n    onDealerSelectChange(item) {\n      if (item.isCheck) {\n        this.ch_delear = true;\n        this.ch_com_supp.forEach((it) => {\n          if (it.type == item.dealerType) {\n            it.isCheck = true;\n          }\n        });\n        this.ch_area_supp.forEach((it) => {\n          if (it.lable == item.area) {\n            it.isCheck = true;\n          }\n        });\n      } else {\n        // 只刷新当前条目相关\n        // if(this.ch_delear_select.findIndex((it)=> it.isCheck && it.dealerType == item.dealerType) < 0) {\n        //   this.ch_com_supp.forEach((it) => it.type == item.dealerType && (it.isCheck = false))\n        //   this.setDealerUnCheckedIfNeed();\n        // }\n\n        // if(this.ch_delear_select.findIndex((it) => it.isCheck && it.area == item.area)<0){\n        //   this.ch_area_supp.forEach((it) => it.lable == item.area && (it.isCheck = false))\n        //   this.setDealerUnCheckedIfNeed();\n        // }\n        // 全部刷新\n        let areaSet = new Set();\n        let dealerTypeSet = new Set();\n        this.ch_delear_select.forEach((it) => {\n          if (it.isCheck) {\n            areaSet.add(it.area);\n            dealerTypeSet.add(it.dealerType);\n          }\n        });\n        let area = Array.from(areaSet);\n        let dealerType = Array.from(dealerTypeSet);\n        this.ch_com_supp.forEach(\n          (it) => dealerType.indexOf(it.type) < 0 && (it.isCheck = false)\n        );\n        this.ch_area_supp.forEach(\n          (it) => area.indexOf(it.lable) < 0 && (it.isCheck = false)\n        );\n        this.setDealerUnCheckedIfNeed();\n      }\n    },\n    setDealerUnCheckedIfNeed() {\n      this.ch_com_supp.findIndex((it) => it.isCheck) < 0 &&\n        this.ch_area_supp.findIndex((it) => it.isCheck) < 0 &&\n        (this.ch_delear = false);\n    },\n    onDealerDeplistChange(item) {\n      if (item.isCheck) {\n        this.ch_delear_deplist_all = true;\n      } else if (this.ch_delear_deplist.findIndex((it) => it.isCheck) < 0) {\n        this.ch_delear_deplist_all = false;\n      }\n    },\n    onOemSelectChange(item) {\n      if (item.isCheck) {\n        this.ch_oem = true;\n      } else if (\n        this.ch_oem_deplist.findIndex((it) => it.isCheck == true) < 0\n      ) {\n        this.ch_oem = false;\n      }\n    },\n\n    publish: Throttle(\n      function () {\n        this.publishImp();\n      },\n      function () {\n        showSnackbar(\"您提交的太频繁了，稍等一会试试吧\");\n      }\n    ),\n\n    publishImp() {\n      if (!/^[A-Za-z0-9]*$/.test(this.msgNumber)) {\n        showSnackbar(\"文章编号请输入20位数字与字母组合（选填）\");\n        return;\n      }\n      let dealers = [];\n      this.ch_delear_select.forEach((item) => {\n        if (item.isCheck) {\n          let temp = {\n            companyName: item.companyName,\n            companyCode: item.companyCode,\n            companyType: item.companyType,\n            dealerType: item.dealerType,\n            area: item.area,\n          };\n          dealers.push(temp);\n        }\n      });\n\n      let dep = Object.create(null);\n\n      if (dealers.length > 0) {\n        let hasdep = false;\n        this.ch_delear_deplist.forEach((item) => {\n          if (item.isCheck) {\n            dep[item.id] = item.value;\n            hasdep = true;\n          }\n        });\n        console.log(dep)\n        if (!hasdep) {\n          showSnackbar(\"请选择发布职位后重试\");\n          return;\n        }\n      }\n\n      this.ch_oem_deplist.forEach((item) => {\n        if (item.isCheck) {\n          let temp = {\n            companyName: item.companyName,\n            companyCode: item.companyCode,\n            companyType: item.companyType,\n            dealerType: item.dealerType,\n            area: item.area,\n          };\n          dealers.push(temp);\n        }\n      });\n      if (dealers.length == 0) {\n        showSnackbar(\"未选择发布对象,请选择发布对象后重试\");\n        return;\n      }\n      let releaseTime =\n        this.releaseTime == \"\"\n          ? new Date().format(\"yyyy-MM-dd hh:mm:ss\")\n          : this.releaseTime;\n\n      let invalidTime = this.invalidTime == \"\" ? null : this.invalidTime;\n\n      let data = {\n        id: this.id,\n        msgNumber: this.msgNumber,\n        dealerObjList: dealers,\n        positions: dep,\n        releaseTime: releaseTime,\n        invalidTime: invalidTime,\n        effectiveTime: this.effectiveTime,\n        feedbackType: this.feedbackType,\n        msgStatus: 1,\n      };\n      this.$refs.confirm\n        .confirm(dealers)\n        .then(() => {\n          this.uploading = true;\n          publishMessage(data)\n            .then((res) => {\n              console.debug(\"publish message:\" + JSON.stringify(res));\n              if (res.code == 0) {\n                this.$refs.alerTime\n                  .alert(\"文章提交成功，将为您跳转文章首页。\", 10)\n                  .then(() => EventBus.$emit(\"publishSucessful\"));\n              } else {\n                showSnackbar(\"发布失败,请稍后重试\");\n              }\n            })\n            .catch(() => {\n              showSnackbar(\"发布失败,请稍后重试\");\n            })\n            .finally(() => {\n              this.uploading = false;\n            });\n        })\n        .catch(()=> (console.debug(\"取消\")));\n    },\n    caculateDirectFileDelear() {\n      console.debug(\"dealer ==========>\" + JSON.stringify(this.dealer));\n      if (this.ch_delear_select.length == 0) {\n        return;\n      }\n      if (this.dealer.length == 0) {\n        this.ch_delear_disable = false;\n        this.ch_area_supp.forEach((it) => {\n          it.disable = false;\n        });\n        this.ch_area_supp = deepClone(this.ch_area_supp);\n\n        this.ch_com_supp.forEach((it) => {\n          it.disable = false;\n        });\n        this.ch_com_supp = deepClone(this.ch_com_supp);\n\n        this.ch_delear_select.forEach((it) => {\n          it.disable = false;\n        });\n      } else {\n        this.ch_delear_disable = true;\n        this.ch_delear = true;\n        this.dealer.forEach((code) => {\n          var index = this.ch_delear_select.findIndex(\n            (dealer) => dealer.companyCode === code\n          );\n          if (index < 0) return;\n          var com = this.ch_delear_select[index];\n          com.disable = true;\n          com.isCheck = true;\n\n          var areaIndex = this.ch_area_supp.findIndex(\n            (it) => com.area == it.lable\n          );\n          if (areaIndex < 0) return;\n          this.ch_area_supp[areaIndex].disable = true;\n          this.ch_area_supp[areaIndex].isCheck = true;\n          var typeIndex = this.ch_com_supp.findIndex(\n            (it) => com.dealerType == it.type\n          );\n          if (typeIndex < 0) return;\n          this.ch_com_supp[typeIndex].disable = true;\n          this.ch_com_supp[typeIndex].isCheck = true;\n        });\n      }\n    },\n  },\n  watch: {\n    open() {\n      console.log(\"===========> on open change\" + this.open);\n      this.dialog = this.open;\n      if (this.open) {\n        this.caculateDirectFileDelear();\n      }\n    },\n    voteEnable() {\n      if (this.voteEnable) {\n        this.feedbackType = 3;\n      } else {\n        this.feedbackType = 4;\n      }\n    },\n  },\n  computed: {\n    effectiveTimeMax() {\n      return new Date(this.invalidTime);\n    },\n    invalidTimeMin() {\n      return new Date(Date.parse(this.effectiveTime));\n    },\n  },\n};\n</script>\n<style>\n.label_text {\n  color: #666666ff;\n  display: block;\n  font-family: PingFang SC;\n  font-weight: medium;\n  font-size: 14px;\n  line-height: normal;\n  letter-spacing: 0px;\n  text-align: left;\n}\n.replay-radio .v-label {\n  color: #666666ff;\n  font-family: PingFang SC;\n  font-weight: regular;\n  font-size: 14px;\n  line-height: normal;\n  letter-spacing: 0px;\n  text-align: left;\n}\n\n.replay-radio .v-icon.v-icon {\n  font-size: 14px;\n}\n.replay-radio .v-icon__svg,\n.replay-radio .v-input--selection-controls__input {\n  width: 14px;\n  height: 14px;\n}\n\n.time_input {\n  width: 200px;\n}\n.time_input .v-input__slot {\n  padding-right: 0px !important;\n}\n.dealer-lab {\n  width: 18px;\n  height: 18px;\n  border-radius: 2px;\n  background: #f0f0f0;\n  border: 1px solid #e4e8eb;\n  color: #9e9e9e;\n  font-family: PingFang SC;\n  font-weight: medium;\n  font-size: 12px;\n  line-height: normal;\n  letter-spacing: 0px;\n  text-align: center;\n}\n</style>"]}]}