{"remainingRequest":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/views/page/publishArticle/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/src/views/page/publishArticle/index.vue","mtime":1690363857805},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/IIT/2023 summary course/iit-project/IIT-CMS/front/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgc2F2ZU1lc3NhZ2UsCiAgZ2V0QXJ0aWNsZURldGFpbCwKICBzYXZlVm90ZSwKICB1cGxvYWRGaWxlLAogIGRlYWxlckNvZGVWYWxpZCwKfSBmcm9tICJAL2FwaS9nZXREYXRhLmpzIjsKaW1wb3J0IHsgYWVzRW5jcnlwdCwgYWVzRGVjcnlwdCB9IGZyb20gIkAvdXRpbHMvZW5jcnlwdGlvbi5qcyI7CmltcG9ydCB7IGhpZ2hMaWdodEFsbFRleHQgfSBmcm9tICJAL3V0aWxzL2FydGljbGVVdGlscy5qcyI7CmltcG9ydCB7IERlYm91bmNlLCBUaHJvdHRsZSwgZGVlcENsb25lIH0gZnJvbSAiQC91dGlscy90b29scy5qcyI7CmltcG9ydCB7IHNob3dTbmFja2JhciwgY2xvc2VTbmFja2JhciB9IGZyb20gIkAvdXRpbHMvc25hY2tiYXIuanMiOwppbXBvcnQgeyBpc051bGwgfSBmcm9tICJAL3V0aWxzL3N0cmluZ1V0aWxzLmpzIjsKaW1wb3J0IHsgb2Zmc2V0TW9udGhUaW1lIH0gZnJvbSAiQC91dGlscy90aW1lRm9ybWF0ZS5qcyI7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAiQC91dGlscy9ldmVudC1idXMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgewogIGNoZWNrVXBsb2FkRmlsZVR5cGUsCiAgSU5QVVRfRklMRV9BQ0NFUFQsCiAgcmVhZEZpbGVTaXplVW5pdCwKICBnZXREaXN0cmlidXRvck51bWJlckJ5RmlsZU5hbWUsCn0gZnJvbSAiQC91dGlscy9maWxlc1V0aWxzLmpzIjsKY29uc3Qgdm90ZURlZmF1bHQgPSB7CiAgaWQ6IG51bGwsCiAgZW5hYmxlOiBmYWxzZSwKICB0b3BpYzogIiIsCiAgdm90ZVR5cGU6IGZhbHNlLAogIHZvdGVPcHRpb25zOiBbe30sIHt9XSwKICBlbmRUaW1lOiBvZmZzZXRNb250aFRpbWUoMSkuZm9ybWF0KCJ5eXl5LU1NLWRkIGhoOm1tOnNzIiksCn07CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6IG51bGwsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgY29udGVudDogIiIsCiAgICAgIHRpdGxlRXJyb3JNZXNzYWdlOiAiIiwKICAgICAgaW5wdXRGaWxlQWNjZXB0OklOUFVUX0ZJTEVfQUNDRVBULCAgCiAgICAgIG1heFRpbWU6IG9mZnNldE1vbnRoVGltZSgxKSwKICAgICAgdm90ZTogZGVlcENsb25lKHZvdGVEZWZhdWx0KSwKICAgICAgdm90ZVRlbXA6IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCksCiAgICAgIHZvdGVEaWFsb2c6IGZhbHNlLAogICAgICB1cGxvYWRGaWxlTm9ybWFsOiBbXSwKICAgICAgdXBsb2FkRmlsZURpcmVjdDogW10sCiAgICAgIGRlbGVhckxpc3Q6IFtdLAogICAgICBwcmV2aWV3OiBmYWxzZSwKICAgICAgcHVibGlzaDogZmFsc2UsCiAgICAgIG5lZWRTYXZlOiBmYWxzZSwKICAgICAgYXV0b1NhdmluZzogZmFsc2UsCiAgICAgIC8v5pmu6YCa6ZmE5Lu25LiK5Lyg5Y+l5p+E6ZuG5ZCICiAgICAgIG5vcm1hbFJlcWV1ZXN0SGFuZGxlczpbXSwKICAgICAgLy/lrprlkJHpmYTku7bkuIrkvKDlj6Xmn4Tpm4blkIgKICAgICAgZGlyZWN0aW9uUmVxZXVlc3RIYW5kbGVzOltdLAogICAgICAKICAgICAgY2FuY2VsVG9rZW4gOiBheGlvcy5DYW5jZWxUb2tlbiwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBhcHBFZGl0b3I6ICgpID0+IGltcG9ydCgiLi9lZGl0b3IudnVlIiksCiAgICB0aXRsZUVkaXRvcjogKCkgPT4gaW1wb3J0KCIuL3RpdGxlLnZ1ZSIpLAogICAgCiAgICAKICAgIGZpbGVJdGVtOiAoKSA9PiBpbXBvcnQoIi4vZmlsZU9wdGlvbi52dWUiKSwKICAgIAogICAgcHJldmlldzogKCkgPT4gaW1wb3J0KCIuL3ByZXZpZXcudnVlIiksCiAgICBwdWJsaXNoOiAoKSA9PiBpbXBvcnQoIi4vcHVibGlzaC52dWUiKSwKICAgIGNvbmZpcm06ICgpID0+IGltcG9ydCgiQC9jb21wb25lbnRzL2Jhc2UvY29uZm9ybS52dWUiKSwKICB9LAogIC8vIOi3r+eUseabtOaWsOWkhOeQhgogIGJlZm9yZVJvdXRlVXBkYXRlKHRvLCBmcm9tLCBuZXh0KSB7ICAgIAogICAgaWYgKHRoaXMubmVlZFNhdmUpIHsKICAgICAgdGhpcy4kcmVmcy5jb25maXJtCiAgICAgICAgLmNvbmZpcm0oCiAgICAgICAgICAi5oKo5b2T5YmN5pyJ5L+u5pS555qE5L+h5oGv5pyq5L+d5a2Y77yM56a75byA5b2T5YmN6aG16Z2i5oKo6L6T5YWl55qE5L+h5oGv5bCG5LiN5Lya6KKr5L+d5a2Y44CCIgogICAgICAgICkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBuZXh0KHRydWUpOwogICAgICAgICAgdGhpcy5yZUVkaXRJZk5lZWQodG8ucXVlcnkuaWQpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IG5leHQoZmFsc2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQodHJ1ZSk7CgogICAgICBpZiAodGhpcy5yZUVkaXRJZk5lZWQodG8ucXVlcnkuaWQpKSByZXR1cm47CiAgICAgIHRoaXMuc2F2ZUFzTmV3TWVzc2FnZSh0by5wYXJhbXMpOwogICAgfQogIH0sCgogIC8v6Lev55Sx56a75byA5aSE55CGCiAgYmVmb3JlUm91dGVMZWF2ZSh0bywgZnJvbSwgbmV4dCkgewogICAgdGhpcy5jbG9zZVNuYWNrKCk7CiAgICBpZiAodGhpcy5uZWVkU2F2ZSkgewogICAgICB0aGlzLiRyZWZzLmNvbmZpcm0KICAgICAgICAuY29uZmlybSgKICAgICAgICAgICLmgqjlvZPliY3mnInkv67mlLnnmoTkv6Hmga/mnKrkv53lrZjvvIznprvlvIDlvZPliY3pobXpnaLmgqjovpPlhaXnmoTkv6Hmga/lsIbkuI3kvJrooqvkv53lrZjjgIIiCiAgICAgICAgKQogICAgICAgIC50aGVuKCgpID0+IHsgICAgICAgICAgCiAgICAgICAgICBuZXh0KHRydWUpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IG5leHQoZmFsc2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQodHJ1ZSk7CiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGlmICghdGhpcy5yZUVkaXRJZk5lZWQodGhpcy4kcm91dGUucXVlcnkuaWQpKSB7CiAgICAgIHRoaXMuc2F2ZUFzTmV3TWVzc2FnZSh0aGlzLiRyb3V0ZS5wYXJhbXMpOwogICAgfQogICAgbGV0IF90aGF0ID0gdGhpczsKICAgIGNvbnNvbGUubG9nKCJtb3VudGVkOnJlZ2lzdGVyIHdhbnRDbG9zZVB1YmxpY2FydGljbGUiKTsKCiAgICBFdmVudEJ1cy4kb2ZmKCd3YW50Q2xvc2VQdWJsaWNhcnRpY2xlJykKICAgIEV2ZW50QnVzLiRvbigid2FudENsb3NlUHVibGljYXJ0aWNsZSIsICgpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygibmVlZFNhdmU6IitfdGhhdC5uZWVkU2F2ZSk7CiAgICAgICBpZiAoX3RoYXQubmVlZFNhdmUpIHsKICAgICAgICAgICAgX3RoYXQuJHJlZnMuY29uZmlybQogICAgICAgICAgICAgLmNvbmZpcm0oCiAgICAgICAgICAgICAgICLmgqjlvZPliY3mnInkv67mlLnnmoTkv6Hmga/mnKrkv53lrZjvvIznprvlvIDlvZPliY3pobXpnaLmgqjovpPlhaXnmoTkv6Hmga/lsIbkuI3kvJrooqvkv53lrZjjgIIiCiAgICAgICAgICAgICApCiAgICAgICAgICAgICAudGhlbigoKSA9PiB7ICAgICAgICAgIAogICAgICAgICAgICAgICBfdGhhdC5uZWVkU2F2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgiY2xvc2VUYWIiLCJwdWJsaXNoQXJ0aWNsZSIpOwogICAgICAgICAgICAgfSkuY2F0Y2goKCk9PnsKICAgICAgICAgICAgICAgY29uc29sZS5sb2coImNhbmNlbCIpOwogICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoImNsb3NlVGFiIiwicHVibGlzaEFydGljbGUiKTsKICAgICAgICB9CiAgICB9KTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIiwgdGhpcy5iZWZvcmV1bmxvYWRIYW5kbGVyKTsKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJiZWZvcmV1bmxvYWQiLCB0aGlzLmJlZm9yZXVubG9hZEhhbmRsZXIpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8v5YWo6YOo5Yig6Zmk5omA5pyJ5pmu6YCa6ZmE5Lu2CiAgICByZW1vdmVBbGxVcGxvYWRGaWxlTm9ybWFsKCl7CiAgICAgIHRoaXMudXBsb2FkRmlsZU5vcm1hbCA9IFtdCgogICAgICB0aGlzLm5vcm1hbFJlcWV1ZXN0SGFuZGxlcy5mb3JFYWNoKChzb3VyY2UpPT57CiAgICAgICAgICBzb3VyY2UuY2FuY2VsKCJjYW5jbGVmaWxlIik7CiAgICAgIH0pOyAgICAgIAogICAgICB0aGlzLm5vcm1hbFJlcWV1ZXN0SGFuZGxlcyA9IFtdOwogICAgfSwKICAgIC8v56e76Zmk5omA5pyJ5a6a5ZCR6ZmE5Lu2CiAgICByZW1vdmVBbGxEaXJlY3Rpb25GaWxlTm9ybWFsKCl7CiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IFtdCgogICAgICB0aGlzLmRpcmVjdGlvblJlcWV1ZXN0SGFuZGxlcy5mb3JFYWNoKChzb3VyY2UpPT57CiAgICAgICAgICBzb3VyY2UuY2FuY2VsKCJjYW5jbGVmaWxlIik7CiAgICAgIH0pOyAgICAgIAogICAgICB0aGlzLmRpcmVjdGlvblJlcWV1ZXN0SGFuZGxlcyA9IFtdOwogICAgfSwKCiAgICBiZWZvcmV1bmxvYWRIYW5kbGVyKGUpIHsKICAgICAgaWYgKGUpIHsKICAgICAgICBlLnJldHVyblZhbHVlID0gIuWFs+mXreaPkOekuiI7CiAgICAgIH0KICAgICAgcmV0dXJuICLlhbPpl63mj5DnpLoiOwogICAgfSwKICAgIHJlc2V0VXBsb2FkZXJOKCkgewogICAgICB0aGlzLiRyZWZzLnVwbG9hZEZpbGVOLnZhbHVlID0gIiI7CiAgICB9LAoKICAgIHJlc2V0VXBsb2FkZXJEKCkgewogICAgICB0aGlzLiRyZWZzLnVwbG9hZEZpbGVELnZhbHVlID0gIiI7CiAgICB9LAogICAgLy/lj6blrZjkuLrliJvlu7rmlrDmtojmga8KICAgIHNhdmVBc05ld01lc3NhZ2UocGFyYW1zKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoInB1YmxpYz09PT09PT4iICsgcGFyYW1zKTsKICAgICAgaWYgKHBhcmFtcyA9PSBudWxsIHx8IHR5cGVvZiBwYXJhbXMgPT0gInVuZGVmaW5lZCIpIHJldHVybjsKICAgICAgbGV0IGlkID0gcGFyYW1zLmlkOwogICAgICBpZiAoIWlkIHx8IHR5cGVvZiBpZCA9PSAidW5kZWZpbmVkIiB8fCBpc05hTihpZCkpIHJldHVybjsKCiAgICAgIHRoaXMuaWQgPSBudWxsOwogICAgICB0aGlzLnJlc3RvcmVNZXNzYWdlKGlkLCB0cnVlKTsKICAgIH0sCiAgICAvL+iNieeov+mHjeaWsOe8lui+kQogICAgcmVFZGl0SWZOZWVkKGlkKSB7CiAgICAgIGlmICghaWQgfHwgdHlwZW9mIGlkID09ICJ1bmRlZmluZWQiKSByZXR1cm4gZmFsc2U7CgogICAgICBpZCA9IE51bWJlcihhZXNEZWNyeXB0KGlkKSk7CiAgICAgIGlmIChpZCA9PSBudWxsIHx8IGlzTmFOKGlkKSB8fCB0aGlzLmlkID09IGlkKSByZXR1cm4gZmFsc2U7CiAgICAgIHRoaXMuaWQgPSBpZDsKICAgICAgdGhpcy5yZXN0b3JlTWVzc2FnZShpZCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8v6YeN6K6+5raI5oGv5YaF5a65CiAgICByZXN0b3JlTWVzc2FnZShpZCwgaXNOZXcgPSBmYWxzZSkgewogICAgICB0aGlzLmNsZWFyQ29udGVudCgpOwogICAgICAvL+ivt+axguWQjuWPsOiOt+WPlua2iOaBr+WGheWuuQogICAgICBnZXRBcnRpY2xlRGV0YWlsKGlkKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMgPT0gbnVsbCB8fCB0eXBlb2YgcmVzID09IHVuZGVmaW5lZCkgcmV0dXJuOwogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMudGl0bGUgPSBkYXRhLnRpdGxlOwogICAgICAgICAgdGhpcy5jb250ZW50ID0gZGF0YS5jb250ZW50OwogICAgICAgICAgaWYgKAogICAgICAgICAgICBkYXRhLnZvdGVJbmZvRFRPICE9IG51bGwgJiYKICAgICAgICAgICAgdHlwZW9mIGRhdGEudm90ZUluZm9EVE8gIT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgIGRhdGEudm90ZUluZm9EVE8ub3B0aW9ucy5sZW5ndGggPj0gMgogICAgICAgICAgKSB7CiAgICAgICAgICAgIGxldCB2b3RlID0gewogICAgICAgICAgICAgIGlkOiBpc05ldyA/IG51bGwgOiBkYXRhLnZvdGVJbmZvRFRPLnZvdGVJZCwKICAgICAgICAgICAgICBlbmFibGU6IHRydWUsCiAgICAgICAgICAgICAgdG9waWM6IGRhdGEudm90ZUluZm9EVE8udG9waWMsCiAgICAgICAgICAgICAgdm90ZU9wdGlvbnM6IGRhdGEudm90ZUluZm9EVE8ub3B0aW9ucy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBpdGVtLm9wdGlvbk5hbWUgfTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICB2b3RlVHlwZTogZmFsc2UsCiAgICAgICAgICAgICAgZW5kVGltZTogb2Zmc2V0TW9udGhUaW1lKDEpLmZvcm1hdCgieXl5eS1NTS1kZCBoaDptbTpzcyIpLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnZvdGVUZW1wID0gZGVlcENsb25lKHZvdGUpOwoKICAgICAgICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAgICAgICAgdGhpcy52b3RlU2F2ZSh0cnVlKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy52b3RlID0gZGVlcENsb25lKHZvdGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKAogICAgICAgICAgICAhZGF0YS5hdHRhY2htZW50cyB8fAogICAgICAgICAgICB0eXBlb2YgZGF0YS5hdHRhY2htZW50cyA9PSAidW5kZWZpbmVkIiB8fAogICAgICAgICAgICBkYXRhLmF0dGFjaG1lbnRzLmxlbmd0aCA+IDAKICAgICAgICAgICkgewogICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJhdHRhY2htZW50czoiICsgSlNPTi5zdHJpbmdpZnkoZGF0YS5hdHRhY2htZW50cykpOwogICAgICAgICAgICBkYXRhLmF0dGFjaG1lbnRzLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgICAgICBsZXQgZmlsZU5hbWUgPSBpdGVtLmF0dGFjaG1lbnROYW1lOwogICAgICAgICAgICAgIGxldCB0ZW1wID0gewogICAgICAgICAgICAgICAgcmVzOiB0cnVlLAogICAgICAgICAgICAgICAgdGV4dDogZmlsZU5hbWUsCiAgICAgICAgICAgICAgICBmaWxlVHlwZTogY2hlY2tVcGxvYWRGaWxlVHlwZShmaWxlTmFtZSksCiAgICAgICAgICAgICAgICBwYXRoOiBpdGVtLnVybCwKICAgICAgICAgICAgICAgIHByb2dyZXNzOiAxMDAsCiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjogaXRlbS5vcmllbnRhdGlvbiwKICAgICAgICAgICAgICAgIHVwbG9hZFNpemU6IGl0ZW0uYXR0YWNobWVudFNpemUsCiAgICAgICAgICAgICAgICBmaWxlU2l6ZTogcmVhZEZpbGVTaXplVW5pdChpdGVtLmF0dGFjaG1lbnRTaXplKSwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlmIChpdGVtLm9yaWVudGF0aW9uID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZU5vcm1hbC5wdXNoKHRlbXApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3QucHVzaCh0ZW1wKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCk7CiAgICB9LAogICAgLy/muIXnqbrmtojmga/lhoXlrrkKICAgIGNsZWFyQ29udGVudCgpIHsKICAgICAgdGhpcy50aXRsZSA9ICIiOwogICAgICB0aGlzLmNvbnRlbnQgPSAiIjsKICAgICAgdGhpcy52b3RlID0gZGVlcENsb25lKHZvdGVEZWZhdWx0KTsKICAgICAgdGhpcy52b3RlVGVtcCA9IGRlZXBDbG9uZSh2b3RlRGVmYXVsdCk7CiAgICAgIHRoaXMudXBsb2FkRmlsZU5vcm1hbCA9IFtdOwogICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3QgPSBbXTsKICAgIH0sCiAgICAvLyAqLS0tLS0tLS0tLS0tLS0tLS0tLeaKleelqOaTjeS9nC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCiAgICAvL+WPlua2iOS/neWtmAogICAgY2FuY2xlVm90ZUVkaXQoKSB7CiAgICAgIHRoaXMudm90ZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnZvdGVUZW1wID0gZGVlcENsb25lKHRoaXMudm90ZSk7CiAgICB9LAoKICAgIC8v56Gu6K6k5L+d5a2Y5oqV56WoCiAgICB2b3RlU2F2ZTogVGhyb3R0bGUoCiAgICAgIGZ1bmN0aW9uIChpc1NhdmVBUyA9IGZhbHNlKSB7CiAgICAgICAgaWYgKCFpc1NhdmVBUyAmJiAhdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHJldHVybjsKCiAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnZvdGVUZW1wOwogICAgICAgIHRlbXAuZW5hYmxlID0gdHJ1ZTsKICAgICAgICB0ZW1wLnZvdGVPcHRpb25zID0gdGVtcC52b3RlT3B0aW9ucy5maWx0ZXIoCiAgICAgICAgICAodCkgPT4gdC52YWx1ZSAhPSBudWxsICYmIHQudmFsdWUgIT0gIiIKICAgICAgICApOwoKICAgICAgICBsZXQgdXBsb2FkID0ge307CiAgICAgICAgdXBsb2FkLmlkID0gdGVtcC5pZDsKICAgICAgICB1cGxvYWQudG9waWMgPSB0ZW1wLnRvcGljOwogICAgICAgIHVwbG9hZC52b3RlVHlwZSA9IHRlbXAudm90ZVR5cGUgPyAxIDogMDsKICAgICAgICB1cGxvYWQudm90ZU9wdGlvbnMgPSB0ZW1wLnZvdGVPcHRpb25zLm1hcCgoaXRlbSkgPT4gaXRlbS52YWx1ZSk7CiAgICAgICAgdXBsb2FkLmVuZFRpbWUgPSB0ZW1wLmVuZFRpbWU7CgogICAgICAgIHNhdmVWb3RlKHVwbG9hZCkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgY29uc29sZS5kZWJ1Zygic2F2ZSB2b3RlID09PiIgKyBKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgICAgICB0aGlzLnZvdGVEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJzYXZlIGlkIiArIHJlcy5kYXRhLnZvdGVJZCk7CiAgICAgICAgICAgICAgdGVtcC5pZCA9IHJlcy5kYXRhLnZvdGVJZDsKICAgICAgICAgICAgICB0aGlzLnZvdGUgPSBkZWVwQ2xvbmUodGVtcCk7CiAgICAgICAgICAgICAgdGhpcy52b3RlVGVtcCA9IGRlZXBDbG9uZSh0ZW1wKTsKICAgICAgICAgICAgICB0aGlzLmNoYW5nZVNhdmVTdGF0dXMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIGlmIChpc1NhdmVBUykgewogICAgICAgICAgICAgIHRoaXMub25Wb3RlRGVsZXRlKCk7CiAgICAgICAgICAgICAgdGhpcy5zaG93U25hY2soIuaKleelqOWPpuWtmOS4uuWksei0pSIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmt7vliqDmipXnpajlpLHotKUiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnNob3dTbmFjaygi5oKo5o+Q5Lqk55qE5aSq6aKR57mB5LqG77yM56iN562J5LiA5Lya6K+V6K+V5ZCnIik7CiAgICAgIH0sCiAgICAgIDMwMDAKICAgICksCiAgICAvL+a3u+WKoOaKleelqOmAiemhuQogICAgYWRkSXRlbSgpIHsKICAgICAgdGhpcy52b3RlVGVtcC52b3RlT3B0aW9ucy5wdXNoKHsgdmFsdWU6IG51bGwgfSk7CiAgICB9LAogICAgLy/liKDpmaTmipXnpajpgInpobkKICAgIGRlbGV0ZUl0ZW06IGZ1bmN0aW9uIChpbmRleCkgewogICAgICAvLyAgbm90IGFsbG93IHRvIGRlbGV0ZSB0aGUgZmlyc3QKICAgICAgaWYgKGluZGV4ID4gMSkgewogICAgICAgIHRoaXMudm90ZVRlbXAudm90ZU9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfSwKICAgIC8v5Yig6Zmk5oqV56WoCiAgICBvblZvdGVEZWxldGUoKSB7CiAgICAgIHRoaXMudm90ZVRlbXAgPSBkZWVwQ2xvbmUodm90ZURlZmF1bHQpOwogICAgICB0aGlzLnZvdGUgPSBkZWVwQ2xvbmUodm90ZURlZmF1bHQpOwogICAgICB0aGlzLmNoYW5nZVNhdmVTdGF0dXMoKTsKICAgIH0sCgogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0t6ZmE5Lu25LiK5Lyg5pON5L2cLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KICAgIHVwbG9hZEZpbGVOKCkgewogICAgICAvL3RoaXMuJHJlZnMudXBsb2FkRmlsZU4uZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgiY2xpY2siKSk7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkRmlsZU4uY2xpY2soKTsKICAgIH0sCiAgICB1cGxvYWRGaWxlRCgpIHsKICAgICAgdGhpcy4kcmVmcy51cGxvYWRGaWxlRC5jbGljaygpOwogICAgfSwKCiAgICBvbkRlbGV0ZUZpbGUoaW5kZXgsIGlzRGlyZWN0RmlsZSkgewogICAgICBpZiAoaXNEaXJlY3RGaWxlKSB7CiAgICAgICAgdGhpcy51cGxvYWRGaWxlRGlyZWN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgdGhpcy5kaXJlY3Rpb25SZXFldWVzdEhhbmRsZXNbaW5kZXhdLmNhbmNlbCgiY2FuY2xlZmlsZToiK2luZGV4KTsKICAgICAgICB0aGlzLmRpcmVjdGlvblJlcWV1ZXN0SGFuZGxlcy5zcGxpY2UoaW5kZXgsMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coInJlbW92ZSBpbmRleDoiK2luZGV4KTsKICAgICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICB0aGlzLm5vcm1hbFJlcWV1ZXN0SGFuZGxlc1tpbmRleF0uY2FuY2VsKCJjYW5jbGVmaWxlOiIraW5kZXgpOwogICAgICAgIHRoaXMubm9ybWFsUmVxZXVlc3RIYW5kbGVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0sCgogICAgZmlsZVVwbG9hZChldmVudCwgZGlyZWN0KSB7CiAgICAgIGxldCB1cEZpbGVzID0gZGlyZWN0ID8gdGhpcy51cGxvYWRGaWxlRGlyZWN0IDogdGhpcy51cGxvYWRGaWxlTm9ybWFsOwogICAgICBsZXQgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlczsKCiAgICAgIGlmICghZGlyZWN0ICYmIGZpbGUubGVuZ3RoICsgdGhpcy51cGxvYWRGaWxlTm9ybWFsLmxlbmd0aCA+IDEwKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuavj+asoeacgOWkmuWPquiDveS4iuS8oDEw5Liq5paH5Lu2Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZS5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBpdGVtID0gZmlsZVtpXTsKICAgICAgICBpdGVtLmRpcmVjdCA9IGRpcmVjdDsKICAgICAgICBjb25zb2xlLmxvZyhmaWxlW2ldKTsKICAgICAgICBpZiAoaXRlbS5zaXplIC8gMTAyNCAvIDEwMjQgPj0gMTAwKSB7CiAgICAgICAgICB0aGlzLnNob3dTbmFjaygi5oKo5pyJ5paH5Lu25LiK5Lyg5aSx6LSlLOmZhOS7tuacgOWkp+mZkOWItjEwME0iKTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICAvL+S4iuS8oOaWh+S7tuWOu+mHjQogICAgICAgIGlmICh1cEZpbGVzLmZpbmRJbmRleCgodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZSkgPj0gMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvL+S4iuS8oOexu+Wei+WIpOaWrQogICAgICAgIGxldCBleHQgPSBjaGVja1VwbG9hZEZpbGVUeXBlKGl0ZW0ubmFtZSk7CiAgICAgICAgaWYgKGV4dCA9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLnNob3dTbmFjaygi5oKo5LiK5Lyg55qE5paH5Lu25qC85byP5LiN5pSv5oyBIik7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGxldCB0ZW1wID0ge307CiAgICAgICAgdGVtcC50ZXh0ID0gaXRlbS5uYW1lOwogICAgICAgIHRlbXAuZmlsZVR5cGUgPSBleHQ7CiAgICAgICAgdGVtcC5yZXMgPSBmYWxzZTsKICAgICAgICB0ZW1wLmZpbGVTaXplID0gcmVhZEZpbGVTaXplVW5pdChpdGVtLnNpemUpOwogICAgICAgIHRlbXAudXBsb2FkU2l6ZSA9IGl0ZW0uc2l6ZTsKICAgICAgICBpZiAoZGlyZWN0KSB7CiAgICAgICAgICB0ZW1wLm9yaWVudGF0aW9uID0gZ2V0RGlzdHJpYnV0b3JOdW1iZXJCeUZpbGVOYW1lKGl0ZW0ubmFtZSk7CiAgICAgICAgICBjb25zb2xlLmxvZygiPT09PT09PT0+IiArIHRlbXAub3JpZW50YXRpb24pOwogICAgICAgICAgaWYgKAogICAgICAgICAgICB0ZW1wLm9yaWVudGF0aW9uID09IG51bGwgfHwKICAgICAgICAgICAgdHlwZW9mIHRlbXAub3JpZW50YXRpb24gPT0gInVuZGVmaW5lZCIgfHwKICAgICAgICAgICAgdGVtcC5vcmllbnRhdGlvbiA9PSAiIgogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRlbXAuZXJyb3IgPSAi5paH5Lu25ZCN5LiN56ym5ZCI6KaB5rGCIjsKICAgICAgICAgICAgdXBGaWxlcy5wdXNoKHRlbXApOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdXBGaWxlcy5wdXNoKHRlbXApOwoKICAgICAgICBpZiAoZGlyZWN0KSB7CiAgICAgICAgICB0aGlzLnVwbG9hZERpcmVjdEltcChpdGVtLCB0ZW1wKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy51cGxvYWROb3JtYWxJbXAoaXRlbSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogIAogICAgLy/kuIrkvKDmma7pgJrpmYTku7YKICAgIHVwbG9hZE5vcm1hbEltcChpdGVtKSB7CiAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuY2FuY2VsVG9rZW4uc291cmNlKCk7CgogICAgICB0aGlzLm5vcm1hbFJlcWV1ZXN0SGFuZGxlcy5wdXNoKHNvdXJjZSk7CgogICAgICB1cGxvYWRGaWxlKGl0ZW0sc291cmNlLnRva2VuLCAocHJvZ3Jlc3MsIGZpbGVOYW1lKSA9PiB7CiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRGaWxlTm9ybWFsLmZpbmRJbmRleCgodCkgPT4gdC50ZXh0ID09IGZpbGVOYW1lKTsKICAgICAgICBpZiAoaW5kZXggPCAwKSByZXR1cm47CiAgICAgICAgdGhpcy51cGxvYWRGaWxlTm9ybWFsW2luZGV4XS5wcm9ncmVzcyA9IHByb2dyZXNzOwoKICAgICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwgPSBKU09OLnBhcnNlKAogICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlTm9ybWFsKQogICAgICAgICk7CgogICAgICAgIGNvbnNvbGUubG9nKCJ1cGxvYWRGaWxlTm9ybWFsOiIrSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlTm9ybWFsKSk7CiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy51cGxvYWRGaWxlTm9ybWFsLmZpbmRJbmRleCgKICAgICAgICAgICAgKHQpID0+IHQudGV4dCA9PSBpdGVtLm5hbWUKICAgICAgICAgICk7CiAgICAgICAgICBsZXQgdXBkYXRlID0gdGhpcy51cGxvYWRGaWxlTm9ybWFsW2luZGV4XTsKICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICB1cGRhdGVbaW5kZXhdLmVycm9yID0gIuS4iuS8oOWksei0pSI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1cGRhdGUucGF0aCA9IHJlcy5kYXRhLnVybDsKICAgICAgICAgICAgdXBkYXRlLnJlcyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCk9PnsKICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy51cGxvYWRGaWxlTm9ybWFsLmZpbmRJbmRleCgKICAgICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgICApOwogICAgICAgICAgICBpZihpbmRleD49MCl7CiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWxbaW5kZXhdLmVycm9yID0gIuS4iuS8oOWksei0pSI7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KAogICAgICAgICAgKCkgPT4KICAgICAgICAgICAgKHRoaXMudXBsb2FkRmlsZU5vcm1hbCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlTm9ybWFsKQogICAgICAgICAgICApKQogICAgICAgICk7CiAgICB9LAogICAgLy/kuIrkvKDlrprlkJHpmYTku7YKICAgIHVwbG9hZERpcmVjdEltcChpdGVtLCB0ZW1wKSB7CiAgICAgIGRlYWxlckNvZGVWYWxpZCh0ZW1wLm9yaWVudGF0aW9uKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMgPT0gInVuZGVmaW5lZCIgfHwgcmVzLmNvZGUgIT0gMCB8fCAhcmVzLmRhdGEpIHsKICAgICAgICAgICAgbGV0IGVycm9yID0gIiI7CiAgICAgICAgICAgIGlmKHJlcy5jb2RlPT00Mil7CiAgICAgICAgICAgICAgZXJyb3IgPSAi5pyq5om+5Yiw57uP6ZSA5ZWGIjsKICAgICAgICAgICAgfWVsc2UgaWYocmVzLmNvZGU9PTQzKXsKICAgICAgICAgICAgICBlcnJvciA9ICLmsqHmnInmnYPpmZDlkJHmraTljLrln5/lj5HpgIHmlofnq6AiOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICBlcnJvciA9ICLmlofku7blkI3kuI3nrKblkIjopoHmsYIiOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KAogICAgICAgICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdFtpbmRleF0uZXJyb3IgPSBlcnJvcjsKICAgICAgICAgICAgCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KAogICAgICAgICAgICAgICh0KSA9PiB0LnRleHQgPT0gaXRlbS5uYW1lCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKCiAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuY2FuY2VsVG9rZW4uc291cmNlKCk7CgogICAgICAgICAgICB0aGlzLmRpcmVjdGlvblJlcWV1ZXN0SGFuZGxlcy5wdXNoKHNvdXJjZSk7CgogICAgICAgICAgICB1cGxvYWRGaWxlKGl0ZW0sc291cmNlLnRva2VuLCAocHJvZ3Jlc3MsIGZpbGVOYW1lKSA9PiB7CiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRGaWxlRGlyZWN0LmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICh0KSA9PiB0LnRleHQgPT0gZmlsZU5hbWUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjsKICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdLnByb2dyZXNzID0gcHJvZ3Jlc3M7CgogICAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVEaXJlY3QpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZmluZEluZGV4KAogICAgICAgICAgICAgICAgICAodCkgPT4gdC50ZXh0ID09IGl0ZW0ubmFtZQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGxldCB1cGRhdGUgPSB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdOwogICAgICAgICAgICAgICAgaWYgKCFyZXMgfHwgdHlwZW9mIHJlcyA9PSAidW5kZWZpbmVkIiB8fCByZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZS5lcnJvciA9ICLkuIrkvKDlpLHotKUiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdXBkYXRlLnBhdGggPSByZXMuZGF0YS51cmw7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZS5yZXMgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMudXBsb2FkRmlsZURpcmVjdC5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAgICAgKHQpID0+IHQudGV4dCA9PSBpdGVtLm5hbWUKICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgIGlmKGluZGV4Pj0wKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdLmVycm9yID0gIuS4iuS8oOWksei0pSI7CiAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5maW5hbGx5KAogICAgICAgICAgICAgICAgKCkgPT4KICAgICAgICAgICAgICAgICAgKHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KQogICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRGaWxlRGlyZWN0LmZpbmRJbmRleCgKICAgICAgICAgICAgKHQpID0+IHQudGV4dCA9PSBpdGVtLm5hbWUKICAgICAgICAgICk7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3RbaW5kZXhdLmVycm9yID0gIuaWh+S7tuWQjeS4jeespuWQiOimgeaxgiI7CiAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLnVwbG9hZEZpbGVEaXJlY3QpKTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KAogICAgICAgICAgKCkgPT4KICAgICAgICAgICAgKHRoaXMudXBsb2FkRmlsZURpcmVjdCA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KQogICAgICAgICAgICApKQogICAgICAgICk7CiAgICB9LAoKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLeS/neWtmOiNieeov+aTjeS9nC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgc2F2ZUFydGljbGU6IFRocm90dGxlKAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zYXZlQXJ0aWNsZUltcCgpOwogICAgICB9LAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soIuaCqOaPkOS6pOeahOWkqumikee5geS6hu+8jOeojeetieS4gOS8muivleivleWQpyIpOwogICAgICB9CiAgICApLAogICAgYXV0b1NhdmU6IERlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMubmVlZFNhdmUpIHsKICAgICAgICB0aGlzLmF1dG9TYXZpbmcgPSB0cnVlOwogICAgICAgIHRoaXMuc2F2ZUFydGljbGVJbXAoKTsKICAgICAgfQogICAgfSwgMTAwMDApLAoKICAgIHNhdmVBcnRpY2xlSW1wKCkgewogICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uKCkpIHsKICAgICAgICB0aGlzLmF1dG9TYXZpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGF0dGFjaG1lbnRMaXN0cyA9IFtdOwogICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGxldCB0ZW1wID0ge307CiAgICAgICAgdGVtcC5wYXRoID0gaXRlbS5wYXRoOwogICAgICAgIHRlbXAuYXR0YWNobWVudFNpemUgPSBpdGVtLnVwbG9hZFNpemU7CiAgICAgICAgYXR0YWNobWVudExpc3RzLnB1c2godGVtcCk7CiAgICAgIH0pOwogICAgICB0aGlzLnVwbG9hZEZpbGVEaXJlY3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGxldCB0ZW1wID0ge307CiAgICAgICAgdGVtcC5wYXRoID0gaXRlbS5wYXRoOwogICAgICAgIHRlbXAub3JpZW50YXRpb24gPSBpdGVtLm9yaWVudGF0aW9uOwogICAgICAgIHRlbXAuYXR0YWNobWVudFNpemUgPSBpdGVtLnVwbG9hZFNpemU7CiAgICAgICAgYXR0YWNobWVudExpc3RzLnB1c2godGVtcCk7CiAgICAgIH0pOwogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBpZDogdGhpcy5pZCwKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsCiAgICAgICAgdm90ZUlkOiB0aGlzLnZvdGUuaWQsCiAgICAgICAgYXR0YWNobWVudExpc3Q6IGF0dGFjaG1lbnRMaXN0cywKICAgICAgfTsKCiAgICAgIHNhdmVNZXNzYWdlKGRhdGEpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMubmVlZFNhdmUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zaG93U25hY2sodGhpcy5hdXRvU2F2aW5nID8gIuiHquWKqOS/neWtmOaIkOWKnyIgOiAi5L+d5a2Y5oiQ5YqfIik7CgogICAgICAgICAgICBpZiAodGhpcy5pZCAhPSByZXMuZGF0YSkgewogICAgICAgICAgICAgIHRoaXMuaWQgPSByZXMuZGF0YTsKCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICAgICAgcXVlcnk6IHsgaWQ6IGFlc0VuY3J5cHQodGhpcy5pZCArICIiKSB9LAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgdGhpcy5zaG93U25hY2soIuS/neWtmOWksei0pSIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlID09IG51bGwgfHwgdHlwZW9mIGVycm9yLnJlc3BvbnNlID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5hdXRvU2F2aW5nKSB0aGlzLnNob3dTbmFjaygi5L+d5a2Y5aSx6LSlIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGxldCByZXMgPSBlcnJvci5yZXNwb25zZTsKICAgICAgICAgIGlmIChyZXMuZGF0YSA9PSBudWxsIHx8IHR5cGVvZiByZXMuZGF0YSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgdGhpcy5zaG93U25hY2soIuS/neWtmOWksei0pSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBkYXRhLmNvZGUgPT0gbnVsbCB8fAogICAgICAgICAgICB0eXBlb2YgZGF0YS5jb2RlID09ICJ1bmRlZmluZWQiIHx8CiAgICAgICAgICAgIGRhdGEuY29kZSAhPSA0CiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHRoaXMuc2hvd1NuYWNrKCLkv53lrZjlpLHotKUiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCBzZW5zaXRpdmVXb3JkcyA9IGRhdGEuZGF0YTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgc2Vuc2l0aXZlV29yZHMgPT0gbnVsbCB8fAogICAgICAgICAgICB0eXBlb2Ygc2Vuc2l0aXZlV29yZHMgPT0gInVuZGVmaW5lZCIgfHwKICAgICAgICAgICAgc2Vuc2l0aXZlV29yZHMubGVuZ3RoID09IDAKICAgICAgICAgICkgewogICAgICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgdGhpcy5zaG93U25hY2soIuS/neWtmOWksei0pSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodGhpcy5hdXRvU2F2aW5nKSByZXR1cm47CiAgICAgICAgICAgIHRoaXMuc2hvd1NuYWNrKCLmgqjmj5DkuqTnmoTlhoXlrrnkuK3mnInmlY/mhJ/or43vvIzor7fov5vooYzkv67mlLnlkI7ph43mlrDmj5DkuqQiKTsKICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygiZXJyb3IiICsgSlNPTi5zdHJpbmdpZnkoc2Vuc2l0aXZlV29yZHMpKTsKICAgICAgICAgICAgbGV0IHRpdGxlRXJyb3IgPSBbXTsKICAgICAgICAgICAgc2Vuc2l0aXZlV29yZHMuZm9yRWFjaCgod29yZCkgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLnRpdGxlLmluZGV4T2Yod29yZCkgPj0gMCkgewogICAgICAgICAgICAgICAgdGl0bGVFcnJvci5wdXNoKHdvcmQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBoaWdoTGlnaHRBbGxUZXh0KHRoaXMuY29udGVudCwgd29yZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAodGl0bGVFcnJvci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgdGhpcy50aXRsZUVycm9yTWVzc2FnZSA9ICLljIXlkKvmlY/mhJ/or406IjsKICAgICAgICAgICAgICB0aXRsZUVycm9yLmZvckVhY2goKHdvcmQpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudGl0bGVFcnJvck1lc3NhZ2UgKz0gd29yZCArICIgIjsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gKHRoaXMuYXV0b1NhdmluZyA9IGZhbHNlKSk7CiAgICB9LAogICAgY2FjdWxhdGVEZWxlYXJMaXN0KCkgewogICAgICB0aGlzLmRlbGVhckxpc3QgPSBbXTsKICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRGaWxlRGlyZWN0KSk7CiAgICAgIHRoaXMudXBsb2FkRmlsZURpcmVjdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKAogICAgICAgICAgaXRlbS5yZXMgJiYKICAgICAgICAgIChpdGVtLmVycm9yID09IG51bGwgfHwgdHlwZW9mIGl0ZW0uZXJyb3IgPT0gInVuZGVmaW5lZCIpCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLmRlbGVhckxpc3QucHVzaChpdGVtLm9yaWVudGF0aW9uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmRlbGVhckxpc3QpOwogICAgfSwKICAgIG9wZW5QcmV2aWV3KCkgewogICAgICB0aGlzLnByZXZpZXcgPSB0aGlzLnByZWNvbmRpdGlvbigpOwogICAgfSwKCiAgICBwdWJsaXNoQXJ0aWNsZSgpIHsKICAgICAgdGhpcy5wdWJsaXNoID0gdGhpcy5wcmVjb25kaXRpb24oKTsKICAgIH0sCgogICAgcHJlY29uZGl0aW9uKCkgewogICAgICBsZXQgZXJyb3IgPSBudWxsOwogICAgICBpZiAoaXNOdWxsKHRoaXMudGl0bGUpKSB7CiAgICAgICAgaWYgKCF0aGlzLmF1dG9TYXZpbmcpIHsKICAgICAgICAgIGVycm9yID0gdGhpcy50aXRsZUVycm9yTWVzc2FnZSA9ICLmoIfpopjkuI3og73kuLrnqboiOwogICAgICAgICAgdGhpcy5zaG93U25hY2soZXJyb3IpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIAogICAgICBpZiAoaXNOdWxsKHRoaXMuY29udGVudCkpIHsKICAgICAgICBpZiAoIXRoaXMuYXV0b1NhdmluZykgdGhpcy5zaG93U25hY2soIuato+aWh+WGheWuueS4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnN1bUxldHRlcigpLm51bSA+IDUwMDApIHsKICAgICAgICB0aGlzLnNob3dTbmFjaygi5q2j5paH5YaF5a655LiN6IO96LaF6L+HNTAwMOWtlyIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy51cGxvYWRGaWxlRGlyZWN0LmZpbmRJbmRleCgoaXRlbSkgPT4gewogICAgICAgIGlmIChpdGVtLmVycm9yICE9IG51bGwpIHsKICAgICAgICAgIGVycm9yID0gaXRlbS5lcnJvcjsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoaXRlbS5yZXMgPT0gZmFsc2UpIHsKICAgICAgICAgIGVycm9yID0gIuivt+etieW+heaWh+S7tuS4iuS8oOWujOaIkCI7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoZXJyb3IgIT0gbnVsbCAmJiAhdGhpcy5hdXRvU2F2aW5nKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soZXJyb3IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLnVwbG9hZEZpbGVOb3JtYWwuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGlmIChpdGVtLmVycm9yICE9IG51bGwpIHsKICAgICAgICAgIGVycm9yID0gaXRlbS5lcnJvcjsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoaXRlbS5yZXMgPT0gZmFsc2UpIHsKICAgICAgICAgIGVycm9yID0gIuivt+etieW+heaWh+S7tuS4iuS8oOWujOaIkCI7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoZXJyb3IgIT0gbnVsbCAmJiAhdGhpcy5hdXRvU2F2aW5nKSB7CiAgICAgICAgdGhpcy5zaG93U25hY2soZXJyb3IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBzdW1MZXR0ZXIoKSB7CiAgICAgIHZhciBodG1sID0gdGhpcy5jb250ZW50OwogICAgICB2YXIgcmUxID0gbmV3IFJlZ0V4cCgiPC4rPz4iLCAiZyIpOwogICAgICB2YXIgdHh0ID0gaHRtbC5yZXBsYWNlKHJlMSwgIiIpOwogICAgICB0eHQgPSB0eHQucmVwbGFjZSgvXG4vZywgIiIpOwogICAgICB0eHQgPSB0eHQucmVwbGFjZSgvJm5ic3A7L2csICIgIik7CiAgICAgIHZhciBudW0gPSB0eHQubGVuZ3RoOwogICAgICByZXR1cm4geyB0eHQ6IHR4dCwgbnVtOiBudW0gfTsKICAgIH0sCiAgICBzaG93U25hY2sobWVzc2FnZSkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5wcmV2aWV3IHx8CiAgICAgICAgdGhpcy5wdWJsaXNoIHx8CiAgICAgICAgdGhpcy4kcm91dGUucGF0aCAhPSAiL3B1Ymxpc2hBcnRpY2xlIgogICAgICApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2hvd1NuYWNrYmFyKG1lc3NhZ2UpOwogICAgfSwKICAgIGNsb3NlU25hY2soKSB7CiAgICAgIGNsb3NlU25hY2tiYXIoKTsKICAgIH0sCgogICAgY2hhbmdlU2F2ZVN0YXR1cygpIHsKICAgICAgdGhpcy5uZWVkU2F2ZSA9IHRydWU7CiAgICAgIHRoaXMuYXV0b1NhdmUoKTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgY29udGVudCgpIHsKICAgICAgdGhpcy5jaGFuZ2VTYXZlU3RhdHVzKCk7CiAgICB9LAogICAgdGl0bGUoKSB7CiAgICAgIHRoaXMudGl0bGVFcnJvck1lc3NhZ2UgPSAiIjsKICAgICAgdGhpcy5jaGFuZ2VTYXZlU3RhdHVzKCk7CiAgICB9LAogICAgdXBsb2FkRmlsZURpcmVjdCgpIHsKICAgICAgdGhpcy5jYWN1bGF0ZURlbGVhckxpc3QoKTsKICAgICAgdGhpcy5jaGFuZ2VTYXZlU3RhdHVzKCk7CiAgICB9LAogICAgdXBsb2FkRmlsZU5vcm1hbCgpIHsKICAgICAgdGhpcy5jaGFuZ2VTYXZlU3RhdHVzKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/page/publishArticle","sourcesContent":["<template>\n  <v-container fluid class=\"pa-0 publish_content\">\n    <!-- 文章标题 -->\n    <title-editor v-model=\"title\" :error-messages=\"titleErrorMessage\" />\n\n    <!-- 正文编辑器 -->\n    <app-editor ref=\"editor\" v-model=\"content\" />\n\n    <div class=\"append-content\">\n      <div class=\"appendix mt-4 ml-5 mr-5\" height=\"18px\">\n        <v-btn\n          plain\n          text\n          color=\"#1867c0ff\"\n          :ripple=\"false\"\n          height=\"18px\"\n          class=\"pa-0 ma-0\"\n          @click=\"uploadFileN\"\n        >\n          <v-icon height=\"16px\" width=\"16px\" left> mdi-paperclip </v-icon>\n          Add Attachments\n          <input\n            ref=\"uploadFileN\"\n            type=\"file\"\n            @change=\"fileUpload($event, false)\"\n            @click=\"resetUploaderN\"\n            multiple=\"multiple\"\n            :accept=\"inputFileAccept\"\n            hidden\n          />\n        </v-btn>\n        <div class=\"ml-4 mr-4 divider\" vertical></div>\n      </div>\n      <!-- 文件附件部分 开始 -->\n      <div class=\"ml-5 mt-4 mr-5\">\n        <div v-if=\"uploadFileNormal.length > 0\">\n          <v-row class=\"ma-0 pa-0\">\n            <span class=\"files-category mr-6\">\n              Attachments({{ uploadFileNormal.length }})\n            </span>\n            <v-btn\n              depressed\n              plain\n              text\n              color=\"#1867c0ff\"\n              :ripple=\"false\"\n              height=\"20px\"\n              min-width=\"24px\"\n              class=\"pa-0 ma-0\"\n              @click=\"removeAllUploadFileNormal\"\n            >\n              Delete All\n            </v-btn>\n          </v-row>\n          <v-row no-gutters class=\"pa-0 ma-0 mt-2\">\n            <file-item\n              v-for=\"(item, hindex) in uploadFileNormal\"\n              :key=\"hindex\"\n              @onDelete=\"onDeleteFile(hindex, false)\"\n              class=\"pa-0 mr-4 file-item\"\n              :apFile=\"item\"\n            ></file-item>\n          </v-row>\n        </div>\n      </div>\n    </div>\n\n    <div style=\"height: 128px; display: block\"></div>\n\n    <!-- 底部按钮 -->\n    <v-footer padless fixed height=\"64\">\n      <v-spacer></v-spacer>\n      <v-btn\n        class=\"mr-6\"\n        width=\"105px\"\n        height=\"36px\"\n        outlined\n        depressed\n        dark\n        color=\"#1867C0FF\"\n        @click=\"\n          openPreview();\n          closeSnack();\n        \"\n      >\n        Preview\n      </v-btn>\n      <v-btn\n        class=\"mr-8\"\n        min-width=\"105px\"\n        depressed\n        dark\n        color=\"blue\"\n        @click=\"\n          publishArticle();\n          closeSnack();\n        \"\n      >\n        Publish\n      </v-btn>\n    </v-footer>\n    <preview\n      :open=\"preview && $route.path == '/publishArticle'\"\n      @closeDialog=\"preview = false\"\n      :uploadFileDirect=\"uploadFileDirect\"\n      :uploadFileNormal=\"uploadFileNormal\"\n      :vote=\"vote\"\n      :title=\"title\"\n      :content=\"content\"\n    />\n    <publish\n      :open=\"publish && $route.path == '/publishArticle'\"\n      :id=\"id\"\n      :voteEnable=\"vote.enable\"\n      :dealer=\"delearList\"\n      @closeDialog=\"publish = false\"\n    />\n    <confirm ref=\"confirm\" />\n  </v-container>\n</template>\n<script>\nimport {\n  saveMessage,\n  getArticleDetail,\n  saveVote,\n  uploadFile,\n  dealerCodeValid,\n} from \"@/api/getData.js\";\nimport { aesEncrypt, aesDecrypt } from \"@/utils/encryption.js\";\nimport { highLightAllText } from \"@/utils/articleUtils.js\";\nimport { Debounce, Throttle, deepClone } from \"@/utils/tools.js\";\nimport { showSnackbar, closeSnackbar } from \"@/utils/snackbar.js\";\nimport { isNull } from \"@/utils/stringUtils.js\";\nimport { offsetMonthTime } from \"@/utils/timeFormate.js\";\nimport { EventBus } from \"@/utils/event-bus\";\nimport axios from 'axios';\nimport {\n  checkUploadFileType,\n  INPUT_FILE_ACCEPT,\n  readFileSizeUnit,\n  getDistributorNumberByFileName,\n} from \"@/utils/filesUtils.js\";\nconst voteDefault = {\n  id: null,\n  enable: false,\n  topic: \"\",\n  voteType: false,\n  voteOptions: [{}, {}],\n  endTime: offsetMonthTime(1).format(\"yyyy-MM-dd hh:mm:ss\"),\n};\nexport default {\n  data() {\n    return {\n      id: null,\n      title: \"\",\n      content: \"\",\n      titleErrorMessage: \"\",\n      inputFileAccept:INPUT_FILE_ACCEPT,  \n      maxTime: offsetMonthTime(1),\n      vote: deepClone(voteDefault),\n      voteTemp: deepClone(voteDefault),\n      voteDialog: false,\n      uploadFileNormal: [],\n      uploadFileDirect: [],\n      delearList: [],\n      preview: false,\n      publish: false,\n      needSave: false,\n      autoSaving: false,\n      //普通附件上传句柄集合\n      normalReqeuestHandles:[],\n      //定向附件上传句柄集合\n      directionReqeuestHandles:[],\n      \n      cancelToken : axios.CancelToken,\n    };\n  },\n  components: {\n    appEditor: () => import(\"./editor.vue\"),\n    titleEditor: () => import(\"./title.vue\"),\n    \n    \n    fileItem: () => import(\"./fileOption.vue\"),\n    \n    preview: () => import(\"./preview.vue\"),\n    publish: () => import(\"./publish.vue\"),\n    confirm: () => import(\"@/components/base/conform.vue\"),\n  },\n  // 路由更新处理\n  beforeRouteUpdate(to, from, next) {    \n    if (this.needSave) {\n      this.$refs.confirm\n        .confirm(\n          \"您当前有修改的信息未保存，离开当前页面您输入的信息将不会被保存。\"\n        )\n        .then(() => {\n          next(true);\n          this.reEditIfNeed(to.query.id);\n        })\n        .catch(() => next(false));\n    } else {\n      next(true);\n\n      if (this.reEditIfNeed(to.query.id)) return;\n      this.saveAsNewMessage(to.params);\n    }\n  },\n\n  //路由离开处理\n  beforeRouteLeave(to, from, next) {\n    this.closeSnack();\n    if (this.needSave) {\n      this.$refs.confirm\n        .confirm(\n          \"您当前有修改的信息未保存，离开当前页面您输入的信息将不会被保存。\"\n        )\n        .then(() => {          \n          next(true);\n        })\n        .catch(() => next(false));\n    } else {\n      next(true);\n    }\n  },\n\n  mounted() {\n    if (!this.reEditIfNeed(this.$route.query.id)) {\n      this.saveAsNewMessage(this.$route.params);\n    }\n    let _that = this;\n    console.log(\"mounted:register wantClosePublicarticle\");\n\n    EventBus.$off('wantClosePublicarticle')\n    EventBus.$on(\"wantClosePublicarticle\", () => {\n        console.log(\"needSave:\"+_that.needSave);\n       if (_that.needSave) {\n            _that.$refs.confirm\n             .confirm(\n               \"您当前有修改的信息未保存，离开当前页面您输入的信息将不会被保存。\"\n             )\n             .then(() => {          \n               _that.needSave = false;\n               EventBus.$emit(\"closeTab\",\"publishArticle\");\n             }).catch(()=>{\n               console.log(\"cancel\");\n             });\n        } else {\n            EventBus.$emit(\"closeTab\",\"publishArticle\");\n        }\n    });\n\n    window.addEventListener(\"beforeunload\", this.beforeunloadHandler);\n  },\n  destroyed() {\n    window.removeEventListener(\"beforeunload\", this.beforeunloadHandler);\n  },\n\n  methods: {\n    //全部删除所有普通附件\n    removeAllUploadFileNormal(){\n      this.uploadFileNormal = []\n\n      this.normalReqeuestHandles.forEach((source)=>{\n          source.cancel(\"canclefile\");\n      });      \n      this.normalReqeuestHandles = [];\n    },\n    //移除所有定向附件\n    removeAllDirectionFileNormal(){\n      this.uploadFileDirect = []\n\n      this.directionReqeuestHandles.forEach((source)=>{\n          source.cancel(\"canclefile\");\n      });      \n      this.directionReqeuestHandles = [];\n    },\n\n    beforeunloadHandler(e) {\n      if (e) {\n        e.returnValue = \"关闭提示\";\n      }\n      return \"关闭提示\";\n    },\n    resetUploaderN() {\n      this.$refs.uploadFileN.value = \"\";\n    },\n\n    resetUploaderD() {\n      this.$refs.uploadFileD.value = \"\";\n    },\n    //另存为创建新消息\n    saveAsNewMessage(params) {\n      console.debug(\"public======>\" + params);\n      if (params == null || typeof params == \"undefined\") return;\n      let id = params.id;\n      if (!id || typeof id == \"undefined\" || isNaN(id)) return;\n\n      this.id = null;\n      this.restoreMessage(id, true);\n    },\n    //草稿重新编辑\n    reEditIfNeed(id) {\n      if (!id || typeof id == \"undefined\") return false;\n\n      id = Number(aesDecrypt(id));\n      if (id == null || isNaN(id) || this.id == id) return false;\n      this.id = id;\n      this.restoreMessage(id);\n      return true;\n    },\n    //重设消息内容\n    restoreMessage(id, isNew = false) {\n      this.clearContent();\n      //请求后台获取消息内容\n      getArticleDetail(id)\n        .then((res) => {\n          if (res == null || typeof res == undefined) return;\n          let data = res.data;\n          this.title = data.title;\n          this.content = data.content;\n          if (\n            data.voteInfoDTO != null &&\n            typeof data.voteInfoDTO != undefined &&\n            data.voteInfoDTO.options.length >= 2\n          ) {\n            let vote = {\n              id: isNew ? null : data.voteInfoDTO.voteId,\n              enable: true,\n              topic: data.voteInfoDTO.topic,\n              voteOptions: data.voteInfoDTO.options.map((item) => {\n                return { value: item.optionName };\n              }),\n              voteType: false,\n              endTime: offsetMonthTime(1).format(\"yyyy-MM-dd hh:mm:ss\"),\n            };\n            this.voteTemp = deepClone(vote);\n\n            if (isNew) {\n              this.voteSave(true);\n              return;\n            } else {\n              this.vote = deepClone(vote);\n            }\n          }\n\n          if (\n            !data.attachments ||\n            typeof data.attachments == \"undefined\" ||\n            data.attachments.length > 0\n          ) {\n            console.debug(\"attachments:\" + JSON.stringify(data.attachments));\n            data.attachments.forEach((item) => {\n              let fileName = item.attachmentName;\n              let temp = {\n                res: true,\n                text: fileName,\n                fileType: checkUploadFileType(fileName),\n                path: item.url,\n                progress: 100,\n                orientation: item.orientation,\n                uploadSize: item.attachmentSize,\n                fileSize: readFileSizeUnit(item.attachmentSize),\n              };\n              if (item.orientation == null) {\n                this.uploadFileNormal.push(temp);\n              } else {\n                this.uploadFileDirect.push(temp);\n              }\n            });\n          }\n        })\n        .catch();\n    },\n    //清空消息内容\n    clearContent() {\n      this.title = \"\";\n      this.content = \"\";\n      this.vote = deepClone(voteDefault);\n      this.voteTemp = deepClone(voteDefault);\n      this.uploadFileNormal = [];\n      this.uploadFileDirect = [];\n    },\n    // *-------------------投票操作---------------------------*/\n    //取消保存\n    cancleVoteEdit() {\n      this.voteDialog = false;\n      this.voteTemp = deepClone(this.vote);\n    },\n\n    //确认保存投票\n    voteSave: Throttle(\n      function (isSaveAS = false) {\n        if (!isSaveAS && !this.$refs.form.validate()) return;\n\n        let temp = this.voteTemp;\n        temp.enable = true;\n        temp.voteOptions = temp.voteOptions.filter(\n          (t) => t.value != null && t.value != \"\"\n        );\n\n        let upload = {};\n        upload.id = temp.id;\n        upload.topic = temp.topic;\n        upload.voteType = temp.voteType ? 1 : 0;\n        upload.voteOptions = temp.voteOptions.map((item) => item.value);\n        upload.endTime = temp.endTime;\n\n        saveVote(upload)\n          .then((res) => {\n            console.debug(\"save vote ==>\" + JSON.stringify(res));\n            if (res.code == 0) {\n              this.voteDialog = false;\n              console.debug(\"save id\" + res.data.voteId);\n              temp.id = res.data.voteId;\n              this.vote = deepClone(temp);\n              this.voteTemp = deepClone(temp);\n              this.changeSaveStatus();\n            }\n          })\n          .catch(() => {\n            if (isSaveAS) {\n              this.onVoteDelete();\n              this.showSnack(\"投票另存为失败\");\n            } else {\n              this.showSnack(\"添加投票失败\");\n            }\n          });\n      },\n      function () {\n        this.showSnack(\"您提交的太频繁了，稍等一会试试吧\");\n      },\n      3000\n    ),\n    //添加投票选项\n    addItem() {\n      this.voteTemp.voteOptions.push({ value: null });\n    },\n    //删除投票选项\n    deleteItem: function (index) {\n      //  not allow to delete the first\n      if (index > 1) {\n        this.voteTemp.voteOptions.splice(index, 1);\n      }\n    },\n    //删除投票\n    onVoteDelete() {\n      this.voteTemp = deepClone(voteDefault);\n      this.vote = deepClone(voteDefault);\n      this.changeSaveStatus();\n    },\n\n    /*-------------------附件上传操作---------------------------*/\n    uploadFileN() {\n      //this.$refs.uploadFileN.dispatchEvent(new MouseEvent(\"click\"));\n      this.$refs.uploadFileN.click();\n    },\n    uploadFileD() {\n      this.$refs.uploadFileD.click();\n    },\n\n    onDeleteFile(index, isDirectFile) {\n      if (isDirectFile) {\n        this.uploadFileDirect.splice(index, 1);\n        this.directionReqeuestHandles[index].cancel(\"canclefile:\"+index);\n        this.directionReqeuestHandles.splice(index,1);\n      } else {\n        console.log(\"remove index:\"+index);\n        this.uploadFileNormal.splice(index, 1);\n        this.normalReqeuestHandles[index].cancel(\"canclefile:\"+index);\n        this.normalReqeuestHandles.splice(index, 1);\n      }\n    },\n\n    fileUpload(event, direct) {\n      let upFiles = direct ? this.uploadFileDirect : this.uploadFileNormal;\n      let file = event.target.files;\n\n      if (!direct && file.length + this.uploadFileNormal.length > 10) {\n        this.showSnack(\"每次最多只能上传10个文件\");\n        return;\n      }\n      for (let i = 0; i < file.length; i++) {\n        let item = file[i];\n        item.direct = direct;\n        console.log(file[i]);\n        if (item.size / 1024 / 1024 >= 100) {\n          this.showSnack(\"您有文件上传失败,附件最大限制100M\");\n          continue;\n        }\n        //上传文件去重\n        if (upFiles.findIndex((t) => t.text == item.name) >= 0) {\n          continue;\n        }\n\n        //上传类型判断\n        let ext = checkUploadFileType(item.name);\n        if (ext == null) {\n          this.showSnack(\"您上传的文件格式不支持\");\n          continue;\n        }\n\n        let temp = {};\n        temp.text = item.name;\n        temp.fileType = ext;\n        temp.res = false;\n        temp.fileSize = readFileSizeUnit(item.size);\n        temp.uploadSize = item.size;\n        if (direct) {\n          temp.orientation = getDistributorNumberByFileName(item.name);\n          console.log(\"========>\" + temp.orientation);\n          if (\n            temp.orientation == null ||\n            typeof temp.orientation == \"undefined\" ||\n            temp.orientation == \"\"\n          ) {\n            temp.error = \"文件名不符合要求\";\n            upFiles.push(temp);\n            continue;\n          }\n        }\n        upFiles.push(temp);\n\n        if (direct) {\n          this.uploadDirectImp(item, temp);\n        } else {\n          this.uploadNormalImp(item);\n        }\n      }\n    },\n  \n    //上传普通附件\n    uploadNormalImp(item) {\n      const source = this.cancelToken.source();\n\n      this.normalReqeuestHandles.push(source);\n\n      uploadFile(item,source.token, (progress, fileName) => {\n        var index = this.uploadFileNormal.findIndex((t) => t.text == fileName);\n        if (index < 0) return;\n        this.uploadFileNormal[index].progress = progress;\n\n        this.uploadFileNormal = JSON.parse(\n          JSON.stringify(this.uploadFileNormal)\n        );\n\n        console.log(\"uploadFileNormal:\"+JSON.stringify(this.uploadFileNormal));\n      })\n        .then((res) => {\n          let index = this.uploadFileNormal.findIndex(\n            (t) => t.text == item.name\n          );\n          let update = this.uploadFileNormal[index];\n          if (!res || typeof res == \"undefined\" || res.code != 0) {\n            update[index].error = \"上传失败\";\n          } else {\n            update.path = res.data.url;\n            update.res = true;\n          }\n        })\n        .catch(()=>{\n            let index = this.uploadFileNormal.findIndex(\n              (t) => t.text == item.name\n            );\n            if(index>=0){\n                this.uploadFileNormal[index].error = \"上传失败\";\n            }\n        })\n        .finally(\n          () =>\n            (this.uploadFileNormal = JSON.parse(\n              JSON.stringify(this.uploadFileNormal)\n            ))\n        );\n    },\n    //上传定向附件\n    uploadDirectImp(item, temp) {\n      dealerCodeValid(temp.orientation)\n        .then((res) => {\n          if (!res || typeof res == \"undefined\" || res.code != 0 || !res.data) {\n            let error = \"\";\n            if(res.code==42){\n              error = \"未找到经销商\";\n            }else if(res.code==43){\n              error = \"没有权限向此区域发送文章\";\n            }else{\n              error = \"文件名不符合要求\";\n            }\n\n            let index = this.uploadFileDirect.findIndex(\n                  (t) => t.text == item.name\n                );\n\n            this.uploadFileDirect[index].error = error;\n            \n          } else {\n            var index = this.uploadFileDirect.findIndex(\n              (t) => t.text == item.name\n            );\n            if (index < 0) return;\n\n            const source = this.cancelToken.source();\n\n            this.directionReqeuestHandles.push(source);\n\n            uploadFile(item,source.token, (progress, fileName) => {\n              var index = this.uploadFileDirect.findIndex(\n                (t) => t.text == fileName\n              );\n              if (index < 0) return;\n              this.uploadFileDirect[index].progress = progress;\n\n              this.uploadFileDirect = JSON.parse(\n                JSON.stringify(this.uploadFileDirect)\n              );\n            })\n              .then((res) => {\n                let index = this.uploadFileDirect.findIndex(\n                  (t) => t.text == item.name\n                );\n                let update = this.uploadFileDirect[index];\n                if (!res || typeof res == \"undefined\" || res.code != 0) {\n                  update.error = \"上传失败\";\n                } else {\n                  update.path = res.data.url;\n                  update.res = true;\n                }\n              })\n              .catch(()=>{\n                  let index = this.uploadFileDirect.findIndex(\n                    (t) => t.text == item.name\n                  );\n\n                  if(index>=0){\n                    this.uploadFileDirect[index].error = \"上传失败\";\n                  }                  \n              })\n              .finally(\n                () =>\n                  (this.uploadFileDirect = JSON.parse(\n                    JSON.stringify(this.uploadFileDirect)\n                  ))\n              );\n          }\n        })\n        .catch(() => {\n          var index = this.uploadFileDirect.findIndex(\n            (t) => t.text == item.name\n          );\n          this.uploadFileDirect[index].error = \"文件名不符合要求\";\n          console.log(JSON.stringify(this.uploadFileDirect));\n        })\n        .finally(\n          () =>\n            (this.uploadFileDirect = JSON.parse(\n              JSON.stringify(this.uploadFileDirect)\n            ))\n        );\n    },\n\n    /*-------------------保存草稿操作---------------------------*/\n\n    saveArticle: Throttle(\n      function () {\n        this.saveArticleImp();\n      },\n      function () {\n        this.showSnack(\"您提交的太频繁了，稍等一会试试吧\");\n      }\n    ),\n    autoSave: Debounce(function () {\n      if (this.needSave) {\n        this.autoSaving = true;\n        this.saveArticleImp();\n      }\n    }, 10000),\n\n    saveArticleImp() {\n      if (!this.precondition()) {\n        this.autoSaving = false;\n        return;\n      }\n      let attachmentLists = [];\n      this.uploadFileNormal.forEach((item) => {\n        let temp = {};\n        temp.path = item.path;\n        temp.attachmentSize = item.uploadSize;\n        attachmentLists.push(temp);\n      });\n      this.uploadFileDirect.forEach((item) => {\n        let temp = {};\n        temp.path = item.path;\n        temp.orientation = item.orientation;\n        temp.attachmentSize = item.uploadSize;\n        attachmentLists.push(temp);\n      });\n      let data = {\n        id: this.id,\n        title: this.title,\n        content: this.content,\n        voteId: this.vote.id,\n        attachmentList: attachmentLists,\n      };\n\n      saveMessage(data)\n        .then((res) => {\n          console.log(res);\n          if (res.code == 0) {\n            this.needSave = false;\n            this.showSnack(this.autoSaving ? \"自动保存成功\" : \"保存成功\");\n\n            if (this.id != res.data) {\n              this.id = res.data;\n\n              this.$router.replace({\n                query: { id: aesEncrypt(this.id + \"\") },\n              });\n            }\n          } else {\n            if (!this.autoSaving) this.showSnack(\"保存失败\");\n          }\n        })\n        .catch((error) => {\n          if (error.response == null || typeof error.response == \"undefined\") {\n            if (!this.autoSaving) this.showSnack(\"保存失败\");\n            return;\n          }\n          let res = error.response;\n          if (res.data == null || typeof res.data == \"undefined\") {\n            if (!this.autoSaving) this.showSnack(\"保存失败\");\n            return;\n          }\n          let data = res.data;\n          if (\n            data.code == null ||\n            typeof data.code == \"undefined\" ||\n            data.code != 4\n          ) {\n            if (!this.autoSaving) this.showSnack(\"保存失败\");\n            return;\n          }\n\n          let sensitiveWords = data.data;\n          if (\n            sensitiveWords == null ||\n            typeof sensitiveWords == \"undefined\" ||\n            sensitiveWords.length == 0\n          ) {\n            if (!this.autoSaving) this.showSnack(\"保存失败\");\n            return;\n          } else {\n            if (this.autoSaving) return;\n            this.showSnack(\"您提交的内容中有敏感词，请进行修改后重新提交\");\n            console.debug(\"error\" + JSON.stringify(sensitiveWords));\n            let titleError = [];\n            sensitiveWords.forEach((word) => {\n              if (this.title.indexOf(word) >= 0) {\n                titleError.push(word);\n              }\n              this.content = highLightAllText(this.content, word);\n            });\n            if (titleError.length > 0) {\n              this.titleErrorMessage = \"包含敏感词:\";\n              titleError.forEach((word) => {\n                this.titleErrorMessage += word + \" \";\n              });\n            }\n          }\n        })\n        .finally(() => (this.autoSaving = false));\n    },\n    caculateDelearList() {\n      this.delearList = [];\n      console.log(JSON.stringify(this.uploadFileDirect));\n      this.uploadFileDirect.forEach((item) => {\n        if (\n          item.res &&\n          (item.error == null || typeof item.error == \"undefined\")\n        ) {\n          this.delearList.push(item.orientation);\n        }\n      });\n      console.log(this.delearList);\n    },\n    openPreview() {\n      this.preview = this.precondition();\n    },\n\n    publishArticle() {\n      this.publish = this.precondition();\n    },\n\n    precondition() {\n      let error = null;\n      if (isNull(this.title)) {\n        if (!this.autoSaving) {\n          error = this.titleErrorMessage = \"标题不能为空\";\n          this.showSnack(error);\n        }\n\n        return false;\n      }\n      \n      if (isNull(this.content)) {\n        if (!this.autoSaving) this.showSnack(\"正文内容不能为空\");\n        return false;\n      } else if (this.sumLetter().num > 5000) {\n        this.showSnack(\"正文内容不能超过5000字\");\n        return false;\n      }\n\n      this.uploadFileDirect.findIndex((item) => {\n        if (item.error != null) {\n          error = item.error;\n          return true;\n        }\n        if (item.res == false) {\n          error = \"请等待文件上传完成\";\n          return true;\n        }\n      });\n      if (error != null && !this.autoSaving) {\n        this.showSnack(error);\n        return false;\n      }\n      this.uploadFileNormal.forEach((item) => {\n        if (item.error != null) {\n          error = item.error;\n          return true;\n        }\n        if (item.res == false) {\n          error = \"请等待文件上传完成\";\n          return true;\n        }\n      });\n      if (error != null && !this.autoSaving) {\n        this.showSnack(error);\n        return false;\n      }\n      return true;\n    },\n    sumLetter() {\n      var html = this.content;\n      var re1 = new RegExp(\"<.+?>\", \"g\");\n      var txt = html.replace(re1, \"\");\n      txt = txt.replace(/\\n/g, \"\");\n      txt = txt.replace(/&nbsp;/g, \" \");\n      var num = txt.length;\n      return { txt: txt, num: num };\n    },\n    showSnack(message) {\n      if (\n        this.preview ||\n        this.publish ||\n        this.$route.path != \"/publishArticle\"\n      ) {\n        return;\n      }\n      showSnackbar(message);\n    },\n    closeSnack() {\n      closeSnackbar();\n    },\n\n    changeSaveStatus() {\n      this.needSave = true;\n      this.autoSave();\n    },\n  },\n  watch: {\n    content() {\n      this.changeSaveStatus();\n    },\n    title() {\n      this.titleErrorMessage = \"\";\n      this.changeSaveStatus();\n    },\n    uploadFileDirect() {\n      this.caculateDelearList();\n      this.changeSaveStatus();\n    },\n    uploadFileNormal() {\n      this.changeSaveStatus();\n    },\n  },\n};\n</script>\n<style>\n.publish_content {\n  display: block;\n  overflow: scroll;\n}\n.append-content .v-btn {\n  color: #1867c0ff;\n  font-family: PingFang SC;\n  font-weight: regular;\n  font-size: 12px;\n  line-height: 18px;\n  letter-spacing: 0px;\n  text-align: left;\n  vertical-align: top;\n}\n\n.append-content\n  .v-btn--plain:not(.v-btn--active):not(.v-btn--loading):not(:focus):not(:hover)\n  .v-btn__content {\n  opacity: 1;\n}\n\n.appendix .v-icon {\n  margin-left: 0px !important;\n  margin-right: 4px !important;\n}\n\n.appendix .divider {\n  display: inline-block;\n  width: 1px;\n  height: 12px;\n  background: #e4e8ebff;\n  margin-bottom: 3px;\n}\n\n.appendix-hint {\n  display: inline-block;\n  color: #999999ff;\n  height: 18px;\n  font-family: PingFang SC;\n  font-weight: regular;\n  font-size: 12px;\n  line-height: normal;\n  letter-spacing: 0px;\n  text-align: left;\n  margin-left: 8px;\n  vertical-align: top;\n}\n\n/* vote dialog */\n.vote-option .v-btn {\n  color: #1867c0ff;\n  font-family: PingFang SC;\n  font-weight: regular;\n  font-size: 14px;\n  line-height: 18px;\n  letter-spacing: 0px;\n  text-align: left;\n  vertical-align: top;\n}\n\n.vote-option\n  .v-btn--plain:not(.v-btn--active):not(.v-btn--loading):not(:focus):not(:hover)\n  .v-btn__content {\n  opacity: 1;\n}\n\n.vote-checkbox-label {\n  color: #333333ff;\n  font-family: PingFang SC;\n  font-weight: regular;\n  font-size: 14px;\n  line-height: normal;\n  letter-spacing: 0px;\n  text-align: left;\n  margin-right: 8px;\n}\n\n.vote-checkbox {\n  display: inline-flex;\n  font-size: 14px;\n  margin: 0 !important;\n  padding: 0 !important;\n  margin-top: 3px !important;\n}\n\n.vote-checkbox .v-input__slot {\n  margin-bottom: 0 !important;\n  padding-right: 0;\n}\n.vote-checkbox .v-input__control {\n  height: 14px !important;\n}\n\n.vote-checkbox .v-input--selection-controls__input {\n  padding: 0;\n  margin: 0;\n  height: 14px !important;\n  width: 14px !important;\n}\n/* vote dialog */\n\n.files-category {\n  opacity: 0.800000011920929;\n  color: #333333ff;\n  font-family: PingFang SC;\n  font-weight: semibold;\n  font-size: 14px;\n  line-height: 20px;\n  letter-spacing: 0px;\n}\n\n.file-item {\n  margin-bottom: 1px;\n}\n\n.time_input .v-input__slot {\n  padding-right: 0px !important;\n}\n</style>\n"]}]}