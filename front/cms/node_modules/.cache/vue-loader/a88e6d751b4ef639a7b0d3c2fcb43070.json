{"remainingRequest":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuguanghui/Documents/cms_code/my-message/cms/src/components/visiableRangeView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/src/components/visiableRangeView.vue","mtime":1638803776569},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuguanghui/Documents/cms_code/my-message/cms/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldERlYWxlclJhbmdlTGlzdCB9IGZyb20gIkAvYXBpL2dldERhdGEuanMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ2aXNpYWJsZVJhbmdlVmlldyIsCgogIHByb3BzOiB7CiAgICBhcnRpY2xlSWQ6IHsKICAgICAgdHlwZTogLTEsCiAgICAgIGRlZmF1bHQ6IC0xLAogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWdpb25zOiBbXSwKICAgICAgZGVhbGVyczogW10sCiAgICAgIGRlYWxlclR5cGU6W10sCiAgICAgIHJvbGVzOiBbXSwKICAgICAgb2VtczogW10sCiAgICB9OwogIH0sCiAgYWN0aXZhdGVkKCkgewogICAgCiAgfSwKICBtb3VudGVkKCkge30sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERlYWxlclJhbmdlKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgLy/lhbPpl60KICAgIGJ0X2Nsb3NlKCkgewogICAgICBjb25zb2xlLmxvZygiLi4uLi4u5YWz6Zet5oyJ6ZKuLi4uLi4uLiIpOwogICAgICB0aGlzLiRlbWl0KCJjbG9zZWRDaGlsZCIsIGZhbHNlKTsKICAgIH0sCgogICAgZ2V0RGVhbGVyUmFuZ2UoKSB7CiAgICAgIGdldERlYWxlclJhbmdlTGlzdCh0aGlzLmFydGljbGVJZCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coIm9uIHJlc3BvbnNlIGFydGljbGVJZCA9ICIrdGhpcy5hcnRpY2xlSWQrICIgIiArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7CiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEgIT0gbnVsbCAmJiB0eXBlb2YgcmVzcG9uc2UuZGF0YSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgIC8v5YWI5o+Q5Y+Wb2Vt5ZKMZGVhbGVycwogICAgICAgICAgICAgICAgdGhpcy5mZXRjaERlYWxlcnNBbmRPRU0ocmVzcG9uc2UuZGF0YS5kZWFsZXJMaXN0KQogICAgICAgICAgICAgICAgLy/ojrflj5bop5LoibIs5oqKZGVhbGVy55qE5pWw5o2u5Lyg6L+H5Y67CiAgICAgICAgICAgICAgICB0aGlzLnJvbGVzID0gcmVzcG9uc2UuZGF0YS5yb2xlczsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhcmVhcyA9PT4gIitKU09OLnN0cmluZ2lmeSh0aGlzLnJlZ2lvbnMpKQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImRlYWxlclR5cGUgPT0+ICIrSlNPTi5zdHJpbmdpZnkodGhpcy5kZWFsZXJUeXBlKSkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJvZW1zID09PiAiK0pTT04uc3RyaW5naWZ5KHRoaXMub2VtcykpCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZSkpOwogICAgICAgIH0pOwogICAgfSwKICAgIGZldGNoRGVhbGVyc0FuZE9FTShkYXRhKSB7CiAgICAgICAgZGF0YS5mb3JFYWNoKHYgPT4gewogICAgICAgICAgICBpZih2LmNvbXBhbnlUeXBlID09IDEpewogICAgICAgICAgICAgICAgdGhpcy5kZWFsZXJzLnB1c2godikKICAgICAgICAgICAgICAgIC8v5Zyo6I635Y+WZGVhbGVyVHlwZQogICAgICAgICAgICAgICAgbGV0IHR5cGUgPSB0aGlzLmNvbnZlcnREZWFsZXJUeXBlKHYuZGVhbGVyVHlwZSkKICAgICAgICAgICAgICAgIGlmKCF0aGlzLmRlYWxlclR5cGUuaW5jbHVkZXModHlwZSkpewogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVhbGVyVHlwZS5wdXNoKHR5cGUpCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgLy/ojrflj5bljLrln58KICAgICAgICAgICAgICAgIGlmKCF0aGlzLnJlZ2lvbnMuaW5jbHVkZXModi5hcmVhKSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25zLnB1c2godi5hcmVhKQogICAgICAgICAgICAgICAgfSAgCiAgICAgICAgICAgIH0gZWxzZSBpZih2LmNvbXBhbnlUeXBlID09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMub2Vtcy5wdXNoKHYpCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKICAgIGNvbnZlcnREZWFsZXJUeXBlKHR5cGUpIHsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuICLni6znq4vnu4/plIDllYYiOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICByZXR1cm4gIjRT5bqXIjsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuICLkuoznuqfnvZHngrkiOwogICAgICAgIAogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["visiableRangeView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"visiableRangeView.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card>\n    <v-toolbar dense color=\"#1867C0\">\n      <v-btn icon>\n        <v-icon color=\"white\" @click=\"bt_close\"> mdi-close </v-icon>\n      </v-btn>\n      <v-toolbar-title class=\"body-1 white--text\">可见范围</v-toolbar-title>\n    </v-toolbar>\n    <span class=\"body-2 grey--text text--darken-2 mt-12 ml-15 mr-15\"\n      >发布对象</span\n    >\n    <v-sheet class=\"mt-4 ml-15 mr-15 pa-0\" rounded outlined>\n      <div\n        class=\"d-flex flex-row pl-4\"\n        style=\"background-color: #f5f6f7; height: 40px; width: 100%\"\n      >\n        <v-subheader>发送给经销商</v-subheader>\n      </div>\n      <div class=\"d-flex flex-row pa-0\">\n        <div style=\"height: 216px; width: 25%\">\n          <div style=\"border-bottom: 1px solid #e4e8eb\" class=\"pl-4\">\n            <v-virtual-scroll\n              :items=\"regions\"\n              height=\"108\"\n              item-height=\"30\"\n              bench=\"1\"\n              class=\"pa-0 ma-0\"\n            >\n              <template v-slot:default=\"{ item, index }\">\n                <v-list-item :key=\"index\">\n                    <v-subheader dense>{{item}}</v-subheader>\n                </v-list-item>\n              </template>\n            </v-virtual-scroll>\n          </div>\n          <div class=\"pl-4\">\n            <v-virtual-scroll\n              :items=\"dealerType\"\n              height=\"108\"\n              item-height=\"30\"\n              bench=\"1\"\n              class=\"pa-0 ma-0\"\n            >\n              <template v-slot:default=\"{ item, index }\">\n                <v-list-item :key=\"index\">\n                    <v-subheader dense>{{item}}</v-subheader>\n                </v-list-item>\n              </template>\n            </v-virtual-scroll>\n          </div>\n        </div>\n        <div\n          class=\"pa-0 ma-0\"\n          style=\"\n            height: 216px;\n            width: 50%;\n            border-left: 1px solid #e4e8eb;\n            border-right: 1px solid #e4e8eb;\n          \"\n        >\n          <v-virtual-scroll\n            :items=\"dealers\"\n            height=\"198\"\n            item-height=\"30\"\n            bench=\"1\"\n          >\n            <template v-slot:default=\"{ item, index }\">\n              <v-list-item :key=\"index\">\n                  <v-subheader dense>{{item.companyCode +\" \"+item.companyName}}</v-subheader>\n              </v-list-item>\n            </template>\n          </v-virtual-scroll>\n        </div>\n        <div class=\"pa-0 ma-0\" style=\"height: 216px; width: 25%\">\n          <v-virtual-scroll\n            :items=\"roles\"\n            height=\"198\"\n            item-height=\"30\"\n            bench=\"1\"\n          >\n            <template v-slot:default=\"{ item, l}\">\n              <v-list-item :key=\"l\">\n                  <v-subheader dense>{{item}}</v-subheader>\n              </v-list-item>\n            </template>\n          </v-virtual-scroll>\n        </div>\n      </div>\n    </v-sheet>\n    <v-sheet class=\"mt-4 ml-15 mr-15 pa-0\" rounded outlined>\n      <div\n        class=\"d-flex flex-row pl-4\"\n        style=\"background-color: #f5f6f7; height: 40px; width: 100%\"\n      >\n        <v-subheader dense>发送给大众内部</v-subheader>\n      </div>\n      <div class=\"d-flex flex-row pa-0\">\n        <div style=\"height: 180px; width: 25%\">\n          <v-virtual-scroll\n            :items=\"oems\"\n            height=\"170\"\n            item-height=\"30\"\n            bench=\"1\"\n            class=\"pa-0 ma-0\"\n          >\n            <template v-slot:default=\"{ item, n }\">\n              <v-list-item :key=\"n\">\n                <v-subheader dense>{{item.companyName}}</v-subheader>\n              </v-list-item>\n            </template>\n          </v-virtual-scroll>\n        </div>\n      </div>\n    </v-sheet>\n  </v-card>\n</template>\n\n<script>\nimport { getDealerRangeList } from \"@/api/getData.js\";\n\nexport default {\n  name: \"visiableRangeView\",\n\n  props: {\n    articleId: {\n      type: -1,\n      default: -1,\n    }\n  },\n\n  data() {\n    return {\n      regions: [],\n      dealers: [],\n      dealerType:[],\n      roles: [],\n      oems: [],\n    };\n  },\n  activated() {\n    \n  },\n  mounted() {},\n\n  created() {\n    this.getDealerRange();\n  },\n\n  methods: {\n    //关闭\n    bt_close() {\n      console.log(\"......关闭按钮.......\");\n      this.$emit(\"closedChild\", false);\n    },\n\n    getDealerRange() {\n      getDealerRangeList(this.articleId)\n        .then((response) => {\n            console.log(\"on response articleId = \"+this.articleId+ \" \" + JSON.stringify(response));\n            if(response.data != null && typeof response.data !== \"undefined\") {\n                //先提取oem和dealers\n                this.fetchDealersAndOEM(response.data.dealerList)\n                //获取角色,把dealer的数据传过去\n                this.roles = response.data.roles;\n                console.log(\"areas ==> \"+JSON.stringify(this.regions))\n                console.log(\"dealerType ==> \"+JSON.stringify(this.dealerType))\n                console.log(\"oems ==> \"+JSON.stringify(this.oems))\n            }\n        })\n        .catch((e) => {\n          console.log(JSON.stringify(e));\n        });\n    },\n    fetchDealersAndOEM(data) {\n        data.forEach(v => {\n            if(v.companyType == 1){\n                this.dealers.push(v)\n                //在获取dealerType\n                let type = this.convertDealerType(v.dealerType)\n                if(!this.dealerType.includes(type)){\n                    this.dealerType.push(type)\n                } \n                //获取区域\n                if(!this.regions.includes(v.area)){\n                    this.regions.push(v.area)\n                }  \n            } else if(v.companyType == 0) {\n                this.oems.push(v)\n            }\n        })\n    },\n    convertDealerType(type) {\n        switch (type) {\n            case 0:\n                return \"独立经销商\";\n            case 1:\n                return \"4S店\";\n            case 2:\n                return \"二级网点\";\n        \n            default:\n                return \"\";\n        }\n    },\n  },\n};\n</script>"]}]}